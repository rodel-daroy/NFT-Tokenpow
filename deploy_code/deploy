#!/usr/bin/env node
module.exports=function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=73)}([function(module,exports,__webpack_require__){"use strict";var _={isArray:t=>Array.isArray(t),isNumber:t=>"number"==typeof t,isObject:t=>t&&"object"==typeof t,isString:t=>"string"==typeof t,isUndefined:t=>void 0===t,isFunction:t=>"function"==typeof t,isNull:t=>null===t,isDate:t=>t instanceof Date,extend:(a,b)=>Object.assign(a,b),noop:()=>{},every:(a,f)=>a.every(f||(t=>t)),map:(a,f)=>Array.from(a).map(f||(t=>t)),includes:(a,e)=>a.includes(e),each:(a,f)=>a.forEach(f),clone:o=>Object.assign({},o),pick:(object,keys)=>{const obj={};return keys.forEach(key=>{void 0!==object[key]&&(obj[key]=object[key])}),obj},values:o=>Object.values(o),filter:(a,f)=>a.filter(f),reduce:(a,f,s)=>a.reduce(f,s),without:(a,n)=>a.filter(t=>t!==n),shuffle:a=>{const result=a.slice(0);for(let i=result.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[result[i],result[j]]=[result[j],result[i]]}return result},difference:(a,b)=>a.filter(t=>!b.includes(t)),findIndex:(a,f)=>a.findIndex(f),some:(a,f)=>a.some(f),range:n=>[...Array(n).keys()]};module.exports=_},function(module,exports,__webpack_require__){"use strict";var errors=__webpack_require__(8),_=__webpack_require__(0);module.exports={checkState:function(condition,message){if(!condition)throw new errors.InvalidState(message)},checkArgument:function(condition,argumentName,message,docsPath){if(!condition)throw new errors.InvalidArgument(argumentName,message,docsPath)},checkArgumentType:function(argument,type,argumentName){if(argumentName=argumentName||"(unknown name)",_.isString(type)){if("Buffer"===type){if(!__webpack_require__(7).Buffer.isBuffer(argument))throw new errors.InvalidArgumentType(argument,type,argumentName)}else if(typeof argument!==type)throw new errors.InvalidArgumentType(argument,type,argumentName)}else if(!(argument instanceof type))throw new errors.InvalidArgumentType(argument,type.name,argumentName)}}},function(module,exports,__webpack_require__){"use strict";var BN=__webpack_require__(6),$=__webpack_require__(1),_=__webpack_require__(0),reversebuf=function(buf){for(var buf2=Buffer.alloc(buf.length),i=0;i<buf.length;i++)buf2[i]=buf[buf.length-1-i];return buf2};BN.Zero=new BN(0),BN.One=new BN(1),BN.Minus1=new BN(-1),BN.fromNumber=function(n){return $.checkArgument(_.isNumber(n)),new BN(n)},BN.fromString=function(str,base){return $.checkArgument(_.isString(str)),new BN(str,base)},BN.fromBuffer=function(buf,opts){void 0!==opts&&"little"===opts.endian&&(buf=reversebuf(buf));var hex=buf.toString("hex");return new BN(hex,16)},BN.fromSM=function(buf,opts){var ret;if(0===buf.length)return BN.fromBuffer(Buffer.from([0]));var endian="big";return opts&&(endian=opts.endian),"little"===endian&&(buf=reversebuf(buf)),128&buf[0]?(buf[0]=127&buf[0],(ret=BN.fromBuffer(buf)).neg().copy(ret)):ret=BN.fromBuffer(buf),ret},BN.prototype.toNumber=function(){return parseInt(this.toString(10),10)},BN.prototype.toBuffer=function(opts){var buf,hex;if(opts&&opts.size){var natlen=(hex=this.toString(16,2)).length/2;buf=Buffer.from(hex,"hex"),natlen===opts.size||(natlen>opts.size?buf=BN.trim(buf,natlen):natlen<opts.size&&(buf=BN.pad(buf,natlen,opts.size)))}else hex=this.toString(16,2),buf=Buffer.from(hex,"hex");return void 0!==opts&&"little"===opts.endian&&(buf=reversebuf(buf)),buf},BN.prototype.toSMBigEndian=function(){var buf;return-1===this.cmp(BN.Zero)?128&(buf=this.neg().toBuffer())[0]?buf=Buffer.concat([Buffer.from([128]),buf]):buf[0]=128|buf[0]:128&(buf=this.toBuffer())[0]&&(buf=Buffer.concat([Buffer.from([0]),buf])),1===buf.length&0===buf[0]&&(buf=Buffer.from([])),buf},BN.prototype.toSM=function(opts){var endian=opts?opts.endian:"big",buf=this.toSMBigEndian();return"little"===endian&&(buf=reversebuf(buf)),buf},BN.fromScriptNumBuffer=function(buf,fRequireMinimal,size){var nMaxNumSize=size||4;if($.checkArgument(buf.length<=nMaxNumSize,new Error("script number overflow")),fRequireMinimal&&buf.length>0&&0==(127&buf[buf.length-1])&&(buf.length<=1||0==(128&buf[buf.length-2])))throw new Error("non-minimally encoded script number");return BN.fromSM(buf,{endian:"little"})},BN.prototype.toScriptNumBuffer=function(){return this.toSM({endian:"little"})},BN.trim=function(buf,natlen){return buf.slice(natlen-buf.length,buf.length)},BN.pad=function(buf,natlen,size){for(var rbuf=Buffer.alloc(size),i=0;i<buf.length;i++)rbuf[rbuf.length-1-i]=buf[buf.length-1-i];for(i=0;i<size-natlen;i++)rbuf[i]=0;return rbuf},BN.prototype.toHex=function(...args){return this.toBuffer(...args).toString("hex")},BN.fromHex=function(hex,...args){return BN.fromBuffer(Buffer.from(hex,"hex"),...args)},module.exports=BN},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(0),$=__webpack_require__(1),isHexa=function(value){return!!_.isString(value)&&/^[0-9a-fA-F]+$/.test(value)};module.exports={isValidJSON:function(arg){var parsed;if(!_.isString(arg))return!1;try{parsed=JSON.parse(arg)}catch(e){return!1}return"object"==typeof parsed},isHexa:isHexa,isHexaString:isHexa,defineImmutable:function(target,values){return Object.keys(values).forEach((function(key){Object.defineProperty(target,key,{configurable:!1,enumerable:!0,value:values[key]})})),target},isNaturalNumber:function(value){return"number"==typeof value&&isFinite(value)&&Math.floor(value)===value&&value>=0},integerAsBuffer:function(integer){$.checkArgumentType(integer,"number","integer");const buf=Buffer.allocUnsafe(4);return buf.writeUInt32BE(integer,0),buf}}},function(module,exports,__webpack_require__){process.browser?module.exports=__webpack_require__(107):module.exports=__webpack_require__(108)},function(module,exports,__webpack_require__){"use strict";var utils=exports,BN=__webpack_require__(6),minAssert=__webpack_require__(20),minUtils=__webpack_require__(53);utils.assert=minAssert,utils.toArray=minUtils.toArray,utils.zero2=minUtils.zero2,utils.toHex=minUtils.toHex,utils.encode=minUtils.encode,utils.getNAF=function(num,w,bits){var naf=new Array(Math.max(num.bitLength(),bits)+1);naf.fill(0);for(var ws=1<<w+1,k=num.clone(),i=0;i<naf.length;i++){var z,mod=k.andln(ws-1);k.isOdd()?(z=mod>(ws>>1)-1?(ws>>1)-mod:mod,k.isubn(z)):z=0,naf[i]=z,k.iushrn(1)}return naf},utils.getJSF=function(k1,k2){var jsf=[[],[]];k1=k1.clone(),k2=k2.clone();for(var d1=0,d2=0;k1.cmpn(-d1)>0||k2.cmpn(-d2)>0;){var u1,u2,m8,m14=k1.andln(3)+d1&3,m24=k2.andln(3)+d2&3;if(3===m14&&(m14=-1),3===m24&&(m24=-1),0==(1&m14))u1=0;else u1=3!==(m8=k1.andln(7)+d1&7)&&5!==m8||2!==m24?m14:-m14;if(jsf[0].push(u1),0==(1&m24))u2=0;else u2=3!==(m8=k2.andln(7)+d2&7)&&5!==m8||2!==m14?m24:-m24;jsf[1].push(u2),2*d1===u1+1&&(d1=1-d1),2*d2===u2+1&&(d2=1-d2),k1.iushrn(1),k2.iushrn(1)}return jsf},utils.cachedProperty=function(obj,name,computer){var key="_"+name;obj.prototype[name]=function(){return void 0!==this[key]?this[key]:this[key]=computer.call(this)}},utils.parseBytes=function(bytes){return"string"==typeof bytes?utils.toArray(bytes,"hex"):bytes},utils.intFromLE=function(bytes){return new BN(bytes,"hex","le")}},function(module,exports,__webpack_require__){(function(module){!function(module,exports){"use strict";function assert(val,msg){if(!val)throw new Error(msg||"Assertion failed")}function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}function BN(number,base,endian){if(BN.isBN(number))return number;this.negative=0,this.words=null,this.length=0,this.red=null,null!==number&&("le"!==base&&"be"!==base||(endian=base,base=10),this._init(number||0,base||10,endian||"be"))}var Buffer;"object"==typeof module?module.exports=BN:exports.BN=BN,BN.BN=BN,BN.wordSize=26;try{Buffer=__webpack_require__(7).Buffer}catch(e){}function parseHex(str,start,end){for(var r=0,len=Math.min(str.length,end),i=start;i<len;i++){var c=str.charCodeAt(i)-48;r<<=4,r|=c>=49&&c<=54?c-49+10:c>=17&&c<=22?c-17+10:15&c}return r}function parseBase(str,start,end,mul){for(var r=0,len=Math.min(str.length,end),i=start;i<len;i++){var c=str.charCodeAt(i)-48;r*=mul,r+=c>=49?c-49+10:c>=17?c-17+10:c}return r}BN.isBN=function(num){return num instanceof BN||null!==num&&"object"==typeof num&&num.constructor.wordSize===BN.wordSize&&Array.isArray(num.words)},BN.max=function(left,right){return left.cmp(right)>0?left:right},BN.min=function(left,right){return left.cmp(right)<0?left:right},BN.prototype._init=function(number,base,endian){if("number"==typeof number)return this._initNumber(number,base,endian);if("object"==typeof number)return this._initArray(number,base,endian);"hex"===base&&(base=16),assert(base===(0|base)&&base>=2&&base<=36);var start=0;"-"===(number=number.toString().replace(/\s+/g,""))[0]&&start++,16===base?this._parseHex(number,start):this._parseBase(number,base,start),"-"===number[0]&&(this.negative=1),this.strip(),"le"===endian&&this._initArray(this.toArray(),base,endian)},BN.prototype._initNumber=function(number,base,endian){number<0&&(this.negative=1,number=-number),number<67108864?(this.words=[67108863&number],this.length=1):number<4503599627370496?(this.words=[67108863&number,number/67108864&67108863],this.length=2):(assert(number<9007199254740992),this.words=[67108863&number,number/67108864&67108863,1],this.length=3),"le"===endian&&this._initArray(this.toArray(),base,endian)},BN.prototype._initArray=function(number,base,endian){if(assert("number"==typeof number.length),number.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(number.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var j,w,off=0;if("be"===endian)for(i=number.length-1,j=0;i>=0;i-=3)w=number[i]|number[i-1]<<8|number[i-2]<<16,this.words[j]|=w<<off&67108863,this.words[j+1]=w>>>26-off&67108863,(off+=24)>=26&&(off-=26,j++);else if("le"===endian)for(i=0,j=0;i<number.length;i+=3)w=number[i]|number[i+1]<<8|number[i+2]<<16,this.words[j]|=w<<off&67108863,this.words[j+1]=w>>>26-off&67108863,(off+=24)>=26&&(off-=26,j++);return this.strip()},BN.prototype._parseHex=function(number,start){this.length=Math.ceil((number.length-start)/6),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var j,w,off=0;for(i=number.length-6,j=0;i>=start;i-=6)w=parseHex(number,i,i+6),this.words[j]|=w<<off&67108863,this.words[j+1]|=w>>>26-off&4194303,(off+=24)>=26&&(off-=26,j++);i+6!==start&&(w=parseHex(number,start,i+6),this.words[j]|=w<<off&67108863,this.words[j+1]|=w>>>26-off&4194303),this.strip()},BN.prototype._parseBase=function(number,base,start){this.words=[0],this.length=1;for(var limbLen=0,limbPow=1;limbPow<=67108863;limbPow*=base)limbLen++;limbLen--,limbPow=limbPow/base|0;for(var total=number.length-start,mod=total%limbLen,end=Math.min(total,total-mod)+start,word=0,i=start;i<end;i+=limbLen)word=parseBase(number,i,i+limbLen,base),this.imuln(limbPow),this.words[0]+word<67108864?this.words[0]+=word:this._iaddn(word);if(0!==mod){var pow=1;for(word=parseBase(number,i,number.length,base),i=0;i<mod;i++)pow*=base;this.imuln(pow),this.words[0]+word<67108864?this.words[0]+=word:this._iaddn(word)}},BN.prototype.copy=function(dest){dest.words=new Array(this.length);for(var i=0;i<this.length;i++)dest.words[i]=this.words[i];dest.length=this.length,dest.negative=this.negative,dest.red=this.red},BN.prototype.clone=function(){var r=new BN(null);return this.copy(r),r},BN.prototype._expand=function(size){for(;this.length<size;)this.words[this.length++]=0;return this},BN.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},BN.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},BN.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var zeros=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],groupSizes=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],groupBases=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function smallMulTo(self,num,out){out.negative=num.negative^self.negative;var len=self.length+num.length|0;out.length=len,len=len-1|0;var a=0|self.words[0],b=0|num.words[0],r=a*b,lo=67108863&r,carry=r/67108864|0;out.words[0]=lo;for(var k=1;k<len;k++){for(var ncarry=carry>>>26,rword=67108863&carry,maxJ=Math.min(k,num.length-1),j=Math.max(0,k-self.length+1);j<=maxJ;j++){var i=k-j|0;ncarry+=(r=(a=0|self.words[i])*(b=0|num.words[j])+rword)/67108864|0,rword=67108863&r}out.words[k]=0|rword,carry=0|ncarry}return 0!==carry?out.words[k]=0|carry:out.length--,out.strip()}BN.prototype.toString=function(base,padding){var out;if(padding=0|padding||1,16===(base=base||10)||"hex"===base){out="";for(var off=0,carry=0,i=0;i<this.length;i++){var w=this.words[i],word=(16777215&(w<<off|carry)).toString(16);out=0!==(carry=w>>>24-off&16777215)||i!==this.length-1?zeros[6-word.length]+word+out:word+out,(off+=2)>=26&&(off-=26,i--)}for(0!==carry&&(out=carry.toString(16)+out);out.length%padding!=0;)out="0"+out;return 0!==this.negative&&(out="-"+out),out}if(base===(0|base)&&base>=2&&base<=36){var groupSize=groupSizes[base],groupBase=groupBases[base];out="";var c=this.clone();for(c.negative=0;!c.isZero();){var r=c.modn(groupBase).toString(base);out=(c=c.idivn(groupBase)).isZero()?r+out:zeros[groupSize-r.length]+r+out}for(this.isZero()&&(out="0"+out);out.length%padding!=0;)out="0"+out;return 0!==this.negative&&(out="-"+out),out}assert(!1,"Base should be between 2 and 36")},BN.prototype.toNumber=function(){var ret=this.words[0];return 2===this.length?ret+=67108864*this.words[1]:3===this.length&&1===this.words[2]?ret+=4503599627370496+67108864*this.words[1]:this.length>2&&assert(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-ret:ret},BN.prototype.toJSON=function(){return this.toString(16)},BN.prototype.toBuffer=function(endian,length){return assert(void 0!==Buffer),this.toArrayLike(Buffer,endian,length)},BN.prototype.toArray=function(endian,length){return this.toArrayLike(Array,endian,length)},BN.prototype.toArrayLike=function(ArrayType,endian,length){var byteLength=this.byteLength(),reqLength=length||Math.max(1,byteLength);assert(byteLength<=reqLength,"byte array longer than desired length"),assert(reqLength>0,"Requested array length <= 0"),this.strip();var b,i,littleEndian="le"===endian,res=new ArrayType(reqLength),q=this.clone();if(littleEndian){for(i=0;!q.isZero();i++)b=q.andln(255),q.iushrn(8),res[i]=b;for(;i<reqLength;i++)res[i]=0}else{for(i=0;i<reqLength-byteLength;i++)res[i]=0;for(i=0;!q.isZero();i++)b=q.andln(255),q.iushrn(8),res[reqLength-i-1]=b}return res},Math.clz32?BN.prototype._countBits=function(w){return 32-Math.clz32(w)}:BN.prototype._countBits=function(w){var t=w,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},BN.prototype._zeroBits=function(w){if(0===w)return 26;var t=w,r=0;return 0==(8191&t)&&(r+=13,t>>>=13),0==(127&t)&&(r+=7,t>>>=7),0==(15&t)&&(r+=4,t>>>=4),0==(3&t)&&(r+=2,t>>>=2),0==(1&t)&&r++,r},BN.prototype.bitLength=function(){var w=this.words[this.length-1],hi=this._countBits(w);return 26*(this.length-1)+hi},BN.prototype.zeroBits=function(){if(this.isZero())return 0;for(var r=0,i=0;i<this.length;i++){var b=this._zeroBits(this.words[i]);if(r+=b,26!==b)break}return r},BN.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},BN.prototype.toTwos=function(width){return 0!==this.negative?this.abs().inotn(width).iaddn(1):this.clone()},BN.prototype.fromTwos=function(width){return this.testn(width-1)?this.notn(width).iaddn(1).ineg():this.clone()},BN.prototype.isNeg=function(){return 0!==this.negative},BN.prototype.neg=function(){return this.clone().ineg()},BN.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},BN.prototype.iuor=function(num){for(;this.length<num.length;)this.words[this.length++]=0;for(var i=0;i<num.length;i++)this.words[i]=this.words[i]|num.words[i];return this.strip()},BN.prototype.ior=function(num){return assert(0==(this.negative|num.negative)),this.iuor(num)},BN.prototype.or=function(num){return this.length>num.length?this.clone().ior(num):num.clone().ior(this)},BN.prototype.uor=function(num){return this.length>num.length?this.clone().iuor(num):num.clone().iuor(this)},BN.prototype.iuand=function(num){var b;b=this.length>num.length?num:this;for(var i=0;i<b.length;i++)this.words[i]=this.words[i]&num.words[i];return this.length=b.length,this.strip()},BN.prototype.iand=function(num){return assert(0==(this.negative|num.negative)),this.iuand(num)},BN.prototype.and=function(num){return this.length>num.length?this.clone().iand(num):num.clone().iand(this)},BN.prototype.uand=function(num){return this.length>num.length?this.clone().iuand(num):num.clone().iuand(this)},BN.prototype.iuxor=function(num){var a,b;this.length>num.length?(a=this,b=num):(a=num,b=this);for(var i=0;i<b.length;i++)this.words[i]=a.words[i]^b.words[i];if(this!==a)for(;i<a.length;i++)this.words[i]=a.words[i];return this.length=a.length,this.strip()},BN.prototype.ixor=function(num){return assert(0==(this.negative|num.negative)),this.iuxor(num)},BN.prototype.xor=function(num){return this.length>num.length?this.clone().ixor(num):num.clone().ixor(this)},BN.prototype.uxor=function(num){return this.length>num.length?this.clone().iuxor(num):num.clone().iuxor(this)},BN.prototype.inotn=function(width){assert("number"==typeof width&&width>=0);var bytesNeeded=0|Math.ceil(width/26),bitsLeft=width%26;this._expand(bytesNeeded),bitsLeft>0&&bytesNeeded--;for(var i=0;i<bytesNeeded;i++)this.words[i]=67108863&~this.words[i];return bitsLeft>0&&(this.words[i]=~this.words[i]&67108863>>26-bitsLeft),this.strip()},BN.prototype.notn=function(width){return this.clone().inotn(width)},BN.prototype.setn=function(bit,val){assert("number"==typeof bit&&bit>=0);var off=bit/26|0,wbit=bit%26;return this._expand(off+1),this.words[off]=val?this.words[off]|1<<wbit:this.words[off]&~(1<<wbit),this.strip()},BN.prototype.iadd=function(num){var r,a,b;if(0!==this.negative&&0===num.negative)return this.negative=0,r=this.isub(num),this.negative^=1,this._normSign();if(0===this.negative&&0!==num.negative)return num.negative=0,r=this.isub(num),num.negative=1,r._normSign();this.length>num.length?(a=this,b=num):(a=num,b=this);for(var carry=0,i=0;i<b.length;i++)r=(0|a.words[i])+(0|b.words[i])+carry,this.words[i]=67108863&r,carry=r>>>26;for(;0!==carry&&i<a.length;i++)r=(0|a.words[i])+carry,this.words[i]=67108863&r,carry=r>>>26;if(this.length=a.length,0!==carry)this.words[this.length]=carry,this.length++;else if(a!==this)for(;i<a.length;i++)this.words[i]=a.words[i];return this},BN.prototype.add=function(num){var res;return 0!==num.negative&&0===this.negative?(num.negative=0,res=this.sub(num),num.negative^=1,res):0===num.negative&&0!==this.negative?(this.negative=0,res=num.sub(this),this.negative=1,res):this.length>num.length?this.clone().iadd(num):num.clone().iadd(this)},BN.prototype.isub=function(num){if(0!==num.negative){num.negative=0;var r=this.iadd(num);return num.negative=1,r._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(num),this.negative=1,this._normSign();var a,b,cmp=this.cmp(num);if(0===cmp)return this.negative=0,this.length=1,this.words[0]=0,this;cmp>0?(a=this,b=num):(a=num,b=this);for(var carry=0,i=0;i<b.length;i++)carry=(r=(0|a.words[i])-(0|b.words[i])+carry)>>26,this.words[i]=67108863&r;for(;0!==carry&&i<a.length;i++)carry=(r=(0|a.words[i])+carry)>>26,this.words[i]=67108863&r;if(0===carry&&i<a.length&&a!==this)for(;i<a.length;i++)this.words[i]=a.words[i];return this.length=Math.max(this.length,i),a!==this&&(this.negative=1),this.strip()},BN.prototype.sub=function(num){return this.clone().isub(num)};var comb10MulTo=function(self,num,out){var lo,mid,hi,a=self.words,b=num.words,o=out.words,c=0,a0=0|a[0],al0=8191&a0,ah0=a0>>>13,a1=0|a[1],al1=8191&a1,ah1=a1>>>13,a2=0|a[2],al2=8191&a2,ah2=a2>>>13,a3=0|a[3],al3=8191&a3,ah3=a3>>>13,a4=0|a[4],al4=8191&a4,ah4=a4>>>13,a5=0|a[5],al5=8191&a5,ah5=a5>>>13,a6=0|a[6],al6=8191&a6,ah6=a6>>>13,a7=0|a[7],al7=8191&a7,ah7=a7>>>13,a8=0|a[8],al8=8191&a8,ah8=a8>>>13,a9=0|a[9],al9=8191&a9,ah9=a9>>>13,b0=0|b[0],bl0=8191&b0,bh0=b0>>>13,b1=0|b[1],bl1=8191&b1,bh1=b1>>>13,b2=0|b[2],bl2=8191&b2,bh2=b2>>>13,b3=0|b[3],bl3=8191&b3,bh3=b3>>>13,b4=0|b[4],bl4=8191&b4,bh4=b4>>>13,b5=0|b[5],bl5=8191&b5,bh5=b5>>>13,b6=0|b[6],bl6=8191&b6,bh6=b6>>>13,b7=0|b[7],bl7=8191&b7,bh7=b7>>>13,b8=0|b[8],bl8=8191&b8,bh8=b8>>>13,b9=0|b[9],bl9=8191&b9,bh9=b9>>>13;out.negative=self.negative^num.negative,out.length=19;var w0=(c+(lo=Math.imul(al0,bl0))|0)+((8191&(mid=(mid=Math.imul(al0,bh0))+Math.imul(ah0,bl0)|0))<<13)|0;c=((hi=Math.imul(ah0,bh0))+(mid>>>13)|0)+(w0>>>26)|0,w0&=67108863,lo=Math.imul(al1,bl0),mid=(mid=Math.imul(al1,bh0))+Math.imul(ah1,bl0)|0,hi=Math.imul(ah1,bh0);var w1=(c+(lo=lo+Math.imul(al0,bl1)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh1)|0)+Math.imul(ah0,bl1)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh1)|0)+(mid>>>13)|0)+(w1>>>26)|0,w1&=67108863,lo=Math.imul(al2,bl0),mid=(mid=Math.imul(al2,bh0))+Math.imul(ah2,bl0)|0,hi=Math.imul(ah2,bh0),lo=lo+Math.imul(al1,bl1)|0,mid=(mid=mid+Math.imul(al1,bh1)|0)+Math.imul(ah1,bl1)|0,hi=hi+Math.imul(ah1,bh1)|0;var w2=(c+(lo=lo+Math.imul(al0,bl2)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh2)|0)+Math.imul(ah0,bl2)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh2)|0)+(mid>>>13)|0)+(w2>>>26)|0,w2&=67108863,lo=Math.imul(al3,bl0),mid=(mid=Math.imul(al3,bh0))+Math.imul(ah3,bl0)|0,hi=Math.imul(ah3,bh0),lo=lo+Math.imul(al2,bl1)|0,mid=(mid=mid+Math.imul(al2,bh1)|0)+Math.imul(ah2,bl1)|0,hi=hi+Math.imul(ah2,bh1)|0,lo=lo+Math.imul(al1,bl2)|0,mid=(mid=mid+Math.imul(al1,bh2)|0)+Math.imul(ah1,bl2)|0,hi=hi+Math.imul(ah1,bh2)|0;var w3=(c+(lo=lo+Math.imul(al0,bl3)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh3)|0)+Math.imul(ah0,bl3)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh3)|0)+(mid>>>13)|0)+(w3>>>26)|0,w3&=67108863,lo=Math.imul(al4,bl0),mid=(mid=Math.imul(al4,bh0))+Math.imul(ah4,bl0)|0,hi=Math.imul(ah4,bh0),lo=lo+Math.imul(al3,bl1)|0,mid=(mid=mid+Math.imul(al3,bh1)|0)+Math.imul(ah3,bl1)|0,hi=hi+Math.imul(ah3,bh1)|0,lo=lo+Math.imul(al2,bl2)|0,mid=(mid=mid+Math.imul(al2,bh2)|0)+Math.imul(ah2,bl2)|0,hi=hi+Math.imul(ah2,bh2)|0,lo=lo+Math.imul(al1,bl3)|0,mid=(mid=mid+Math.imul(al1,bh3)|0)+Math.imul(ah1,bl3)|0,hi=hi+Math.imul(ah1,bh3)|0;var w4=(c+(lo=lo+Math.imul(al0,bl4)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh4)|0)+Math.imul(ah0,bl4)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh4)|0)+(mid>>>13)|0)+(w4>>>26)|0,w4&=67108863,lo=Math.imul(al5,bl0),mid=(mid=Math.imul(al5,bh0))+Math.imul(ah5,bl0)|0,hi=Math.imul(ah5,bh0),lo=lo+Math.imul(al4,bl1)|0,mid=(mid=mid+Math.imul(al4,bh1)|0)+Math.imul(ah4,bl1)|0,hi=hi+Math.imul(ah4,bh1)|0,lo=lo+Math.imul(al3,bl2)|0,mid=(mid=mid+Math.imul(al3,bh2)|0)+Math.imul(ah3,bl2)|0,hi=hi+Math.imul(ah3,bh2)|0,lo=lo+Math.imul(al2,bl3)|0,mid=(mid=mid+Math.imul(al2,bh3)|0)+Math.imul(ah2,bl3)|0,hi=hi+Math.imul(ah2,bh3)|0,lo=lo+Math.imul(al1,bl4)|0,mid=(mid=mid+Math.imul(al1,bh4)|0)+Math.imul(ah1,bl4)|0,hi=hi+Math.imul(ah1,bh4)|0;var w5=(c+(lo=lo+Math.imul(al0,bl5)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh5)|0)+Math.imul(ah0,bl5)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh5)|0)+(mid>>>13)|0)+(w5>>>26)|0,w5&=67108863,lo=Math.imul(al6,bl0),mid=(mid=Math.imul(al6,bh0))+Math.imul(ah6,bl0)|0,hi=Math.imul(ah6,bh0),lo=lo+Math.imul(al5,bl1)|0,mid=(mid=mid+Math.imul(al5,bh1)|0)+Math.imul(ah5,bl1)|0,hi=hi+Math.imul(ah5,bh1)|0,lo=lo+Math.imul(al4,bl2)|0,mid=(mid=mid+Math.imul(al4,bh2)|0)+Math.imul(ah4,bl2)|0,hi=hi+Math.imul(ah4,bh2)|0,lo=lo+Math.imul(al3,bl3)|0,mid=(mid=mid+Math.imul(al3,bh3)|0)+Math.imul(ah3,bl3)|0,hi=hi+Math.imul(ah3,bh3)|0,lo=lo+Math.imul(al2,bl4)|0,mid=(mid=mid+Math.imul(al2,bh4)|0)+Math.imul(ah2,bl4)|0,hi=hi+Math.imul(ah2,bh4)|0,lo=lo+Math.imul(al1,bl5)|0,mid=(mid=mid+Math.imul(al1,bh5)|0)+Math.imul(ah1,bl5)|0,hi=hi+Math.imul(ah1,bh5)|0;var w6=(c+(lo=lo+Math.imul(al0,bl6)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh6)|0)+Math.imul(ah0,bl6)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh6)|0)+(mid>>>13)|0)+(w6>>>26)|0,w6&=67108863,lo=Math.imul(al7,bl0),mid=(mid=Math.imul(al7,bh0))+Math.imul(ah7,bl0)|0,hi=Math.imul(ah7,bh0),lo=lo+Math.imul(al6,bl1)|0,mid=(mid=mid+Math.imul(al6,bh1)|0)+Math.imul(ah6,bl1)|0,hi=hi+Math.imul(ah6,bh1)|0,lo=lo+Math.imul(al5,bl2)|0,mid=(mid=mid+Math.imul(al5,bh2)|0)+Math.imul(ah5,bl2)|0,hi=hi+Math.imul(ah5,bh2)|0,lo=lo+Math.imul(al4,bl3)|0,mid=(mid=mid+Math.imul(al4,bh3)|0)+Math.imul(ah4,bl3)|0,hi=hi+Math.imul(ah4,bh3)|0,lo=lo+Math.imul(al3,bl4)|0,mid=(mid=mid+Math.imul(al3,bh4)|0)+Math.imul(ah3,bl4)|0,hi=hi+Math.imul(ah3,bh4)|0,lo=lo+Math.imul(al2,bl5)|0,mid=(mid=mid+Math.imul(al2,bh5)|0)+Math.imul(ah2,bl5)|0,hi=hi+Math.imul(ah2,bh5)|0,lo=lo+Math.imul(al1,bl6)|0,mid=(mid=mid+Math.imul(al1,bh6)|0)+Math.imul(ah1,bl6)|0,hi=hi+Math.imul(ah1,bh6)|0;var w7=(c+(lo=lo+Math.imul(al0,bl7)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh7)|0)+Math.imul(ah0,bl7)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh7)|0)+(mid>>>13)|0)+(w7>>>26)|0,w7&=67108863,lo=Math.imul(al8,bl0),mid=(mid=Math.imul(al8,bh0))+Math.imul(ah8,bl0)|0,hi=Math.imul(ah8,bh0),lo=lo+Math.imul(al7,bl1)|0,mid=(mid=mid+Math.imul(al7,bh1)|0)+Math.imul(ah7,bl1)|0,hi=hi+Math.imul(ah7,bh1)|0,lo=lo+Math.imul(al6,bl2)|0,mid=(mid=mid+Math.imul(al6,bh2)|0)+Math.imul(ah6,bl2)|0,hi=hi+Math.imul(ah6,bh2)|0,lo=lo+Math.imul(al5,bl3)|0,mid=(mid=mid+Math.imul(al5,bh3)|0)+Math.imul(ah5,bl3)|0,hi=hi+Math.imul(ah5,bh3)|0,lo=lo+Math.imul(al4,bl4)|0,mid=(mid=mid+Math.imul(al4,bh4)|0)+Math.imul(ah4,bl4)|0,hi=hi+Math.imul(ah4,bh4)|0,lo=lo+Math.imul(al3,bl5)|0,mid=(mid=mid+Math.imul(al3,bh5)|0)+Math.imul(ah3,bl5)|0,hi=hi+Math.imul(ah3,bh5)|0,lo=lo+Math.imul(al2,bl6)|0,mid=(mid=mid+Math.imul(al2,bh6)|0)+Math.imul(ah2,bl6)|0,hi=hi+Math.imul(ah2,bh6)|0,lo=lo+Math.imul(al1,bl7)|0,mid=(mid=mid+Math.imul(al1,bh7)|0)+Math.imul(ah1,bl7)|0,hi=hi+Math.imul(ah1,bh7)|0;var w8=(c+(lo=lo+Math.imul(al0,bl8)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh8)|0)+Math.imul(ah0,bl8)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh8)|0)+(mid>>>13)|0)+(w8>>>26)|0,w8&=67108863,lo=Math.imul(al9,bl0),mid=(mid=Math.imul(al9,bh0))+Math.imul(ah9,bl0)|0,hi=Math.imul(ah9,bh0),lo=lo+Math.imul(al8,bl1)|0,mid=(mid=mid+Math.imul(al8,bh1)|0)+Math.imul(ah8,bl1)|0,hi=hi+Math.imul(ah8,bh1)|0,lo=lo+Math.imul(al7,bl2)|0,mid=(mid=mid+Math.imul(al7,bh2)|0)+Math.imul(ah7,bl2)|0,hi=hi+Math.imul(ah7,bh2)|0,lo=lo+Math.imul(al6,bl3)|0,mid=(mid=mid+Math.imul(al6,bh3)|0)+Math.imul(ah6,bl3)|0,hi=hi+Math.imul(ah6,bh3)|0,lo=lo+Math.imul(al5,bl4)|0,mid=(mid=mid+Math.imul(al5,bh4)|0)+Math.imul(ah5,bl4)|0,hi=hi+Math.imul(ah5,bh4)|0,lo=lo+Math.imul(al4,bl5)|0,mid=(mid=mid+Math.imul(al4,bh5)|0)+Math.imul(ah4,bl5)|0,hi=hi+Math.imul(ah4,bh5)|0,lo=lo+Math.imul(al3,bl6)|0,mid=(mid=mid+Math.imul(al3,bh6)|0)+Math.imul(ah3,bl6)|0,hi=hi+Math.imul(ah3,bh6)|0,lo=lo+Math.imul(al2,bl7)|0,mid=(mid=mid+Math.imul(al2,bh7)|0)+Math.imul(ah2,bl7)|0,hi=hi+Math.imul(ah2,bh7)|0,lo=lo+Math.imul(al1,bl8)|0,mid=(mid=mid+Math.imul(al1,bh8)|0)+Math.imul(ah1,bl8)|0,hi=hi+Math.imul(ah1,bh8)|0;var w9=(c+(lo=lo+Math.imul(al0,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al0,bh9)|0)+Math.imul(ah0,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah0,bh9)|0)+(mid>>>13)|0)+(w9>>>26)|0,w9&=67108863,lo=Math.imul(al9,bl1),mid=(mid=Math.imul(al9,bh1))+Math.imul(ah9,bl1)|0,hi=Math.imul(ah9,bh1),lo=lo+Math.imul(al8,bl2)|0,mid=(mid=mid+Math.imul(al8,bh2)|0)+Math.imul(ah8,bl2)|0,hi=hi+Math.imul(ah8,bh2)|0,lo=lo+Math.imul(al7,bl3)|0,mid=(mid=mid+Math.imul(al7,bh3)|0)+Math.imul(ah7,bl3)|0,hi=hi+Math.imul(ah7,bh3)|0,lo=lo+Math.imul(al6,bl4)|0,mid=(mid=mid+Math.imul(al6,bh4)|0)+Math.imul(ah6,bl4)|0,hi=hi+Math.imul(ah6,bh4)|0,lo=lo+Math.imul(al5,bl5)|0,mid=(mid=mid+Math.imul(al5,bh5)|0)+Math.imul(ah5,bl5)|0,hi=hi+Math.imul(ah5,bh5)|0,lo=lo+Math.imul(al4,bl6)|0,mid=(mid=mid+Math.imul(al4,bh6)|0)+Math.imul(ah4,bl6)|0,hi=hi+Math.imul(ah4,bh6)|0,lo=lo+Math.imul(al3,bl7)|0,mid=(mid=mid+Math.imul(al3,bh7)|0)+Math.imul(ah3,bl7)|0,hi=hi+Math.imul(ah3,bh7)|0,lo=lo+Math.imul(al2,bl8)|0,mid=(mid=mid+Math.imul(al2,bh8)|0)+Math.imul(ah2,bl8)|0,hi=hi+Math.imul(ah2,bh8)|0;var w10=(c+(lo=lo+Math.imul(al1,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al1,bh9)|0)+Math.imul(ah1,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah1,bh9)|0)+(mid>>>13)|0)+(w10>>>26)|0,w10&=67108863,lo=Math.imul(al9,bl2),mid=(mid=Math.imul(al9,bh2))+Math.imul(ah9,bl2)|0,hi=Math.imul(ah9,bh2),lo=lo+Math.imul(al8,bl3)|0,mid=(mid=mid+Math.imul(al8,bh3)|0)+Math.imul(ah8,bl3)|0,hi=hi+Math.imul(ah8,bh3)|0,lo=lo+Math.imul(al7,bl4)|0,mid=(mid=mid+Math.imul(al7,bh4)|0)+Math.imul(ah7,bl4)|0,hi=hi+Math.imul(ah7,bh4)|0,lo=lo+Math.imul(al6,bl5)|0,mid=(mid=mid+Math.imul(al6,bh5)|0)+Math.imul(ah6,bl5)|0,hi=hi+Math.imul(ah6,bh5)|0,lo=lo+Math.imul(al5,bl6)|0,mid=(mid=mid+Math.imul(al5,bh6)|0)+Math.imul(ah5,bl6)|0,hi=hi+Math.imul(ah5,bh6)|0,lo=lo+Math.imul(al4,bl7)|0,mid=(mid=mid+Math.imul(al4,bh7)|0)+Math.imul(ah4,bl7)|0,hi=hi+Math.imul(ah4,bh7)|0,lo=lo+Math.imul(al3,bl8)|0,mid=(mid=mid+Math.imul(al3,bh8)|0)+Math.imul(ah3,bl8)|0,hi=hi+Math.imul(ah3,bh8)|0;var w11=(c+(lo=lo+Math.imul(al2,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al2,bh9)|0)+Math.imul(ah2,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah2,bh9)|0)+(mid>>>13)|0)+(w11>>>26)|0,w11&=67108863,lo=Math.imul(al9,bl3),mid=(mid=Math.imul(al9,bh3))+Math.imul(ah9,bl3)|0,hi=Math.imul(ah9,bh3),lo=lo+Math.imul(al8,bl4)|0,mid=(mid=mid+Math.imul(al8,bh4)|0)+Math.imul(ah8,bl4)|0,hi=hi+Math.imul(ah8,bh4)|0,lo=lo+Math.imul(al7,bl5)|0,mid=(mid=mid+Math.imul(al7,bh5)|0)+Math.imul(ah7,bl5)|0,hi=hi+Math.imul(ah7,bh5)|0,lo=lo+Math.imul(al6,bl6)|0,mid=(mid=mid+Math.imul(al6,bh6)|0)+Math.imul(ah6,bl6)|0,hi=hi+Math.imul(ah6,bh6)|0,lo=lo+Math.imul(al5,bl7)|0,mid=(mid=mid+Math.imul(al5,bh7)|0)+Math.imul(ah5,bl7)|0,hi=hi+Math.imul(ah5,bh7)|0,lo=lo+Math.imul(al4,bl8)|0,mid=(mid=mid+Math.imul(al4,bh8)|0)+Math.imul(ah4,bl8)|0,hi=hi+Math.imul(ah4,bh8)|0;var w12=(c+(lo=lo+Math.imul(al3,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al3,bh9)|0)+Math.imul(ah3,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah3,bh9)|0)+(mid>>>13)|0)+(w12>>>26)|0,w12&=67108863,lo=Math.imul(al9,bl4),mid=(mid=Math.imul(al9,bh4))+Math.imul(ah9,bl4)|0,hi=Math.imul(ah9,bh4),lo=lo+Math.imul(al8,bl5)|0,mid=(mid=mid+Math.imul(al8,bh5)|0)+Math.imul(ah8,bl5)|0,hi=hi+Math.imul(ah8,bh5)|0,lo=lo+Math.imul(al7,bl6)|0,mid=(mid=mid+Math.imul(al7,bh6)|0)+Math.imul(ah7,bl6)|0,hi=hi+Math.imul(ah7,bh6)|0,lo=lo+Math.imul(al6,bl7)|0,mid=(mid=mid+Math.imul(al6,bh7)|0)+Math.imul(ah6,bl7)|0,hi=hi+Math.imul(ah6,bh7)|0,lo=lo+Math.imul(al5,bl8)|0,mid=(mid=mid+Math.imul(al5,bh8)|0)+Math.imul(ah5,bl8)|0,hi=hi+Math.imul(ah5,bh8)|0;var w13=(c+(lo=lo+Math.imul(al4,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al4,bh9)|0)+Math.imul(ah4,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah4,bh9)|0)+(mid>>>13)|0)+(w13>>>26)|0,w13&=67108863,lo=Math.imul(al9,bl5),mid=(mid=Math.imul(al9,bh5))+Math.imul(ah9,bl5)|0,hi=Math.imul(ah9,bh5),lo=lo+Math.imul(al8,bl6)|0,mid=(mid=mid+Math.imul(al8,bh6)|0)+Math.imul(ah8,bl6)|0,hi=hi+Math.imul(ah8,bh6)|0,lo=lo+Math.imul(al7,bl7)|0,mid=(mid=mid+Math.imul(al7,bh7)|0)+Math.imul(ah7,bl7)|0,hi=hi+Math.imul(ah7,bh7)|0,lo=lo+Math.imul(al6,bl8)|0,mid=(mid=mid+Math.imul(al6,bh8)|0)+Math.imul(ah6,bl8)|0,hi=hi+Math.imul(ah6,bh8)|0;var w14=(c+(lo=lo+Math.imul(al5,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al5,bh9)|0)+Math.imul(ah5,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah5,bh9)|0)+(mid>>>13)|0)+(w14>>>26)|0,w14&=67108863,lo=Math.imul(al9,bl6),mid=(mid=Math.imul(al9,bh6))+Math.imul(ah9,bl6)|0,hi=Math.imul(ah9,bh6),lo=lo+Math.imul(al8,bl7)|0,mid=(mid=mid+Math.imul(al8,bh7)|0)+Math.imul(ah8,bl7)|0,hi=hi+Math.imul(ah8,bh7)|0,lo=lo+Math.imul(al7,bl8)|0,mid=(mid=mid+Math.imul(al7,bh8)|0)+Math.imul(ah7,bl8)|0,hi=hi+Math.imul(ah7,bh8)|0;var w15=(c+(lo=lo+Math.imul(al6,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al6,bh9)|0)+Math.imul(ah6,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah6,bh9)|0)+(mid>>>13)|0)+(w15>>>26)|0,w15&=67108863,lo=Math.imul(al9,bl7),mid=(mid=Math.imul(al9,bh7))+Math.imul(ah9,bl7)|0,hi=Math.imul(ah9,bh7),lo=lo+Math.imul(al8,bl8)|0,mid=(mid=mid+Math.imul(al8,bh8)|0)+Math.imul(ah8,bl8)|0,hi=hi+Math.imul(ah8,bh8)|0;var w16=(c+(lo=lo+Math.imul(al7,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al7,bh9)|0)+Math.imul(ah7,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah7,bh9)|0)+(mid>>>13)|0)+(w16>>>26)|0,w16&=67108863,lo=Math.imul(al9,bl8),mid=(mid=Math.imul(al9,bh8))+Math.imul(ah9,bl8)|0,hi=Math.imul(ah9,bh8);var w17=(c+(lo=lo+Math.imul(al8,bl9)|0)|0)+((8191&(mid=(mid=mid+Math.imul(al8,bh9)|0)+Math.imul(ah8,bl9)|0))<<13)|0;c=((hi=hi+Math.imul(ah8,bh9)|0)+(mid>>>13)|0)+(w17>>>26)|0,w17&=67108863;var w18=(c+(lo=Math.imul(al9,bl9))|0)+((8191&(mid=(mid=Math.imul(al9,bh9))+Math.imul(ah9,bl9)|0))<<13)|0;return c=((hi=Math.imul(ah9,bh9))+(mid>>>13)|0)+(w18>>>26)|0,w18&=67108863,o[0]=w0,o[1]=w1,o[2]=w2,o[3]=w3,o[4]=w4,o[5]=w5,o[6]=w6,o[7]=w7,o[8]=w8,o[9]=w9,o[10]=w10,o[11]=w11,o[12]=w12,o[13]=w13,o[14]=w14,o[15]=w15,o[16]=w16,o[17]=w17,o[18]=w18,0!==c&&(o[19]=c,out.length++),out};function jumboMulTo(self,num,out){return(new FFTM).mulp(self,num,out)}function FFTM(x,y){this.x=x,this.y=y}Math.imul||(comb10MulTo=smallMulTo),BN.prototype.mulTo=function(num,out){var len=this.length+num.length;return 10===this.length&&10===num.length?comb10MulTo(this,num,out):len<63?smallMulTo(this,num,out):len<1024?function(self,num,out){out.negative=num.negative^self.negative,out.length=self.length+num.length;for(var carry=0,hncarry=0,k=0;k<out.length-1;k++){var ncarry=hncarry;hncarry=0;for(var rword=67108863&carry,maxJ=Math.min(k,num.length-1),j=Math.max(0,k-self.length+1);j<=maxJ;j++){var i=k-j,r=(0|self.words[i])*(0|num.words[j]),lo=67108863&r;rword=67108863&(lo=lo+rword|0),hncarry+=(ncarry=(ncarry=ncarry+(r/67108864|0)|0)+(lo>>>26)|0)>>>26,ncarry&=67108863}out.words[k]=rword,carry=ncarry,ncarry=hncarry}return 0!==carry?out.words[k]=carry:out.length--,out.strip()}(this,num,out):jumboMulTo(this,num,out)},FFTM.prototype.makeRBT=function(N){for(var t=new Array(N),l=BN.prototype._countBits(N)-1,i=0;i<N;i++)t[i]=this.revBin(i,l,N);return t},FFTM.prototype.revBin=function(x,l,N){if(0===x||x===N-1)return x;for(var rb=0,i=0;i<l;i++)rb|=(1&x)<<l-i-1,x>>=1;return rb},FFTM.prototype.permute=function(rbt,rws,iws,rtws,itws,N){for(var i=0;i<N;i++)rtws[i]=rws[rbt[i]],itws[i]=iws[rbt[i]]},FFTM.prototype.transform=function(rws,iws,rtws,itws,N,rbt){this.permute(rbt,rws,iws,rtws,itws,N);for(var s=1;s<N;s<<=1)for(var l=s<<1,rtwdf=Math.cos(2*Math.PI/l),itwdf=Math.sin(2*Math.PI/l),p=0;p<N;p+=l)for(var rtwdf_=rtwdf,itwdf_=itwdf,j=0;j<s;j++){var re=rtws[p+j],ie=itws[p+j],ro=rtws[p+j+s],io=itws[p+j+s],rx=rtwdf_*ro-itwdf_*io;io=rtwdf_*io+itwdf_*ro,ro=rx,rtws[p+j]=re+ro,itws[p+j]=ie+io,rtws[p+j+s]=re-ro,itws[p+j+s]=ie-io,j!==l&&(rx=rtwdf*rtwdf_-itwdf*itwdf_,itwdf_=rtwdf*itwdf_+itwdf*rtwdf_,rtwdf_=rx)}},FFTM.prototype.guessLen13b=function(n,m){var N=1|Math.max(m,n),odd=1&N,i=0;for(N=N/2|0;N;N>>>=1)i++;return 1<<i+1+odd},FFTM.prototype.conjugate=function(rws,iws,N){if(!(N<=1))for(var i=0;i<N/2;i++){var t=rws[i];rws[i]=rws[N-i-1],rws[N-i-1]=t,t=iws[i],iws[i]=-iws[N-i-1],iws[N-i-1]=-t}},FFTM.prototype.normalize13b=function(ws,N){for(var carry=0,i=0;i<N/2;i++){var w=8192*Math.round(ws[2*i+1]/N)+Math.round(ws[2*i]/N)+carry;ws[i]=67108863&w,carry=w<67108864?0:w/67108864|0}return ws},FFTM.prototype.convert13b=function(ws,len,rws,N){for(var carry=0,i=0;i<len;i++)carry+=0|ws[i],rws[2*i]=8191&carry,carry>>>=13,rws[2*i+1]=8191&carry,carry>>>=13;for(i=2*len;i<N;++i)rws[i]=0;assert(0===carry),assert(0==(-8192&carry))},FFTM.prototype.stub=function(N){for(var ph=new Array(N),i=0;i<N;i++)ph[i]=0;return ph},FFTM.prototype.mulp=function(x,y,out){var N=2*this.guessLen13b(x.length,y.length),rbt=this.makeRBT(N),_=this.stub(N),rws=new Array(N),rwst=new Array(N),iwst=new Array(N),nrws=new Array(N),nrwst=new Array(N),niwst=new Array(N),rmws=out.words;rmws.length=N,this.convert13b(x.words,x.length,rws,N),this.convert13b(y.words,y.length,nrws,N),this.transform(rws,_,rwst,iwst,N,rbt),this.transform(nrws,_,nrwst,niwst,N,rbt);for(var i=0;i<N;i++){var rx=rwst[i]*nrwst[i]-iwst[i]*niwst[i];iwst[i]=rwst[i]*niwst[i]+iwst[i]*nrwst[i],rwst[i]=rx}return this.conjugate(rwst,iwst,N),this.transform(rwst,iwst,rmws,_,N,rbt),this.conjugate(rmws,_,N),this.normalize13b(rmws,N),out.negative=x.negative^y.negative,out.length=x.length+y.length,out.strip()},BN.prototype.mul=function(num){var out=new BN(null);return out.words=new Array(this.length+num.length),this.mulTo(num,out)},BN.prototype.mulf=function(num){var out=new BN(null);return out.words=new Array(this.length+num.length),jumboMulTo(this,num,out)},BN.prototype.imul=function(num){return this.clone().mulTo(num,this)},BN.prototype.imuln=function(num){assert("number"==typeof num),assert(num<67108864);for(var carry=0,i=0;i<this.length;i++){var w=(0|this.words[i])*num,lo=(67108863&w)+(67108863&carry);carry>>=26,carry+=w/67108864|0,carry+=lo>>>26,this.words[i]=67108863&lo}return 0!==carry&&(this.words[i]=carry,this.length++),this},BN.prototype.muln=function(num){return this.clone().imuln(num)},BN.prototype.sqr=function(){return this.mul(this)},BN.prototype.isqr=function(){return this.imul(this.clone())},BN.prototype.pow=function(num){var w=function(num){for(var w=new Array(num.bitLength()),bit=0;bit<w.length;bit++){var off=bit/26|0,wbit=bit%26;w[bit]=(num.words[off]&1<<wbit)>>>wbit}return w}(num);if(0===w.length)return new BN(1);for(var res=this,i=0;i<w.length&&0===w[i];i++,res=res.sqr());if(++i<w.length)for(var q=res.sqr();i<w.length;i++,q=q.sqr())0!==w[i]&&(res=res.mul(q));return res},BN.prototype.iushln=function(bits){assert("number"==typeof bits&&bits>=0);var i,r=bits%26,s=(bits-r)/26,carryMask=67108863>>>26-r<<26-r;if(0!==r){var carry=0;for(i=0;i<this.length;i++){var newCarry=this.words[i]&carryMask,c=(0|this.words[i])-newCarry<<r;this.words[i]=c|carry,carry=newCarry>>>26-r}carry&&(this.words[i]=carry,this.length++)}if(0!==s){for(i=this.length-1;i>=0;i--)this.words[i+s]=this.words[i];for(i=0;i<s;i++)this.words[i]=0;this.length+=s}return this.strip()},BN.prototype.ishln=function(bits){return assert(0===this.negative),this.iushln(bits)},BN.prototype.iushrn=function(bits,hint,extended){var h;assert("number"==typeof bits&&bits>=0),h=hint?(hint-hint%26)/26:0;var r=bits%26,s=Math.min((bits-r)/26,this.length),mask=67108863^67108863>>>r<<r,maskedWords=extended;if(h-=s,h=Math.max(0,h),maskedWords){for(var i=0;i<s;i++)maskedWords.words[i]=this.words[i];maskedWords.length=s}if(0===s);else if(this.length>s)for(this.length-=s,i=0;i<this.length;i++)this.words[i]=this.words[i+s];else this.words[0]=0,this.length=1;var carry=0;for(i=this.length-1;i>=0&&(0!==carry||i>=h);i--){var word=0|this.words[i];this.words[i]=carry<<26-r|word>>>r,carry=word&mask}return maskedWords&&0!==carry&&(maskedWords.words[maskedWords.length++]=carry),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},BN.prototype.ishrn=function(bits,hint,extended){return assert(0===this.negative),this.iushrn(bits,hint,extended)},BN.prototype.shln=function(bits){return this.clone().ishln(bits)},BN.prototype.ushln=function(bits){return this.clone().iushln(bits)},BN.prototype.shrn=function(bits){return this.clone().ishrn(bits)},BN.prototype.ushrn=function(bits){return this.clone().iushrn(bits)},BN.prototype.testn=function(bit){assert("number"==typeof bit&&bit>=0);var r=bit%26,s=(bit-r)/26,q=1<<r;return!(this.length<=s)&&!!(this.words[s]&q)},BN.prototype.imaskn=function(bits){assert("number"==typeof bits&&bits>=0);var r=bits%26,s=(bits-r)/26;if(assert(0===this.negative,"imaskn works only with positive numbers"),this.length<=s)return this;if(0!==r&&s++,this.length=Math.min(s,this.length),0!==r){var mask=67108863^67108863>>>r<<r;this.words[this.length-1]&=mask}return this.strip()},BN.prototype.maskn=function(bits){return this.clone().imaskn(bits)},BN.prototype.iaddn=function(num){return assert("number"==typeof num),assert(num<67108864),num<0?this.isubn(-num):0!==this.negative?1===this.length&&(0|this.words[0])<num?(this.words[0]=num-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(num),this.negative=1,this):this._iaddn(num)},BN.prototype._iaddn=function(num){this.words[0]+=num;for(var i=0;i<this.length&&this.words[i]>=67108864;i++)this.words[i]-=67108864,i===this.length-1?this.words[i+1]=1:this.words[i+1]++;return this.length=Math.max(this.length,i+1),this},BN.prototype.isubn=function(num){if(assert("number"==typeof num),assert(num<67108864),num<0)return this.iaddn(-num);if(0!==this.negative)return this.negative=0,this.iaddn(num),this.negative=1,this;if(this.words[0]-=num,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var i=0;i<this.length&&this.words[i]<0;i++)this.words[i]+=67108864,this.words[i+1]-=1;return this.strip()},BN.prototype.addn=function(num){return this.clone().iaddn(num)},BN.prototype.subn=function(num){return this.clone().isubn(num)},BN.prototype.iabs=function(){return this.negative=0,this},BN.prototype.abs=function(){return this.clone().iabs()},BN.prototype._ishlnsubmul=function(num,mul,shift){var i,w,len=num.length+shift;this._expand(len);var carry=0;for(i=0;i<num.length;i++){w=(0|this.words[i+shift])+carry;var right=(0|num.words[i])*mul;carry=((w-=67108863&right)>>26)-(right/67108864|0),this.words[i+shift]=67108863&w}for(;i<this.length-shift;i++)carry=(w=(0|this.words[i+shift])+carry)>>26,this.words[i+shift]=67108863&w;if(0===carry)return this.strip();for(assert(-1===carry),carry=0,i=0;i<this.length;i++)carry=(w=-(0|this.words[i])+carry)>>26,this.words[i]=67108863&w;return this.negative=1,this.strip()},BN.prototype._wordDiv=function(num,mode){var shift=(this.length,num.length),a=this.clone(),b=num,bhi=0|b.words[b.length-1];0!==(shift=26-this._countBits(bhi))&&(b=b.ushln(shift),a.iushln(shift),bhi=0|b.words[b.length-1]);var q,m=a.length-b.length;if("mod"!==mode){(q=new BN(null)).length=m+1,q.words=new Array(q.length);for(var i=0;i<q.length;i++)q.words[i]=0}var diff=a.clone()._ishlnsubmul(b,1,m);0===diff.negative&&(a=diff,q&&(q.words[m]=1));for(var j=m-1;j>=0;j--){var qj=67108864*(0|a.words[b.length+j])+(0|a.words[b.length+j-1]);for(qj=Math.min(qj/bhi|0,67108863),a._ishlnsubmul(b,qj,j);0!==a.negative;)qj--,a.negative=0,a._ishlnsubmul(b,1,j),a.isZero()||(a.negative^=1);q&&(q.words[j]=qj)}return q&&q.strip(),a.strip(),"div"!==mode&&0!==shift&&a.iushrn(shift),{div:q||null,mod:a}},BN.prototype.divmod=function(num,mode,positive){return assert(!num.isZero()),this.isZero()?{div:new BN(0),mod:new BN(0)}:0!==this.negative&&0===num.negative?(res=this.neg().divmod(num,mode),"mod"!==mode&&(div=res.div.neg()),"div"!==mode&&(mod=res.mod.neg(),positive&&0!==mod.negative&&mod.iadd(num)),{div:div,mod:mod}):0===this.negative&&0!==num.negative?(res=this.divmod(num.neg(),mode),"mod"!==mode&&(div=res.div.neg()),{div:div,mod:res.mod}):0!=(this.negative&num.negative)?(res=this.neg().divmod(num.neg(),mode),"div"!==mode&&(mod=res.mod.neg(),positive&&0!==mod.negative&&mod.isub(num)),{div:res.div,mod:mod}):num.length>this.length||this.cmp(num)<0?{div:new BN(0),mod:this}:1===num.length?"div"===mode?{div:this.divn(num.words[0]),mod:null}:"mod"===mode?{div:null,mod:new BN(this.modn(num.words[0]))}:{div:this.divn(num.words[0]),mod:new BN(this.modn(num.words[0]))}:this._wordDiv(num,mode);var div,mod,res},BN.prototype.div=function(num){return this.divmod(num,"div",!1).div},BN.prototype.mod=function(num){return this.divmod(num,"mod",!1).mod},BN.prototype.umod=function(num){return this.divmod(num,"mod",!0).mod},BN.prototype.divRound=function(num){var dm=this.divmod(num);if(dm.mod.isZero())return dm.div;var mod=0!==dm.div.negative?dm.mod.isub(num):dm.mod,half=num.ushrn(1),r2=num.andln(1),cmp=mod.cmp(half);return cmp<0||1===r2&&0===cmp?dm.div:0!==dm.div.negative?dm.div.isubn(1):dm.div.iaddn(1)},BN.prototype.modn=function(num){assert(num<=67108863);for(var p=(1<<26)%num,acc=0,i=this.length-1;i>=0;i--)acc=(p*acc+(0|this.words[i]))%num;return acc},BN.prototype.idivn=function(num){assert(num<=67108863);for(var carry=0,i=this.length-1;i>=0;i--){var w=(0|this.words[i])+67108864*carry;this.words[i]=w/num|0,carry=w%num}return this.strip()},BN.prototype.divn=function(num){return this.clone().idivn(num)},BN.prototype.egcd=function(p){assert(0===p.negative),assert(!p.isZero());var x=this,y=p.clone();x=0!==x.negative?x.umod(p):x.clone();for(var A=new BN(1),B=new BN(0),C=new BN(0),D=new BN(1),g=0;x.isEven()&&y.isEven();)x.iushrn(1),y.iushrn(1),++g;for(var yp=y.clone(),xp=x.clone();!x.isZero();){for(var i=0,im=1;0==(x.words[0]&im)&&i<26;++i,im<<=1);if(i>0)for(x.iushrn(i);i-- >0;)(A.isOdd()||B.isOdd())&&(A.iadd(yp),B.isub(xp)),A.iushrn(1),B.iushrn(1);for(var j=0,jm=1;0==(y.words[0]&jm)&&j<26;++j,jm<<=1);if(j>0)for(y.iushrn(j);j-- >0;)(C.isOdd()||D.isOdd())&&(C.iadd(yp),D.isub(xp)),C.iushrn(1),D.iushrn(1);x.cmp(y)>=0?(x.isub(y),A.isub(C),B.isub(D)):(y.isub(x),C.isub(A),D.isub(B))}return{a:C,b:D,gcd:y.iushln(g)}},BN.prototype._invmp=function(p){assert(0===p.negative),assert(!p.isZero());var a=this,b=p.clone();a=0!==a.negative?a.umod(p):a.clone();for(var res,x1=new BN(1),x2=new BN(0),delta=b.clone();a.cmpn(1)>0&&b.cmpn(1)>0;){for(var i=0,im=1;0==(a.words[0]&im)&&i<26;++i,im<<=1);if(i>0)for(a.iushrn(i);i-- >0;)x1.isOdd()&&x1.iadd(delta),x1.iushrn(1);for(var j=0,jm=1;0==(b.words[0]&jm)&&j<26;++j,jm<<=1);if(j>0)for(b.iushrn(j);j-- >0;)x2.isOdd()&&x2.iadd(delta),x2.iushrn(1);a.cmp(b)>=0?(a.isub(b),x1.isub(x2)):(b.isub(a),x2.isub(x1))}return(res=0===a.cmpn(1)?x1:x2).cmpn(0)<0&&res.iadd(p),res},BN.prototype.gcd=function(num){if(this.isZero())return num.abs();if(num.isZero())return this.abs();var a=this.clone(),b=num.clone();a.negative=0,b.negative=0;for(var shift=0;a.isEven()&&b.isEven();shift++)a.iushrn(1),b.iushrn(1);for(;;){for(;a.isEven();)a.iushrn(1);for(;b.isEven();)b.iushrn(1);var r=a.cmp(b);if(r<0){var t=a;a=b,b=t}else if(0===r||0===b.cmpn(1))break;a.isub(b)}return b.iushln(shift)},BN.prototype.invm=function(num){return this.egcd(num).a.umod(num)},BN.prototype.isEven=function(){return 0==(1&this.words[0])},BN.prototype.isOdd=function(){return 1==(1&this.words[0])},BN.prototype.andln=function(num){return this.words[0]&num},BN.prototype.bincn=function(bit){assert("number"==typeof bit);var r=bit%26,s=(bit-r)/26,q=1<<r;if(this.length<=s)return this._expand(s+1),this.words[s]|=q,this;for(var carry=q,i=s;0!==carry&&i<this.length;i++){var w=0|this.words[i];carry=(w+=carry)>>>26,w&=67108863,this.words[i]=w}return 0!==carry&&(this.words[i]=carry,this.length++),this},BN.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},BN.prototype.cmpn=function(num){var res,negative=num<0;if(0!==this.negative&&!negative)return-1;if(0===this.negative&&negative)return 1;if(this.strip(),this.length>1)res=1;else{negative&&(num=-num),assert(num<=67108863,"Number is too big");var w=0|this.words[0];res=w===num?0:w<num?-1:1}return 0!==this.negative?0|-res:res},BN.prototype.cmp=function(num){if(0!==this.negative&&0===num.negative)return-1;if(0===this.negative&&0!==num.negative)return 1;var res=this.ucmp(num);return 0!==this.negative?0|-res:res},BN.prototype.ucmp=function(num){if(this.length>num.length)return 1;if(this.length<num.length)return-1;for(var res=0,i=this.length-1;i>=0;i--){var a=0|this.words[i],b=0|num.words[i];if(a!==b){a<b?res=-1:a>b&&(res=1);break}}return res},BN.prototype.gtn=function(num){return 1===this.cmpn(num)},BN.prototype.gt=function(num){return 1===this.cmp(num)},BN.prototype.gten=function(num){return this.cmpn(num)>=0},BN.prototype.gte=function(num){return this.cmp(num)>=0},BN.prototype.ltn=function(num){return-1===this.cmpn(num)},BN.prototype.lt=function(num){return-1===this.cmp(num)},BN.prototype.lten=function(num){return this.cmpn(num)<=0},BN.prototype.lte=function(num){return this.cmp(num)<=0},BN.prototype.eqn=function(num){return 0===this.cmpn(num)},BN.prototype.eq=function(num){return 0===this.cmp(num)},BN.red=function(num){return new Red(num)},BN.prototype.toRed=function(ctx){return assert(!this.red,"Already a number in reduction context"),assert(0===this.negative,"red works only with positives"),ctx.convertTo(this)._forceRed(ctx)},BN.prototype.fromRed=function(){return assert(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},BN.prototype._forceRed=function(ctx){return this.red=ctx,this},BN.prototype.forceRed=function(ctx){return assert(!this.red,"Already a number in reduction context"),this._forceRed(ctx)},BN.prototype.redAdd=function(num){return assert(this.red,"redAdd works only with red numbers"),this.red.add(this,num)},BN.prototype.redIAdd=function(num){return assert(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,num)},BN.prototype.redSub=function(num){return assert(this.red,"redSub works only with red numbers"),this.red.sub(this,num)},BN.prototype.redISub=function(num){return assert(this.red,"redISub works only with red numbers"),this.red.isub(this,num)},BN.prototype.redShl=function(num){return assert(this.red,"redShl works only with red numbers"),this.red.shl(this,num)},BN.prototype.redMul=function(num){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,num),this.red.mul(this,num)},BN.prototype.redIMul=function(num){return assert(this.red,"redMul works only with red numbers"),this.red._verify2(this,num),this.red.imul(this,num)},BN.prototype.redSqr=function(){return assert(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},BN.prototype.redISqr=function(){return assert(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},BN.prototype.redSqrt=function(){return assert(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},BN.prototype.redInvm=function(){return assert(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},BN.prototype.redNeg=function(){return assert(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},BN.prototype.redPow=function(num){return assert(this.red&&!num.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,num)};var primes={k256:null,p224:null,p192:null,p25519:null};function MPrime(name,p){this.name=name,this.p=new BN(p,16),this.n=this.p.bitLength(),this.k=new BN(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function K256(){MPrime.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function P224(){MPrime.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function P192(){MPrime.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function P25519(){MPrime.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function Red(m){if("string"==typeof m){var prime=BN._prime(m);this.m=prime.p,this.prime=prime}else assert(m.gtn(1),"modulus must be greater than 1"),this.m=m,this.prime=null}function Mont(m){Red.call(this,m),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new BN(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}MPrime.prototype._tmp=function(){var tmp=new BN(null);return tmp.words=new Array(Math.ceil(this.n/13)),tmp},MPrime.prototype.ireduce=function(num){var rlen,r=num;do{this.split(r,this.tmp),rlen=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(rlen>this.n);var cmp=rlen<this.n?-1:r.ucmp(this.p);return 0===cmp?(r.words[0]=0,r.length=1):cmp>0?r.isub(this.p):r.strip(),r},MPrime.prototype.split=function(input,out){input.iushrn(this.n,0,out)},MPrime.prototype.imulK=function(num){return num.imul(this.k)},inherits(K256,MPrime),K256.prototype.split=function(input,output){for(var outLen=Math.min(input.length,9),i=0;i<outLen;i++)output.words[i]=input.words[i];if(output.length=outLen,input.length<=9)return input.words[0]=0,void(input.length=1);var prev=input.words[9];for(output.words[output.length++]=4194303&prev,i=10;i<input.length;i++){var next=0|input.words[i];input.words[i-10]=(4194303&next)<<4|prev>>>22,prev=next}prev>>>=22,input.words[i-10]=prev,0===prev&&input.length>10?input.length-=10:input.length-=9},K256.prototype.imulK=function(num){num.words[num.length]=0,num.words[num.length+1]=0,num.length+=2;for(var lo=0,i=0;i<num.length;i++){var w=0|num.words[i];lo+=977*w,num.words[i]=67108863&lo,lo=64*w+(lo/67108864|0)}return 0===num.words[num.length-1]&&(num.length--,0===num.words[num.length-1]&&num.length--),num},inherits(P224,MPrime),inherits(P192,MPrime),inherits(P25519,MPrime),P25519.prototype.imulK=function(num){for(var carry=0,i=0;i<num.length;i++){var hi=19*(0|num.words[i])+carry,lo=67108863&hi;hi>>>=26,num.words[i]=lo,carry=hi}return 0!==carry&&(num.words[num.length++]=carry),num},BN._prime=function(name){if(primes[name])return primes[name];var prime;if("k256"===name)prime=new K256;else if("p224"===name)prime=new P224;else if("p192"===name)prime=new P192;else{if("p25519"!==name)throw new Error("Unknown prime "+name);prime=new P25519}return primes[name]=prime,prime},Red.prototype._verify1=function(a){assert(0===a.negative,"red works only with positives"),assert(a.red,"red works only with red numbers")},Red.prototype._verify2=function(a,b){assert(0==(a.negative|b.negative),"red works only with positives"),assert(a.red&&a.red===b.red,"red works only with red numbers")},Red.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):a.umod(this.m)._forceRed(this)},Red.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},Red.prototype.add=function(a,b){this._verify2(a,b);var res=a.add(b);return res.cmp(this.m)>=0&&res.isub(this.m),res._forceRed(this)},Red.prototype.iadd=function(a,b){this._verify2(a,b);var res=a.iadd(b);return res.cmp(this.m)>=0&&res.isub(this.m),res},Red.prototype.sub=function(a,b){this._verify2(a,b);var res=a.sub(b);return res.cmpn(0)<0&&res.iadd(this.m),res._forceRed(this)},Red.prototype.isub=function(a,b){this._verify2(a,b);var res=a.isub(b);return res.cmpn(0)<0&&res.iadd(this.m),res},Red.prototype.shl=function(a,num){return this._verify1(a),this.imod(a.ushln(num))},Red.prototype.imul=function(a,b){return this._verify2(a,b),this.imod(a.imul(b))},Red.prototype.mul=function(a,b){return this._verify2(a,b),this.imod(a.mul(b))},Red.prototype.isqr=function(a){return this.imul(a,a.clone())},Red.prototype.sqr=function(a){return this.mul(a,a)},Red.prototype.sqrt=function(a){if(a.isZero())return a.clone();var mod3=this.m.andln(3);if(assert(mod3%2==1),3===mod3){var pow=this.m.add(new BN(1)).iushrn(2);return this.pow(a,pow)}for(var q=this.m.subn(1),s=0;!q.isZero()&&0===q.andln(1);)s++,q.iushrn(1);assert(!q.isZero());var one=new BN(1).toRed(this),nOne=one.redNeg(),lpow=this.m.subn(1).iushrn(1),z=this.m.bitLength();for(z=new BN(2*z*z).toRed(this);0!==this.pow(z,lpow).cmp(nOne);)z.redIAdd(nOne);for(var c=this.pow(z,q),r=this.pow(a,q.addn(1).iushrn(1)),t=this.pow(a,q),m=s;0!==t.cmp(one);){for(var tmp=t,i=0;0!==tmp.cmp(one);i++)tmp=tmp.redSqr();assert(i<m);var b=this.pow(c,new BN(1).iushln(m-i-1));r=r.redMul(b),c=b.redSqr(),t=t.redMul(c),m=i}return r},Red.prototype.invm=function(a){var inv=a._invmp(this.m);return 0!==inv.negative?(inv.negative=0,this.imod(inv).redNeg()):this.imod(inv)},Red.prototype.pow=function(a,num){if(num.isZero())return new BN(1).toRed(this);if(0===num.cmpn(1))return a.clone();var wnd=new Array(16);wnd[0]=new BN(1).toRed(this),wnd[1]=a;for(var i=2;i<wnd.length;i++)wnd[i]=this.mul(wnd[i-1],a);var res=wnd[0],current=0,currentLen=0,start=num.bitLength()%26;for(0===start&&(start=26),i=num.length-1;i>=0;i--){for(var word=num.words[i],j=start-1;j>=0;j--){var bit=word>>j&1;res!==wnd[0]&&(res=this.sqr(res)),0!==bit||0!==current?(current<<=1,current|=bit,(4===++currentLen||0===i&&0===j)&&(res=this.mul(res,wnd[current]),currentLen=0,current=0)):currentLen=0}start=26}return res},Red.prototype.convertTo=function(num){var r=num.umod(this.m);return r===num?r.clone():r},Red.prototype.convertFrom=function(num){var res=num.clone();return res.red=null,res},BN.mont=function(num){return new Mont(num)},inherits(Mont,Red),Mont.prototype.convertTo=function(num){return this.imod(num.ushln(this.shift))},Mont.prototype.convertFrom=function(num){var r=this.imod(num.mul(this.rinv));return r.red=null,r},Mont.prototype.imul=function(a,b){if(a.isZero()||b.isZero())return a.words[0]=0,a.length=1,a;var t=a.imul(b),c=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=t.isub(c).iushrn(this.shift),res=u;return u.cmp(this.m)>=0?res=u.isub(this.m):u.cmpn(0)<0&&(res=u.iadd(this.m)),res._forceRed(this)},Mont.prototype.mul=function(a,b){if(a.isZero()||b.isZero())return new BN(0)._forceRed(this);var t=a.mul(b),c=t.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=t.isub(c).iushrn(this.shift),res=u;return u.cmp(this.m)>=0?res=u.isub(this.m):u.cmpn(0)<0&&(res=u.iadd(this.m)),res._forceRed(this)},Mont.prototype.invm=function(a){return this.imod(a._invmp(this.m).mul(this.r2))._forceRed(this)}}(module,this)}).call(this,__webpack_require__(87)(module))},function(module,exports){module.exports=require("buffer")},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(0);function format(message,args){return message.replace("{0}",args[0]).replace("{1}",args[1]).replace("{2}",args[2])}var traverseNode=function(parent,errorDefinition){var NodeError=function(){if(_.isString(errorDefinition.message))this.message=format(errorDefinition.message,arguments);else{if(!_.isFunction(errorDefinition.message))throw new Error("Invalid error definition for "+errorDefinition.name);this.message=errorDefinition.message.apply(null,arguments)}this.stack=this.message+"\n"+(new Error).stack};return(NodeError.prototype=Object.create(parent.prototype)).name=parent.prototype.name+errorDefinition.name,parent[errorDefinition.name]=NodeError,errorDefinition.errors&&childDefinitions(NodeError,errorDefinition.errors),NodeError},childDefinitions=function(parent,childDefinitions){_.each(childDefinitions,(function(childDefinition){traverseNode(parent,childDefinition)}))},bsv={Error:function(){this.message="Internal error",this.stack=this.message+"\n"+(new Error).stack}};bsv.Error.prototype=Object.create(Error.prototype),bsv.Error.prototype.name="bsv.Error";var parent,data=__webpack_require__(88);parent=bsv.Error,childDefinitions(parent,data),module.exports=bsv.Error,module.exports.extend=function(spec){return traverseNode(bsv.Error,spec)}},function(module,exports,__webpack_require__){"use strict";var BN=__webpack_require__(2),_=__webpack_require__(0),$=__webpack_require__(1),JSUtil=__webpack_require__(3),Signature=function Signature(r,s){if(!(this instanceof Signature))return new Signature(r,s);if(r instanceof BN)this.set({r:r,s:s});else if(r){var obj=r;this.set(obj)}};Signature.prototype.set=function(obj){return this.r=obj.r||this.r||void 0,this.s=obj.s||this.s||void 0,this.i=void 0!==obj.i?obj.i:this.i,this.compressed=void 0!==obj.compressed?obj.compressed:this.compressed,this.nhashtype=obj.nhashtype||this.nhashtype||void 0,this},Signature.fromCompact=function(buf){$.checkArgument(Buffer.isBuffer(buf),"Argument is expected to be a Buffer");var sig=new Signature,compressed=!0,i=buf.slice(0,1)[0]-27-4;i<0&&(compressed=!1,i+=4);var b2=buf.slice(1,33),b3=buf.slice(33,65);return $.checkArgument(0===i||1===i||2===i||3===i,new Error("i must be 0, 1, 2, or 3")),$.checkArgument(32===b2.length,new Error("r must be 32 bytes")),$.checkArgument(32===b3.length,new Error("s must be 32 bytes")),sig.compressed=compressed,sig.i=i,sig.r=BN.fromBuffer(b2),sig.s=BN.fromBuffer(b3),sig},Signature.fromDER=Signature.fromBuffer=function(buf,strict){var obj=Signature.parseDER(buf,strict),sig=new Signature;return sig.r=obj.r,sig.s=obj.s,sig},Signature.fromTxFormat=function(buf){var nhashtype=buf.readUInt8(buf.length-1),derbuf=buf.slice(0,buf.length-1),sig=Signature.fromDER(derbuf,!1);return sig.nhashtype=nhashtype,sig},Signature.fromString=function(str){var buf=Buffer.from(str,"hex");return Signature.fromDER(buf)},Signature.parseDER=function(buf,strict){$.checkArgument(Buffer.isBuffer(buf),new Error("DER formatted signature should be a buffer")),_.isUndefined(strict)&&(strict=!0);var header=buf[0];$.checkArgument(48===header,new Error("Header byte should be 0x30"));var length=buf[1],buflength=buf.slice(2).length;$.checkArgument(!strict||length===buflength,new Error("Length byte should length of what follows")),length=length<buflength?length:buflength;var rheader=buf[2];$.checkArgument(2===rheader,new Error("Integer byte for r should be 0x02"));var rlength=buf[3],rbuf=buf.slice(4,4+rlength),r=BN.fromBuffer(rbuf),rneg=0===buf[4];$.checkArgument(rlength===rbuf.length,new Error("Length of r incorrect"));var sheader=buf[4+rlength+0];$.checkArgument(2===sheader,new Error("Integer byte for s should be 0x02"));var slength=buf[4+rlength+1],sbuf=buf.slice(4+rlength+2,4+rlength+2+slength),s=BN.fromBuffer(sbuf),sneg=0===buf[4+rlength+2+2];$.checkArgument(slength===sbuf.length,new Error("Length of s incorrect"));var sumlength=4+rlength+2+slength;return $.checkArgument(length===sumlength-2,new Error("Length of signature incorrect")),{header:header,length:length,rheader:rheader,rlength:rlength,rneg:rneg,rbuf:rbuf,r:r,sheader:sheader,slength:slength,sneg:sneg,sbuf:sbuf,s:s}},Signature.prototype.toCompact=function(i,compressed){if(i="number"==typeof i?i:this.i,compressed="boolean"==typeof compressed?compressed:this.compressed,0!==i&&1!==i&&2!==i&&3!==i)throw new Error("i must be equal to 0, 1, 2, or 3");var val=i+27+4;!1===compressed&&(val-=4);var b1=Buffer.from([val]),b2=this.r.toBuffer({size:32}),b3=this.s.toBuffer({size:32});return Buffer.concat([b1,b2,b3])},Signature.prototype.toBuffer=Signature.prototype.toDER=function(){var rnbuf=this.r.toBuffer(),snbuf=this.s.toBuffer(),rneg=!!(128&rnbuf[0]),sneg=!!(128&snbuf[0]),rbuf=rneg?Buffer.concat([Buffer.from([0]),rnbuf]):rnbuf,sbuf=sneg?Buffer.concat([Buffer.from([0]),snbuf]):snbuf,rlength=rbuf.length,slength=sbuf.length,length=2+rlength+2+slength;return Buffer.concat([Buffer.from([48,length,2,rlength]),rbuf,Buffer.from([2,slength]),sbuf])},Signature.prototype.toString=function(){return this.toDER().toString("hex")},Signature.isTxDER=function(buf){if(buf.length<9)return!1;if(buf.length>73)return!1;if(48!==buf[0])return!1;if(buf[1]!==buf.length-3)return!1;var nLenR=buf[3];if(5+nLenR>=buf.length)return!1;var nLenS=buf[5+nLenR];if(nLenR+nLenS+7!==buf.length)return!1;var R=buf.slice(4);if(2!==buf[2])return!1;if(0===nLenR)return!1;if(128&R[0])return!1;if(nLenR>1&&0===R[0]&&!(128&R[1]))return!1;var S=buf.slice(6+nLenR);return 2===buf[6+nLenR-2]&&(0!==nLenS&&(!(128&S[0])&&!(nLenS>1&&0===S[0]&&!(128&S[1]))))},Signature.prototype.hasLowS=function(){return!this.s.lt(new BN(1))&&!this.s.gt(new BN("7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5D576E7357A4501DDFE92F46681B20A0","hex"))},Signature.prototype.hasDefinedHashtype=function(){if(!JSUtil.isNaturalNumber(this.nhashtype))return!1;var temp=31&this.nhashtype;return!(temp<Signature.SIGHASH_ALL||temp>Signature.SIGHASH_SINGLE)},Signature.prototype.toTxFormat=function(){var derbuf=this.toDER(),buf=Buffer.alloc(1);return buf.writeUInt8(this.nhashtype,0),Buffer.concat([derbuf,buf])},Signature.SIGHASH_ALL=1,Signature.SIGHASH_NONE=2,Signature.SIGHASH_SINGLE=3,Signature.SIGHASH_FORKID=64,Signature.SIGHASH_ANYONECANPAY=128,module.exports=Signature},function(module,exports,__webpack_require__){module.exports=__webpack_require__(60),module.exports.Interpreter=__webpack_require__(61)},function(module,exports,__webpack_require__){try{var util=__webpack_require__(38);if("function"!=typeof util.inherits)throw"";module.exports=util.inherits}catch(e){module.exports=__webpack_require__(83)}},function(module,exports,__webpack_require__){"use strict";var assert=__webpack_require__(20),inherits=__webpack_require__(11);function isSurrogatePair(msg,i){return 55296==(64512&msg.charCodeAt(i))&&(!(i<0||i+1>=msg.length)&&56320==(64512&msg.charCodeAt(i+1)))}function htonl(w){return(w>>>24|w>>>8&65280|w<<8&16711680|(255&w)<<24)>>>0}function zero2(word){return 1===word.length?"0"+word:word}function zero8(word){return 7===word.length?"0"+word:6===word.length?"00"+word:5===word.length?"000"+word:4===word.length?"0000"+word:3===word.length?"00000"+word:2===word.length?"000000"+word:1===word.length?"0000000"+word:word}exports.inherits=inherits,exports.toArray=function(msg,enc){if(Array.isArray(msg))return msg.slice();if(!msg)return[];var res=[];if("string"==typeof msg)if(enc){if("hex"===enc)for((msg=msg.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(msg="0"+msg),i=0;i<msg.length;i+=2)res.push(parseInt(msg[i]+msg[i+1],16))}else for(var p=0,i=0;i<msg.length;i++){var c=msg.charCodeAt(i);c<128?res[p++]=c:c<2048?(res[p++]=c>>6|192,res[p++]=63&c|128):isSurrogatePair(msg,i)?(c=65536+((1023&c)<<10)+(1023&msg.charCodeAt(++i)),res[p++]=c>>18|240,res[p++]=c>>12&63|128,res[p++]=c>>6&63|128,res[p++]=63&c|128):(res[p++]=c>>12|224,res[p++]=c>>6&63|128,res[p++]=63&c|128)}else for(i=0;i<msg.length;i++)res[i]=0|msg[i];return res},exports.toHex=function(msg){for(var res="",i=0;i<msg.length;i++)res+=zero2(msg[i].toString(16));return res},exports.htonl=htonl,exports.toHex32=function(msg,endian){for(var res="",i=0;i<msg.length;i++){var w=msg[i];"little"===endian&&(w=htonl(w)),res+=zero8(w.toString(16))}return res},exports.zero2=zero2,exports.zero8=zero8,exports.join32=function(msg,start,end,endian){var len=end-start;assert(len%4==0);for(var res=new Array(len/4),i=0,k=start;i<res.length;i++,k+=4){var w;w="big"===endian?msg[k]<<24|msg[k+1]<<16|msg[k+2]<<8|msg[k+3]:msg[k+3]<<24|msg[k+2]<<16|msg[k+1]<<8|msg[k],res[i]=w>>>0}return res},exports.split32=function(msg,endian){for(var res=new Array(4*msg.length),i=0,k=0;i<msg.length;i++,k+=4){var m=msg[i];"big"===endian?(res[k]=m>>>24,res[k+1]=m>>>16&255,res[k+2]=m>>>8&255,res[k+3]=255&m):(res[k+3]=m>>>24,res[k+2]=m>>>16&255,res[k+1]=m>>>8&255,res[k]=255&m)}return res},exports.rotr32=function(w,b){return w>>>b|w<<32-b},exports.rotl32=function(w,b){return w<<b|w>>>32-b},exports.sum32=function(a,b){return a+b>>>0},exports.sum32_3=function(a,b,c){return a+b+c>>>0},exports.sum32_4=function(a,b,c,d){return a+b+c+d>>>0},exports.sum32_5=function(a,b,c,d,e){return a+b+c+d+e>>>0},exports.sum64=function(buf,pos,ah,al){var bh=buf[pos],lo=al+buf[pos+1]>>>0,hi=(lo<al?1:0)+ah+bh;buf[pos]=hi>>>0,buf[pos+1]=lo},exports.sum64_hi=function(ah,al,bh,bl){return(al+bl>>>0<al?1:0)+ah+bh>>>0},exports.sum64_lo=function(ah,al,bh,bl){return al+bl>>>0},exports.sum64_4_hi=function(ah,al,bh,bl,ch,cl,dh,dl){var carry=0,lo=al;return carry+=(lo=lo+bl>>>0)<al?1:0,carry+=(lo=lo+cl>>>0)<cl?1:0,ah+bh+ch+dh+(carry+=(lo=lo+dl>>>0)<dl?1:0)>>>0},exports.sum64_4_lo=function(ah,al,bh,bl,ch,cl,dh,dl){return al+bl+cl+dl>>>0},exports.sum64_5_hi=function(ah,al,bh,bl,ch,cl,dh,dl,eh,el){var carry=0,lo=al;return carry+=(lo=lo+bl>>>0)<al?1:0,carry+=(lo=lo+cl>>>0)<cl?1:0,carry+=(lo=lo+dl>>>0)<dl?1:0,ah+bh+ch+dh+eh+(carry+=(lo=lo+el>>>0)<el?1:0)>>>0},exports.sum64_5_lo=function(ah,al,bh,bl,ch,cl,dh,dl,eh,el){return al+bl+cl+dl+el>>>0},exports.rotr64_hi=function(ah,al,num){return(al<<32-num|ah>>>num)>>>0},exports.rotr64_lo=function(ah,al,num){return(ah<<32-num|al>>>num)>>>0},exports.shr64_hi=function(ah,al,num){return ah>>>num},exports.shr64_lo=function(ah,al,num){return(ah<<32-num|al>>>num)>>>0}},function(module,exports,__webpack_require__){"use strict";var BN=__webpack_require__(2),Point=__webpack_require__(22),Hash=__webpack_require__(4),JSUtil=__webpack_require__(3),Network=__webpack_require__(21),_=__webpack_require__(0),$=__webpack_require__(1);function PublicKey(data,extra){if(!(this instanceof PublicKey))return new PublicKey(data,extra);if($.checkArgument(data,"First argument is required, please include public key data."),data instanceof PublicKey)return data;extra=extra||{};var info=this._classifyArgs(data,extra);return info.point.validate(),JSUtil.defineImmutable(this,{point:info.point,compressed:info.compressed,network:info.network||Network.defaultNetwork}),this}PublicKey.prototype._classifyArgs=function(data,extra){var info={compressed:_.isUndefined(extra.compressed)||extra.compressed};if(data instanceof Point)info.point=data;else if(data.x&&data.y)info=PublicKey._transformObject(data);else if("string"==typeof data)info=PublicKey._transformDER(Buffer.from(data,"hex"));else if(PublicKey._isBuffer(data))info=PublicKey._transformDER(data);else{if(!PublicKey._isPrivateKey(data))throw new TypeError("First argument is an unrecognized data format.");info=PublicKey._transformPrivateKey(data)}return info.network||(info.network=_.isUndefined(extra.network)?void 0:Network.get(extra.network)),info},PublicKey._isPrivateKey=function(param){return param instanceof __webpack_require__(32)},PublicKey._isBuffer=function(param){return param instanceof Buffer||param instanceof Uint8Array},PublicKey._transformPrivateKey=function(privkey){$.checkArgument(PublicKey._isPrivateKey(privkey),"Must be an instance of PrivateKey");var info={};return info.point=Point.getG().mul(privkey.bn),info.compressed=privkey.compressed,info.network=privkey.network,info},PublicKey._transformDER=function(buf,strict){$.checkArgument(PublicKey._isBuffer(buf),"Must be a buffer of DER encoded public key");var x,y,xbuf,ybuf,info={};if(strict=!!_.isUndefined(strict)||strict,4!==buf[0]&&(strict||6!==buf[0]&&7!==buf[0]))if(3===buf[0])xbuf=buf.slice(1),x=new BN(xbuf),(info=PublicKey._transformX(!0,x)).compressed=!0;else{if(2!==buf[0])throw new TypeError("Invalid DER format public key");xbuf=buf.slice(1),x=new BN(xbuf),(info=PublicKey._transformX(!1,x)).compressed=!0}else{if(xbuf=buf.slice(1,33),ybuf=buf.slice(33,65),32!==xbuf.length||32!==ybuf.length||65!==buf.length)throw new TypeError("Length of x and y must be 32 bytes");x=new BN(xbuf),y=new BN(ybuf),info.point=new Point(x,y),info.compressed=!1}return info},PublicKey._transformX=function(odd,x){$.checkArgument("boolean"==typeof odd,"Must specify whether y is odd or not (true or false)");var info={};return info.point=Point.fromX(odd,x),info},PublicKey._transformObject=function(json){var x=new BN(json.x,"hex"),y=new BN(json.y,"hex");return new PublicKey(new Point(x,y),{compressed:json.compressed})},PublicKey.fromPrivateKey=function(privkey){$.checkArgument(PublicKey._isPrivateKey(privkey),"Must be an instance of PrivateKey");var info=PublicKey._transformPrivateKey(privkey);return new PublicKey(info.point,{compressed:info.compressed,network:info.network})},PublicKey.fromDER=PublicKey.fromBuffer=function(buf,strict){$.checkArgument(PublicKey._isBuffer(buf),"Must be a buffer of DER encoded public key");var info=PublicKey._transformDER(buf,strict);return new PublicKey(info.point,{compressed:info.compressed})},PublicKey.fromPoint=function(point,compressed){return $.checkArgument(point instanceof Point,"First argument must be an instance of Point."),new PublicKey(point,{compressed:compressed})},PublicKey.fromHex=PublicKey.fromString=function(str,encoding){var buf=Buffer.from(str,encoding||"hex"),info=PublicKey._transformDER(buf);return new PublicKey(info.point,{compressed:info.compressed})},PublicKey.fromX=function(odd,x){var info=PublicKey._transformX(odd,x);return new PublicKey(info.point,{compressed:info.compressed})},PublicKey.getValidationError=function(data){var error;try{new PublicKey(data)}catch(e){error=e}return error},PublicKey.isValid=function(data){return!PublicKey.getValidationError(data)},PublicKey.prototype.toObject=PublicKey.prototype.toJSON=function(){return{x:this.point.getX().toString("hex",2),y:this.point.getY().toString("hex",2),compressed:this.compressed}},PublicKey.prototype.toBuffer=PublicKey.prototype.toDER=function(){var prefix,x=this.point.getX(),y=this.point.getY(),xbuf=x.toBuffer({size:32}),ybuf=y.toBuffer({size:32});return this.compressed?(prefix=ybuf[ybuf.length-1]%2?Buffer.from([3]):Buffer.from([2]),Buffer.concat([prefix,xbuf])):(prefix=Buffer.from([4]),Buffer.concat([prefix,xbuf,ybuf]))},PublicKey.prototype._getID=function(){return Hash.sha256ripemd160(this.toBuffer())},PublicKey.prototype.toAddress=function(network){return __webpack_require__(23).fromPublicKey(this,network||this.network)},PublicKey.prototype.toString=PublicKey.prototype.toHex=function(){return this.toDER().toString("hex")},PublicKey.prototype.inspect=function(){return"<PublicKey: "+this.toHex()+(this.compressed?"":", uncompressed")+">"},module.exports=PublicKey},function(module,exports,__webpack_require__){"use strict";var assert=__webpack_require__(24),BufferWriter=function BufferWriter(obj){if(!(this instanceof BufferWriter))return new BufferWriter(obj);this.bufLen=0,obj?this.set(obj):this.bufs=[]};BufferWriter.prototype.set=function(obj){return this.bufs=obj.bufs||this.bufs||[],this.bufLen=this.bufs.reduce((function(prev,buf){return prev+buf.length}),0),this},BufferWriter.prototype.toBuffer=function(){return this.concat()},BufferWriter.prototype.concat=function(){return Buffer.concat(this.bufs,this.bufLen)},BufferWriter.prototype.write=function(buf){return assert(Buffer.isBuffer(buf)),this.bufs.push(buf),this.bufLen+=buf.length,this},BufferWriter.prototype.writeReverse=function(buf){return assert(Buffer.isBuffer(buf)),this.bufs.push(Buffer.from(buf).reverse()),this.bufLen+=buf.length,this},BufferWriter.prototype.writeUInt8=function(n){var buf=Buffer.alloc(1);return buf.writeUInt8(n,0),this.write(buf),this},BufferWriter.prototype.writeUInt16BE=function(n){var buf=Buffer.alloc(2);return buf.writeUInt16BE(n,0),this.write(buf),this},BufferWriter.prototype.writeUInt16LE=function(n){var buf=Buffer.alloc(2);return buf.writeUInt16LE(n,0),this.write(buf),this},BufferWriter.prototype.writeUInt32BE=function(n){var buf=Buffer.alloc(4);return buf.writeUInt32BE(n,0),this.write(buf),this},BufferWriter.prototype.writeInt32LE=function(n){var buf=Buffer.alloc(4);return buf.writeInt32LE(n,0),this.write(buf),this},BufferWriter.prototype.writeUInt32LE=function(n){var buf=Buffer.alloc(4);return buf.writeUInt32LE(n,0),this.write(buf),this},BufferWriter.prototype.writeUInt64BEBN=function(bn){var buf=bn.toBuffer({size:8});return this.write(buf),this},BufferWriter.prototype.writeUInt64LEBN=function(bn){var buf=bn.toBuffer({size:8});return this.writeReverse(buf),this},BufferWriter.prototype.writeVarintNum=function(n){var buf=BufferWriter.varintBufNum(n);return this.write(buf),this},BufferWriter.prototype.writeVarintBN=function(bn){var buf=BufferWriter.varintBufBN(bn);return this.write(buf),this},BufferWriter.varintBufNum=function(n){var buf;return n<253?(buf=Buffer.alloc(1)).writeUInt8(n,0):n<65536?((buf=Buffer.alloc(3)).writeUInt8(253,0),buf.writeUInt16LE(n,1)):n<4294967296?((buf=Buffer.alloc(5)).writeUInt8(254,0),buf.writeUInt32LE(n,1)):((buf=Buffer.alloc(9)).writeUInt8(255,0),buf.writeInt32LE(-1&n,1),buf.writeUInt32LE(Math.floor(n/4294967296),5)),buf},BufferWriter.varintBufBN=function(bn){var buf,n=bn.toNumber();if(n<253)(buf=Buffer.alloc(1)).writeUInt8(n,0);else if(n<65536)(buf=Buffer.alloc(3)).writeUInt8(253,0),buf.writeUInt16LE(n,1);else if(n<4294967296)(buf=Buffer.alloc(5)).writeUInt8(254,0),buf.writeUInt32LE(n,1);else{var bw=new BufferWriter;bw.writeUInt8(255),bw.writeUInt64LEBN(bn),buf=bw.concat()}return buf},module.exports=BufferWriter},function(module,exports){module.exports=require("path")},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(0),$=__webpack_require__(1),BN=__webpack_require__(2),BufferReader=function BufferReader(buf){if(!(this instanceof BufferReader))return new BufferReader(buf);if(!_.isUndefined(buf))if(Buffer.isBuffer(buf))this.set({buf:buf});else if(_.isString(buf)){var b=Buffer.from(buf,"hex");if(2*b.length!==buf.length)throw new TypeError("Invalid hex string");this.set({buf:b})}else{if(!_.isObject(buf))throw new TypeError("Unrecognized argument for BufferReader");var obj=buf;this.set(obj)}};BufferReader.prototype.set=function(obj){return this.buf=obj.buf||this.buf||void 0,this.pos=obj.pos||this.pos||0,this},BufferReader.prototype.eof=function(){return this.pos>=this.buf.length},BufferReader.prototype.finished=BufferReader.prototype.eof,BufferReader.prototype.read=function(len){$.checkArgument(!_.isUndefined(len),"Must specify a length");var buf=this.buf.slice(this.pos,this.pos+len);return this.pos=this.pos+len,buf},BufferReader.prototype.readAll=function(){var buf=this.buf.slice(this.pos,this.buf.length);return this.pos=this.buf.length,buf},BufferReader.prototype.readUInt8=function(){var val=this.buf.readUInt8(this.pos);return this.pos=this.pos+1,val},BufferReader.prototype.readUInt16BE=function(){var val=this.buf.readUInt16BE(this.pos);return this.pos=this.pos+2,val},BufferReader.prototype.readUInt16LE=function(){var val=this.buf.readUInt16LE(this.pos);return this.pos=this.pos+2,val},BufferReader.prototype.readUInt32BE=function(){var val=this.buf.readUInt32BE(this.pos);return this.pos=this.pos+4,val},BufferReader.prototype.readUInt32LE=function(){var val=this.buf.readUInt32LE(this.pos);return this.pos=this.pos+4,val},BufferReader.prototype.readInt32LE=function(){var val=this.buf.readInt32LE(this.pos);return this.pos=this.pos+4,val},BufferReader.prototype.readUInt64BEBN=function(){var buf=this.buf.slice(this.pos,this.pos+8),bn=BN.fromBuffer(buf);return this.pos=this.pos+8,bn},BufferReader.prototype.readUInt64LEBN=function(){var bn,second=this.buf.readUInt32LE(this.pos),combined=4294967296*this.buf.readUInt32LE(this.pos+4)+second;if(combined<=9007199254740991)bn=new BN(combined);else{var data=Array.prototype.slice.call(this.buf,this.pos,this.pos+8);bn=new BN(data,10,"le")}return this.pos=this.pos+8,bn},BufferReader.prototype.readVarintNum=function(){var first=this.readUInt8();switch(first){case 253:return this.readUInt16LE();case 254:return this.readUInt32LE();case 255:var n=this.readUInt64LEBN().toNumber();if(n<=Math.pow(2,53))return n;throw new Error("number too large to retain precision - use readVarintBN");default:return first}},BufferReader.prototype.readVarLengthBuffer=function(){var len=this.readVarintNum(),buf=this.read(len);return $.checkState(buf.length===len,"Invalid length while reading varlength buffer. Expected to read: "+len+" and read "+buf.length),buf},BufferReader.prototype.readVarintBuf=function(){switch(this.buf.readUInt8(this.pos)){case 253:return this.read(3);case 254:return this.read(5);case 255:return this.read(9);default:return this.read(1)}},BufferReader.prototype.readVarintBN=function(){var first=this.readUInt8();switch(first){case 253:return new BN(this.readUInt16LE());case 254:return new BN(this.readUInt32LE());case 255:return this.readUInt64LEBN();default:return new BN(first)}},BufferReader.prototype.reverse=function(){for(var buf=Buffer.alloc(this.buf.length),i=0;i<buf.length;i++)buf[i]=this.buf[this.buf.length-1-i];return this.buf=buf,this},BufferReader.prototype.readReverse=function(len){_.isUndefined(len)&&(len=this.buf.length);var buf=this.buf.slice(this.pos,this.pos+len);return this.pos=this.pos+len,Buffer.from(buf).reverse()},module.exports=BufferReader},function(module,exports,__webpack_require__){"use strict";var buffer=__webpack_require__(7),Signature=__webpack_require__(9),Script=__webpack_require__(10),Output=__webpack_require__(18),BufferReader=__webpack_require__(16),BufferWriter=__webpack_require__(14),BN=__webpack_require__(2),Hash=__webpack_require__(4),ECDSA=__webpack_require__(51),$=__webpack_require__(1),Interpreter=__webpack_require__(61),_=__webpack_require__(0),SIGHASH_SINGLE_BUG=Buffer.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),DEFAULT_SIGN_FLAGS=Interpreter.SCRIPT_ENABLE_SIGHASH_FORKID,sighashPreimage=function(transaction,sighashType,inputNumber,subscript,satoshisBN,flags){var Transaction=__webpack_require__(63),Input=__webpack_require__(43);_.isUndefined(flags)&&(flags=DEFAULT_SIGN_FLAGS);var i,txcopy=Transaction.shallowCopy(transaction);(subscript=new Script(subscript),flags&Interpreter.SCRIPT_ENABLE_REPLAY_PROTECTION)&&(sighashType=(16711680|57005^sighashType>>8)<<8|255&sighashType);if(sighashType&Signature.SIGHASH_FORKID&&flags&Interpreter.SCRIPT_ENABLE_SIGHASH_FORKID)return function(transaction,sighashType,inputNumber,subscript,satoshisBN){var input=transaction.inputs[inputNumber];function GetOutputsHash(tx,n){var writer=new BufferWriter;_.isUndefined(n)?_.each(tx.outputs,(function(output){output.toBufferWriter(writer)})):tx.outputs[n].toBufferWriter(writer);var buf=writer.toBuffer();return Hash.sha256sha256(buf)}$.checkArgument(satoshisBN instanceof BN,"For ForkId=0 signatures, satoshis or complete input must be provided");var hashPrevouts=Buffer.alloc(32),hashSequence=Buffer.alloc(32),hashOutputs=Buffer.alloc(32);sighashType&Signature.SIGHASH_ANYONECANPAY||(hashPrevouts=function(tx){var writer=new BufferWriter;_.each(tx.inputs,(function(input){writer.writeReverse(input.prevTxId),writer.writeUInt32LE(input.outputIndex)}));var buf=writer.toBuffer();return Hash.sha256sha256(buf)}(transaction)),sighashType&Signature.SIGHASH_ANYONECANPAY||(31&sighashType)===Signature.SIGHASH_SINGLE||(31&sighashType)===Signature.SIGHASH_NONE||(hashSequence=function(tx){var writer=new BufferWriter;_.each(tx.inputs,(function(input){writer.writeUInt32LE(input.sequenceNumber)}));var buf=writer.toBuffer();return Hash.sha256sha256(buf)}(transaction)),(31&sighashType)!==Signature.SIGHASH_SINGLE&&(31&sighashType)!==Signature.SIGHASH_NONE?hashOutputs=GetOutputsHash(transaction):(31&sighashType)===Signature.SIGHASH_SINGLE&&inputNumber<transaction.outputs.length&&(hashOutputs=GetOutputsHash(transaction,inputNumber));var writer=new BufferWriter;writer.writeInt32LE(transaction.version),writer.write(hashPrevouts),writer.write(hashSequence),writer.writeReverse(input.prevTxId),writer.writeUInt32LE(input.outputIndex),writer.writeVarintNum(subscript.toBuffer().length),writer.write(subscript.toBuffer()),writer.writeUInt64LEBN(satoshisBN);var sequenceNumber=input.sequenceNumber;return writer.writeUInt32LE(sequenceNumber),writer.write(hashOutputs),writer.writeUInt32LE(transaction.nLockTime),writer.writeUInt32LE(sighashType>>>0),writer.toBuffer()}(txcopy,sighashType,inputNumber,subscript,satoshisBN);for(subscript.removeCodeseparators(),i=0;i<txcopy.inputs.length;i++)txcopy.inputs[i]=new Input(txcopy.inputs[i]).setScript(Script.empty());if(txcopy.inputs[inputNumber]=new Input(txcopy.inputs[inputNumber]).setScript(subscript),(31&sighashType)===Signature.SIGHASH_NONE||(31&sighashType)===Signature.SIGHASH_SINGLE)for(i=0;i<txcopy.inputs.length;i++)i!==inputNumber&&(txcopy.inputs[i].sequenceNumber=0);if((31&sighashType)===Signature.SIGHASH_NONE)txcopy.outputs=[];else if((31&sighashType)===Signature.SIGHASH_SINGLE){if(inputNumber>=txcopy.outputs.length)return SIGHASH_SINGLE_BUG;for(txcopy.outputs.length=inputNumber+1,i=0;i<inputNumber;i++)txcopy.outputs[i]=new Output({satoshis:BN.fromBuffer(buffer.Buffer.from("ffffffffffffffff","hex")),script:Script.empty()})}return sighashType&Signature.SIGHASH_ANYONECANPAY&&(txcopy.inputs=[txcopy.inputs[inputNumber]]),(new BufferWriter).write(txcopy.toBuffer()).writeInt32LE(sighashType).toBuffer()},sighash=function(transaction,sighashType,inputNumber,subscript,satoshisBN,flags){var preimage=sighashPreimage(transaction,sighashType,inputNumber,subscript,satoshisBN,flags);if(0===preimage.compare(SIGHASH_SINGLE_BUG))return preimage;var ret=Hash.sha256sha256(preimage);return ret=new BufferReader(ret).readReverse()};module.exports={sighashPreimage:sighashPreimage,sighash:sighash,sign:function(transaction,privateKey,sighashType,inputIndex,subscript,satoshisBN,flags){var hashbuf=sighash(transaction,sighashType,inputIndex,subscript,satoshisBN,flags);return ECDSA.sign(hashbuf,privateKey,"little").set({nhashtype:sighashType})},verify:function(transaction,signature,publicKey,inputIndex,subscript,satoshisBN,flags){$.checkArgument(!_.isUndefined(transaction)),$.checkArgument(!_.isUndefined(signature)&&!_.isUndefined(signature.nhashtype));var hashbuf=sighash(transaction,signature.nhashtype,inputIndex,subscript,satoshisBN,flags);return ECDSA.verify(hashbuf,signature,publicKey,"little")}}},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(0),BN=__webpack_require__(2),buffer=__webpack_require__(7),JSUtil=__webpack_require__(3),BufferWriter=__webpack_require__(14),Varint=__webpack_require__(27),Script=__webpack_require__(10),$=__webpack_require__(1),errors=__webpack_require__(8);function Output(args){if(!(this instanceof Output))return new Output(args);if(!_.isObject(args))throw new TypeError("Unrecognized argument for Output");var script;this.satoshis=args.satoshis,Buffer.isBuffer(args.script)?this._scriptBuffer=args.script:(script=_.isString(args.script)&&JSUtil.isHexa(args.script)?buffer.Buffer.from(args.script,"hex"):args.script,this.setScript(script))}Object.defineProperty(Output.prototype,"script",{configurable:!1,enumerable:!0,get:function(){return this._script||this.setScriptFromBuffer(this._scriptBuffer),this._script}}),Object.defineProperty(Output.prototype,"satoshis",{configurable:!1,enumerable:!0,get:function(){return this._satoshis},set:function(num){num instanceof BN?(this._satoshisBN=num,this._satoshis=num.toNumber()):_.isString(num)?(this._satoshis=parseInt(num),this._satoshisBN=BN.fromNumber(this._satoshis)):($.checkArgument(JSUtil.isNaturalNumber(num),"Output satoshis is not a natural number"),this._satoshisBN=BN.fromNumber(num),this._satoshis=num),$.checkState(JSUtil.isNaturalNumber(this._satoshis),"Output satoshis is not a natural number")}}),Output.prototype.invalidSatoshis=function(){return this._satoshis>9007199254740991?"transaction txout satoshis greater than max safe integer":this._satoshis!==this._satoshisBN.toNumber()?"transaction txout satoshis has corrupted value":this._satoshis<0&&"transaction txout negative"},Object.defineProperty(Output.prototype,"satoshisBN",{configurable:!1,enumerable:!0,get:function(){return this._satoshisBN},set:function(num){this._satoshisBN=num,this._satoshis=num.toNumber(),$.checkState(JSUtil.isNaturalNumber(this._satoshis),"Output satoshis is not a natural number")}}),Output.prototype.toObject=Output.prototype.toJSON=function(){var obj={satoshis:this.satoshis};return obj.script=this._scriptBuffer.toString("hex"),obj},Output.fromObject=function(data){return new Output(data)},Output.prototype.setScriptFromBuffer=function(buffer){this._scriptBuffer=buffer;try{this._script=Script.fromBuffer(this._scriptBuffer),this._script._isOutput=!0}catch(e){if(!(e instanceof errors.Script.InvalidBuffer))throw e;this._script=null}},Output.prototype.setScript=function(script){if(script instanceof Script)this._scriptBuffer=script.toBuffer(),this._script=script,this._script._isOutput=!0;else if(_.isString(script))this._script=Script.fromString(script),this._scriptBuffer=this._script.toBuffer(),this._script._isOutput=!0;else{if(!Buffer.isBuffer(script))throw new TypeError("Invalid argument type: script");this.setScriptFromBuffer(script)}return this},Output.prototype.inspect=function(){var scriptStr;return scriptStr=this.script?this.script.inspect():this._scriptBuffer.toString("hex"),"<Output ("+this.satoshis+" sats) "+scriptStr+">"},Output.fromBufferReader=function(br){var obj={};obj.satoshis=br.readUInt64LEBN();var size=br.readVarintNum();return obj.script=0!==size?br.read(size):buffer.Buffer.from([]),new Output(obj)},Output.prototype.toBufferWriter=function(writer){writer||(writer=new BufferWriter),writer.writeUInt64LEBN(this._satoshisBN);var script=this._scriptBuffer;return writer.writeVarintNum(script.length),writer.write(script),writer},Output.prototype.getSize=function(){var scriptSize=this.script.toBuffer().length;return 8+Varint(scriptSize).toBuffer().length+scriptSize},module.exports=Output},function(module,exports){module.exports=require("fs")},function(module,exports){function assert(val,msg){if(!val)throw new Error(msg||"Assertion failed")}module.exports=assert,assert.equal=function(l,r,msg){if(l!=r)throw new Error(msg||"Assertion failed: "+l+" != "+r)}},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(0),JSUtil=__webpack_require__(3),networks=[],networkMaps={};function Network(){}function get(arg,keys){if(~networks.indexOf(arg))return arg;if(!keys)return networkMaps[arg];_.isArray(keys)||(keys=[keys]);for(var i=0;i<networks.length;i++){var network=networks[i],filteredNet=_.pick(network,keys);if(~_.values(filteredNet).indexOf(arg))return network}}function cashAddrPrefixToArray(cashAddrPrefix){for(var result=[],i=0;i<cashAddrPrefix.length;i++)result.push(31&cashAddrPrefix.charCodeAt(i));return result}function addNetwork(data){var network=new Network;JSUtil.defineImmutable(network,{name:data.name,alias:data.alias,pubkeyhash:data.pubkeyhash,privatekey:data.privatekey,scripthash:data.scripthash,xpubkey:data.xpubkey,xprivkey:data.xprivkey});var indexBy=data.indexBy||Object.keys(data);return data.cashAddrPrefix&&_.extend(network,{cashAddrPrefix:data.cashAddrPrefix,cashAddrPrefixArray:cashAddrPrefixToArray(data.cashAddrPrefix)}),data.networkMagic&&_.extend(network,{networkMagic:JSUtil.integerAsBuffer(data.networkMagic)}),data.port&&_.extend(network,{port:data.port}),data.dnsSeeds&&_.extend(network,{dnsSeeds:data.dnsSeeds}),networks.push(network),function(network,keys){for(var i=0;i<keys.length;i++){var key=keys[i],networkValue=network[key];_.isUndefined(networkValue)||_.isObject(networkValue)||(networkMaps[networkValue]=network)}}(network,indexBy),network}Network.prototype.toString=function(){return this.name};var dnsSeeds=["seed.bitcoinsv.org","seed.bitcoinunlimited.info"],TESTNET={PORT:18333,NETWORK_MAGIC:4108710900,DNS_SEEDS:dnsSeeds,PREFIX:"testnet",CASHADDRPREFIX:"bchtest"},REGTEST={PORT:18444,NETWORK_MAGIC:3669344250,DNS_SEEDS:[],PREFIX:"regtest",CASHADDRPREFIX:"bchreg"},STN={PORT:9333,NETWORK_MAGIC:4224632057,DNS_SEEDS:["stn-seed.bitcoinsv.io"],PREFIX:"stn",CASHADDRPREFIX:"bsvstn"},liveNetwork={name:"livenet",alias:"mainnet",prefix:"bitcoin",cashAddrPrefix:"bitcoincash",pubkeyhash:0,privatekey:128,scripthash:5,xpubkey:76067358,xprivkey:76066276,networkMagic:3823236072,port:8333,dnsSeeds:dnsSeeds},testNetwork={name:"testnet",prefix:TESTNET.PREFIX,cashAddrPrefix:TESTNET.CASHADDRPREFIX,pubkeyhash:111,privatekey:239,scripthash:196,xpubkey:70617039,xprivkey:70615956,networkMagic:TESTNET.NETWORK_MAGIC},regtestNetwork={name:"regtest",prefix:REGTEST.PREFIX,cashAddrPrefix:REGTEST.CASHADDRPREFIX,pubkeyhash:111,privatekey:239,scripthash:196,xpubkey:70617039,xprivkey:70615956,networkMagic:REGTEST.NETWORK_MAGIC,port:REGTEST.PORT,dnsSeeds:[],indexBy:["port","name","cashAddrPrefix","networkMagic"]},stnNetwork={name:"stn",prefix:STN.PREFIX,cashAddrPrefix:STN.CASHADDRPREFIX,pubkeyhash:111,privatekey:239,scripthash:196,xpubkey:70617039,xprivkey:70615956,networkMagic:STN.NETWORK_MAGIC,indexBy:["port","name","cashAddrPrefix","networkMagic"]};addNetwork(testNetwork),addNetwork(stnNetwork),addNetwork(regtestNetwork),addNetwork(liveNetwork);var livenet=get("livenet"),regtest=get("regtest"),testnet=get("testnet"),stn=get("stn");Object.defineProperty(testnet,"port",{enumerable:!0,configurable:!1,get:function(){return this.regtestEnabled?REGTEST.PORT:this.stnEnabled?STN.PORT:TESTNET.PORT}}),Object.defineProperty(testnet,"networkMagic",{enumerable:!0,configurable:!1,get:function(){return this.regtestEnabled?JSUtil.integerAsBuffer(REGTEST.NETWORK_MAGIC):this.stnEnabled?JSUtil.integerAsBuffer(STN.NETWORK_MAGIC):JSUtil.integerAsBuffer(TESTNET.NETWORK_MAGIC)}}),Object.defineProperty(testnet,"dnsSeeds",{enumerable:!0,configurable:!1,get:function(){return this.regtestEnabled?REGTEST.DNS_SEEDS:this.stnEnabled?STN.DNS_SEEDS:TESTNET.DNS_SEEDS}}),Object.defineProperty(testnet,"cashAddrPrefix",{enumerable:!0,configurable:!1,get:function(){return this.regtestEnabled?REGTEST.CASHADDRPREFIX:this.stnEnabled?STN.CASHADDRPREFIX:TESTNET.CASHADDRPREFIX}}),Object.defineProperty(testnet,"cashAddrPrefixArray",{enumerable:!0,configurable:!1,get:function(){return this.regtestEnabled?cashAddrPrefixToArray(REGTEST.CASHADDRPREFIX):this.stnEnabled?STN.cashAddrPrefixToArray(STN.CASHADDRPREFIX):cashAddrPrefixToArray(TESTNET.CASHADDRPREFIX)}}),module.exports={add:addNetwork,remove:function(network){for(var i=0;i<networks.length;i++)networks[i]===network&&networks.splice(i,1);!function(network,values){for(var index=0;index<values.length;index++){var value=values[index];networkMaps[value]===network&&delete networkMaps[value]}}(network,Object.keys(networkMaps))},defaultNetwork:livenet,livenet:livenet,mainnet:livenet,testnet:testnet,regtest:regtest,stn:stn,get:get,enableRegtest:function(){testnet.regtestEnabled=!0},disableRegtest:function(){testnet.regtestEnabled=!1},enableStn:function(){testnet.stnEnabled=!0},disableStn:function(){testnet.stnEnabled=!1}}},function(module,exports,__webpack_require__){"use strict";var BN=__webpack_require__(2),ec=new(0,__webpack_require__(52).ec)("secp256k1"),ecPoint=ec.curve.point.bind(ec.curve),ecPointFromX=ec.curve.pointFromX.bind(ec.curve),Point=function(x,y,isRed){try{var point=ecPoint(x,y,isRed)}catch(e){throw new Error("Invalid Point")}return point.validate(),point};Point.prototype=Object.getPrototypeOf(ec.curve.point()),Point.fromX=function(odd,x){try{var point=ecPointFromX(x,odd)}catch(e){throw new Error("Invalid X")}return point.validate(),point},Point.getG=function(){return ec.curve.g},Point.getN=function(){return new BN(ec.curve.n.toArray())},Point.prototype._getX||(Point.prototype._getX=Point.prototype.getX),Point.prototype.getX=function(){return new BN(this._getX().toArray())},Point.prototype._getY||(Point.prototype._getY=Point.prototype.getY),Point.prototype.getY=function(){return new BN(this._getY().toArray())},Point.prototype.validate=function(){if(this.isInfinity())throw new Error("Point cannot be equal to Infinity");var p2;try{p2=ecPointFromX(this.getX(),this.getY().isOdd())}catch(e){throw new Error("Point does not lie on the curve")}if(0!==p2.y.cmp(this.y))throw new Error("Invalid y value for curve.");if(!this.mul(Point.getN()).isInfinity())throw new Error("Point times N must be infinity");return this},Point.pointToCompressed=function(point){var prefix,xbuf=point.getX().toBuffer({size:32}),ybuf=point.getY().toBuffer({size:32});return prefix=ybuf[ybuf.length-1]%2?Buffer.from([3]):Buffer.from([2]),Buffer.concat([prefix,xbuf])},Point.pointFromCompressed=function(buf){if(33!==buf.length)throw new Error("invalid buffer length");let odd,prefix=buf[0];if(3===prefix)odd=!0;else{if(2!==prefix)throw new Error("invalid value of compressed prefix");odd=!1}let xbuf=buf.slice(1,33),x=BN.fromBuffer(xbuf);return Point.fromX(odd,x)},Point.prototype.toBuffer=function(){return Point.pointToCompressed(this)},Point.prototype.toHex=function(){return this.toBuffer().toString("hex")},Point.fromBuffer=function(buf){return Point.pointFromCompressed(buf)},Point.fromHex=function(hex){return Point.fromBuffer(Buffer.from(hex,"hex"))},module.exports=Point},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(0),$=__webpack_require__(1),errors=__webpack_require__(8),Base58Check=__webpack_require__(26),Networks=__webpack_require__(21),Hash=__webpack_require__(4),JSUtil=__webpack_require__(3),PublicKey=__webpack_require__(13);function Address(data,network,type){if(!(this instanceof Address))return new Address(data,network,type);if(_.isArray(data)&&_.isNumber(network))return Address.createMultisig(data,network,type);if(data instanceof Address)return data;if($.checkArgument(data,"First argument is required, please include address data.","guide/address.html"),network&&!Networks.get(network))throw new TypeError('Second argument must be "livenet", "testnet", or "regtest".');if(type&&type!==Address.PayToPublicKeyHash&&type!==Address.PayToScriptHash)throw new TypeError('Third argument must be "pubkeyhash" or "scripthash".');var info=this._classifyArguments(data,network,type);return info.network=info.network||Networks.get(network)||Networks.defaultNetwork,info.type=info.type||type||Address.PayToPublicKeyHash,JSUtil.defineImmutable(this,{hashBuffer:info.hashBuffer,network:info.network,type:info.type}),this}Address.prototype._classifyArguments=function(data,network,type){if((data instanceof Buffer||data instanceof Uint8Array)&&20===data.length)return Address._transformHash(data);if((data instanceof Buffer||data instanceof Uint8Array)&&21===data.length)return Address._transformBuffer(data,network,type);if(data instanceof PublicKey)return Address._transformPublicKey(data);if(data instanceof Script)return Address._transformScript(data,network);if("string"==typeof data)return Address._transformString(data,network,type);if(_.isObject(data))return Address._transformObject(data);throw new TypeError("First argument is an unrecognized data format.")},Address.PayToPublicKeyHash="pubkeyhash",Address.PayToScriptHash="scripthash",Address._transformHash=function(hash){var info={};if(!(hash instanceof Buffer||hash instanceof Uint8Array))throw new TypeError("Address supplied is not a buffer.");if(20!==hash.length)throw new TypeError("Address hashbuffers must be exactly 20 bytes.");return info.hashBuffer=hash,info},Address._transformObject=function(data){return $.checkArgument(data.hash||data.hashBuffer,"Must provide a `hash` or `hashBuffer` property"),$.checkArgument(data.type,"Must provide a `type` property"),{hashBuffer:data.hash?Buffer.from(data.hash,"hex"):data.hashBuffer,network:Networks.get(data.network)||Networks.defaultNetwork,type:data.type}},Address._classifyFromVersion=function(buffer){var version={},pubkeyhashNetwork=Networks.get(buffer[0],"pubkeyhash"),scripthashNetwork=Networks.get(buffer[0],"scripthash");return pubkeyhashNetwork?(version.network=pubkeyhashNetwork,version.type=Address.PayToPublicKeyHash):scripthashNetwork&&(version.network=scripthashNetwork,version.type=Address.PayToScriptHash),version},Address._transformBuffer=function(buffer,network,type){var info={};if(!(buffer instanceof Buffer||buffer instanceof Uint8Array))throw new TypeError("Address supplied is not a buffer.");if(21!==buffer.length)throw new TypeError("Address buffers must be exactly 21 bytes.");var networkObj=Networks.get(network),bufferVersion=Address._classifyFromVersion(buffer);if(network&&!networkObj)throw new TypeError("Unknown network");if(!bufferVersion.network||networkObj&&networkObj!==bufferVersion.network)throw new TypeError("Address has mismatched network type.");if(!bufferVersion.type||type&&type!==bufferVersion.type)throw new TypeError("Address has mismatched type.");return info.hashBuffer=buffer.slice(1),info.network=bufferVersion.network,info.type=bufferVersion.type,info},Address._transformPublicKey=function(pubkey){var info={};if(!(pubkey instanceof PublicKey))throw new TypeError("Address must be an instance of PublicKey.");return info.hashBuffer=Hash.sha256ripemd160(pubkey.toBuffer()),info.type=Address.PayToPublicKeyHash,info},Address._transformScript=function(script,network){$.checkArgument(script instanceof Script,"script must be a Script instance");var info=script.getAddressInfo(network);if(!info)throw new errors.Script.CantDeriveAddress(script);return info},Address.createMultisig=function(publicKeys,threshold,network){return network=network||publicKeys[0].network||Networks.defaultNetwork,Address.payingTo(Script.buildMultisigOut(publicKeys,threshold),network)},Address._transformString=function(data,network,type){if("string"!=typeof data)throw new TypeError("data parameter supplied is not a string.");if(data.length<27)throw new Error("Invalid Address string provided");data=data.trim();var networkObj=Networks.get(network);if(network&&!networkObj)throw new TypeError("Unknown network");var addressBuffer=Base58Check.decode(data);return Address._transformBuffer(addressBuffer,network,type)},Address.fromPublicKey=function(data,network){var info=Address._transformPublicKey(data);return network=network||Networks.defaultNetwork,new Address(info.hashBuffer,network,info.type)},Address.fromPrivateKey=function(privateKey,network){let publicKey=PublicKey.fromPrivateKey(privateKey);return network=network||privateKey.network||Networks.defaultNetwork,Address.fromPublicKey(publicKey,network)},Address.fromPublicKeyHash=function(hash,network){var info=Address._transformHash(hash);return new Address(info.hashBuffer,network,Address.PayToPublicKeyHash)},Address.fromScriptHash=function(hash,network){$.checkArgument(hash,"hash parameter is required");var info=Address._transformHash(hash);return new Address(info.hashBuffer,network,Address.PayToScriptHash)},Address.payingTo=function(script,network){return $.checkArgument(script,"script is required"),$.checkArgument(script instanceof Script,"script must be instance of Script"),Address.fromScriptHash(Hash.sha256ripemd160(script.toBuffer()),network)},Address.fromScript=function(script,network){$.checkArgument(script instanceof Script,"script must be a Script instance");var info=Address._transformScript(script,network);return new Address(info.hashBuffer,network,info.type)},Address.fromBuffer=function(buffer,network,type){var info=Address._transformBuffer(buffer,network,type);return new Address(info.hashBuffer,info.network,info.type)},Address.fromHex=function(hex,network,type){return Address.fromBuffer(Buffer.from(hex,"hex"),network,type)},Address.fromString=function(str,network,type){var info=Address._transformString(str,network,type);return new Address(info.hashBuffer,info.network,info.type)},Address.fromObject=function(obj){return $.checkState(JSUtil.isHexa(obj.hash),'Unexpected hash property, "'+obj.hash+'", expected to be hex.'),new Address(Buffer.from(obj.hash,"hex"),obj.network,obj.type)},Address.getValidationError=function(data,network,type){var error;try{new Address(data,network,type)}catch(e){error=e}return error},Address.isValid=function(data,network,type){return!Address.getValidationError(data,network,type)},Address.prototype.isPayToPublicKeyHash=function(){return this.type===Address.PayToPublicKeyHash},Address.prototype.isPayToScriptHash=function(){return this.type===Address.PayToScriptHash},Address.prototype.toBuffer=function(){var version=Buffer.from([this.network[this.type]]);return Buffer.concat([version,this.hashBuffer])},Address.prototype.toHex=function(){return this.toBuffer().toString("hex")},Address.prototype.toObject=Address.prototype.toJSON=function(){return{hash:this.hashBuffer.toString("hex"),type:this.type,network:this.network.toString()}},Address.prototype.inspect=function(){return"<Address: "+this.toString()+", type: "+this.type+", network: "+this.network+">"},Address.prototype.toString=function(){return Base58Check.encode(this.toBuffer())},module.exports=Address;var Script=__webpack_require__(10)},function(module,exports){module.exports=require("assert")},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(12),assert=__webpack_require__(20);function BlockHash(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}exports.BlockHash=BlockHash,BlockHash.prototype.update=function(msg,enc){if(msg=utils.toArray(msg,enc),this.pending?this.pending=this.pending.concat(msg):this.pending=msg,this.pendingTotal+=msg.length,this.pending.length>=this._delta8){var r=(msg=this.pending).length%this._delta8;this.pending=msg.slice(msg.length-r,msg.length),0===this.pending.length&&(this.pending=null),msg=utils.join32(msg,0,msg.length-r,this.endian);for(var i=0;i<msg.length;i+=this._delta32)this._update(msg,i,i+this._delta32)}return this},BlockHash.prototype.digest=function(enc){return this.update(this._pad()),assert(null===this.pending),this._digest(enc)},BlockHash.prototype._pad=function(){var len=this.pendingTotal,bytes=this._delta8,k=bytes-(len+this.padLength)%bytes,res=new Array(k+this.padLength);res[0]=128;for(var i=1;i<k;i++)res[i]=0;if(len<<=3,"big"===this.endian){for(var t=8;t<this.padLength;t++)res[i++]=0;res[i++]=0,res[i++]=0,res[i++]=0,res[i++]=0,res[i++]=len>>>24&255,res[i++]=len>>>16&255,res[i++]=len>>>8&255,res[i++]=255&len}else for(res[i++]=255&len,res[i++]=len>>>8&255,res[i++]=len>>>16&255,res[i++]=len>>>24&255,res[i++]=0,res[i++]=0,res[i++]=0,res[i++]=0,t=8;t<this.padLength;t++)res[i++]=0;return res}},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(0),Base58=__webpack_require__(33),buffer=__webpack_require__(7),sha256sha256=__webpack_require__(4).sha256sha256,Base58Check=function Base58Check(obj){if(!(this instanceof Base58Check))return new Base58Check(obj);if(Buffer.isBuffer(obj)){var buf=obj;this.fromBuffer(buf)}else if("string"==typeof obj){var str=obj;this.fromString(str)}};Base58Check.prototype.set=function(obj){return this.buf=obj.buf||this.buf||void 0,this},Base58Check.validChecksum=function(data,checksum){return _.isString(data)&&(data=buffer.Buffer.from(Base58.decode(data))),_.isString(checksum)&&(checksum=buffer.Buffer.from(Base58.decode(checksum))),checksum||(checksum=data.slice(-4),data=data.slice(0,-4)),Base58Check.checksum(data).toString("hex")===checksum.toString("hex")},Base58Check.decode=function(s){if("string"!=typeof s)throw new Error("Input must be a string");var buf=Buffer.from(Base58.decode(s));if(buf.length<4)throw new Error("Input string too short");var data=buf.slice(0,-4),csum=buf.slice(-4),hash4=sha256sha256(data).slice(0,4);if(csum.toString("hex")!==hash4.toString("hex"))throw new Error("Checksum mismatch");return data},Base58Check.checksum=function(buffer){return sha256sha256(buffer).slice(0,4)},Base58Check.encode=function(buf){if(!Buffer.isBuffer(buf))throw new Error("Input must be a buffer");var checkedBuf=Buffer.alloc(buf.length+4),hash=Base58Check.checksum(buf);return buf.copy(checkedBuf),hash.copy(checkedBuf,buf.length),Base58.encode(checkedBuf)},Base58Check.prototype.fromBuffer=function(buf){return this.buf=buf,this},Base58Check.fromBuffer=function(buf){return(new Base58Check).fromBuffer(buf)},Base58Check.fromHex=function(hex){return Base58Check.fromBuffer(Buffer.from(hex,"hex"))},Base58Check.prototype.fromString=function(str){var buf=Base58Check.decode(str);return this.buf=buf,this},Base58Check.fromString=function(str){var buf=Base58Check.decode(str);return new Base58(buf)},Base58Check.prototype.toBuffer=function(){return this.buf},Base58Check.prototype.toHex=function(){return this.toBuffer().toString("hex")},Base58Check.prototype.toString=function(){return Base58Check.encode(this.buf)},module.exports=Base58Check},function(module,exports,__webpack_require__){"use strict";var BufferWriter=__webpack_require__(14),BufferReader=__webpack_require__(16),BN=__webpack_require__(2),Varint=function Varint(buf){if(!(this instanceof Varint))return new Varint(buf);if(Buffer.isBuffer(buf))this.buf=buf;else if("number"==typeof buf){var num=buf;this.fromNumber(num)}else if(buf instanceof BN){var bn=buf;this.fromBN(bn)}else if(buf){var obj=buf;this.set(obj)}};Varint.prototype.set=function(obj){return this.buf=obj.buf||this.buf,this},Varint.prototype.fromString=function(str){return this.set({buf:Buffer.from(str,"hex")}),this},Varint.prototype.toString=function(){return this.buf.toString("hex")},Varint.prototype.fromBuffer=function(buf){return this.buf=buf,this},Varint.prototype.fromBufferReader=function(br){return this.buf=br.readVarintBuf(),this},Varint.prototype.fromBN=function(bn){return this.buf=BufferWriter().writeVarintBN(bn).concat(),this},Varint.prototype.fromNumber=function(num){return this.buf=BufferWriter().writeVarintNum(num).concat(),this},Varint.prototype.toBuffer=function(){return this.buf},Varint.prototype.toBN=function(){return BufferReader(this.buf).readVarintBN()},Varint.prototype.toNumber=function(){return BufferReader(this.buf).readVarintNum()},module.exports=Varint},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(0),$=__webpack_require__(1),errors=__webpack_require__(8),BufferWriter=__webpack_require__(14),buffer=__webpack_require__(7),JSUtil=__webpack_require__(3),Script=__webpack_require__(10),Sighash=__webpack_require__(17),Output=__webpack_require__(18);function Input(params){return this instanceof Input?params?this._fromObject(params):void 0:new Input(params)}Input.MAXINT=4294967295,Input.DEFAULT_SEQNUMBER=4294967295,Input.DEFAULT_LOCKTIME_SEQNUMBER=4294967294,Input.DEFAULT_RBF_SEQNUMBER=4294967293,Input.BASE_SIZE=40,Object.defineProperty(Input.prototype,"script",{configurable:!1,enumerable:!0,get:function(){return this.isNull()?null:(this._script||(this._script=new Script(this._scriptBuffer),this._script._isInput=!0),this._script)}}),Input.fromObject=function(obj){return $.checkArgument(_.isObject(obj)),(new Input)._fromObject(obj)},Input.prototype._fromObject=function(params){var prevTxId;if(prevTxId=_.isString(params.prevTxId)&&JSUtil.isHexa(params.prevTxId)?buffer.Buffer.from(params.prevTxId,"hex"):params.prevTxId,this.output=params.output?params.output instanceof Output?params.output:new Output(params.output):void 0,this.prevTxId=prevTxId||params.txidbuf,this.outputIndex=_.isUndefined(params.outputIndex)?params.txoutnum:params.outputIndex,this.sequenceNumber=_.isUndefined(params.sequenceNumber)?_.isUndefined(params.seqnum)?4294967295:params.seqnum:params.sequenceNumber,_.isUndefined(params.script)&&_.isUndefined(params.scriptBuffer))throw new errors.Transaction.Input.MissingScript;return this.setScript(params.scriptBuffer||params.script),this},Input.prototype.toObject=Input.prototype.toJSON=function(){var obj={prevTxId:this.prevTxId.toString("hex"),outputIndex:this.outputIndex,sequenceNumber:this.sequenceNumber,script:this._scriptBuffer.toString("hex")};return this.script&&(obj.scriptString=this.script.toString()),this.output&&(obj.output=this.output.toObject()),obj},Input.fromBufferReader=function(br){var input=new Input;return input.prevTxId=br.readReverse(32),input.outputIndex=br.readUInt32LE(),input._scriptBuffer=br.readVarLengthBuffer(),input.sequenceNumber=br.readUInt32LE(),input},Input.prototype.toBufferWriter=function(writer){writer||(writer=new BufferWriter),writer.writeReverse(this.prevTxId),writer.writeUInt32LE(this.outputIndex);var script=this._scriptBuffer;return writer.writeVarintNum(script.length),writer.write(script),writer.writeUInt32LE(this.sequenceNumber),writer},Input.prototype.setScript=function(script){if(this._script=null,script instanceof Script)this._script=script,this._script._isInput=!0,this._scriptBuffer=script.toBuffer();else if(null===script)this._script=Script.empty(),this._script._isInput=!0,this._scriptBuffer=this._script.toBuffer();else if(JSUtil.isHexa(script))this._scriptBuffer=buffer.Buffer.from(script,"hex");else if(_.isString(script))this._script=new Script(script),this._script._isInput=!0,this._scriptBuffer=this._script.toBuffer();else{if(!Buffer.isBuffer(script))throw new TypeError("Invalid argument type: script");this._scriptBuffer=buffer.Buffer.from(script)}return this},Input.prototype.getSignatures=function(){throw new errors.AbstractMethodInvoked("Trying to sign unsupported output type (only P2PKH and P2SH multisig inputs are supported) for input: "+JSON.stringify(this))},Input.prototype.isFullySigned=function(){throw new errors.AbstractMethodInvoked("Input#isFullySigned")},Input.prototype.isFinal=function(){return this.sequenceNumber===Input.MAXINT},Input.prototype.addSignature=function(){throw new errors.AbstractMethodInvoked("Input#addSignature")},Input.prototype.clearSignatures=function(){throw new errors.AbstractMethodInvoked("Input#clearSignatures")},Input.prototype.isValidSignature=function(transaction,signature){return signature.signature.nhashtype=signature.sigtype,Sighash.verify(transaction,signature.signature,signature.publicKey,signature.inputIndex,this.output.script,this.output.satoshisBN)},Input.prototype.isNull=function(){return"0000000000000000000000000000000000000000000000000000000000000000"===this.prevTxId.toString("hex")&&4294967295===this.outputIndex},Input.prototype._estimateSize=function(){return this.toBufferWriter().toBuffer().length},module.exports=Input},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(0),$=__webpack_require__(1),inherits=__webpack_require__(11),JSUtil=__webpack_require__(3),PublicKey=__webpack_require__(13),errors=__webpack_require__(8),Signature=__webpack_require__(9);function TransactionSignature(arg){if(!(this instanceof TransactionSignature))return new TransactionSignature(arg);if(arg instanceof TransactionSignature)return arg;if(_.isObject(arg))return this._fromObject(arg);throw new errors.InvalidArgument("TransactionSignatures must be instantiated from an object")}inherits(TransactionSignature,Signature),TransactionSignature.prototype._fromObject=function(arg){return this._checkObjectArgs(arg),this.publicKey=new PublicKey(arg.publicKey),this.prevTxId=Buffer.isBuffer(arg.prevTxId)?arg.prevTxId:Buffer.from(arg.prevTxId,"hex"),this.outputIndex=arg.outputIndex,this.inputIndex=arg.inputIndex,this.signature=arg.signature instanceof Signature?arg.signature:Buffer.isBuffer(arg.signature)?Signature.fromBuffer(arg.signature):Signature.fromString(arg.signature),this.sigtype=arg.sigtype,this},TransactionSignature.prototype._checkObjectArgs=function(arg){$.checkArgument(PublicKey(arg.publicKey),"publicKey"),$.checkArgument(!_.isUndefined(arg.inputIndex),"inputIndex"),$.checkArgument(!_.isUndefined(arg.outputIndex),"outputIndex"),$.checkState(_.isNumber(arg.inputIndex),"inputIndex must be a number"),$.checkState(_.isNumber(arg.outputIndex),"outputIndex must be a number"),$.checkArgument(arg.signature,"signature"),$.checkArgument(arg.prevTxId,"prevTxId"),$.checkState(arg.signature instanceof Signature||Buffer.isBuffer(arg.signature)||JSUtil.isHexa(arg.signature),"signature must be a buffer or hexa value"),$.checkState(Buffer.isBuffer(arg.prevTxId)||JSUtil.isHexa(arg.prevTxId),"prevTxId must be a buffer or hexa value"),$.checkArgument(arg.sigtype,"sigtype"),$.checkState(_.isNumber(arg.sigtype),"sigtype must be a number")},TransactionSignature.prototype.toObject=TransactionSignature.prototype.toJSON=function(){return{publicKey:this.publicKey.toString(),prevTxId:this.prevTxId.toString("hex"),outputIndex:this.outputIndex,inputIndex:this.inputIndex,signature:this.signature.toString(),sigtype:this.sigtype}},TransactionSignature.fromObject=function(object){return $.checkArgument(object),new TransactionSignature(object)},module.exports=TransactionSignature},function(module,exports,__webpack_require__){"use strict";var BN=__webpack_require__(6),utils=__webpack_require__(5),getNAF=utils.getNAF,getJSF=utils.getJSF,assert=utils.assert;function BaseCurve(type,conf){this.type=type,this.p=new BN(conf.p,16),this.red=conf.prime?BN.red(conf.prime):BN.mont(this.p),this.zero=new BN(0).toRed(this.red),this.one=new BN(1).toRed(this.red),this.two=new BN(2).toRed(this.red),this.n=conf.n&&new BN(conf.n,16),this.g=conf.g&&this.pointFromJSON(conf.g,conf.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var adjustCount=this.n&&this.p.div(this.n);!adjustCount||adjustCount.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function BasePoint(curve,type){this.curve=curve,this.type=type,this.precomputed=null}module.exports=BaseCurve,BaseCurve.prototype.point=function(){throw new Error("Not implemented")},BaseCurve.prototype.validate=function(){throw new Error("Not implemented")},BaseCurve.prototype._fixedNafMul=function(p,k){assert(p.precomputed);var doubles=p._getDoubles(),naf=getNAF(k,1,this._bitLength),I=(1<<doubles.step+1)-(doubles.step%2==0?2:1);I/=3;for(var repr=[],j=0;j<naf.length;j+=doubles.step){var nafW=0;for(k=j+doubles.step-1;k>=j;k--)nafW=(nafW<<1)+naf[k];repr.push(nafW)}for(var a=this.jpoint(null,null,null),b=this.jpoint(null,null,null),i=I;i>0;i--){for(j=0;j<repr.length;j++){(nafW=repr[j])===i?b=b.mixedAdd(doubles.points[j]):nafW===-i&&(b=b.mixedAdd(doubles.points[j].neg()))}a=a.add(b)}return a.toP()},BaseCurve.prototype._wnafMul=function(p,k){var w=4,nafPoints=p._getNAFPoints(w);w=nafPoints.wnd;for(var wnd=nafPoints.points,naf=getNAF(k,w,this._bitLength),acc=this.jpoint(null,null,null),i=naf.length-1;i>=0;i--){for(k=0;i>=0&&0===naf[i];i--)k++;if(i>=0&&k++,acc=acc.dblp(k),i<0)break;var z=naf[i];assert(0!==z),acc="affine"===p.type?z>0?acc.mixedAdd(wnd[z-1>>1]):acc.mixedAdd(wnd[-z-1>>1].neg()):z>0?acc.add(wnd[z-1>>1]):acc.add(wnd[-z-1>>1].neg())}return"affine"===p.type?acc.toP():acc},BaseCurve.prototype._wnafMulAdd=function(defW,points,coeffs,len,jacobianResult){for(var wndWidth=this._wnafT1,wnd=this._wnafT2,naf=this._wnafT3,max=0,i=0;i<len;i++){var nafPoints=(p=points[i])._getNAFPoints(defW);wndWidth[i]=nafPoints.wnd,wnd[i]=nafPoints.points}for(i=len-1;i>=1;i-=2){var a=i-1,b=i;if(1===wndWidth[a]&&1===wndWidth[b]){var comb=[points[a],null,null,points[b]];0===points[a].y.cmp(points[b].y)?(comb[1]=points[a].add(points[b]),comb[2]=points[a].toJ().mixedAdd(points[b].neg())):0===points[a].y.cmp(points[b].y.redNeg())?(comb[1]=points[a].toJ().mixedAdd(points[b]),comb[2]=points[a].add(points[b].neg())):(comb[1]=points[a].toJ().mixedAdd(points[b]),comb[2]=points[a].toJ().mixedAdd(points[b].neg()));var index=[-3,-1,-5,-7,0,7,5,1,3],jsf=getJSF(coeffs[a],coeffs[b]);max=Math.max(jsf[0].length,max),naf[a]=new Array(max),naf[b]=new Array(max);for(var j=0;j<max;j++){var ja=0|jsf[0][j],jb=0|jsf[1][j];naf[a][j]=index[3*(ja+1)+(jb+1)],naf[b][j]=0,wnd[a]=comb}}else naf[a]=getNAF(coeffs[a],wndWidth[a],this._bitLength),naf[b]=getNAF(coeffs[b],wndWidth[b],this._bitLength),max=Math.max(naf[a].length,max),max=Math.max(naf[b].length,max)}var acc=this.jpoint(null,null,null),tmp=this._wnafT4;for(i=max;i>=0;i--){for(var k=0;i>=0;){var zero=!0;for(j=0;j<len;j++)tmp[j]=0|naf[j][i],0!==tmp[j]&&(zero=!1);if(!zero)break;k++,i--}if(i>=0&&k++,acc=acc.dblp(k),i<0)break;for(j=0;j<len;j++){var p,z=tmp[j];0!==z&&(z>0?p=wnd[j][z-1>>1]:z<0&&(p=wnd[j][-z-1>>1].neg()),acc="affine"===p.type?acc.mixedAdd(p):acc.add(p))}}for(i=0;i<len;i++)wnd[i]=null;return jacobianResult?acc:acc.toP()},BaseCurve.BasePoint=BasePoint,BasePoint.prototype.eq=function(){throw new Error("Not implemented")},BasePoint.prototype.validate=function(){return this.curve.validate(this)},BaseCurve.prototype.decodePoint=function(bytes,enc){bytes=utils.toArray(bytes,enc);var len=this.p.byteLength();if((4===bytes[0]||6===bytes[0]||7===bytes[0])&&bytes.length-1==2*len)return 6===bytes[0]?assert(bytes[bytes.length-1]%2==0):7===bytes[0]&&assert(bytes[bytes.length-1]%2==1),this.point(bytes.slice(1,1+len),bytes.slice(1+len,1+2*len));if((2===bytes[0]||3===bytes[0])&&bytes.length-1===len)return this.pointFromX(bytes.slice(1,1+len),3===bytes[0]);throw new Error("Unknown point format")},BasePoint.prototype.encodeCompressed=function(enc){return this.encode(enc,!0)},BasePoint.prototype._encode=function(compact){var len=this.curve.p.byteLength(),x=this.getX().toArray("be",len);return compact?[this.getY().isEven()?2:3].concat(x):[4].concat(x,this.getY().toArray("be",len))},BasePoint.prototype.encode=function(enc,compact){return utils.encode(this._encode(compact),enc)},BasePoint.prototype.precompute=function(power){if(this.precomputed)return this;var precomputed={doubles:null,naf:null,beta:null};return precomputed.naf=this._getNAFPoints(8),precomputed.doubles=this._getDoubles(4,power),precomputed.beta=this._getBeta(),this.precomputed=precomputed,this},BasePoint.prototype._hasDoubles=function(k){if(!this.precomputed)return!1;var doubles=this.precomputed.doubles;return!!doubles&&doubles.points.length>=Math.ceil((k.bitLength()+1)/doubles.step)},BasePoint.prototype._getDoubles=function(step,power){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var doubles=[this],acc=this,i=0;i<power;i+=step){for(var j=0;j<step;j++)acc=acc.dbl();doubles.push(acc)}return{step:step,points:doubles}},BasePoint.prototype._getNAFPoints=function(wnd){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var res=[this],max=(1<<wnd)-1,dbl=1===max?null:this.dbl(),i=1;i<max;i++)res[i]=res[i-1].add(dbl);return{wnd:wnd,points:res}},BasePoint.prototype._getBeta=function(){return null},BasePoint.prototype.dblp=function(k){for(var r=this,i=0;i<k;i++)r=r.dbl();return r}},function(module,exports,__webpack_require__){var hash=exports;hash.utils=__webpack_require__(12),hash.common=__webpack_require__(25),hash.sha=__webpack_require__(93),hash.ripemd=__webpack_require__(97),hash.hmac=__webpack_require__(98),hash.sha1=hash.sha.sha1,hash.sha256=hash.sha.sha256,hash.sha224=hash.sha.sha224,hash.sha384=hash.sha.sha384,hash.sha512=hash.sha.sha512,hash.ripemd160=hash.ripemd.ripemd160},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(0),Address=__webpack_require__(23),Base58Check=__webpack_require__(26),BN=__webpack_require__(2),JSUtil=__webpack_require__(3),Networks=__webpack_require__(21),Point=__webpack_require__(22),PublicKey=__webpack_require__(13),Random=__webpack_require__(35),$=__webpack_require__(1);function PrivateKey(data,network){if(!(this instanceof PrivateKey))return new PrivateKey(data,network);if(data instanceof PrivateKey)return data;var info=this._classifyArguments(data,network);if(!info.bn||0===info.bn.cmp(new BN(0)))throw new TypeError("Number can not be equal to zero, undefined, null or false");if(!info.bn.lt(Point.getN()))throw new TypeError("Number must be less than N");if(void 0===info.network)throw new TypeError('Must specify the network ("livenet" or "testnet")');return JSUtil.defineImmutable(this,{bn:info.bn,compressed:info.compressed,network:info.network}),Object.defineProperty(this,"publicKey",{configurable:!1,enumerable:!0,get:this.toPublicKey.bind(this)}),this}PrivateKey.prototype._classifyArguments=function(data,network){var info={compressed:!0,network:network?Networks.get(network):Networks.defaultNetwork};if(_.isUndefined(data)||_.isNull(data))info.bn=PrivateKey._getRandomBN();else if(data instanceof BN)info.bn=data;else if(data instanceof Buffer||data instanceof Uint8Array)info=PrivateKey._transformBuffer(data,network);else if(data.bn&&data.network)info=PrivateKey._transformObject(data);else if(!network&&Networks.get(data))info.bn=PrivateKey._getRandomBN(),info.network=Networks.get(data);else{if("string"!=typeof data)throw new TypeError("First argument is an unrecognized data type.");JSUtil.isHexa(data)?info.bn=new BN(Buffer.from(data,"hex")):info=PrivateKey._transformWIF(data,network)}return info},PrivateKey._getRandomBN=function(){var condition,bn;do{var privbuf=Random.getRandomBuffer(32);condition=(bn=BN.fromBuffer(privbuf)).lt(Point.getN())}while(!condition);return bn},PrivateKey._transformBuffer=function(buf,network){var info={};if(32===buf.length)return PrivateKey._transformBNBuffer(buf,network);if(info.network=Networks.get(buf[0],"privatekey"),!info.network)throw new Error("Invalid network");if(network&&info.network!==Networks.get(network))throw new TypeError("Private key network mismatch");if(34===buf.length&&1===buf[33])info.compressed=!0;else{if(33!==buf.length)throw new Error("Length of buffer must be 33 (uncompressed) or 34 (compressed)");info.compressed=!1}return info.bn=BN.fromBuffer(buf.slice(1,33)),info},PrivateKey._transformBNBuffer=function(buf,network){var info={};return info.network=Networks.get(network)||Networks.defaultNetwork,info.bn=BN.fromBuffer(buf),info.compressed=!1,info},PrivateKey._transformWIF=function(str,network){return PrivateKey._transformBuffer(Base58Check.decode(str),network)},PrivateKey.fromBuffer=function(buf,network){return new PrivateKey(buf,network)},PrivateKey.fromHex=function(hex,network){return PrivateKey.fromBuffer(Buffer.from(hex,"hex"),network)},PrivateKey._transformObject=function(json){return{bn:new BN(json.bn,"hex"),network:Networks.get(json.network),compressed:json.compressed}},PrivateKey.fromString=PrivateKey.fromWIF=function(str){return $.checkArgument(_.isString(str),"First argument is expected to be a string."),new PrivateKey(str)},PrivateKey.fromObject=PrivateKey.fromJSON=function(obj){return $.checkArgument(_.isObject(obj),"First argument is expected to be an object."),new PrivateKey(obj)},PrivateKey.fromRandom=function(network){var bn=PrivateKey._getRandomBN();return new PrivateKey(bn,network)},PrivateKey.getValidationError=function(data,network){var error;try{new PrivateKey(data,network)}catch(e){error=e}return error},PrivateKey.isValid=function(data,network){return!!data&&!PrivateKey.getValidationError(data,network)},PrivateKey.prototype.toString=function(){return this.toWIF()},PrivateKey.prototype.toWIF=function(){var buf,network=this.network;return buf=this.compressed?Buffer.concat([Buffer.from([network.privatekey]),this.bn.toBuffer({size:32}),Buffer.from([1])]):Buffer.concat([Buffer.from([network.privatekey]),this.bn.toBuffer({size:32})]),Base58Check.encode(buf)},PrivateKey.prototype.toBigNumber=function(){return this.bn},PrivateKey.prototype.toBuffer=function(){return this.bn.toBuffer({size:32})},PrivateKey.prototype.toHex=function(){return this.toBuffer().toString("hex")},PrivateKey.prototype.toPublicKey=function(){return this._pubkey||(this._pubkey=PublicKey.fromPrivateKey(this)),this._pubkey},PrivateKey.prototype.toAddress=function(network){var pubkey=this.toPublicKey();return Address.fromPublicKey(pubkey,network||this.network)},PrivateKey.prototype.toObject=PrivateKey.prototype.toJSON=function(){return{bn:this.bn.toString("hex"),compressed:this.compressed,network:this.network.toString()}},PrivateKey.prototype.inspect=function(){var uncompressed=this.compressed?"":", uncompressed";return"<PrivateKey: "+this.toHex()+", network: "+this.network+uncompressed+">"},module.exports=PrivateKey},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(0),bs58=__webpack_require__(59),buffer=__webpack_require__(7),ALPHABET="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz".split(""),Base58=function Base58(obj){if(!(this instanceof Base58))return new Base58(obj);if(Buffer.isBuffer(obj)){var buf=obj;this.fromBuffer(buf)}else if("string"==typeof obj){var str=obj;this.fromString(str)}};Base58.validCharacters=function(chars){return buffer.Buffer.isBuffer(chars)&&(chars=chars.toString()),_.every(_.map(chars,(function(char){return _.includes(ALPHABET,char)})))},Base58.prototype.set=function(obj){return this.buf=obj.buf||this.buf||void 0,this},Base58.encode=function(buf){if(!buffer.Buffer.isBuffer(buf))throw new Error("Input should be a buffer");return bs58.encode(buf)},Base58.decode=function(str){if("string"!=typeof str)throw new Error("Input should be a string");return Buffer.from(bs58.decode(str))},Base58.prototype.fromBuffer=function(buf){return this.buf=buf,this},Base58.fromBuffer=function(buf){return(new Base58).fromBuffer(buf)},Base58.fromHex=function(hex){return Base58.fromBuffer(Buffer.from(hex,"hex"))},Base58.prototype.fromString=function(str){var buf=Base58.decode(str);return this.buf=buf,this},Base58.fromString=function(str){return(new Base58).fromString(str)},Base58.prototype.toBuffer=function(){return this.buf},Base58.prototype.toHex=function(){return this.toBuffer().toString("hex")},Base58.prototype.toString=function(){return Base58.encode(this.buf)},module.exports=Base58},function(module,exports,__webpack_require__){module.exports=__webpack_require__(63),module.exports.Input=__webpack_require__(43),module.exports.Output=__webpack_require__(18),module.exports.UnspentOutput=__webpack_require__(64),module.exports.Signature=__webpack_require__(29),module.exports.Sighash=__webpack_require__(17)},function(module,exports,__webpack_require__){"use strict";function Random(){}Random.getRandomBuffer=function(size){return process.browser?Random.getRandomBufferBrowser(size):Random.getRandomBufferNode(size)},Random.getRandomBufferNode=function(size){return __webpack_require__(40).randomBytes(size)},Random.getRandomBufferBrowser=function(size){if(!window.crypto&&!window.msCrypto)throw new Error("window.crypto not available");var crypto;if(window.crypto&&window.crypto.getRandomValues)crypto=window.crypto;else{if(!window.msCrypto||!window.msCrypto.getRandomValues)throw new Error("window.crypto.getRandomValues not available");crypto=window.msCrypto}var bbuf=new Uint8Array(size);return crypto.getRandomValues(bbuf),Buffer.from(bbuf)},module.exports=Random},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(0),BN=__webpack_require__(2),BufferReader=__webpack_require__(16),BufferWriter=__webpack_require__(14),Hash=__webpack_require__(4),$=__webpack_require__(1),BlockHeader=function BlockHeader(arg){if(!(this instanceof BlockHeader))return new BlockHeader(arg);var info=BlockHeader._from(arg);return this.version=info.version,this.prevHash=info.prevHash,this.merkleRoot=info.merkleRoot,this.time=info.time,this.timestamp=info.time,this.bits=info.bits,this.nonce=info.nonce,info.hash&&$.checkState(this.hash===info.hash,"Argument object hash property does not match block hash."),this};BlockHeader._from=function(arg){var info={};if(Buffer.isBuffer(arg))info=BlockHeader._fromBufferReader(BufferReader(arg));else{if(!_.isObject(arg))throw new TypeError("Unrecognized argument for BlockHeader");info=BlockHeader._fromObject(arg)}return info},BlockHeader._fromObject=function(data){$.checkArgument(data,"data is required");var prevHash=data.prevHash,merkleRoot=data.merkleRoot;return _.isString(data.prevHash)&&(prevHash=Buffer.from(data.prevHash,"hex").reverse()),_.isString(data.merkleRoot)&&(merkleRoot=Buffer.from(data.merkleRoot,"hex").reverse()),{hash:data.hash,version:data.version,prevHash:prevHash,merkleRoot:merkleRoot,time:data.time,timestamp:data.time,bits:data.bits,nonce:data.nonce}},BlockHeader.fromObject=function(obj){var info=BlockHeader._fromObject(obj);return new BlockHeader(info)},BlockHeader.fromRawBlock=function(data){Buffer.isBuffer(data)||(data=Buffer.from(data,"binary"));var br=BufferReader(data);br.pos=BlockHeader.Constants.START_OF_HEADER;var info=BlockHeader._fromBufferReader(br);return new BlockHeader(info)},BlockHeader.fromBuffer=function(buf){var info=BlockHeader._fromBufferReader(BufferReader(buf));return new BlockHeader(info)},BlockHeader.fromString=function(str){var buf=Buffer.from(str,"hex");return BlockHeader.fromBuffer(buf)},BlockHeader._fromBufferReader=function(br){var info={};return info.version=br.readInt32LE(),info.prevHash=br.read(32),info.merkleRoot=br.read(32),info.time=br.readUInt32LE(),info.bits=br.readUInt32LE(),info.nonce=br.readUInt32LE(),info},BlockHeader.fromBufferReader=function(br){var info=BlockHeader._fromBufferReader(br);return new BlockHeader(info)},BlockHeader.prototype.toObject=BlockHeader.prototype.toJSON=function(){return{hash:this.hash,version:this.version,prevHash:Buffer.from(this.prevHash).reverse().toString("hex"),merkleRoot:Buffer.from(this.merkleRoot).reverse().toString("hex"),time:this.time,bits:this.bits,nonce:this.nonce}},BlockHeader.prototype.toBuffer=function(){return this.toBufferWriter().concat()},BlockHeader.prototype.toString=function(){return this.toBuffer().toString("hex")},BlockHeader.prototype.toBufferWriter=function(bw){return bw||(bw=new BufferWriter),bw.writeInt32LE(this.version),bw.write(this.prevHash),bw.write(this.merkleRoot),bw.writeUInt32LE(this.time),bw.writeUInt32LE(this.bits),bw.writeUInt32LE(this.nonce),bw},BlockHeader.prototype.getTargetDifficulty=function(bits){bits=bits||this.bits;for(var target=new BN(16777215&bits),mov=8*((bits>>>24)-3);mov-- >0;)target=target.mul(new BN(2));return target},BlockHeader.prototype.getDifficulty=function(){var difficulty1TargetBN=this.getTargetDifficulty(486604799).mul(new BN(Math.pow(10,8))),currentTargetBN=this.getTargetDifficulty(),difficultyString=difficulty1TargetBN.div(currentTargetBN).toString(10),decimalPos=difficultyString.length-8;return difficultyString=difficultyString.slice(0,decimalPos)+"."+difficultyString.slice(decimalPos),parseFloat(difficultyString)},BlockHeader.prototype._getHash=function(){var buf=this.toBuffer();return Hash.sha256sha256(buf)};var idProperty={configurable:!1,enumerable:!0,get:function(){return this._id||(this._id=BufferReader(this._getHash()).readReverse().toString("hex")),this._id},set:_.noop};Object.defineProperty(BlockHeader.prototype,"id",idProperty),Object.defineProperty(BlockHeader.prototype,"hash",idProperty),BlockHeader.prototype.validTimestamp=function(){var currentTime=Math.round((new Date).getTime()/1e3);return!(this.time>currentTime+BlockHeader.Constants.MAX_TIME_OFFSET)},BlockHeader.prototype.validProofOfWork=function(){var pow=new BN(this.id,"hex"),target=this.getTargetDifficulty();return!(pow.cmp(target)>0)},BlockHeader.prototype.inspect=function(){return"<BlockHeader "+this.id+">"},BlockHeader.Constants={START_OF_HEADER:8,MAX_TIME_OFFSET:7200,LARGEST_HASH:new BN("10000000000000000000000000000000000000000000000000000000000000000","hex")},module.exports=BlockHeader},function(module,exports,__webpack_require__){module.exports=minimatch,minimatch.Minimatch=Minimatch;var path={sep:"/"};try{path=__webpack_require__(15)}catch(er){}var GLOBSTAR=minimatch.GLOBSTAR=Minimatch.GLOBSTAR={},expand=__webpack_require__(80),plTypes={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},reSpecials="().*{}+?[]^$\\!".split("").reduce((function(set,c){return set[c]=!0,set}),{});var slashSplit=/\/+/;function ext(a,b){a=a||{},b=b||{};var t={};return Object.keys(b).forEach((function(k){t[k]=b[k]})),Object.keys(a).forEach((function(k){t[k]=a[k]})),t}function minimatch(p,pattern,options){if("string"!=typeof pattern)throw new TypeError("glob pattern string required");return options||(options={}),!(!options.nocomment&&"#"===pattern.charAt(0))&&(""===pattern.trim()?""===p:new Minimatch(pattern,options).match(p))}function Minimatch(pattern,options){if(!(this instanceof Minimatch))return new Minimatch(pattern,options);if("string"!=typeof pattern)throw new TypeError("glob pattern string required");options||(options={}),pattern=pattern.trim(),"/"!==path.sep&&(pattern=pattern.split(path.sep).join("/")),this.options=options,this.set=[],this.pattern=pattern,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.make()}function braceExpand(pattern,options){if(options||(options=this instanceof Minimatch?this.options:{}),void 0===(pattern=void 0===pattern?this.pattern:pattern))throw new TypeError("undefined pattern");return options.nobrace||!pattern.match(/\{.*\}/)?[pattern]:expand(pattern)}minimatch.filter=function(pattern,options){return options=options||{},function(p,i,list){return minimatch(p,pattern,options)}},minimatch.defaults=function(def){if(!def||!Object.keys(def).length)return minimatch;var orig=minimatch,m=function(p,pattern,options){return orig.minimatch(p,pattern,ext(def,options))};return m.Minimatch=function(pattern,options){return new orig.Minimatch(pattern,ext(def,options))},m},Minimatch.defaults=function(def){return def&&Object.keys(def).length?minimatch.defaults(def).Minimatch:Minimatch},Minimatch.prototype.debug=function(){},Minimatch.prototype.make=function(){if(this._made)return;var pattern=this.pattern,options=this.options;if(!options.nocomment&&"#"===pattern.charAt(0))return void(this.comment=!0);if(!pattern)return void(this.empty=!0);this.parseNegate();var set=this.globSet=this.braceExpand();options.debug&&(this.debug=console.error);this.debug(this.pattern,set),set=this.globParts=set.map((function(s){return s.split(slashSplit)})),this.debug(this.pattern,set),set=set.map((function(s,si,set){return s.map(this.parse,this)}),this),this.debug(this.pattern,set),set=set.filter((function(s){return-1===s.indexOf(!1)})),this.debug(this.pattern,set),this.set=set},Minimatch.prototype.parseNegate=function(){var pattern=this.pattern,negate=!1,options=this.options,negateOffset=0;if(options.nonegate)return;for(var i=0,l=pattern.length;i<l&&"!"===pattern.charAt(i);i++)negate=!negate,negateOffset++;negateOffset&&(this.pattern=pattern.substr(negateOffset));this.negate=negate},minimatch.braceExpand=function(pattern,options){return braceExpand(pattern,options)},Minimatch.prototype.braceExpand=braceExpand,Minimatch.prototype.parse=function(pattern,isSub){if(pattern.length>65536)throw new TypeError("pattern is too long");var options=this.options;if(!options.noglobstar&&"**"===pattern)return GLOBSTAR;if(""===pattern)return"";var stateChar,re="",hasMagic=!!options.nocase,escaping=!1,patternListStack=[],negativeLists=[],inClass=!1,reClassStart=-1,classStart=-1,patternStart="."===pattern.charAt(0)?"":options.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",self=this;function clearStateChar(){if(stateChar){switch(stateChar){case"*":re+="[^/]*?",hasMagic=!0;break;case"?":re+="[^/]",hasMagic=!0;break;default:re+="\\"+stateChar}self.debug("clearStateChar %j %j",stateChar,re),stateChar=!1}}for(var c,i=0,len=pattern.length;i<len&&(c=pattern.charAt(i));i++)if(this.debug("%s\t%s %s %j",pattern,i,re,c),escaping&&reSpecials[c])re+="\\"+c,escaping=!1;else switch(c){case"/":return!1;case"\\":clearStateChar(),escaping=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",pattern,i,re,c),inClass){this.debug("  in class"),"!"===c&&i===classStart+1&&(c="^"),re+=c;continue}self.debug("call clearStateChar %j",stateChar),clearStateChar(),stateChar=c,options.noext&&clearStateChar();continue;case"(":if(inClass){re+="(";continue}if(!stateChar){re+="\\(";continue}patternListStack.push({type:stateChar,start:i-1,reStart:re.length,open:plTypes[stateChar].open,close:plTypes[stateChar].close}),re+="!"===stateChar?"(?:(?!(?:":"(?:",this.debug("plType %j %j",stateChar,re),stateChar=!1;continue;case")":if(inClass||!patternListStack.length){re+="\\)";continue}clearStateChar(),hasMagic=!0;var pl=patternListStack.pop();re+=pl.close,"!"===pl.type&&negativeLists.push(pl),pl.reEnd=re.length;continue;case"|":if(inClass||!patternListStack.length||escaping){re+="\\|",escaping=!1;continue}clearStateChar(),re+="|";continue;case"[":if(clearStateChar(),inClass){re+="\\"+c;continue}inClass=!0,classStart=i,reClassStart=re.length,re+=c;continue;case"]":if(i===classStart+1||!inClass){re+="\\"+c,escaping=!1;continue}if(inClass){var cs=pattern.substring(classStart+1,i);try{RegExp("["+cs+"]")}catch(er){var sp=this.parse(cs,SUBPARSE);re=re.substr(0,reClassStart)+"\\["+sp[0]+"\\]",hasMagic=hasMagic||sp[1],inClass=!1;continue}}hasMagic=!0,inClass=!1,re+=c;continue;default:clearStateChar(),escaping?escaping=!1:!reSpecials[c]||"^"===c&&inClass||(re+="\\"),re+=c}inClass&&(cs=pattern.substr(classStart+1),sp=this.parse(cs,SUBPARSE),re=re.substr(0,reClassStart)+"\\["+sp[0],hasMagic=hasMagic||sp[1]);for(pl=patternListStack.pop();pl;pl=patternListStack.pop()){var tail=re.slice(pl.reStart+pl.open.length);this.debug("setting tail",re,pl),tail=tail.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(_,$1,$2){return $2||($2="\\"),$1+$1+$2+"|"})),this.debug("tail=%j\n   %s",tail,tail,pl,re);var t="*"===pl.type?"[^/]*?":"?"===pl.type?"[^/]":"\\"+pl.type;hasMagic=!0,re=re.slice(0,pl.reStart)+t+"\\("+tail}clearStateChar(),escaping&&(re+="\\\\");var addPatternStart=!1;switch(re.charAt(0)){case".":case"[":case"(":addPatternStart=!0}for(var n=negativeLists.length-1;n>-1;n--){var nl=negativeLists[n],nlBefore=re.slice(0,nl.reStart),nlFirst=re.slice(nl.reStart,nl.reEnd-8),nlLast=re.slice(nl.reEnd-8,nl.reEnd),nlAfter=re.slice(nl.reEnd);nlLast+=nlAfter;var openParensBefore=nlBefore.split("(").length-1,cleanAfter=nlAfter;for(i=0;i<openParensBefore;i++)cleanAfter=cleanAfter.replace(/\)[+*?]?/,"");var dollar="";""===(nlAfter=cleanAfter)&&isSub!==SUBPARSE&&(dollar="$"),re=nlBefore+nlFirst+nlAfter+dollar+nlLast}""!==re&&hasMagic&&(re="(?=.)"+re);addPatternStart&&(re=patternStart+re);if(isSub===SUBPARSE)return[re,hasMagic];if(!hasMagic)return function(s){return s.replace(/\\(.)/g,"$1")}(pattern);var flags=options.nocase?"i":"";try{var regExp=new RegExp("^"+re+"$",flags)}catch(er){return new RegExp("$.")}return regExp._glob=pattern,regExp._src=re,regExp};var SUBPARSE={};minimatch.makeRe=function(pattern,options){return new Minimatch(pattern,options||{}).makeRe()},Minimatch.prototype.makeRe=function(){if(this.regexp||!1===this.regexp)return this.regexp;var set=this.set;if(!set.length)return this.regexp=!1,this.regexp;var options=this.options,twoStar=options.noglobstar?"[^/]*?":options.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",flags=options.nocase?"i":"",re=set.map((function(pattern){return pattern.map((function(p){return p===GLOBSTAR?twoStar:"string"==typeof p?function(s){return s.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(p):p._src})).join("\\/")})).join("|");re="^(?:"+re+")$",this.negate&&(re="^(?!"+re+").*$");try{this.regexp=new RegExp(re,flags)}catch(ex){this.regexp=!1}return this.regexp},minimatch.match=function(list,pattern,options){var mm=new Minimatch(pattern,options=options||{});return list=list.filter((function(f){return mm.match(f)})),mm.options.nonull&&!list.length&&list.push(pattern),list},Minimatch.prototype.match=function(f,partial){if(this.debug("match",f,this.pattern),this.comment)return!1;if(this.empty)return""===f;if("/"===f&&partial)return!0;var options=this.options;"/"!==path.sep&&(f=f.split(path.sep).join("/"));f=f.split(slashSplit),this.debug(this.pattern,"split",f);var filename,i,set=this.set;for(this.debug(this.pattern,"set",set),i=f.length-1;i>=0&&!(filename=f[i]);i--);for(i=0;i<set.length;i++){var pattern=set[i],file=f;if(options.matchBase&&1===pattern.length&&(file=[filename]),this.matchOne(file,pattern,partial))return!!options.flipNegate||!this.negate}return!options.flipNegate&&this.negate},Minimatch.prototype.matchOne=function(file,pattern,partial){var options=this.options;this.debug("matchOne",{this:this,file:file,pattern:pattern}),this.debug("matchOne",file.length,pattern.length);for(var fi=0,pi=0,fl=file.length,pl=pattern.length;fi<fl&&pi<pl;fi++,pi++){this.debug("matchOne loop");var hit,p=pattern[pi],f=file[fi];if(this.debug(pattern,p,f),!1===p)return!1;if(p===GLOBSTAR){this.debug("GLOBSTAR",[pattern,p,f]);var fr=fi,pr=pi+1;if(pr===pl){for(this.debug("** at the end");fi<fl;fi++)if("."===file[fi]||".."===file[fi]||!options.dot&&"."===file[fi].charAt(0))return!1;return!0}for(;fr<fl;){var swallowee=file[fr];if(this.debug("\nglobstar while",file,fr,pattern,pr,swallowee),this.matchOne(file.slice(fr),pattern.slice(pr),partial))return this.debug("globstar found match!",fr,fl,swallowee),!0;if("."===swallowee||".."===swallowee||!options.dot&&"."===swallowee.charAt(0)){this.debug("dot detected!",file,fr,pattern,pr);break}this.debug("globstar swallow a segment, and continue"),fr++}return!(!partial||(this.debug("\n>>> no match, partial?",file,fr,pattern,pr),fr!==fl))}if("string"==typeof p?(hit=options.nocase?f.toLowerCase()===p.toLowerCase():f===p,this.debug("string match",p,f,hit)):(hit=f.match(p),this.debug("pattern match",p,f,hit)),!hit)return!1}if(fi===fl&&pi===pl)return!0;if(fi===fl)return partial;if(pi===pl)return fi===fl-1&&""===file[fi];throw new Error("wtf?")}},function(module,exports){module.exports=require("util")},function(module,exports,__webpack_require__){"use strict";function posix(path){return"/"===path.charAt(0)}function win32(path){var result=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/.exec(path),device=result[1]||"",isUnc=Boolean(device&&":"!==device.charAt(1));return Boolean(result[2]||isUnc)}module.exports="win32"===process.platform?win32:posix,module.exports.posix=posix,module.exports.win32=win32},function(module,exports){module.exports=require("crypto")},function(module,exports,__webpack_require__){"use strict";var pre,curves=exports,hash=__webpack_require__(31),curve=__webpack_require__(55),assert=__webpack_require__(5).assert;function PresetCurve(options){"short"===options.type?this.curve=new curve.short(options):"edwards"===options.type?this.curve=new curve.edwards(options):this.curve=new curve.mont(options),this.g=this.curve.g,this.n=this.curve.n,this.hash=options.hash,assert(this.g.validate(),"Invalid curve"),assert(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function defineCurve(name,options){Object.defineProperty(curves,name,{configurable:!0,enumerable:!0,get:function(){var curve=new PresetCurve(options);return Object.defineProperty(curves,name,{configurable:!0,enumerable:!0,value:curve}),curve}})}curves.PresetCurve=PresetCurve,defineCurve("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:hash.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),defineCurve("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:hash.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),defineCurve("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:hash.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),defineCurve("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:hash.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),defineCurve("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:hash.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),defineCurve("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash.sha256,gRed:!1,g:["9"]}),defineCurve("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{pre=__webpack_require__(99)}catch(e){pre=void 0}defineCurve("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:hash.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",pre]})},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(0),$=__webpack_require__(1),JSUtil=__webpack_require__(3);function Opcode(num){if(!(this instanceof Opcode))return new Opcode(num);var value;if(_.isNumber(num))value=num;else{if(!_.isString(num))throw new TypeError('Unrecognized num type: "'+typeof num+'" for Opcode');value=Opcode.map[num]}return JSUtil.defineImmutable(this,{num:value}),this}for(var k in Opcode.fromBuffer=function(buf){return $.checkArgument(Buffer.isBuffer(buf)),new Opcode(Number("0x"+buf.toString("hex")))},Opcode.fromNumber=function(num){return $.checkArgument(_.isNumber(num)),new Opcode(num)},Opcode.fromString=function(str){$.checkArgument(_.isString(str));var value=Opcode.map[str];if(void 0===value)throw new TypeError("Invalid opcodestr");return new Opcode(value)},Opcode.prototype.toHex=function(){return this.num.toString(16)},Opcode.prototype.toBuffer=function(){return Buffer.from(this.toHex(),"hex")},Opcode.prototype.toNumber=function(){return this.num},Opcode.prototype.toString=function(){var str=Opcode.reverseMap[this.num];if(void 0===str)throw new Error("Opcode does not have a string representation");return str},Opcode.smallInt=function(n){return $.checkArgument(_.isNumber(n),"Invalid Argument: n should be number"),$.checkArgument(n>=0&&n<=16,"Invalid Argument: n must be between 0 and 16"),0===n?Opcode("OP_0"):new Opcode(Opcode.map.OP_1+n-1)},Opcode.map={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SPLIT:127,OP_NUM2BIN:128,OP_BIN2NUM:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_CHECKLOCKTIMEVERIFY:177,OP_CHECKSEQUENCEVERIFY:178,OP_NOP1:176,OP_NOP2:177,OP_NOP3:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255},Opcode.reverseMap=[],Opcode.map)Opcode.reverseMap[Opcode.map[k]]=k;_.extend(Opcode,Opcode.map),Opcode.isSmallIntOp=function(opcode){return opcode instanceof Opcode&&(opcode=opcode.toNumber()),opcode===Opcode.map.OP_0||opcode>=Opcode.map.OP_1&&opcode<=Opcode.map.OP_16},Opcode.prototype.inspect=function(){return"<Opcode: "+this.toString()+", hex: "+this.toHex()+", decimal: "+this.num+">"},module.exports=Opcode},function(module,exports,__webpack_require__){module.exports=__webpack_require__(28),module.exports.PublicKey=__webpack_require__(115),module.exports.PublicKeyHash=__webpack_require__(116),module.exports.MultiSig=__webpack_require__(117),module.exports.MultiSigScriptHash=__webpack_require__(118)},function(module,exports){module.exports=require("events")},function(module,exports,__webpack_require__){module.exports=glob;var fs=__webpack_require__(19),rp=__webpack_require__(46),minimatch=__webpack_require__(37),inherits=(minimatch.Minimatch,__webpack_require__(11)),EE=__webpack_require__(44).EventEmitter,path=__webpack_require__(15),assert=__webpack_require__(24),isAbsolute=__webpack_require__(39),globSync=__webpack_require__(84),common=__webpack_require__(47),setopts=common.setopts,ownProp=common.ownProp,inflight=__webpack_require__(85),childrenIgnored=(__webpack_require__(38),common.childrenIgnored),isIgnored=common.isIgnored,once=__webpack_require__(49);function glob(pattern,options,cb){if("function"==typeof options&&(cb=options,options={}),options||(options={}),options.sync){if(cb)throw new TypeError("callback provided to sync glob");return globSync(pattern,options)}return new Glob(pattern,options,cb)}glob.sync=globSync;var GlobSync=glob.GlobSync=globSync.GlobSync;function Glob(pattern,options,cb){if("function"==typeof options&&(cb=options,options=null),options&&options.sync){if(cb)throw new TypeError("callback provided to sync glob");return new GlobSync(pattern,options)}if(!(this instanceof Glob))return new Glob(pattern,options,cb);setopts(this,pattern,options),this._didRealPath=!1;var n=this.minimatch.set.length;this.matches=new Array(n),"function"==typeof cb&&(cb=once(cb),this.on("error",cb),this.on("end",(function(matches){cb(null,matches)})));var self=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===n)return done();for(var i=0;i<n;i++)this._process(this.minimatch.set[i],i,!1,done);function done(){--self._processing,self._processing<=0&&self._finish()}}glob.glob=glob,glob.hasMagic=function(pattern,options_){var options=function(origin,add){if(null===add||"object"!=typeof add)return origin;for(var keys=Object.keys(add),i=keys.length;i--;)origin[keys[i]]=add[keys[i]];return origin}({},options_);options.noprocess=!0;var set=new Glob(pattern,options).minimatch.set;if(!pattern)return!1;if(set.length>1)return!0;for(var j=0;j<set[0].length;j++)if("string"!=typeof set[0][j])return!0;return!1},glob.Glob=Glob,inherits(Glob,EE),Glob.prototype._finish=function(){if(assert(this instanceof Glob),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();common.finish(this),this.emit("end",this.found)}},Glob.prototype._realpath=function(){if(!this._didRealpath){this._didRealpath=!0;var n=this.matches.length;if(0===n)return this._finish();for(var self=this,i=0;i<this.matches.length;i++)this._realpathSet(i,next)}function next(){0==--n&&self._finish()}},Glob.prototype._realpathSet=function(index,cb){var matchset=this.matches[index];if(!matchset)return cb();var found=Object.keys(matchset),self=this,n=found.length;if(0===n)return cb();var set=this.matches[index]=Object.create(null);found.forEach((function(p,i){p=self._makeAbs(p),rp.realpath(p,self.realpathCache,(function(er,real){er?"stat"===er.syscall?set[p]=!0:self.emit("error",er):set[real]=!0,0==--n&&(self.matches[index]=set,cb())}))}))},Glob.prototype._mark=function(p){return common.mark(this,p)},Glob.prototype._makeAbs=function(f){return common.makeAbs(this,f)},Glob.prototype.abort=function(){this.aborted=!0,this.emit("abort")},Glob.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},Glob.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var eq=this._emitQueue.slice(0);this._emitQueue.length=0;for(var i=0;i<eq.length;i++){var e=eq[i];this._emitMatch(e[0],e[1])}}if(this._processQueue.length){var pq=this._processQueue.slice(0);this._processQueue.length=0;for(i=0;i<pq.length;i++){var p=pq[i];this._processing--,this._process(p[0],p[1],p[2],p[3])}}}},Glob.prototype._process=function(pattern,index,inGlobStar,cb){if(assert(this instanceof Glob),assert("function"==typeof cb),!this.aborted)if(this._processing++,this.paused)this._processQueue.push([pattern,index,inGlobStar,cb]);else{for(var prefix,n=0;"string"==typeof pattern[n];)n++;switch(n){case pattern.length:return void this._processSimple(pattern.join("/"),index,cb);case 0:prefix=null;break;default:prefix=pattern.slice(0,n).join("/")}var read,remain=pattern.slice(n);null===prefix?read=".":isAbsolute(prefix)||isAbsolute(pattern.join("/"))?(prefix&&isAbsolute(prefix)||(prefix="/"+prefix),read=prefix):read=prefix;var abs=this._makeAbs(read);if(childrenIgnored(this,read))return cb();remain[0]===minimatch.GLOBSTAR?this._processGlobStar(prefix,read,abs,remain,index,inGlobStar,cb):this._processReaddir(prefix,read,abs,remain,index,inGlobStar,cb)}},Glob.prototype._processReaddir=function(prefix,read,abs,remain,index,inGlobStar,cb){var self=this;this._readdir(abs,inGlobStar,(function(er,entries){return self._processReaddir2(prefix,read,abs,remain,index,inGlobStar,entries,cb)}))},Glob.prototype._processReaddir2=function(prefix,read,abs,remain,index,inGlobStar,entries,cb){if(!entries)return cb();for(var pn=remain[0],negate=!!this.minimatch.negate,rawGlob=pn._glob,dotOk=this.dot||"."===rawGlob.charAt(0),matchedEntries=[],i=0;i<entries.length;i++){if("."!==(e=entries[i]).charAt(0)||dotOk)(negate&&!prefix?!e.match(pn):e.match(pn))&&matchedEntries.push(e)}var len=matchedEntries.length;if(0===len)return cb();if(1===remain.length&&!this.mark&&!this.stat){this.matches[index]||(this.matches[index]=Object.create(null));for(i=0;i<len;i++){var e=matchedEntries[i];prefix&&(e="/"!==prefix?prefix+"/"+e:prefix+e),"/"!==e.charAt(0)||this.nomount||(e=path.join(this.root,e)),this._emitMatch(index,e)}return cb()}remain.shift();for(i=0;i<len;i++){e=matchedEntries[i];prefix&&(e="/"!==prefix?prefix+"/"+e:prefix+e),this._process([e].concat(remain),index,inGlobStar,cb)}cb()},Glob.prototype._emitMatch=function(index,e){if(!this.aborted&&!isIgnored(this,e))if(this.paused)this._emitQueue.push([index,e]);else{var abs=isAbsolute(e)?e:this._makeAbs(e);if(this.mark&&(e=this._mark(e)),this.absolute&&(e=abs),!this.matches[index][e]){if(this.nodir){var c=this.cache[abs];if("DIR"===c||Array.isArray(c))return}this.matches[index][e]=!0;var st=this.statCache[abs];st&&this.emit("stat",e,st),this.emit("match",e)}}},Glob.prototype._readdirInGlobStar=function(abs,cb){if(!this.aborted){if(this.follow)return this._readdir(abs,!1,cb);var self=this,lstatcb=inflight("lstat\0"+abs,(function(er,lstat){if(er&&"ENOENT"===er.code)return cb();var isSym=lstat&&lstat.isSymbolicLink();self.symlinks[abs]=isSym,isSym||!lstat||lstat.isDirectory()?self._readdir(abs,!1,cb):(self.cache[abs]="FILE",cb())}));lstatcb&&fs.lstat(abs,lstatcb)}},Glob.prototype._readdir=function(abs,inGlobStar,cb){if(!this.aborted&&(cb=inflight("readdir\0"+abs+"\0"+inGlobStar,cb))){if(inGlobStar&&!ownProp(this.symlinks,abs))return this._readdirInGlobStar(abs,cb);if(ownProp(this.cache,abs)){var c=this.cache[abs];if(!c||"FILE"===c)return cb();if(Array.isArray(c))return cb(null,c)}fs.readdir(abs,function(self,abs,cb){return function(er,entries){er?self._readdirError(abs,er,cb):self._readdirEntries(abs,entries,cb)}}(this,abs,cb))}},Glob.prototype._readdirEntries=function(abs,entries,cb){if(!this.aborted){if(!this.mark&&!this.stat)for(var i=0;i<entries.length;i++){var e=entries[i];e="/"===abs?abs+e:abs+"/"+e,this.cache[e]=!0}return this.cache[abs]=entries,cb(null,entries)}},Glob.prototype._readdirError=function(f,er,cb){if(!this.aborted){switch(er.code){case"ENOTSUP":case"ENOTDIR":var abs=this._makeAbs(f);if(this.cache[abs]="FILE",abs===this.cwdAbs){var error=new Error(er.code+" invalid cwd "+this.cwd);error.path=this.cwd,error.code=er.code,this.emit("error",error),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(f)]=!1;break;default:this.cache[this._makeAbs(f)]=!1,this.strict&&(this.emit("error",er),this.abort()),this.silent||console.error("glob error",er)}return cb()}},Glob.prototype._processGlobStar=function(prefix,read,abs,remain,index,inGlobStar,cb){var self=this;this._readdir(abs,inGlobStar,(function(er,entries){self._processGlobStar2(prefix,read,abs,remain,index,inGlobStar,entries,cb)}))},Glob.prototype._processGlobStar2=function(prefix,read,abs,remain,index,inGlobStar,entries,cb){if(!entries)return cb();var remainWithoutGlobStar=remain.slice(1),gspref=prefix?[prefix]:[],noGlobStar=gspref.concat(remainWithoutGlobStar);this._process(noGlobStar,index,!1,cb);var isSym=this.symlinks[abs],len=entries.length;if(isSym&&inGlobStar)return cb();for(var i=0;i<len;i++){if("."!==entries[i].charAt(0)||this.dot){var instead=gspref.concat(entries[i],remainWithoutGlobStar);this._process(instead,index,!0,cb);var below=gspref.concat(entries[i],remain);this._process(below,index,!0,cb)}}cb()},Glob.prototype._processSimple=function(prefix,index,cb){var self=this;this._stat(prefix,(function(er,exists){self._processSimple2(prefix,index,er,exists,cb)}))},Glob.prototype._processSimple2=function(prefix,index,er,exists,cb){if(this.matches[index]||(this.matches[index]=Object.create(null)),!exists)return cb();if(prefix&&isAbsolute(prefix)&&!this.nomount){var trail=/[\/\\]$/.test(prefix);"/"===prefix.charAt(0)?prefix=path.join(this.root,prefix):(prefix=path.resolve(this.root,prefix),trail&&(prefix+="/"))}"win32"===process.platform&&(prefix=prefix.replace(/\\/g,"/")),this._emitMatch(index,prefix),cb()},Glob.prototype._stat=function(f,cb){var abs=this._makeAbs(f),needDir="/"===f.slice(-1);if(f.length>this.maxLength)return cb();if(!this.stat&&ownProp(this.cache,abs)){var c=this.cache[abs];if(Array.isArray(c)&&(c="DIR"),!needDir||"DIR"===c)return cb(null,c);if(needDir&&"FILE"===c)return cb()}var stat=this.statCache[abs];if(void 0!==stat){if(!1===stat)return cb(null,stat);var type=stat.isDirectory()?"DIR":"FILE";return needDir&&"FILE"===type?cb():cb(null,type,stat)}var self=this,statcb=inflight("stat\0"+abs,(function(er,lstat){if(lstat&&lstat.isSymbolicLink())return fs.stat(abs,(function(er,stat){er?self._stat2(f,abs,null,lstat,cb):self._stat2(f,abs,er,stat,cb)}));self._stat2(f,abs,er,lstat,cb)}));statcb&&fs.lstat(abs,statcb)},Glob.prototype._stat2=function(f,abs,er,stat,cb){if(er&&("ENOENT"===er.code||"ENOTDIR"===er.code))return this.statCache[abs]=!1,cb();var needDir="/"===f.slice(-1);if(this.statCache[abs]=stat,"/"===abs.slice(-1)&&stat&&!stat.isDirectory())return cb(null,!1,stat);var c=!0;return stat&&(c=stat.isDirectory()?"DIR":"FILE"),this.cache[abs]=this.cache[abs]||c,needDir&&"FILE"===c?cb():cb(null,c,stat)}},function(module,exports,__webpack_require__){module.exports=realpath,realpath.realpath=realpath,realpath.sync=realpathSync,realpath.realpathSync=realpathSync,realpath.monkeypatch=function(){fs.realpath=realpath,fs.realpathSync=realpathSync},realpath.unmonkeypatch=function(){fs.realpath=origRealpath,fs.realpathSync=origRealpathSync};var fs=__webpack_require__(19),origRealpath=fs.realpath,origRealpathSync=fs.realpathSync,version=process.version,ok=/^v[0-5]\./.test(version),old=__webpack_require__(79);function newError(er){return er&&"realpath"===er.syscall&&("ELOOP"===er.code||"ENOMEM"===er.code||"ENAMETOOLONG"===er.code)}function realpath(p,cache,cb){if(ok)return origRealpath(p,cache,cb);"function"==typeof cache&&(cb=cache,cache=null),origRealpath(p,cache,(function(er,result){newError(er)?old.realpath(p,cache,cb):cb(er,result)}))}function realpathSync(p,cache){if(ok)return origRealpathSync(p,cache);try{return origRealpathSync(p,cache)}catch(er){if(newError(er))return old.realpathSync(p,cache);throw er}}},function(module,exports,__webpack_require__){function ownProp(obj,field){return Object.prototype.hasOwnProperty.call(obj,field)}exports.setopts=function(self,pattern,options){options||(options={});if(options.matchBase&&-1===pattern.indexOf("/")){if(options.noglobstar)throw new Error("base matching requires globstar");pattern="**/"+pattern}self.silent=!!options.silent,self.pattern=pattern,self.strict=!1!==options.strict,self.realpath=!!options.realpath,self.realpathCache=options.realpathCache||Object.create(null),self.follow=!!options.follow,self.dot=!!options.dot,self.mark=!!options.mark,self.nodir=!!options.nodir,self.nodir&&(self.mark=!0);self.sync=!!options.sync,self.nounique=!!options.nounique,self.nonull=!!options.nonull,self.nosort=!!options.nosort,self.nocase=!!options.nocase,self.stat=!!options.stat,self.noprocess=!!options.noprocess,self.absolute=!!options.absolute,self.maxLength=options.maxLength||1/0,self.cache=options.cache||Object.create(null),self.statCache=options.statCache||Object.create(null),self.symlinks=options.symlinks||Object.create(null),function(self,options){self.ignore=options.ignore||[],Array.isArray(self.ignore)||(self.ignore=[self.ignore]);self.ignore.length&&(self.ignore=self.ignore.map(ignoreMap))}(self,options),self.changedCwd=!1;var cwd=process.cwd();ownProp(options,"cwd")?(self.cwd=path.resolve(options.cwd),self.changedCwd=self.cwd!==cwd):self.cwd=cwd;self.root=options.root||path.resolve(self.cwd,"/"),self.root=path.resolve(self.root),"win32"===process.platform&&(self.root=self.root.replace(/\\/g,"/"));self.cwdAbs=isAbsolute(self.cwd)?self.cwd:makeAbs(self,self.cwd),"win32"===process.platform&&(self.cwdAbs=self.cwdAbs.replace(/\\/g,"/"));self.nomount=!!options.nomount,options.nonegate=!0,options.nocomment=!0,self.minimatch=new Minimatch(pattern,options),self.options=self.minimatch.options},exports.ownProp=ownProp,exports.makeAbs=makeAbs,exports.finish=function(self){for(var nou=self.nounique,all=nou?[]:Object.create(null),i=0,l=self.matches.length;i<l;i++){var matches=self.matches[i];if(matches&&0!==Object.keys(matches).length){var m=Object.keys(matches);nou?all.push.apply(all,m):m.forEach((function(m){all[m]=!0}))}else if(self.nonull){var literal=self.minimatch.globSet[i];nou?all.push(literal):all[literal]=!0}}nou||(all=Object.keys(all));self.nosort||(all=all.sort(alphasort));if(self.mark){for(i=0;i<all.length;i++)all[i]=self._mark(all[i]);self.nodir&&(all=all.filter((function(e){var notDir=!/\/$/.test(e),c=self.cache[e]||self.cache[makeAbs(self,e)];return notDir&&c&&(notDir="DIR"!==c&&!Array.isArray(c)),notDir})))}self.ignore.length&&(all=all.filter((function(m){return!isIgnored(self,m)})));self.found=all},exports.mark=function(self,p){var abs=makeAbs(self,p),c=self.cache[abs],m=p;if(c){var isDir="DIR"===c||Array.isArray(c),slash="/"===p.slice(-1);if(isDir&&!slash?m+="/":!isDir&&slash&&(m=m.slice(0,-1)),m!==p){var mabs=makeAbs(self,m);self.statCache[mabs]=self.statCache[abs],self.cache[mabs]=self.cache[abs]}}return m},exports.isIgnored=isIgnored,exports.childrenIgnored=function(self,path){return!!self.ignore.length&&self.ignore.some((function(item){return!(!item.gmatcher||!item.gmatcher.match(path))}))};var path=__webpack_require__(15),minimatch=__webpack_require__(37),isAbsolute=__webpack_require__(39),Minimatch=minimatch.Minimatch;function alphasort(a,b){return a.localeCompare(b,"en")}function ignoreMap(pattern){var gmatcher=null;if("/**"===pattern.slice(-3)){var gpattern=pattern.replace(/(\/\*\*)+$/,"");gmatcher=new Minimatch(gpattern,{dot:!0})}return{matcher:new Minimatch(pattern,{dot:!0}),gmatcher:gmatcher}}function makeAbs(self,f){var abs=f;return abs="/"===f.charAt(0)?path.join(self.root,f):isAbsolute(f)||""===f?f:self.changedCwd?path.resolve(self.cwd,f):path.resolve(f),"win32"===process.platform&&(abs=abs.replace(/\\/g,"/")),abs}function isIgnored(self,path){return!!self.ignore.length&&self.ignore.some((function(item){return item.matcher.match(path)||!(!item.gmatcher||!item.gmatcher.match(path))}))}},function(module,exports){module.exports=function wrappy(fn,cb){if(fn&&cb)return wrappy(fn)(cb);if("function"!=typeof fn)throw new TypeError("need wrapper function");return Object.keys(fn).forEach((function(k){wrapper[k]=fn[k]})),wrapper;function wrapper(){for(var args=new Array(arguments.length),i=0;i<args.length;i++)args[i]=arguments[i];var ret=fn.apply(this,args),cb=args[args.length-1];return"function"==typeof ret&&ret!==cb&&Object.keys(cb).forEach((function(k){ret[k]=cb[k]})),ret}}},function(module,exports,__webpack_require__){var wrappy=__webpack_require__(48);function once(fn){var f=function(){return f.called?f.value:(f.called=!0,f.value=fn.apply(this,arguments))};return f.called=!1,f}function onceStrict(fn){var f=function(){if(f.called)throw new Error(f.onceError);return f.called=!0,f.value=fn.apply(this,arguments)},name=fn.name||"Function wrapped with `once`";return f.onceError=name+" shouldn't be called more than once",f.called=!1,f}module.exports=wrappy(once),module.exports.strict=wrappy(onceStrict),once.proto=once((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return once(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return onceStrict(this)},configurable:!0})}))},function(module,exports,__webpack_require__){"use strict";var bsv=module.exports;bsv.version="v"+__webpack_require__(86).version,bsv.versionGuard=function(version){if(void 0!==version){console.warn("\n      More than one instance of bsv found.\n      Please make sure to require bsv and check that submodules do\n      not also include their own bsv dependency.")}},bsv.versionGuard(global._bsv),global._bsv=bsv.version,bsv.crypto={},bsv.crypto.BN=__webpack_require__(2),bsv.crypto.ECDSA=__webpack_require__(51),bsv.crypto.Hash=__webpack_require__(4),bsv.crypto.Random=__webpack_require__(35),bsv.crypto.Point=__webpack_require__(22),bsv.crypto.Signature=__webpack_require__(9),bsv.encoding={},bsv.encoding.Base58=__webpack_require__(33),bsv.encoding.Base58Check=__webpack_require__(26),bsv.encoding.BufferReader=__webpack_require__(16),bsv.encoding.BufferWriter=__webpack_require__(14),bsv.encoding.Varint=__webpack_require__(27),bsv.util={},bsv.util.js=__webpack_require__(3),bsv.util.preconditions=__webpack_require__(1),bsv.errors=__webpack_require__(8),bsv.Address=__webpack_require__(23),bsv.Block=__webpack_require__(119),bsv.MerkleBlock=__webpack_require__(65),bsv.BlockHeader=__webpack_require__(36),bsv.HDPrivateKey=__webpack_require__(66),bsv.HDPublicKey=__webpack_require__(67),bsv.Networks=__webpack_require__(21),bsv.Opcode=__webpack_require__(42),bsv.PrivateKey=__webpack_require__(32),bsv.PublicKey=__webpack_require__(13),bsv.Script=__webpack_require__(10),bsv.Transaction=__webpack_require__(34),bsv.deps={},bsv.deps.bnjs=__webpack_require__(6),bsv.deps.bs58=__webpack_require__(59),bsv.deps.Buffer=Buffer,bsv.deps.elliptic=__webpack_require__(52),bsv.deps._=__webpack_require__(0),bsv.Transaction.sighash=__webpack_require__(17)},function(module,exports,__webpack_require__){"use strict";var BN=__webpack_require__(2),Point=__webpack_require__(22),Signature=__webpack_require__(9),PublicKey=__webpack_require__(13),Random=__webpack_require__(35),Hash=__webpack_require__(4),_=__webpack_require__(0),$=__webpack_require__(1),ECDSA=function ECDSA(obj){if(!(this instanceof ECDSA))return new ECDSA(obj);obj&&this.set(obj)};ECDSA.prototype.set=function(obj){return this.hashbuf=obj.hashbuf||this.hashbuf,this.endian=obj.endian||this.endian,this.privkey=obj.privkey||this.privkey,this.pubkey=obj.pubkey||(this.privkey?this.privkey.publicKey:this.pubkey),this.sig=obj.sig||this.sig,this.k=obj.k||this.k,this.verified=obj.verified||this.verified,this},ECDSA.prototype.privkey2pubkey=function(){this.pubkey=this.privkey.toPublicKey()},ECDSA.prototype.calci=function(){for(var i=0;i<4;i++){var Qprime;this.sig.i=i;try{Qprime=this.toPublicKey()}catch(e){console.error(e);continue}if(Qprime.point.eq(this.pubkey.point))return this.sig.compressed=this.pubkey.compressed,this}throw this.sig.i=void 0,new Error("Unable to find valid recovery factor")},ECDSA.fromString=function(str){var obj=JSON.parse(str);return new ECDSA(obj)},ECDSA.prototype.randomK=function(){var k,N=Point.getN();do{k=BN.fromBuffer(Random.getRandomBuffer(32))}while(!k.lt(N)||!k.gt(BN.Zero));return this.k=k,this},ECDSA.prototype.deterministicK=function(badrs){_.isUndefined(badrs)&&(badrs=0);var v=Buffer.alloc(32);v.fill(1);var k=Buffer.alloc(32);k.fill(0);var x=this.privkey.bn.toBuffer({size:32}),hashbuf="little"===this.endian?Buffer.from(this.hashbuf).reverse():this.hashbuf;k=Hash.sha256hmac(Buffer.concat([v,Buffer.from([0]),x,hashbuf]),k),v=Hash.sha256hmac(v,k),k=Hash.sha256hmac(Buffer.concat([v,Buffer.from([1]),x,hashbuf]),k),v=Hash.sha256hmac(v,k),v=Hash.sha256hmac(v,k);for(var T=BN.fromBuffer(v),N=Point.getN(),i=0;i<badrs||!T.lt(N)||!T.gt(BN.Zero);i++)k=Hash.sha256hmac(Buffer.concat([v,Buffer.from([0])]),k),v=Hash.sha256hmac(v,k),v=Hash.sha256hmac(v,k),T=BN.fromBuffer(v);return this.k=T,this},ECDSA.prototype.toPublicKey=function(){var i=this.sig.i;$.checkArgument(0===i||1===i||2===i||3===i,new Error("i must be equal to 0, 1, 2, or 3"));var e=BN.fromBuffer(this.hashbuf),r=this.sig.r,s=this.sig.s,isYOdd=1&i,isSecondKey=i>>1,n=Point.getN(),G=Point.getG(),x=isSecondKey?r.add(n):r,R=Point.fromX(isYOdd,x);if(!R.mul(n).isInfinity())throw new Error("nR is not a valid curve point");var eNeg=e.neg().umod(n),rInv=r.invm(n),Q=R.mul(s).add(G.mul(eNeg)).mul(rInv);return PublicKey.fromPoint(Q,this.sig.compressed)},ECDSA.prototype.sigError=function(){if(!Buffer.isBuffer(this.hashbuf)||32!==this.hashbuf.length)return"hashbuf must be a 32 byte buffer";var r=this.sig.r,s=this.sig.s;if(!(r.gt(BN.Zero)&&r.lt(Point.getN())&&s.gt(BN.Zero)&&s.lt(Point.getN())))return"r and s not in range";var e=BN.fromBuffer(this.hashbuf,this.endian?{endian:this.endian}:void 0),n=Point.getN(),sinv=s.invm(n),u1=sinv.mul(e).umod(n),u2=sinv.mul(r).umod(n),p=Point.getG().mulAdd(u1,this.pubkey.point,u2);return p.isInfinity()?"p is infinity":0!==p.getX().umod(n).cmp(r)&&"Invalid signature"},ECDSA.toLowS=function(s){return s.gt(BN.fromBuffer(Buffer.from("7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5D576E7357A4501DDFE92F46681B20A0","hex")))&&(s=Point.getN().sub(s)),s},ECDSA.prototype._findSignature=function(d,e){var k,r,s,N=Point.getN(),G=Point.getG(),badrs=0;do{(!this.k||badrs>0)&&this.deterministicK(badrs),badrs++,k=this.k,r=G.mul(k).x.umod(N),s=k.invm(N).mul(e.add(d.mul(r))).umod(N)}while(r.cmp(BN.Zero)<=0||s.cmp(BN.Zero)<=0);return{s:s=ECDSA.toLowS(s),r:r}},ECDSA.prototype.sign=function(){var hashbuf=this.hashbuf,privkey=this.privkey,d=privkey.bn;$.checkState(hashbuf&&privkey&&d,new Error("invalid parameters")),$.checkState(Buffer.isBuffer(hashbuf)&&32===hashbuf.length,new Error("hashbuf must be a 32 byte buffer"));var e=BN.fromBuffer(hashbuf,this.endian?{endian:this.endian}:void 0),obj=this._findSignature(d,e);return obj.compressed=this.pubkey.compressed,this.sig=new Signature(obj),this},ECDSA.prototype.signRandomK=function(){return this.randomK(),this.sign()},ECDSA.prototype.toString=function(){var obj={};return this.hashbuf&&(obj.hashbuf=this.hashbuf.toString("hex")),this.privkey&&(obj.privkey=this.privkey.toString()),this.pubkey&&(obj.pubkey=this.pubkey.toString()),this.sig&&(obj.sig=this.sig.toString()),this.k&&(obj.k=this.k.toString()),JSON.stringify(obj)},ECDSA.prototype.verify=function(){return this.sigError()?this.verified=!1:this.verified=!0,this},ECDSA.sign=function(hashbuf,privkey,endian){return ECDSA().set({hashbuf:hashbuf,endian:endian,privkey:privkey}).sign().sig},ECDSA.signWithCalcI=function(hashbuf,privkey,endian){return ECDSA().set({hashbuf:hashbuf,endian:endian,privkey:privkey}).sign().calci().sig},ECDSA.signRandomK=function(hashbuf,privkey,endian){return ECDSA().set({hashbuf:hashbuf,endian:endian,privkey:privkey}).signRandomK().sig},ECDSA.verify=function(hashbuf,sig,pubkey,endian){return ECDSA().set({hashbuf:hashbuf,endian:endian,sig:sig,pubkey:pubkey}).verify().verified},module.exports=ECDSA},function(module,exports,__webpack_require__){"use strict";var elliptic=exports;elliptic.version=__webpack_require__(89).version,elliptic.utils=__webpack_require__(5),elliptic.rand=__webpack_require__(54),elliptic.curve=__webpack_require__(55),elliptic.curves=__webpack_require__(41),elliptic.ec=__webpack_require__(100),elliptic.eddsa=__webpack_require__(104)},function(module,exports,__webpack_require__){"use strict";var utils=exports;function zero2(word){return 1===word.length?"0"+word:word}function toHex(msg){for(var res="",i=0;i<msg.length;i++)res+=zero2(msg[i].toString(16));return res}utils.toArray=function(msg,enc){if(Array.isArray(msg))return msg.slice();if(!msg)return[];var res=[];if("string"!=typeof msg){for(var i=0;i<msg.length;i++)res[i]=0|msg[i];return res}if("hex"===enc){(msg=msg.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(msg="0"+msg);for(i=0;i<msg.length;i+=2)res.push(parseInt(msg[i]+msg[i+1],16))}else for(i=0;i<msg.length;i++){var c=msg.charCodeAt(i),hi=c>>8,lo=255&c;hi?res.push(hi,lo):res.push(lo)}return res},utils.zero2=zero2,utils.toHex=toHex,utils.encode=function(arr,enc){return"hex"===enc?toHex(arr):arr}},function(module,exports,__webpack_require__){var r;function Rand(rand){this.rand=rand}if(module.exports=function(len){return r||(r=new Rand(null)),r.generate(len)},module.exports.Rand=Rand,Rand.prototype.generate=function(len){return this._rand(len)},Rand.prototype._rand=function(n){if(this.rand.getBytes)return this.rand.getBytes(n);for(var res=new Uint8Array(n),i=0;i<res.length;i++)res[i]=this.rand.getByte();return res},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?Rand.prototype._rand=function(n){var arr=new Uint8Array(n);return self.crypto.getRandomValues(arr),arr}:self.msCrypto&&self.msCrypto.getRandomValues?Rand.prototype._rand=function(n){var arr=new Uint8Array(n);return self.msCrypto.getRandomValues(arr),arr}:"object"==typeof window&&(Rand.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var crypto=__webpack_require__(40);if("function"!=typeof crypto.randomBytes)throw new Error("Not supported");Rand.prototype._rand=function(n){return crypto.randomBytes(n)}}catch(e){}},function(module,exports,__webpack_require__){"use strict";var curve=exports;curve.base=__webpack_require__(30),curve.short=__webpack_require__(90),curve.mont=__webpack_require__(91),curve.edwards=__webpack_require__(92)},function(module,exports,__webpack_require__){"use strict";var rotr32=__webpack_require__(12).rotr32;function ch32(x,y,z){return x&y^~x&z}function maj32(x,y,z){return x&y^x&z^y&z}function p32(x,y,z){return x^y^z}exports.ft_1=function(s,x,y,z){return 0===s?ch32(x,y,z):1===s||3===s?p32(x,y,z):2===s?maj32(x,y,z):void 0},exports.ch32=ch32,exports.maj32=maj32,exports.p32=p32,exports.s0_256=function(x){return rotr32(x,2)^rotr32(x,13)^rotr32(x,22)},exports.s1_256=function(x){return rotr32(x,6)^rotr32(x,11)^rotr32(x,25)},exports.g0_256=function(x){return rotr32(x,7)^rotr32(x,18)^x>>>3},exports.g1_256=function(x){return rotr32(x,17)^rotr32(x,19)^x>>>10}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(12),common=__webpack_require__(25),shaCommon=__webpack_require__(56),assert=__webpack_require__(20),sum32=utils.sum32,sum32_4=utils.sum32_4,sum32_5=utils.sum32_5,ch32=shaCommon.ch32,maj32=shaCommon.maj32,s0_256=shaCommon.s0_256,s1_256=shaCommon.s1_256,g0_256=shaCommon.g0_256,g1_256=shaCommon.g1_256,BlockHash=common.BlockHash,sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256(){if(!(this instanceof SHA256))return new SHA256;BlockHash.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=sha256_K,this.W=new Array(64)}utils.inherits(SHA256,BlockHash),module.exports=SHA256,SHA256.blockSize=512,SHA256.outSize=256,SHA256.hmacStrength=192,SHA256.padLength=64,SHA256.prototype._update=function(msg,start){for(var W=this.W,i=0;i<16;i++)W[i]=msg[start+i];for(;i<W.length;i++)W[i]=sum32_4(g1_256(W[i-2]),W[i-7],g0_256(W[i-15]),W[i-16]);var a=this.h[0],b=this.h[1],c=this.h[2],d=this.h[3],e=this.h[4],f=this.h[5],g=this.h[6],h=this.h[7];for(assert(this.k.length===W.length),i=0;i<W.length;i++){var T1=sum32_5(h,s1_256(e),ch32(e,f,g),this.k[i],W[i]),T2=sum32(s0_256(a),maj32(a,b,c));h=g,g=f,f=e,e=sum32(d,T1),d=c,c=b,b=a,a=sum32(T1,T2)}this.h[0]=sum32(this.h[0],a),this.h[1]=sum32(this.h[1],b),this.h[2]=sum32(this.h[2],c),this.h[3]=sum32(this.h[3],d),this.h[4]=sum32(this.h[4],e),this.h[5]=sum32(this.h[5],f),this.h[6]=sum32(this.h[6],g),this.h[7]=sum32(this.h[7],h)},SHA256.prototype._digest=function(enc){return"hex"===enc?utils.toHex32(this.h,"big"):utils.split32(this.h,"big")}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(12),common=__webpack_require__(25),assert=__webpack_require__(20),rotr64_hi=utils.rotr64_hi,rotr64_lo=utils.rotr64_lo,shr64_hi=utils.shr64_hi,shr64_lo=utils.shr64_lo,sum64=utils.sum64,sum64_hi=utils.sum64_hi,sum64_lo=utils.sum64_lo,sum64_4_hi=utils.sum64_4_hi,sum64_4_lo=utils.sum64_4_lo,sum64_5_hi=utils.sum64_5_hi,sum64_5_lo=utils.sum64_5_lo,BlockHash=common.BlockHash,sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512(){if(!(this instanceof SHA512))return new SHA512;BlockHash.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=sha512_K,this.W=new Array(160)}function ch64_hi(xh,xl,yh,yl,zh){var r=xh&yh^~xh&zh;return r<0&&(r+=4294967296),r}function ch64_lo(xh,xl,yh,yl,zh,zl){var r=xl&yl^~xl&zl;return r<0&&(r+=4294967296),r}function maj64_hi(xh,xl,yh,yl,zh){var r=xh&yh^xh&zh^yh&zh;return r<0&&(r+=4294967296),r}function maj64_lo(xh,xl,yh,yl,zh,zl){var r=xl&yl^xl&zl^yl&zl;return r<0&&(r+=4294967296),r}function s0_512_hi(xh,xl){var r=rotr64_hi(xh,xl,28)^rotr64_hi(xl,xh,2)^rotr64_hi(xl,xh,7);return r<0&&(r+=4294967296),r}function s0_512_lo(xh,xl){var r=rotr64_lo(xh,xl,28)^rotr64_lo(xl,xh,2)^rotr64_lo(xl,xh,7);return r<0&&(r+=4294967296),r}function s1_512_hi(xh,xl){var r=rotr64_hi(xh,xl,14)^rotr64_hi(xh,xl,18)^rotr64_hi(xl,xh,9);return r<0&&(r+=4294967296),r}function s1_512_lo(xh,xl){var r=rotr64_lo(xh,xl,14)^rotr64_lo(xh,xl,18)^rotr64_lo(xl,xh,9);return r<0&&(r+=4294967296),r}function g0_512_hi(xh,xl){var r=rotr64_hi(xh,xl,1)^rotr64_hi(xh,xl,8)^shr64_hi(xh,xl,7);return r<0&&(r+=4294967296),r}function g0_512_lo(xh,xl){var r=rotr64_lo(xh,xl,1)^rotr64_lo(xh,xl,8)^shr64_lo(xh,xl,7);return r<0&&(r+=4294967296),r}function g1_512_hi(xh,xl){var r=rotr64_hi(xh,xl,19)^rotr64_hi(xl,xh,29)^shr64_hi(xh,xl,6);return r<0&&(r+=4294967296),r}function g1_512_lo(xh,xl){var r=rotr64_lo(xh,xl,19)^rotr64_lo(xl,xh,29)^shr64_lo(xh,xl,6);return r<0&&(r+=4294967296),r}utils.inherits(SHA512,BlockHash),module.exports=SHA512,SHA512.blockSize=1024,SHA512.outSize=512,SHA512.hmacStrength=192,SHA512.padLength=128,SHA512.prototype._prepareBlock=function(msg,start){for(var W=this.W,i=0;i<32;i++)W[i]=msg[start+i];for(;i<W.length;i+=2){var c0_hi=g1_512_hi(W[i-4],W[i-3]),c0_lo=g1_512_lo(W[i-4],W[i-3]),c1_hi=W[i-14],c1_lo=W[i-13],c2_hi=g0_512_hi(W[i-30],W[i-29]),c2_lo=g0_512_lo(W[i-30],W[i-29]),c3_hi=W[i-32],c3_lo=W[i-31];W[i]=sum64_4_hi(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo),W[i+1]=sum64_4_lo(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo)}},SHA512.prototype._update=function(msg,start){this._prepareBlock(msg,start);var W=this.W,ah=this.h[0],al=this.h[1],bh=this.h[2],bl=this.h[3],ch=this.h[4],cl=this.h[5],dh=this.h[6],dl=this.h[7],eh=this.h[8],el=this.h[9],fh=this.h[10],fl=this.h[11],gh=this.h[12],gl=this.h[13],hh=this.h[14],hl=this.h[15];assert(this.k.length===W.length);for(var i=0;i<W.length;i+=2){var c0_hi=hh,c0_lo=hl,c1_hi=s1_512_hi(eh,el),c1_lo=s1_512_lo(eh,el),c2_hi=ch64_hi(eh,el,fh,fl,gh),c2_lo=ch64_lo(eh,el,fh,fl,gh,gl),c3_hi=this.k[i],c3_lo=this.k[i+1],c4_hi=W[i],c4_lo=W[i+1],T1_hi=sum64_5_hi(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo,c4_hi,c4_lo),T1_lo=sum64_5_lo(c0_hi,c0_lo,c1_hi,c1_lo,c2_hi,c2_lo,c3_hi,c3_lo,c4_hi,c4_lo);c0_hi=s0_512_hi(ah,al),c0_lo=s0_512_lo(ah,al),c1_hi=maj64_hi(ah,al,bh,bl,ch),c1_lo=maj64_lo(ah,al,bh,bl,ch,cl);var T2_hi=sum64_hi(c0_hi,c0_lo,c1_hi,c1_lo),T2_lo=sum64_lo(c0_hi,c0_lo,c1_hi,c1_lo);hh=gh,hl=gl,gh=fh,gl=fl,fh=eh,fl=el,eh=sum64_hi(dh,dl,T1_hi,T1_lo),el=sum64_lo(dl,dl,T1_hi,T1_lo),dh=ch,dl=cl,ch=bh,cl=bl,bh=ah,bl=al,ah=sum64_hi(T1_hi,T1_lo,T2_hi,T2_lo),al=sum64_lo(T1_hi,T1_lo,T2_hi,T2_lo)}sum64(this.h,0,ah,al),sum64(this.h,2,bh,bl),sum64(this.h,4,ch,cl),sum64(this.h,6,dh,dl),sum64(this.h,8,eh,el),sum64(this.h,10,fh,fl),sum64(this.h,12,gh,gl),sum64(this.h,14,hh,hl)},SHA512.prototype._digest=function(enc){return"hex"===enc?utils.toHex32(this.h,"big"):utils.split32(this.h,"big")}},function(module,exports,__webpack_require__){var basex=__webpack_require__(109);module.exports=basex("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},function(module,exports,__webpack_require__){"use strict";var Address=__webpack_require__(23),BufferReader=__webpack_require__(16),BufferWriter=__webpack_require__(14),Hash=__webpack_require__(4),Opcode=__webpack_require__(42),PublicKey=__webpack_require__(13),Signature=__webpack_require__(9),Networks=__webpack_require__(21),$=__webpack_require__(1),_=__webpack_require__(0),errors=__webpack_require__(8),buffer=__webpack_require__(7),JSUtil=__webpack_require__(3),Script=function Script(from){return this instanceof Script?(this.chunks=[],Buffer.isBuffer(from)?Script.fromBuffer(from):from instanceof Address?Script.fromAddress(from):from instanceof Script?Script.fromBuffer(from.toBuffer()):_.isString(from)?Script.fromString(from):void(_.isObject(from)&&_.isArray(from.chunks)&&this.set(from))):new Script(from)};Script.prototype.set=function(obj){return $.checkArgument(_.isObject(obj)),$.checkArgument(_.isArray(obj.chunks)),this.chunks=obj.chunks,this},Script.fromBuffer=function(buffer){var script=new Script;script.chunks=[];for(var br=new BufferReader(buffer);!br.finished();)try{var len,buf,opcodenum=br.readUInt8();opcodenum>0&&opcodenum<Opcode.OP_PUSHDATA1?(len=opcodenum,script.chunks.push({buf:br.read(len),len:len,opcodenum:opcodenum})):opcodenum===Opcode.OP_PUSHDATA1?(len=br.readUInt8(),buf=br.read(len),script.chunks.push({buf:buf,len:len,opcodenum:opcodenum})):opcodenum===Opcode.OP_PUSHDATA2?(len=br.readUInt16LE(),buf=br.read(len),script.chunks.push({buf:buf,len:len,opcodenum:opcodenum})):opcodenum===Opcode.OP_PUSHDATA4?(len=br.readUInt32LE(),buf=br.read(len),script.chunks.push({buf:buf,len:len,opcodenum:opcodenum})):script.chunks.push({opcodenum:opcodenum})}catch(e){if(e instanceof RangeError)throw new errors.Script.InvalidBuffer(buffer.toString("hex"));throw e}return script},Script.prototype.toBuffer=function(){for(var bw=new BufferWriter,i=0;i<this.chunks.length;i++){var chunk=this.chunks[i],opcodenum=chunk.opcodenum;bw.writeUInt8(chunk.opcodenum),chunk.buf&&(opcodenum<Opcode.OP_PUSHDATA1?bw.write(chunk.buf):opcodenum===Opcode.OP_PUSHDATA1?(bw.writeUInt8(chunk.len),bw.write(chunk.buf)):opcodenum===Opcode.OP_PUSHDATA2?(bw.writeUInt16LE(chunk.len),bw.write(chunk.buf)):opcodenum===Opcode.OP_PUSHDATA4&&(bw.writeUInt32LE(chunk.len),bw.write(chunk.buf)))}return bw.concat()},Script.fromASM=function(str){var script=new Script;script.chunks=[];for(var tokens=str.split(" "),i=0;i<tokens.length;){var token=tokens[i],opcodenum=Opcode(token).toNumber();if("0"===token)opcodenum=0,script.chunks.push({opcodenum:opcodenum}),i+=1;else if("-1"===token)opcodenum=Opcode.OP_1NEGATE,script.chunks.push({opcodenum:opcodenum}),i+=1;else if(_.isUndefined(opcodenum)){var buf=Buffer.from(tokens[i],"hex");if(buf.toString("hex")!==tokens[i])throw new Error("invalid hex string in script");var len=buf.length;len>=0&&len<Opcode.OP_PUSHDATA1?opcodenum=len:len<Math.pow(2,8)?opcodenum=Opcode.OP_PUSHDATA1:len<Math.pow(2,16)?opcodenum=Opcode.OP_PUSHDATA2:len<Math.pow(2,32)&&(opcodenum=Opcode.OP_PUSHDATA4),script.chunks.push({buf:buf,len:buf.length,opcodenum:opcodenum}),i+=1}else script.chunks.push({opcodenum:opcodenum}),i+=1}return script},Script.fromHex=function(str){return new Script(buffer.Buffer.from(str,"hex"))},Script.fromString=function(str){if(JSUtil.isHexa(str)||0===str.length)return new Script(buffer.Buffer.from(str,"hex"));var script=new Script;script.chunks=[];for(var tokens=str.split(" "),i=0;i<tokens.length;){var token=tokens[i],opcodenum=Opcode(token).toNumber();if(_.isUndefined(opcodenum)){if(!((opcodenum=parseInt(token))>0&&opcodenum<Opcode.OP_PUSHDATA1))throw new Error("Invalid script: "+JSON.stringify(str));script.chunks.push({buf:Buffer.from(tokens[i+1].slice(2),"hex"),len:opcodenum,opcodenum:opcodenum}),i+=2}else if(opcodenum===Opcode.OP_PUSHDATA1||opcodenum===Opcode.OP_PUSHDATA2||opcodenum===Opcode.OP_PUSHDATA4){if("0x"!==tokens[i+2].slice(0,2))throw new Error("Pushdata data must start with 0x");script.chunks.push({buf:Buffer.from(tokens[i+2].slice(2),"hex"),len:parseInt(tokens[i+1]),opcodenum:opcodenum}),i+=3}else script.chunks.push({opcodenum:opcodenum}),i+=1}return script},Script.prototype._chunkToString=function(chunk,type){var opcodenum=chunk.opcodenum,asm="asm"===type,str="";if(chunk.buf)asm||opcodenum!==Opcode.OP_PUSHDATA1&&opcodenum!==Opcode.OP_PUSHDATA2&&opcodenum!==Opcode.OP_PUSHDATA4||(str=str+" "+Opcode(opcodenum).toString()),chunk.len>0&&(str=asm?str+" "+chunk.buf.toString("hex"):str+" "+chunk.len+" 0x"+chunk.buf.toString("hex"));else if(void 0!==Opcode.reverseMap[opcodenum])asm?0===opcodenum?str+=" 0":79===opcodenum?str+=" -1":str=str+" "+Opcode(opcodenum).toString():str=str+" "+Opcode(opcodenum).toString();else{var numstr=opcodenum.toString(16);numstr.length%2!=0&&(numstr="0"+numstr),str=asm?str+" "+numstr:str+" 0x"+numstr}return str},Script.prototype.toASM=function(){for(var str="",i=0;i<this.chunks.length;i++){var chunk=this.chunks[i];str+=this._chunkToString(chunk,"asm")}return str.substr(1)},Script.prototype.toString=function(){for(var str="",i=0;i<this.chunks.length;i++){var chunk=this.chunks[i];str+=this._chunkToString(chunk)}return str.substr(1)},Script.prototype.toHex=function(){return this.toBuffer().toString("hex")},Script.prototype.inspect=function(){return"<Script: "+this.toString()+">"},Script.prototype.isPublicKeyHashOut=function(){return!(5!==this.chunks.length||this.chunks[0].opcodenum!==Opcode.OP_DUP||this.chunks[1].opcodenum!==Opcode.OP_HASH160||!this.chunks[2].buf||20!==this.chunks[2].buf.length||this.chunks[3].opcodenum!==Opcode.OP_EQUALVERIFY||this.chunks[4].opcodenum!==Opcode.OP_CHECKSIG)},Script.prototype.isPublicKeyHashIn=function(){if(2===this.chunks.length){var signatureBuf=this.chunks[0].buf,pubkeyBuf=this.chunks[1].buf;if(signatureBuf&&signatureBuf.length&&48===signatureBuf[0]&&pubkeyBuf&&pubkeyBuf.length){var version=pubkeyBuf[0];if((4===version||6===version||7===version)&&65===pubkeyBuf.length)return!0;if((3===version||2===version)&&33===pubkeyBuf.length)return!0}}return!1},Script.prototype.getPublicKey=function(){return $.checkState(this.isPublicKeyOut(),"Can't retrieve PublicKey from a non-PK output"),this.chunks[0].buf},Script.prototype.getPublicKeyHash=function(){return $.checkState(this.isPublicKeyHashOut(),"Can't retrieve PublicKeyHash from a non-PKH output"),this.chunks[2].buf},Script.prototype.isPublicKeyOut=function(){if(2===this.chunks.length&&this.chunks[0].buf&&this.chunks[0].buf.length&&this.chunks[1].opcodenum===Opcode.OP_CHECKSIG){var pubkeyBuf=this.chunks[0].buf,version=pubkeyBuf[0],isVersion=!1;if((4!==version&&6!==version&&7!==version||65!==pubkeyBuf.length)&&(3!==version&&2!==version||33!==pubkeyBuf.length)||(isVersion=!0),isVersion)return PublicKey.isValid(pubkeyBuf)}return!1},Script.prototype.isPublicKeyIn=function(){if(1===this.chunks.length){var signatureBuf=this.chunks[0].buf;if(signatureBuf&&signatureBuf.length&&48===signatureBuf[0])return!0}return!1},Script.prototype.isScriptHashOut=function(){var buf=this.toBuffer();return 23===buf.length&&buf[0]===Opcode.OP_HASH160&&20===buf[1]&&buf[buf.length-1]===Opcode.OP_EQUAL},Script.prototype.isScriptHashIn=function(){if(this.chunks.length<=1)return!1;var redeemScript,redeemBuf=this.chunks[this.chunks.length-1].buf;if(!redeemBuf)return!1;try{redeemScript=Script.fromBuffer(redeemBuf)}catch(e){if(e instanceof errors.Script.InvalidBuffer)return!1;throw e}return redeemScript.classify()!==Script.types.UNKNOWN},Script.prototype.isMultisigOut=function(){return this.chunks.length>3&&Opcode.isSmallIntOp(this.chunks[0].opcodenum)&&this.chunks.slice(1,this.chunks.length-2).every((function(obj){return obj.buf&&Buffer.isBuffer(obj.buf)}))&&Opcode.isSmallIntOp(this.chunks[this.chunks.length-2].opcodenum)&&this.chunks[this.chunks.length-1].opcodenum===Opcode.OP_CHECKMULTISIG},Script.prototype.isMultisigIn=function(){return this.chunks.length>=2&&0===this.chunks[0].opcodenum&&this.chunks.slice(1,this.chunks.length).every((function(obj){return obj.buf&&Buffer.isBuffer(obj.buf)&&Signature.isTxDER(obj.buf)}))},Script.prototype.isDataOut=function(){if(!(this.chunks.length>=1&&this.chunks[0].opcodenum===Opcode.OP_RETURN))return!1;var chunks=this.chunks.slice(1);return new Script({chunks:chunks}).isPushOnly()},Script.prototype.isSafeDataOut=function(){if(this.chunks.length<2)return!1;if(this.chunks[0].opcodenum!==Opcode.OP_FALSE)return!1;var chunks=this.chunks.slice(1);return new Script({chunks:chunks}).isDataOut()},Script.prototype.getData=function(){if(this.isSafeDataOut())return this.chunks.slice(2).map(chunk=>chunk.buf);if(this.isDataOut()||this.isScriptHashOut())return _.isUndefined(this.chunks[1])?Buffer.alloc(0):Buffer.from(this.chunks[1].buf);if(this.isPublicKeyHashOut())return Buffer.from(this.chunks[2].buf);throw new Error("Unrecognized script type to get data from")},Script.prototype.isPushOnly=function(){return _.every(this.chunks,(function(chunk){return chunk.opcodenum<=Opcode.OP_16||chunk.opcodenum===Opcode.OP_PUSHDATA1||chunk.opcodenum===Opcode.OP_PUSHDATA2||chunk.opcodenum===Opcode.OP_PUSHDATA4}))},(Script.types={}).UNKNOWN="Unknown",Script.types.PUBKEY_OUT="Pay to public key",Script.types.PUBKEY_IN="Spend from public key",Script.types.PUBKEYHASH_OUT="Pay to public key hash",Script.types.PUBKEYHASH_IN="Spend from public key hash",Script.types.SCRIPTHASH_OUT="Pay to script hash",Script.types.SCRIPTHASH_IN="Spend from script hash",Script.types.MULTISIG_OUT="Pay to multisig",Script.types.MULTISIG_IN="Spend from multisig",Script.types.DATA_OUT="Data push",Script.types.SAFE_DATA_OUT="Safe data push",Script.OP_RETURN_STANDARD_SIZE=220,Script.prototype.classify=function(){if(this._isInput)return this.classifyInput();if(this._isOutput)return this.classifyOutput();var outputType=this.classifyOutput();return outputType!==Script.types.UNKNOWN?outputType:this.classifyInput()},(Script.outputIdentifiers={}).PUBKEY_OUT=Script.prototype.isPublicKeyOut,Script.outputIdentifiers.PUBKEYHASH_OUT=Script.prototype.isPublicKeyHashOut,Script.outputIdentifiers.MULTISIG_OUT=Script.prototype.isMultisigOut,Script.outputIdentifiers.SCRIPTHASH_OUT=Script.prototype.isScriptHashOut,Script.outputIdentifiers.DATA_OUT=Script.prototype.isDataOut,Script.outputIdentifiers.SAFE_DATA_OUT=Script.prototype.isSafeDataOut,Script.prototype.classifyOutput=function(){for(var type in Script.outputIdentifiers)if(Script.outputIdentifiers[type].bind(this)())return Script.types[type];return Script.types.UNKNOWN},(Script.inputIdentifiers={}).PUBKEY_IN=Script.prototype.isPublicKeyIn,Script.inputIdentifiers.PUBKEYHASH_IN=Script.prototype.isPublicKeyHashIn,Script.inputIdentifiers.MULTISIG_IN=Script.prototype.isMultisigIn,Script.inputIdentifiers.SCRIPTHASH_IN=Script.prototype.isScriptHashIn,Script.prototype.classifyInput=function(){for(var type in Script.inputIdentifiers)if(Script.inputIdentifiers[type].bind(this)())return Script.types[type];return Script.types.UNKNOWN},Script.prototype.isStandard=function(){return this.classify()!==Script.types.UNKNOWN},Script.prototype.prepend=function(obj){return this._addByType(obj,!0),this},Script.prototype.equals=function(script){if($.checkState(script instanceof Script,"Must provide another script"),this.chunks.length!==script.chunks.length)return!1;var i;for(i=0;i<this.chunks.length;i++){if(Buffer.isBuffer(this.chunks[i].buf)&&!Buffer.isBuffer(script.chunks[i].buf))return!1;if(Buffer.isBuffer(this.chunks[i].buf)&&!this.chunks[i].buf.equals(script.chunks[i].buf))return!1;if(this.chunks[i].opcodenum!==script.chunks[i].opcodenum)return!1}return!0},Script.prototype.add=function(obj){return this._addByType(obj,!1),this},Script.prototype._addByType=function(obj,prepend){if("string"==typeof obj)this._addOpcode(obj,prepend);else if("number"==typeof obj)this._addOpcode(obj,prepend);else if(obj instanceof Opcode)this._addOpcode(obj,prepend);else if(Buffer.isBuffer(obj))this._addBuffer(obj,prepend);else if(obj instanceof Script)this.chunks=this.chunks.concat(obj.chunks);else{if("object"!=typeof obj)throw new Error("Invalid script chunk");this._insertAtPosition(obj,prepend)}},Script.prototype._insertAtPosition=function(op,prepend){prepend?this.chunks.unshift(op):this.chunks.push(op)},Script.prototype._addOpcode=function(opcode,prepend){var op;return op="number"==typeof opcode?opcode:opcode instanceof Opcode?opcode.toNumber():Opcode(opcode).toNumber(),this._insertAtPosition({opcodenum:op},prepend),this},Script.prototype._addBuffer=function(buf,prepend){var opcodenum,len=buf.length;if(len>=0&&len<Opcode.OP_PUSHDATA1)opcodenum=len;else if(len<Math.pow(2,8))opcodenum=Opcode.OP_PUSHDATA1;else if(len<Math.pow(2,16))opcodenum=Opcode.OP_PUSHDATA2;else{if(!(len<Math.pow(2,32)))throw new Error("You can't push that much data");opcodenum=Opcode.OP_PUSHDATA4}return this._insertAtPosition({buf:buf,len:len,opcodenum:opcodenum},prepend),this},Script.prototype.removeCodeseparators=function(){for(var chunks=[],i=0;i<this.chunks.length;i++)this.chunks[i].opcodenum!==Opcode.OP_CODESEPARATOR&&chunks.push(this.chunks[i]);return this.chunks=chunks,this},Script.buildMultisigOut=function(publicKeys,threshold,opts){$.checkArgument(threshold<=publicKeys.length,"Number of required signatures must be less than or equal to the number of public keys"),opts=opts||{};var script=new Script;script.add(Opcode.smallInt(threshold));var sorted=publicKeys=_.map(publicKeys,PublicKey);opts.noSorting||(sorted=publicKeys.map(k=>k.toString("hex")).sort().map(k=>new PublicKey(k)));for(var i=0;i<sorted.length;i++){var publicKey=sorted[i];script.add(publicKey.toBuffer())}return script.add(Opcode.smallInt(publicKeys.length)),script.add(Opcode.OP_CHECKMULTISIG),script},Script.buildMultisigIn=function(pubkeys,threshold,signatures,opts){$.checkArgument(_.isArray(pubkeys)),$.checkArgument(_.isNumber(threshold)),$.checkArgument(_.isArray(signatures)),opts=opts||{};var s=new Script;return s.add(Opcode.OP_0),_.each(signatures,(function(signature){$.checkArgument(Buffer.isBuffer(signature),"Signatures must be an array of Buffers"),s.add(signature)})),s},Script.buildP2SHMultisigIn=function(pubkeys,threshold,signatures,opts){$.checkArgument(_.isArray(pubkeys)),$.checkArgument(_.isNumber(threshold)),$.checkArgument(_.isArray(signatures)),opts=opts||{};var s=new Script;return s.add(Opcode.OP_0),_.each(signatures,(function(signature){$.checkArgument(Buffer.isBuffer(signature),"Signatures must be an array of Buffers"),s.add(signature)})),s.add((opts.cachedMultisig||Script.buildMultisigOut(pubkeys,threshold,opts)).toBuffer()),s},Script.buildPublicKeyHashOut=function(to){$.checkArgument(!_.isUndefined(to)),$.checkArgument(to instanceof PublicKey||to instanceof Address||_.isString(to)),to instanceof PublicKey?to=to.toAddress():_.isString(to)&&(to=new Address(to));var s=new Script;return s.add(Opcode.OP_DUP).add(Opcode.OP_HASH160).add(to.hashBuffer).add(Opcode.OP_EQUALVERIFY).add(Opcode.OP_CHECKSIG),s._network=to.network,s},Script.buildPublicKeyOut=function(pubkey){$.checkArgument(pubkey instanceof PublicKey);var s=new Script;return s.add(pubkey.toBuffer()).add(Opcode.OP_CHECKSIG),s},Script.buildDataOut=function(data,encoding){$.checkArgument(_.isUndefined(data)||_.isString(data)||_.isArray(data)||Buffer.isBuffer(data));var datas=data;_.isArray(datas)||(datas=[data]);var s=new Script;s.add(Opcode.OP_RETURN);for(let data of datas)$.checkArgument(_.isUndefined(data)||_.isString(data)||Buffer.isBuffer(data)),_.isString(data)&&(data=Buffer.from(data,encoding)),_.isUndefined(data)||s.add(data);return s},Script.buildSafeDataOut=function(data,encoding){var s2=Script.buildDataOut(data,encoding),s1=new Script;return s1.add(Opcode.OP_FALSE),s1.add(s2),s1},Script.buildScriptHashOut=function(script){$.checkArgument(script instanceof Script||script instanceof Address&&script.isPayToScriptHash());var s=new Script;return s.add(Opcode.OP_HASH160).add(script instanceof Address?script.hashBuffer:Hash.sha256ripemd160(script.toBuffer())).add(Opcode.OP_EQUAL),s._network=script._network||script.network,s},Script.buildPublicKeyIn=function(signature,sigtype){$.checkArgument(signature instanceof Signature||Buffer.isBuffer(signature)),$.checkArgument(_.isUndefined(sigtype)||_.isNumber(sigtype)),signature instanceof Signature&&(signature=signature.toBuffer());var script=new Script;return script.add(Buffer.concat([signature,Buffer.from([255&(sigtype||Signature.SIGHASH_ALL)])])),script},Script.buildPublicKeyHashIn=function(publicKey,signature,sigtype){return $.checkArgument(signature instanceof Signature||Buffer.isBuffer(signature)),$.checkArgument(_.isUndefined(sigtype)||_.isNumber(sigtype)),signature instanceof Signature&&(signature=signature.toBuffer()),(new Script).add(Buffer.concat([signature,Buffer.from([255&(sigtype||Signature.SIGHASH_ALL)])])).add(new PublicKey(publicKey).toBuffer())},Script.empty=function(){return new Script},Script.prototype.toScriptHashOut=function(){return Script.buildScriptHashOut(this)},Script.fromAddress=function(address){if((address=Address(address)).isPayToScriptHash())return Script.buildScriptHashOut(address);if(address.isPayToPublicKeyHash())return Script.buildPublicKeyHashOut(address);throw new errors.Script.UnrecognizedAddress(address)},Script.prototype.getAddressInfo=function(opts){if(this._isInput)return this._getInputAddressInfo();if(this._isOutput)return this._getOutputAddressInfo();var info=this._getOutputAddressInfo();return info||this._getInputAddressInfo()},Script.prototype._getOutputAddressInfo=function(){var info={};if(this.isScriptHashOut())info.hashBuffer=this.getData(),info.type=Address.PayToScriptHash;else{if(!this.isPublicKeyHashOut())return!1;info.hashBuffer=this.getData(),info.type=Address.PayToPublicKeyHash}return info},Script.prototype._getInputAddressInfo=function(){var info={};if(this.isPublicKeyHashIn())info.hashBuffer=Hash.sha256ripemd160(this.chunks[1].buf),info.type=Address.PayToPublicKeyHash;else{if(!this.isScriptHashIn())return!1;info.hashBuffer=Hash.sha256ripemd160(this.chunks[this.chunks.length-1].buf),info.type=Address.PayToScriptHash}return info},Script.prototype.toAddress=function(network){var info=this.getAddressInfo();return!!info&&(info.network=Networks.get(network)||this._network||Networks.defaultNetwork,new Address(info))},Script.prototype.findAndDelete=function(script){for(var hex=script.toBuffer().toString("hex"),i=0;i<this.chunks.length;i++){hex===Script({chunks:[this.chunks[i]]}).toBuffer().toString("hex")&&this.chunks.splice(i,1)}return this},Script.prototype.checkMinimalPush=function(i){var chunk=this.chunks[i],buf=chunk.buf,opcodenum=chunk.opcodenum;return!buf||(0===buf.length?opcodenum===Opcode.OP_0:1===buf.length&&buf[0]>=1&&buf[0]<=16?opcodenum===Opcode.OP_1+(buf[0]-1):1===buf.length&&129===buf[0]?opcodenum===Opcode.OP_1NEGATE:buf.length<=75?opcodenum===buf.length:buf.length<=255?opcodenum===Opcode.OP_PUSHDATA1:!(buf.length<=65535)||opcodenum===Opcode.OP_PUSHDATA2)},Script.prototype._decodeOP_N=function(opcode){if(opcode===Opcode.OP_0)return 0;if(opcode>=Opcode.OP_1&&opcode<=Opcode.OP_16)return opcode-(Opcode.OP_1-1);throw new Error("Invalid opcode: "+JSON.stringify(opcode))},Script.prototype.getSignatureOperationsCount=function(accurate){accurate=!!_.isUndefined(accurate)||accurate;var self=this,n=0,lastOpcode=Opcode.OP_INVALIDOPCODE;return _.each(self.chunks,(function(chunk){var opcode=chunk.opcodenum;opcode===Opcode.OP_CHECKSIG||opcode===Opcode.OP_CHECKSIGVERIFY?n++:opcode!==Opcode.OP_CHECKMULTISIG&&opcode!==Opcode.OP_CHECKMULTISIGVERIFY||(accurate&&lastOpcode>=Opcode.OP_1&&lastOpcode<=Opcode.OP_16?n+=self._decodeOP_N(lastOpcode):n+=20),lastOpcode=opcode})),n},module.exports=Script},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(0),Script=__webpack_require__(60),Opcode=__webpack_require__(42),BN=__webpack_require__(2),Hash=__webpack_require__(4),Signature=__webpack_require__(9),PublicKey=__webpack_require__(13),cloneDeep=__webpack_require__(111),Interpreter=function Interpreter(obj){if(!(this instanceof Interpreter))return new Interpreter(obj);obj?(this.initialize(),this.set(obj)):this.initialize()};Interpreter.prototype.verify=function(scriptSig,scriptPubkey,tx,nin,flags,satoshisBN){var stackCopy,Transaction=__webpack_require__(34);if(_.isUndefined(tx)&&(tx=new Transaction),_.isUndefined(nin)&&(nin=0),_.isUndefined(flags)&&(flags=0),flags&Interpreter.SCRIPT_ENABLE_SIGHASH_FORKID&&(flags|=Interpreter.SCRIPT_VERIFY_STRICTENC,!satoshisBN))throw new Error("internal error - need satoshisBN to verify FORKID transactions");if(this.set({script:scriptSig,tx:tx,nin:nin,flags:flags,satoshisBN:satoshisBN}),0!=(flags&Interpreter.SCRIPT_VERIFY_SIGPUSHONLY)&&!scriptSig.isPushOnly())return this.errstr="SCRIPT_ERR_SIG_PUSHONLY",!1;if(!this.evaluate())return!1;flags&Interpreter.SCRIPT_VERIFY_P2SH&&(stackCopy=this.stack.slice());var stack=this.stack;if(this.initialize(),this.set({script:scriptPubkey,stack:stack,tx:tx,nin:nin,flags:flags,satoshisBN:satoshisBN}),!this.evaluate())return!1;if(0===this.stack.length)return this.errstr="SCRIPT_ERR_EVAL_FALSE_NO_RESULT",!1;var buf=this.stack[this.stack.length-1];if(!Interpreter.castToBool(buf))return this.errstr="SCRIPT_ERR_EVAL_FALSE_IN_STACK",!1;if(flags&Interpreter.SCRIPT_VERIFY_P2SH&&scriptPubkey.isScriptHashOut()){if(!scriptSig.isPushOnly())return this.errstr="SCRIPT_ERR_SIG_PUSHONLY",!1;if(0===stackCopy.length)throw new Error("internal error - stack copy empty");var redeemScriptSerialized=stackCopy[stackCopy.length-1],redeemScript=Script.fromBuffer(redeemScriptSerialized);if(stackCopy.pop(),this.initialize(),this.set({script:redeemScript,stack:stackCopy,tx:tx,nin:nin,flags:flags,satoshisBN:satoshisBN}),!this.evaluate())return!1;if(0===stackCopy.length)return this.errstr="SCRIPT_ERR_EVAL_FALSE_NO_P2SH_STACK",!1;if(!Interpreter.castToBool(stackCopy[stackCopy.length-1]))return this.errstr="SCRIPT_ERR_EVAL_FALSE_IN_P2SH_STACK",!1}if(0!=(flags&Interpreter.SCRIPT_VERIFY_CLEANSTACK)){if(0==(flags&Interpreter.SCRIPT_VERIFY_P2SH))throw new Error("internal error - CLEANSTACK without P2SH");if(1!==stackCopy.length)return this.errstr="SCRIPT_ERR_CLEANSTACK",!1}return!0},module.exports=Interpreter,Interpreter.prototype.initialize=function(obj){this.stack=[],this.altstack=[],this.pc=0,this.pbegincodehash=0,this.nOpCount=0,this.vfExec=[],this.errstr="",this.flags=0},Interpreter.prototype.set=function(obj){this.script=obj.script||this.script,this.tx=obj.tx||this.tx,this.nin=void 0!==obj.nin?obj.nin:this.nin,this.satoshisBN=obj.satoshisBN||this.satoshisBN,this.stack=obj.stack||this.stack,this.altstack=obj.altstack||this.altstack,this.pc=void 0!==obj.pc?obj.pc:this.pc,this.pbegincodehash=void 0!==obj.pbegincodehash?obj.pbegincodehash:this.pbegincodehash,this.nOpCount=void 0!==obj.nOpCount?obj.nOpCount:this.nOpCount,this.vfExec=obj.vfExec||this.vfExec,this.errstr=obj.errstr||this.errstr,this.flags=void 0!==obj.flags?obj.flags:this.flags},Interpreter.true=Buffer.from([1]),Interpreter.false=Buffer.from([]),Interpreter.MAX_SCRIPT_ELEMENT_SIZE=520,Interpreter.MAXIMUM_ELEMENT_SIZE=4,Interpreter.LOCKTIME_THRESHOLD_BN=new BN(Interpreter.LOCKTIME_THRESHOLD=5e8),Interpreter.SCRIPT_VERIFY_NONE=0,Interpreter.SCRIPT_VERIFY_P2SH=1,Interpreter.SCRIPT_VERIFY_STRICTENC=2,Interpreter.SCRIPT_VERIFY_DERSIG=4,Interpreter.SCRIPT_VERIFY_LOW_S=8,Interpreter.SCRIPT_VERIFY_NULLDUMMY=16,Interpreter.SCRIPT_VERIFY_SIGPUSHONLY=32,Interpreter.SCRIPT_VERIFY_MINIMALDATA=64,Interpreter.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS=128,Interpreter.SCRIPT_VERIFY_CLEANSTACK=256,Interpreter.SCRIPT_VERIFY_CHECKLOCKTIMEVERIFY=512,Interpreter.SCRIPT_VERIFY_CHECKSEQUENCEVERIFY=1024,Interpreter.SCRIPT_VERIFY_MINIMALIF=8192,Interpreter.SCRIPT_VERIFY_NULLFAIL=16384,Interpreter.SCRIPT_VERIFY_COMPRESSED_PUBKEYTYPE=32768,Interpreter.SCRIPT_ENABLE_SIGHASH_FORKID=65536,Interpreter.SCRIPT_ENABLE_REPLAY_PROTECTION=1<<17,Interpreter.SCRIPT_ENABLE_MONOLITH_OPCODES=1<<18,Interpreter.SCRIPT_ENABLE_MAGNETIC_OPCODES=1<<19,Interpreter.SEQUENCE_LOCKTIME_DISABLE_FLAG=1<<31,Interpreter.SEQUENCE_LOCKTIME_TYPE_FLAG=1<<22,Interpreter.SEQUENCE_LOCKTIME_MASK=65535,Interpreter.castToBool=function(buf){for(var i=0;i<buf.length;i++)if(0!==buf[i])return i!==buf.length-1||128!==buf[i];return!1},Interpreter.prototype.checkSignatureEncoding=function(buf){var sig;if(0===buf.length)return!0;if(0!=(this.flags&(Interpreter.SCRIPT_VERIFY_DERSIG|Interpreter.SCRIPT_VERIFY_LOW_S|Interpreter.SCRIPT_VERIFY_STRICTENC))&&!Signature.isTxDER(buf))return this.errstr="SCRIPT_ERR_SIG_DER_INVALID_FORMAT",!1;if(0!=(this.flags&Interpreter.SCRIPT_VERIFY_LOW_S)){if(!(sig=Signature.fromTxFormat(buf)).hasLowS())return this.errstr="SCRIPT_ERR_SIG_DER_HIGH_S",!1}else if(0!=(this.flags&Interpreter.SCRIPT_VERIFY_STRICTENC)){if(!(sig=Signature.fromTxFormat(buf)).hasDefinedHashtype())return this.errstr="SCRIPT_ERR_SIG_HASHTYPE",!1;if(!(this.flags&Interpreter.SCRIPT_ENABLE_SIGHASH_FORKID)&&sig.nhashtype&Signature.SIGHASH_FORKID)return this.errstr="SCRIPT_ERR_ILLEGAL_FORKID",!1;if(this.flags&Interpreter.SCRIPT_ENABLE_SIGHASH_FORKID&&!(sig.nhashtype&Signature.SIGHASH_FORKID))return this.errstr="SCRIPT_ERR_MUST_USE_FORKID",!1}return!0},Interpreter.prototype.checkPubkeyEncoding=function(buf){return!(0!=(this.flags&Interpreter.SCRIPT_VERIFY_STRICTENC)&&!PublicKey.isValid(buf))||(this.errstr="SCRIPT_ERR_PUBKEYTYPE",!1)},Interpreter._isMinimallyEncoded=function(buf,nMaxNumSize){return nMaxNumSize=nMaxNumSize||Interpreter.MAXIMUM_ELEMENT_SIZE,!(buf.length>nMaxNumSize)&&!(buf.length>0&&0==(127&buf[buf.length-1])&&(buf.length<=1||0==(128&buf[buf.length-2])))},Interpreter._minimallyEncode=function(buf){if(0===buf.length)return buf;var last=buf[buf.length-1];if(127&last)return buf;if(1===buf.length)return Buffer.from("");if(128&buf[buf.length-2])return buf;for(var i=buf.length-1;i>0;i--)if(0!==buf[i-1])return 128&buf[i-1]?buf[i++]=last:buf[i-1]|=last,buf.slice(0,i);return Buffer.from("")},Interpreter.prototype.evaluate=function(){if(this.script.toBuffer().length>1e4)return this.errstr="SCRIPT_ERR_SCRIPT_SIZE",!1;try{for(;this.pc<this.script.chunks.length;){let thisStep={pc:this.pc,opcode:Opcode.fromNumber(this.script.chunks[this.pc].opcodenum)};if(!this.step())return!1;this._callbackStep(thisStep)}if(this.stack.length+this.altstack.length>1e3)return this.errstr="SCRIPT_ERR_STACK_SIZE",!1}catch(e){return this.errstr="SCRIPT_ERR_UNKNOWN_ERROR: "+e,!1}return!(this.vfExec.length>0)||(this.errstr="SCRIPT_ERR_UNBALANCED_CONDITIONAL",!1)},Interpreter.prototype._callbackStep=function(thisStep){if("function"==typeof this.stepListener)try{this.stepListener(thisStep,cloneDeep(this.stack,!0),cloneDeep(this.altstack,!0))}catch(err){console.log("Error in Step callback:"+err)}},Interpreter.prototype.checkLockTime=function(nLockTime){return!!(this.tx.nLockTime<Interpreter.LOCKTIME_THRESHOLD&&nLockTime.lt(Interpreter.LOCKTIME_THRESHOLD_BN)||this.tx.nLockTime>=Interpreter.LOCKTIME_THRESHOLD&&nLockTime.gte(Interpreter.LOCKTIME_THRESHOLD_BN))&&(!nLockTime.gt(new BN(this.tx.nLockTime))&&!this.tx.inputs[this.nin].isFinal())},Interpreter.prototype.checkSequence=function(nSequence){var txToSequence=this.tx.inputs[this.nin].sequenceNumber;if(this.tx.version<2)return!1;if(txToSequence&Interpreter.SEQUENCE_LOCKTIME_DISABLE_FLAG)return!1;var nLockTimeMask=Interpreter.SEQUENCE_LOCKTIME_TYPE_FLAG|Interpreter.SEQUENCE_LOCKTIME_MASK,txToSequenceMasked=new BN(txToSequence&nLockTimeMask),nSequenceMasked=nSequence.and(nLockTimeMask),SEQUENCE_LOCKTIME_TYPE_FLAG_BN=new BN(Interpreter.SEQUENCE_LOCKTIME_TYPE_FLAG);return!!(txToSequenceMasked.lt(SEQUENCE_LOCKTIME_TYPE_FLAG_BN)&&nSequenceMasked.lt(SEQUENCE_LOCKTIME_TYPE_FLAG_BN)||txToSequenceMasked.gte(SEQUENCE_LOCKTIME_TYPE_FLAG_BN)&&nSequenceMasked.gte(SEQUENCE_LOCKTIME_TYPE_FLAG_BN))&&!nSequenceMasked.gt(txToSequenceMasked)},Interpreter.prototype.step=function(){var self=this;function stacktop(i){return self.stack[self.stack.length+i]}var buf,buf1,buf2,spliced,n,x1,x2,bn,bn1,bn2,bufSig,bufPubkey,subscript,sig,pubkey,fValue,fSuccess,fRequireMinimal=0!=(this.flags&Interpreter.SCRIPT_VERIFY_MINIMALDATA),fExec=-1===this.vfExec.indexOf(!1),chunk=this.script.chunks[this.pc];this.pc++;var opcodenum=chunk.opcodenum;if(_.isUndefined(opcodenum))return this.errstr="SCRIPT_ERR_UNDEFINED_OPCODE",!1;if(chunk.buf&&chunk.buf.length>Interpreter.MAX_SCRIPT_ELEMENT_SIZE)return this.errstr="SCRIPT_ERR_PUSH_SIZE",!1;if(opcodenum>Opcode.OP_16&&++this.nOpCount>201)return this.errstr="SCRIPT_ERR_OP_COUNT",!1;if(function(opcode){switch(opcode){case Opcode.OP_2MUL:case Opcode.OP_2DIV:return!0;case Opcode.OP_INVERT:case Opcode.OP_MUL:case Opcode.OP_LSHIFT:case Opcode.OP_RSHIFT:if(0==(self.flags&Interpreter.SCRIPT_ENABLE_MAGNETIC_OPCODES))return!0;break;case Opcode.OP_DIV:case Opcode.OP_MOD:case Opcode.OP_SPLIT:case Opcode.OP_CAT:case Opcode.OP_AND:case Opcode.OP_OR:case Opcode.OP_XOR:case Opcode.OP_BIN2NUM:case Opcode.OP_NUM2BIN:if(0==(self.flags&Interpreter.SCRIPT_ENABLE_MONOLITH_OPCODES))return!0}return!1}(opcodenum))return this.errstr="SCRIPT_ERR_DISABLED_OPCODE",!1;if(fExec&&opcodenum>=0&&opcodenum<=Opcode.OP_PUSHDATA4){if(fRequireMinimal&&!this.script.checkMinimalPush(this.pc-1))return this.errstr="SCRIPT_ERR_MINIMALDATA",!1;if(chunk.buf){if(chunk.len!==chunk.buf.length)throw new Error(`Length of push value not equal to length of data (${chunk.len},${chunk.buf.length})`);this.stack.push(chunk.buf)}else this.stack.push(Interpreter.false)}else if(fExec||Opcode.OP_IF<=opcodenum&&opcodenum<=Opcode.OP_ENDIF)switch(opcodenum){case Opcode.OP_1NEGATE:case Opcode.OP_1:case Opcode.OP_2:case Opcode.OP_3:case Opcode.OP_4:case Opcode.OP_5:case Opcode.OP_6:case Opcode.OP_7:case Opcode.OP_8:case Opcode.OP_9:case Opcode.OP_10:case Opcode.OP_11:case Opcode.OP_12:case Opcode.OP_13:case Opcode.OP_14:case Opcode.OP_15:case Opcode.OP_16:n=opcodenum-(Opcode.OP_1-1),buf=new BN(n).toScriptNumBuffer(),this.stack.push(buf);break;case Opcode.OP_NOP:break;case Opcode.OP_NOP2:case Opcode.OP_CHECKLOCKTIMEVERIFY:if(!(this.flags&Interpreter.SCRIPT_VERIFY_CHECKLOCKTIMEVERIFY)){if(this.flags&Interpreter.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS)return this.errstr="SCRIPT_ERR_DISCOURAGE_UPGRADABLE_NOPS",!1;break}if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var nLockTime=BN.fromScriptNumBuffer(this.stack[this.stack.length-1],fRequireMinimal,5);if(nLockTime.lt(new BN(0)))return this.errstr="SCRIPT_ERR_NEGATIVE_LOCKTIME",!1;if(!this.checkLockTime(nLockTime))return this.errstr="SCRIPT_ERR_UNSATISFIED_LOCKTIME",!1;break;case Opcode.OP_NOP3:case Opcode.OP_CHECKSEQUENCEVERIFY:if(!(this.flags&Interpreter.SCRIPT_VERIFY_CHECKSEQUENCEVERIFY)){if(this.flags&Interpreter.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS)return this.errstr="SCRIPT_ERR_DISCOURAGE_UPGRADABLE_NOPS",!1;break}if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var nSequence=BN.fromScriptNumBuffer(stacktop(-1),fRequireMinimal,5);if(nSequence.lt(new BN(0)))return this.errstr="SCRIPT_ERR_NEGATIVE_LOCKTIME",!1;if(0!=(nSequence&Interpreter.SEQUENCE_LOCKTIME_DISABLE_FLAG))break;if(!this.checkSequence(nSequence))return this.errstr="SCRIPT_ERR_UNSATISFIED_LOCKTIME",!1;break;case Opcode.OP_NOP1:case Opcode.OP_NOP4:case Opcode.OP_NOP5:case Opcode.OP_NOP6:case Opcode.OP_NOP7:case Opcode.OP_NOP8:case Opcode.OP_NOP9:case Opcode.OP_NOP10:if(this.flags&Interpreter.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS)return this.errstr="SCRIPT_ERR_DISCOURAGE_UPGRADABLE_NOPS",!1;break;case Opcode.OP_IF:case Opcode.OP_NOTIF:if(fValue=!1,fExec){if(this.stack.length<1)return this.errstr="SCRIPT_ERR_UNBALANCED_CONDITIONAL",!1;if(buf=stacktop(-1),this.flags&Interpreter.SCRIPT_VERIFY_MINIMALIF){if(buf.length>1)return this.errstr="SCRIPT_ERR_MINIMALIF",!1;if(1===buf.length&&1!==buf[0])return this.errstr="SCRIPT_ERR_MINIMALIF",!1}fValue=Interpreter.castToBool(buf),opcodenum===Opcode.OP_NOTIF&&(fValue=!fValue),this.stack.pop()}this.vfExec.push(fValue);break;case Opcode.OP_ELSE:if(0===this.vfExec.length)return this.errstr="SCRIPT_ERR_UNBALANCED_CONDITIONAL",!1;this.vfExec[this.vfExec.length-1]=!this.vfExec[this.vfExec.length-1];break;case Opcode.OP_ENDIF:if(0===this.vfExec.length)return this.errstr="SCRIPT_ERR_UNBALANCED_CONDITIONAL",!1;this.vfExec.pop();break;case Opcode.OP_VERIFY:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(buf=stacktop(-1),!(fValue=Interpreter.castToBool(buf)))return this.errstr="SCRIPT_ERR_VERIFY",!1;this.stack.pop();break;case Opcode.OP_RETURN:return this.errstr="SCRIPT_ERR_OP_RETURN",!1;case Opcode.OP_TOALTSTACK:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.altstack.push(this.stack.pop());break;case Opcode.OP_FROMALTSTACK:if(this.altstack.length<1)return this.errstr="SCRIPT_ERR_INVALID_ALTSTACK_OPERATION",!1;this.stack.push(this.altstack.pop());break;case Opcode.OP_2DROP:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.pop(),this.stack.pop();break;case Opcode.OP_2DUP:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;buf1=stacktop(-2),buf2=stacktop(-1),this.stack.push(Buffer.from(buf1)),this.stack.push(Buffer.from(buf2));break;case Opcode.OP_3DUP:if(this.stack.length<3)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;buf1=stacktop(-3),buf2=stacktop(-2);var buf3=stacktop(-1);this.stack.push(Buffer.from(buf1)),this.stack.push(Buffer.from(buf2)),this.stack.push(Buffer.from(buf3));break;case Opcode.OP_2OVER:if(this.stack.length<4)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;buf1=stacktop(-4),buf2=stacktop(-3),this.stack.push(Buffer.from(buf1)),this.stack.push(Buffer.from(buf2));break;case Opcode.OP_2ROT:if(this.stack.length<6)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;spliced=this.stack.splice(this.stack.length-6,2),this.stack.push(spliced[0]),this.stack.push(spliced[1]);break;case Opcode.OP_2SWAP:if(this.stack.length<4)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;spliced=this.stack.splice(this.stack.length-4,2),this.stack.push(spliced[0]),this.stack.push(spliced[1]);break;case Opcode.OP_IFDUP:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;buf=stacktop(-1),(fValue=Interpreter.castToBool(buf))&&this.stack.push(Buffer.from(buf));break;case Opcode.OP_DEPTH:buf=new BN(this.stack.length).toScriptNumBuffer(),this.stack.push(buf);break;case Opcode.OP_DROP:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.pop();break;case Opcode.OP_DUP:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.push(Buffer.from(stacktop(-1)));break;case Opcode.OP_NIP:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.splice(this.stack.length-2,1);break;case Opcode.OP_OVER:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.push(Buffer.from(stacktop(-2)));break;case Opcode.OP_PICK:case Opcode.OP_ROLL:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(buf=stacktop(-1),n=(bn=BN.fromScriptNumBuffer(buf,fRequireMinimal)).toNumber(),this.stack.pop(),n<0||n>=this.stack.length)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;buf=stacktop(-n-1),opcodenum===Opcode.OP_ROLL&&this.stack.splice(this.stack.length-n-1,1),this.stack.push(Buffer.from(buf));break;case Opcode.OP_ROT:if(this.stack.length<3)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;x1=stacktop(-3),x2=stacktop(-2);var x3=stacktop(-1);this.stack[this.stack.length-3]=x2,this.stack[this.stack.length-2]=x3,this.stack[this.stack.length-1]=x1;break;case Opcode.OP_SWAP:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;x1=stacktop(-2),x2=stacktop(-1),this.stack[this.stack.length-2]=x2,this.stack[this.stack.length-1]=x1;break;case Opcode.OP_TUCK:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.splice(this.stack.length-2,0,Buffer.from(stacktop(-1)));break;case Opcode.OP_SIZE:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;bn=new BN(stacktop(-1).length),this.stack.push(bn.toScriptNumBuffer());break;case Opcode.OP_AND:case Opcode.OP_OR:case Opcode.OP_XOR:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(buf1=stacktop(-2),buf2=stacktop(-1),buf1.length!==buf2.length)return this.errstr="SCRIPT_ERR_INVALID_OPERAND_SIZE",!1;switch(opcodenum){case Opcode.OP_AND:for(let i=0;i<buf1.length;i++)buf1[i]&=buf2[i];break;case Opcode.OP_OR:for(let i=0;i<buf1.length;i++)buf1[i]|=buf2[i];break;case Opcode.OP_XOR:for(let i=0;i<buf1.length;i++)buf1[i]^=buf2[i]}this.stack.pop();break;case Opcode.OP_INVERT:this.stack.length<1&&(this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION"),buf=stacktop(-1);for(let i=0;i<buf.length;i++)buf[i]=~buf[i];break;case Opcode.OP_LSHIFT:case Opcode.OP_RSHIFT:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(0===(buf1=stacktop(-2)).length)this.stack.pop();else{if(bn1=new BN(buf1),(n=(bn2=BN.fromScriptNumBuffer(stacktop(-1),fRequireMinimal)).toNumber())<0)return this.errstr="SCRIPT_ERR_INVALID_NUMBER_RANGE",!1;let shifted;this.stack.pop(),this.stack.pop(),opcodenum===Opcode.OP_LSHIFT&&(shifted=bn1.ushln(n)),opcodenum===Opcode.OP_RSHIFT&&(shifted=bn1.ushrn(n));let bufShifted=function(buf,len){let b=buf;for(;b.length<len;)b=Buffer.concat([Buffer.from([0]),b]);return b}(Buffer.from(shifted.toArray().slice(-1*buf1.length)),buf1.length);this.stack.push(bufShifted)}break;case Opcode.OP_EQUAL:case Opcode.OP_EQUALVERIFY:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;buf1=stacktop(-2),buf2=stacktop(-1);var fEqual=buf1.toString("hex")===buf2.toString("hex");if(this.stack.pop(),this.stack.pop(),this.stack.push(fEqual?Interpreter.true:Interpreter.false),opcodenum===Opcode.OP_EQUALVERIFY){if(!fEqual)return this.errstr="SCRIPT_ERR_EQUALVERIFY",!1;this.stack.pop()}break;case Opcode.OP_1ADD:case Opcode.OP_1SUB:case Opcode.OP_NEGATE:case Opcode.OP_ABS:case Opcode.OP_NOT:case Opcode.OP_0NOTEQUAL:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;switch(buf=stacktop(-1),bn=BN.fromScriptNumBuffer(buf,fRequireMinimal),opcodenum){case Opcode.OP_1ADD:bn=bn.add(BN.One);break;case Opcode.OP_1SUB:bn=bn.sub(BN.One);break;case Opcode.OP_NEGATE:bn=bn.neg();break;case Opcode.OP_ABS:bn.cmp(BN.Zero)<0&&(bn=bn.neg());break;case Opcode.OP_NOT:bn=new BN((0===bn.cmp(BN.Zero))+0);break;case Opcode.OP_0NOTEQUAL:bn=new BN((0!==bn.cmp(BN.Zero))+0)}this.stack.pop(),this.stack.push(bn.toScriptNumBuffer());break;case Opcode.OP_ADD:case Opcode.OP_SUB:case Opcode.OP_MUL:case Opcode.OP_MOD:case Opcode.OP_DIV:case Opcode.OP_BOOLAND:case Opcode.OP_BOOLOR:case Opcode.OP_NUMEQUAL:case Opcode.OP_NUMEQUALVERIFY:case Opcode.OP_NUMNOTEQUAL:case Opcode.OP_LESSTHAN:case Opcode.OP_GREATERTHAN:case Opcode.OP_LESSTHANOREQUAL:case Opcode.OP_GREATERTHANOREQUAL:case Opcode.OP_MIN:case Opcode.OP_MAX:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;switch(bn1=BN.fromScriptNumBuffer(stacktop(-2),fRequireMinimal),bn2=BN.fromScriptNumBuffer(stacktop(-1),fRequireMinimal),bn=new BN(0),opcodenum){case Opcode.OP_ADD:bn=bn1.add(bn2);break;case Opcode.OP_SUB:bn=bn1.sub(bn2);break;case Opcode.OP_MUL:bn=bn1.mul(bn2);break;case Opcode.OP_DIV:if(0===bn2)return this.errstr="SCRIPT_ERR_DIV_BY_ZERO",!1;bn=bn1.div(bn2);break;case Opcode.OP_MOD:if(0===bn2)return this.errstr="SCRIPT_ERR_DIV_BY_ZERO",!1;bn=bn1.mod(bn2);break;case Opcode.OP_BOOLAND:bn=new BN((0!==bn1.cmp(BN.Zero)&&0!==bn2.cmp(BN.Zero))+0);break;case Opcode.OP_BOOLOR:bn=new BN((0!==bn1.cmp(BN.Zero)||0!==bn2.cmp(BN.Zero))+0);break;case Opcode.OP_NUMEQUAL:case Opcode.OP_NUMEQUALVERIFY:bn=new BN((0===bn1.cmp(bn2))+0);break;case Opcode.OP_NUMNOTEQUAL:bn=new BN((0!==bn1.cmp(bn2))+0);break;case Opcode.OP_LESSTHAN:bn=new BN((bn1.cmp(bn2)<0)+0);break;case Opcode.OP_GREATERTHAN:bn=new BN((bn1.cmp(bn2)>0)+0);break;case Opcode.OP_LESSTHANOREQUAL:bn=new BN((bn1.cmp(bn2)<=0)+0);break;case Opcode.OP_GREATERTHANOREQUAL:bn=new BN((bn1.cmp(bn2)>=0)+0);break;case Opcode.OP_MIN:bn=bn1.cmp(bn2)<0?bn1:bn2;break;case Opcode.OP_MAX:bn=bn1.cmp(bn2)>0?bn1:bn2}if(this.stack.pop(),this.stack.pop(),this.stack.push(bn.toScriptNumBuffer()),opcodenum===Opcode.OP_NUMEQUALVERIFY){if(!Interpreter.castToBool(stacktop(-1)))return this.errstr="SCRIPT_ERR_NUMEQUALVERIFY",!1;this.stack.pop()}break;case Opcode.OP_WITHIN:if(this.stack.length<3)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;bn1=BN.fromScriptNumBuffer(stacktop(-3),fRequireMinimal),bn2=BN.fromScriptNumBuffer(stacktop(-2),fRequireMinimal);var bn3=BN.fromScriptNumBuffer(stacktop(-1),fRequireMinimal);fValue=bn2.cmp(bn1)<=0&&bn1.cmp(bn3)<0,this.stack.pop(),this.stack.pop(),this.stack.pop(),this.stack.push(fValue?Interpreter.true:Interpreter.false);break;case Opcode.OP_RIPEMD160:case Opcode.OP_SHA1:case Opcode.OP_SHA256:case Opcode.OP_HASH160:case Opcode.OP_HASH256:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var bufHash;buf=stacktop(-1),opcodenum===Opcode.OP_RIPEMD160?bufHash=Hash.ripemd160(buf):opcodenum===Opcode.OP_SHA1?bufHash=Hash.sha1(buf):opcodenum===Opcode.OP_SHA256?bufHash=Hash.sha256(buf):opcodenum===Opcode.OP_HASH160?bufHash=Hash.sha256ripemd160(buf):opcodenum===Opcode.OP_HASH256&&(bufHash=Hash.sha256sha256(buf)),this.stack.pop(),this.stack.push(bufHash);break;case Opcode.OP_CODESEPARATOR:this.pbegincodehash=this.pc;break;case Opcode.OP_CHECKSIG:case Opcode.OP_CHECKSIGVERIFY:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(bufSig=stacktop(-2),bufPubkey=stacktop(-1),!this.checkSignatureEncoding(bufSig)||!this.checkPubkeyEncoding(bufPubkey))return!1;subscript=(new Script).set({chunks:this.script.chunks.slice(this.pbegincodehash)});var tmpScript=(new Script).add(bufSig);subscript.findAndDelete(tmpScript);try{sig=Signature.fromTxFormat(bufSig),pubkey=PublicKey.fromBuffer(bufPubkey,!1),fSuccess=this.tx.verifySignature(sig,pubkey,this.nin,subscript,this.satoshisBN,this.flags)}catch(e){fSuccess=!1}if(!fSuccess&&this.flags&Interpreter.SCRIPT_VERIFY_NULLFAIL&&bufSig.length)return this.errstr="SCRIPT_ERR_NULLFAIL",!1;if(this.stack.pop(),this.stack.pop(),this.stack.push(fSuccess?Interpreter.true:Interpreter.false),opcodenum===Opcode.OP_CHECKSIGVERIFY){if(!fSuccess)return this.errstr="SCRIPT_ERR_CHECKSIGVERIFY",!1;this.stack.pop()}break;case Opcode.OP_CHECKMULTISIG:case Opcode.OP_CHECKMULTISIGVERIFY:var i=1;if(this.stack.length<i)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var nKeysCount=BN.fromScriptNumBuffer(stacktop(-i),fRequireMinimal).toNumber();if(nKeysCount<0||nKeysCount>20)return this.errstr="SCRIPT_ERR_PUBKEY_COUNT",!1;if(this.nOpCount+=nKeysCount,this.nOpCount>201)return this.errstr="SCRIPT_ERR_OP_COUNT",!1;var ikey=++i;i+=nKeysCount;var ikey2=nKeysCount+2;if(this.stack.length<i)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var nSigsCount=BN.fromScriptNumBuffer(stacktop(-i),fRequireMinimal).toNumber();if(nSigsCount<0||nSigsCount>nKeysCount)return this.errstr="SCRIPT_ERR_SIG_COUNT",!1;var isig=++i;if(i+=nSigsCount,this.stack.length<i)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;subscript=(new Script).set({chunks:this.script.chunks.slice(this.pbegincodehash)});for(var k=0;k<nSigsCount;k++)bufSig=stacktop(-isig-k),subscript.findAndDelete((new Script).add(bufSig));for(fSuccess=!0;fSuccess&&nSigsCount>0;){if(bufSig=stacktop(-isig),bufPubkey=stacktop(-ikey),!this.checkSignatureEncoding(bufSig)||!this.checkPubkeyEncoding(bufPubkey))return!1;var fOk;try{sig=Signature.fromTxFormat(bufSig),pubkey=PublicKey.fromBuffer(bufPubkey,!1),fOk=this.tx.verifySignature(sig,pubkey,this.nin,subscript,this.satoshisBN,this.flags)}catch(e){fOk=!1}fOk&&(isig++,nSigsCount--),ikey++,nSigsCount>--nKeysCount&&(fSuccess=!1)}for(;i-- >1;){if(!fSuccess&&this.flags&Interpreter.SCRIPT_VERIFY_NULLFAIL&&!ikey2&&stacktop(-1).length)return this.errstr="SCRIPT_ERR_NULLFAIL",!1;ikey2>0&&ikey2--,this.stack.pop()}if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(this.flags&Interpreter.SCRIPT_VERIFY_NULLDUMMY&&stacktop(-1).length)return this.errstr="SCRIPT_ERR_SIG_NULLDUMMY",!1;if(this.stack.pop(),this.stack.push(fSuccess?Interpreter.true:Interpreter.false),opcodenum===Opcode.OP_CHECKMULTISIGVERIFY){if(!fSuccess)return this.errstr="SCRIPT_ERR_CHECKMULTISIGVERIFY",!1;this.stack.pop()}break;case Opcode.OP_CAT:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(buf1=stacktop(-2),buf2=stacktop(-1),buf1.length+buf2.length>Interpreter.MAX_SCRIPT_ELEMENT_SIZE)return this.errstr="SCRIPT_ERR_PUSH_SIZE",!1;this.stack[this.stack.length-2]=Buffer.concat([buf1,buf2]),this.stack.pop();break;case Opcode.OP_SPLIT:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;buf1=stacktop(-2);var position=BN.fromScriptNumBuffer(stacktop(-1),fRequireMinimal).toNumber();if(position<0||position>buf1.length)return this.errstr="SCRIPT_ERR_INVALID_SPLIT_RANGE",!1;var n1=Buffer.from(buf1);this.stack[this.stack.length-2]=n1.slice(0,position),this.stack[this.stack.length-1]=n1.slice(position);break;case Opcode.OP_NUM2BIN:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var size=BN.fromScriptNumBuffer(stacktop(-1),fRequireMinimal).toNumber();if(size>Interpreter.MAX_SCRIPT_ELEMENT_SIZE)return this.errstr="SCRIPT_ERR_PUSH_SIZE",!1;this.stack.pop();var rawnum=stacktop(-1);if((rawnum=Interpreter._minimallyEncode(rawnum)).length>size)return this.errstr="SCRIPT_ERR_IMPOSSIBLE_ENCODING",!1;if(rawnum.length===size){this.stack[this.stack.length-1]=rawnum;break}var signbit=0;rawnum.length>0&&(signbit=128&rawnum[rawnum.length-1],rawnum[rawnum.length-1]&=127);var num=Buffer.alloc(size);rawnum.copy(num,0);for(var l=rawnum.length-1;l++<size-2;)num[l]=0;num[l]=signbit,this.stack[this.stack.length-1]=num;break;case Opcode.OP_BIN2NUM:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(buf1=stacktop(-1),buf2=Interpreter._minimallyEncode(buf1),this.stack[this.stack.length-1]=buf2,!Interpreter._isMinimallyEncoded(buf2))return this.errstr="SCRIPT_ERR_INVALID_NUMBER_RANGE",!1;break;default:return this.errstr="SCRIPT_ERR_BAD_OPCODE",!1}return!0}},function(module,exports){var toString=Object.prototype.toString;function ctorName(val){return"function"==typeof val.constructor?val.constructor.name:null}module.exports=function(val){if(void 0===val)return"undefined";if(null===val)return"null";var type=typeof val;if("boolean"===type)return"boolean";if("string"===type)return"string";if("number"===type)return"number";if("symbol"===type)return"symbol";if("function"===type)return"GeneratorFunction"===ctorName(val)?"generatorfunction":"function";if(function(val){return Array.isArray?Array.isArray(val):val instanceof Array}(val))return"array";if(function(val){if(val.constructor&&"function"==typeof val.constructor.isBuffer)return val.constructor.isBuffer(val);return!1}(val))return"buffer";if(function(val){try{if("number"==typeof val.length&&"function"==typeof val.callee)return!0}catch(err){if(-1!==err.message.indexOf("callee"))return!0}return!1}(val))return"arguments";if(function(val){return val instanceof Date||"function"==typeof val.toDateString&&"function"==typeof val.getDate&&"function"==typeof val.setDate}(val))return"date";if(function(val){return val instanceof Error||"string"==typeof val.message&&val.constructor&&"number"==typeof val.constructor.stackTraceLimit}(val))return"error";if(function(val){return val instanceof RegExp||"string"==typeof val.flags&&"boolean"==typeof val.ignoreCase&&"boolean"==typeof val.multiline&&"boolean"==typeof val.global}(val))return"regexp";switch(ctorName(val)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(function(val){return"function"==typeof val.throw&&"function"==typeof val.return&&"function"==typeof val.next}(val))return"generator";switch(type=toString.call(val)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return type.slice(8,-1).toLowerCase().replace(/\s/g,"")}},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(0),$=__webpack_require__(1),buffer=__webpack_require__(7),errors=__webpack_require__(8),JSUtil=__webpack_require__(3),BufferReader=__webpack_require__(16),BufferWriter=__webpack_require__(14),Varint=__webpack_require__(27),Hash=__webpack_require__(4),Signature=__webpack_require__(9),Sighash=__webpack_require__(17),Address=__webpack_require__(23),UnspentOutput=__webpack_require__(64),Input=__webpack_require__(43),PublicKeyHashInput=Input.PublicKeyHash,PublicKeyInput=Input.PublicKey,MultiSigScriptHashInput=Input.MultiSigScriptHash,MultiSigInput=Input.MultiSig,Output=__webpack_require__(18),Script=__webpack_require__(10),PrivateKey=__webpack_require__(32),BN=__webpack_require__(2);function Transaction(serialized){if(!(this instanceof Transaction))return new Transaction(serialized);if(this.inputs=[],this.outputs=[],this._inputAmount=void 0,this._outputAmount=void 0,serialized){if(serialized instanceof Transaction)return Transaction.shallowCopy(serialized);if(JSUtil.isHexa(serialized))this.fromString(serialized);else if(Buffer.isBuffer(serialized))this.fromBuffer(serialized);else{if(!_.isObject(serialized))throw new errors.InvalidArgument("Must provide an object or string to deserialize a transaction");this.fromObject(serialized)}}else this._newTransaction()}Transaction.DUST_AMOUNT=546,Transaction.FEE_SECURITY_MARGIN=150,Transaction.MAX_MONEY=21e14,Transaction.NLOCKTIME_BLOCKHEIGHT_LIMIT=5e8,Transaction.NLOCKTIME_MAX_VALUE=4294967295,Transaction.FEE_PER_KB=500,Transaction.CHANGE_OUTPUT_MAX_SIZE=62,Transaction.shallowCopy=function(transaction){return new Transaction(transaction.toBuffer())};var hashProperty={configurable:!1,enumerable:!0,get:function(){return this._hash=new BufferReader(this._getHash()).readReverse().toString("hex"),this._hash}};Object.defineProperty(Transaction.prototype,"hash",hashProperty),Object.defineProperty(Transaction.prototype,"id",hashProperty);var ioProperty={configurable:!1,enumerable:!0,get:function(){return this._getInputAmount()}};Object.defineProperty(Transaction.prototype,"inputAmount",ioProperty),ioProperty.get=function(){return this._getOutputAmount()},Object.defineProperty(Transaction.prototype,"outputAmount",ioProperty),Transaction.prototype._getHash=function(){return Hash.sha256sha256(this.toBuffer())},Transaction.prototype.serialize=function(unsafe){return!0===unsafe||unsafe&&unsafe.disableAll?this.uncheckedSerialize():this.checkedSerialize(unsafe)},Transaction.prototype.uncheckedSerialize=Transaction.prototype.toString=function(){return this.toBuffer().toString("hex")},Transaction.prototype.checkedSerialize=function(opts){var serializationError=this.getSerializationError(opts);if(serializationError)throw serializationError.message+=" - For more information please see: https://bsv.io/api/lib/transaction#serialization-checks",serializationError;return this.uncheckedSerialize()},Transaction.prototype.invalidSatoshis=function(){for(var invalid=!1,i=0;i<this.outputs.length;i++)this.outputs[i].invalidSatoshis()&&(invalid=!0);return invalid},Transaction.prototype.getSerializationError=function(opts){if(opts=opts||{},this.invalidSatoshis())return new errors.Transaction.InvalidSatoshis;var unspentError,unspent=this._getUnspentValue();return unspent<0?opts.disableMoreOutputThanInput||(unspentError=new errors.Transaction.InvalidOutputAmountSum):unspentError=this._hasFeeError(opts,unspent),unspentError||this._hasDustOutputs(opts)||this._isMissingSignatures(opts)},Transaction.prototype._hasFeeError=function(opts,unspent){if(!_.isUndefined(this._fee)&&this._fee!==unspent)return new errors.Transaction.FeeError.Different("Unspent value is "+unspent+" but specified fee is "+this._fee);if(!opts.disableLargeFees){var maximumFee=Math.floor(Transaction.FEE_SECURITY_MARGIN*this._estimateFee());if(unspent>maximumFee)return this._missingChange()?new errors.Transaction.ChangeAddressMissing("Fee is too large and no change address was provided"):new errors.Transaction.FeeError.TooLarge("expected less than "+maximumFee+" but got "+unspent)}},Transaction.prototype._missingChange=function(){return!this._changeScript},Transaction.prototype._hasDustOutputs=function(opts){var index,output;if(!opts.disableDustOutputs)for(index in this.outputs)if((output=this.outputs[index]).satoshis<Transaction.DUST_AMOUNT&&!output.script.isDataOut()&&!output.script.isSafeDataOut())return new errors.Transaction.DustOutputs},Transaction.prototype._isMissingSignatures=function(opts){if(!opts.disableIsFullySigned)return this.isFullySigned()?void 0:new errors.Transaction.MissingSignatures},Transaction.prototype.inspect=function(){return"<Transaction: "+this.uncheckedSerialize()+">"},Transaction.prototype.toBuffer=function(){var writer=new BufferWriter;return this.toBufferWriter(writer).toBuffer()},Transaction.prototype.toBufferWriter=function(writer){return writer.writeInt32LE(this.version),writer.writeVarintNum(this.inputs.length),_.each(this.inputs,(function(input){input.toBufferWriter(writer)})),writer.writeVarintNum(this.outputs.length),_.each(this.outputs,(function(output){output.toBufferWriter(writer)})),writer.writeUInt32LE(this.nLockTime),writer},Transaction.prototype.fromBuffer=function(buffer){var reader=new BufferReader(buffer);return this.fromBufferReader(reader)},Transaction.prototype.fromBufferReader=function(reader){var i,sizeTxIns,sizeTxOuts;for($.checkArgument(!reader.finished(),"No transaction data received"),this.version=reader.readInt32LE(),sizeTxIns=reader.readVarintNum(),i=0;i<sizeTxIns;i++){var input=Input.fromBufferReader(reader);this.inputs.push(input)}for(sizeTxOuts=reader.readVarintNum(),i=0;i<sizeTxOuts;i++)this.outputs.push(Output.fromBufferReader(reader));return this.nLockTime=reader.readUInt32LE(),this},Transaction.prototype.toObject=Transaction.prototype.toJSON=function(){var inputs=[];this.inputs.forEach((function(input){inputs.push(input.toObject())}));var outputs=[];this.outputs.forEach((function(output){outputs.push(output.toObject())}));var obj={hash:this.hash,version:this.version,inputs:inputs,outputs:outputs,nLockTime:this.nLockTime};return this._changeScript&&(obj.changeScript=this._changeScript.toString()),_.isUndefined(this._changeIndex)||(obj.changeIndex=this._changeIndex),_.isUndefined(this._fee)||(obj.fee=this._fee),obj},Transaction.prototype.fromObject=function(arg){$.checkArgument(_.isObject(arg)||arg instanceof Transaction);var transaction,self=this;return transaction=arg instanceof Transaction?transaction.toObject():arg,_.each(transaction.inputs,(function(input){if(input.output&&input.output.script){var txin,script=new Script(input.output.script);if(script.isPublicKeyHashOut())txin=new Input.PublicKeyHash(input);else if(script.isScriptHashOut()&&input.publicKeys&&input.threshold)txin=new Input.MultiSigScriptHash(input,input.publicKeys,input.threshold,input.signatures);else{if(!script.isPublicKeyOut())throw new errors.Transaction.Input.UnsupportedScript(input.output.script);txin=new Input.PublicKey(input)}self.addInput(txin)}else self.uncheckedAddInput(new Input(input))})),_.each(transaction.outputs,(function(output){self.addOutput(new Output(output))})),transaction.changeIndex&&(this._changeIndex=transaction.changeIndex),transaction.changeScript&&(this._changeScript=new Script(transaction.changeScript)),transaction.fee&&(this._fee=transaction.fee),this.nLockTime=transaction.nLockTime,this.version=transaction.version,this._checkConsistency(arg),this},Transaction.prototype._checkConsistency=function(arg){_.isUndefined(this._changeIndex)||($.checkState(this._changeScript,"Change script is expected."),$.checkState(this.outputs[this._changeIndex],"Change index points to undefined output."),$.checkState(this.outputs[this._changeIndex].script.toString()===this._changeScript.toString(),"Change output has an unexpected script.")),arg&&arg.hash&&$.checkState(arg.hash===this.hash,"Hash in object does not match transaction hash.")},Transaction.prototype.lockUntilDate=function(time){if($.checkArgument(time),_.isNumber(time)&&time<Transaction.NLOCKTIME_BLOCKHEIGHT_LIMIT)throw new errors.Transaction.LockTimeTooEarly;_.isDate(time)&&(time=time.getTime()/1e3);for(var i=0;i<this.inputs.length;i++)this.inputs[i].sequenceNumber===Input.DEFAULT_SEQNUMBER&&(this.inputs[i].sequenceNumber=Input.DEFAULT_LOCKTIME_SEQNUMBER);return this.nLockTime=time,this},Transaction.prototype.lockUntilBlockHeight=function(height){if($.checkArgument(_.isNumber(height)),height>=Transaction.NLOCKTIME_BLOCKHEIGHT_LIMIT)throw new errors.Transaction.BlockHeightTooHigh;if(height<0)throw new errors.Transaction.NLockTimeOutOfRange;for(var i=0;i<this.inputs.length;i++)this.inputs[i].sequenceNumber===Input.DEFAULT_SEQNUMBER&&(this.inputs[i].sequenceNumber=Input.DEFAULT_LOCKTIME_SEQNUMBER);return this.nLockTime=height,this},Transaction.prototype.getLockTime=function(){return this.nLockTime?this.nLockTime<Transaction.NLOCKTIME_BLOCKHEIGHT_LIMIT?this.nLockTime:new Date(1e3*this.nLockTime):null},Transaction.prototype.fromString=function(string){this.fromBuffer(buffer.Buffer.from(string,"hex"))},Transaction.prototype._newTransaction=function(){this.version=1,this.nLockTime=0},Transaction.prototype.from=function(utxo,pubkeys,threshold){if(_.isArray(utxo)){var self=this;return _.each(utxo,(function(utxo){self.from(utxo,pubkeys,threshold)})),this}return _.some(this.inputs,(function(input){return input.prevTxId.toString("hex")===utxo.txId&&input.outputIndex===utxo.outputIndex}))||(pubkeys&&threshold?this._fromMultisigUtxo(utxo,pubkeys,threshold):this._fromNonP2SH(utxo)),this},Transaction.prototype._fromNonP2SH=function(utxo){var Clazz;Clazz=(utxo=new UnspentOutput(utxo)).script.isPublicKeyHashOut()?PublicKeyHashInput:utxo.script.isPublicKeyOut()?PublicKeyInput:Input,this.addInput(new Clazz({output:new Output({script:utxo.script,satoshis:utxo.satoshis}),prevTxId:utxo.txId,outputIndex:utxo.outputIndex,script:Script.empty()}))},Transaction.prototype._fromMultisigUtxo=function(utxo,pubkeys,threshold){var Clazz;if($.checkArgument(threshold<=pubkeys.length,"Number of required signatures must be greater than the number of public keys"),(utxo=new UnspentOutput(utxo)).script.isMultisigOut())Clazz=MultiSigInput;else{if(!utxo.script.isScriptHashOut())throw new Error("@TODO");Clazz=MultiSigScriptHashInput}this.addInput(new Clazz({output:new Output({script:utxo.script,satoshis:utxo.satoshis}),prevTxId:utxo.txId,outputIndex:utxo.outputIndex,script:Script.empty()},pubkeys,threshold))},Transaction.prototype.addInput=function(input,outputScript,satoshis){if($.checkArgumentType(input,Input,"input"),!input.output&&(_.isUndefined(outputScript)||_.isUndefined(satoshis)))throw new errors.Transaction.NeedMoreInfo("Need information about the UTXO script and satoshis");return input.output||!outputScript||_.isUndefined(satoshis)||(outputScript=outputScript instanceof Script?outputScript:new Script(outputScript),$.checkArgumentType(satoshis,"number","satoshis"),input.output=new Output({script:outputScript,satoshis:satoshis})),this.uncheckedAddInput(input)},Transaction.prototype.uncheckedAddInput=function(input){return $.checkArgumentType(input,Input,"input"),this.inputs.push(input),this._inputAmount=void 0,this._updateChangeOutput(),this},Transaction.prototype.hasAllUtxoInfo=function(){return _.every(this.inputs.map((function(input){return!!input.output})))},Transaction.prototype.fee=function(amount){return $.checkArgument(_.isNumber(amount),"amount must be a number"),this._fee=amount,this._updateChangeOutput(),this},Transaction.prototype.feePerKb=function(amount){return $.checkArgument(_.isNumber(amount),"amount must be a number"),this._feePerKb=amount,this._updateChangeOutput(),this},Transaction.prototype.change=function(address){return $.checkArgument(address,"address is required"),this._changeScript=Script.fromAddress(address),this._updateChangeOutput(),this},Transaction.prototype.getChangeOutput=function(){return _.isUndefined(this._changeIndex)?null:this.outputs[this._changeIndex]},Transaction.prototype.to=function(address,amount){if(_.isArray(address)){var self=this;return _.each(address,(function(to){self.to(to.address,to.satoshis)})),this}return $.checkArgument(JSUtil.isNaturalNumber(amount),"Amount is expected to be a positive integer"),this.addOutput(new Output({script:Script(new Address(address)),satoshis:amount})),this},Transaction.prototype.addData=function(value){return this.addOutput(new Output({script:Script.buildDataOut(value),satoshis:0})),this},Transaction.prototype.addSafeData=function(value){return this.addOutput(new Output({script:Script.buildSafeDataOut(value),satoshis:0})),this},Transaction.prototype.addOutput=function(output){return $.checkArgumentType(output,Output,"output"),this._addOutput(output),this._updateChangeOutput(),this},Transaction.prototype.clearOutputs=function(){return this.outputs=[],this._clearSignatures(),this._outputAmount=void 0,this._changeIndex=void 0,this._updateChangeOutput(),this},Transaction.prototype._addOutput=function(output){this.outputs.push(output),this._outputAmount=void 0},Transaction.prototype._getOutputAmount=function(){if(_.isUndefined(this._outputAmount)){var self=this;this._outputAmount=0,_.each(this.outputs,(function(output){self._outputAmount+=output.satoshis}))}return this._outputAmount},Transaction.prototype._getInputAmount=function(){if(_.isUndefined(this._inputAmount)){var self=this;this._inputAmount=0,_.each(this.inputs,(function(input){if(_.isUndefined(input.output))throw new errors.Transaction.Input.MissingPreviousOutput;self._inputAmount+=input.output.satoshis}))}return this._inputAmount},Transaction.prototype._updateChangeOutput=function(){if(this._changeScript){this._clearSignatures(),_.isUndefined(this._changeIndex)||this._removeOutput(this._changeIndex),this._changeIndex=this.outputs.length,this._addOutput(new Output({script:this._changeScript,satoshis:0}));var changeAmount=this._getUnspentValue()-this.getFee();this._removeOutput(this._changeIndex),this._changeIndex=void 0,changeAmount>=Transaction.DUST_AMOUNT&&(this._changeIndex=this.outputs.length,this._addOutput(new Output({script:this._changeScript,satoshis:changeAmount})))}},Transaction.prototype.getFee=function(){return this.isCoinbase()?0:_.isUndefined(this._fee)?this._changeScript?this._estimateFee():this._getUnspentValue():this._fee},Transaction.prototype._estimateFee=function(){var estimatedSize=this._estimateSize();return Math.ceil(estimatedSize/1e3*(this._feePerKb||Transaction.FEE_PER_KB))},Transaction.prototype._getUnspentValue=function(){return this._getInputAmount()-this._getOutputAmount()},Transaction.prototype._clearSignatures=function(){_.each(this.inputs,(function(input){input.clearSignatures()}))},Transaction.prototype._estimateSize=function(){var result=8;return result+=Varint(this.inputs.length).toBuffer().length,result+=Varint(this.outputs.length).toBuffer().length,_.each(this.inputs,(function(input){result+=input._estimateSize()})),_.each(this.outputs,(function(output){result+=output.getSize()})),result},Transaction.prototype._removeOutput=function(index){var output=this.outputs[index];this.outputs=_.without(this.outputs,output),this._outputAmount=void 0},Transaction.prototype.removeOutput=function(index){this._removeOutput(index),this._updateChangeOutput()},Transaction.prototype.sort=function(){return this.sortInputs((function(inputs){var copy=Array.prototype.concat.apply([],inputs);return copy.sort((function(first,second){return first.prevTxId.compare(second.prevTxId)||first.outputIndex-second.outputIndex})),copy})),this.sortOutputs((function(outputs){var copy=Array.prototype.concat.apply([],outputs);return copy.sort((function(first,second){return first.satoshis-second.satoshis||first.script.toBuffer().compare(second.script.toBuffer())})),copy})),this},Transaction.prototype.shuffleOutputs=function(){return this.sortOutputs(_.shuffle)},Transaction.prototype.sortOutputs=function(sortingFunction){var outs=sortingFunction(this.outputs);return this._newOutputOrder(outs)},Transaction.prototype.sortInputs=function(sortingFunction){return this.inputs=sortingFunction(this.inputs),this._clearSignatures(),this},Transaction.prototype._newOutputOrder=function(newOutputs){if(this.outputs.length!==newOutputs.length||0!==_.difference(this.outputs,newOutputs).length)throw new errors.Transaction.InvalidSorting;if(!_.isUndefined(this._changeIndex)){var changeOutput=this.outputs[this._changeIndex];this._changeIndex=newOutputs.indexOf(changeOutput)}return this.outputs=newOutputs,this},Transaction.prototype.removeInput=function(txId,outputIndex){var index;if((index=!outputIndex&&_.isNumber(txId)?txId:_.findIndex(this.inputs,(function(input){return input.prevTxId.toString("hex")===txId&&input.outputIndex===outputIndex})))<0||index>=this.inputs.length)throw new errors.Transaction.InvalidIndex(index,this.inputs.length);var input=this.inputs[index];this.inputs=_.without(this.inputs,input),this._inputAmount=void 0,this._updateChangeOutput()},Transaction.prototype.sign=function(privateKey,sigtype){$.checkState(this.hasAllUtxoInfo(),"Not all utxo information is available to sign the transaction.");var self=this;return _.isArray(privateKey)?(_.each(privateKey,(function(privateKey){self.sign(privateKey,sigtype)})),this):(_.each(this.getSignatures(privateKey,sigtype),(function(signature){self.applySignature(signature)})),this)},Transaction.prototype.getSignatures=function(privKey,sigtype){privKey=new PrivateKey(privKey),sigtype=sigtype||Signature.SIGHASH_ALL|Signature.SIGHASH_FORKID;var transaction=this,results=[],hashData=Hash.sha256ripemd160(privKey.publicKey.toBuffer());return _.each(this.inputs,(function(input,index){_.each(input.getSignatures(transaction,privKey,index,sigtype,hashData),(function(signature){results.push(signature)}))})),results},Transaction.prototype.applySignature=function(signature){return this.inputs[signature.inputIndex].addSignature(this,signature),this},Transaction.prototype.isFullySigned=function(){return _.each(this.inputs,(function(input){if(input.isFullySigned===Input.prototype.isFullySigned)throw new errors.Transaction.UnableToVerifySignature("Unrecognized script kind, or not enough information to execute script.This usually happens when creating a transaction from a serialized transaction")})),_.every(_.map(this.inputs,(function(input){return input.isFullySigned()})))},Transaction.prototype.isValidSignature=function(signature){if(this.inputs[signature.inputIndex].isValidSignature===Input.prototype.isValidSignature)throw new errors.Transaction.UnableToVerifySignature("Unrecognized script kind, or not enough information to execute script.This usually happens when creating a transaction from a serialized transaction");return this.inputs[signature.inputIndex].isValidSignature(this,signature)},Transaction.prototype.verifySignature=function(sig,pubkey,nin,subscript,satoshisBN,flags){return Sighash.verify(this,sig,pubkey,nin,subscript,satoshisBN,flags)},Transaction.prototype.verify=function(){if(0===this.inputs.length)return"transaction txins empty";if(0===this.outputs.length)return"transaction txouts empty";for(var valueoutbn=new BN(0),i=0;i<this.outputs.length;i++){var txout=this.outputs[i];if(txout.invalidSatoshis())return"transaction txout "+i+" satoshis is invalid";if(txout._satoshisBN.gt(new BN(Transaction.MAX_MONEY,10)))return"transaction txout "+i+" greater than MAX_MONEY";if((valueoutbn=valueoutbn.add(txout._satoshisBN)).gt(new BN(Transaction.MAX_MONEY)))return"transaction txout "+i+" total output greater than MAX_MONEY"}if(this.toBuffer().length>1e6)return"transaction over the maximum block size";var txinmap={};for(i=0;i<this.inputs.length;i++){var txin=this.inputs[i],inputid=txin.prevTxId+":"+txin.outputIndex;if(!_.isUndefined(txinmap[inputid]))return"transaction input "+i+" duplicate input";txinmap[inputid]=!0}if(this.isCoinbase()){var buf=this.inputs[0]._scriptBuffer;if(buf.length<2||buf.length>100)return"coinbase transaction script size invalid"}else for(i=0;i<this.inputs.length;i++)if(this.inputs[i].isNull())return"transaction input "+i+" has null input";return!0},Transaction.prototype.isCoinbase=function(){return 1===this.inputs.length&&this.inputs[0].isNull()},module.exports=Transaction},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(0),$=__webpack_require__(1),JSUtil=__webpack_require__(3),Script=__webpack_require__(10),Address=__webpack_require__(23);function UnspentOutput(data){if(!(this instanceof UnspentOutput))return new UnspentOutput(data);$.checkArgument(_.isObject(data),"Must provide an object from where to extract data");var address=data.address?new Address(data.address):void 0,txId=data.txid?data.txid:data.txId;if(!txId||!JSUtil.isHexaString(txId)||txId.length>64)throw new Error("Invalid TXID in object",data);var outputIndex=_.isUndefined(data.vout)?data.outputIndex:data.vout;if(!_.isNumber(outputIndex))throw new Error("Invalid outputIndex, received "+outputIndex);$.checkArgument(!_.isUndefined(data.scriptPubKey)||!_.isUndefined(data.script),"Must provide the scriptPubKey for that output!");var script=new Script(data.scriptPubKey||data.script);$.checkArgument(!_.isUndefined(data.amount)||!_.isUndefined(data.satoshis),"Must provide an amount for the output");var amount=_.isUndefined(data.amount)?data.satoshis:Math.round(1e8*data.amount);$.checkArgument(_.isNumber(amount),"Amount must be a number"),JSUtil.defineImmutable(this,{address:address,txId:txId,outputIndex:outputIndex,script:script,satoshis:amount})}UnspentOutput.prototype.inspect=function(){return"<UnspentOutput: "+this.txId+":"+this.outputIndex+", satoshis: "+this.satoshis+", address: "+this.address+">"},UnspentOutput.prototype.toString=function(){return this.txId+":"+this.outputIndex},UnspentOutput.fromObject=function(data){return new UnspentOutput(data)},UnspentOutput.prototype.toObject=UnspentOutput.prototype.toJSON=function(){return{address:this.address?this.address.toString():void 0,txid:this.txId,vout:this.outputIndex,scriptPubKey:this.script.toBuffer().toString("hex"),amount:Number.parseFloat((this.satoshis/1e8).toFixed(8))}},module.exports=UnspentOutput},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(0),BlockHeader=__webpack_require__(36),BufferReader=__webpack_require__(16),BufferWriter=__webpack_require__(14),Hash=__webpack_require__(4),Transaction=__webpack_require__(34),errors=__webpack_require__(8),$=__webpack_require__(1);function MerkleBlock(arg){if(!(this instanceof MerkleBlock))return new MerkleBlock(arg);var info={};if(Buffer.isBuffer(arg))info=MerkleBlock._fromBufferReader(BufferReader(arg));else{if(!_.isObject(arg))throw new TypeError("Unrecognized argument for MerkleBlock");info={header:arg.header instanceof BlockHeader?arg.header:BlockHeader.fromObject(arg.header),numTransactions:arg.numTransactions,hashes:arg.hashes,flags:arg.flags}}return _.extend(this,info),this._flagBitsUsed=0,this._hashesUsed=0,this}MerkleBlock.fromBuffer=function(buf){return MerkleBlock.fromBufferReader(BufferReader(buf))},MerkleBlock.fromBufferReader=function(br){return new MerkleBlock(MerkleBlock._fromBufferReader(br))},MerkleBlock.prototype.toBuffer=function(){return this.toBufferWriter().concat()},MerkleBlock.prototype.toBufferWriter=function(bw){bw||(bw=new BufferWriter),bw.write(this.header.toBuffer()),bw.writeUInt32LE(this.numTransactions),bw.writeVarintNum(this.hashes.length);for(var i=0;i<this.hashes.length;i++)bw.write(Buffer.from(this.hashes[i],"hex"));for(bw.writeVarintNum(this.flags.length),i=0;i<this.flags.length;i++)bw.writeUInt8(this.flags[i]);return bw},MerkleBlock.prototype.toObject=MerkleBlock.prototype.toJSON=function(){return{header:this.header.toObject(),numTransactions:this.numTransactions,hashes:this.hashes,flags:this.flags}},MerkleBlock.prototype.validMerkleTree=function(){if($.checkState(_.isArray(this.flags),"MerkleBlock flags is not an array"),$.checkState(_.isArray(this.hashes),"MerkleBlock hashes is not an array"),this.hashes.length>this.numTransactions)return!1;if(8*this.flags.length<this.hashes.length)return!1;var height=this._calcTreeHeight(),opts={hashesUsed:0,flagBitsUsed:0},root=this._traverseMerkleTree(height,0,opts);return opts.hashesUsed===this.hashes.length&&root.equals(this.header.merkleRoot)},MerkleBlock.prototype.filterdTxsHash=function(){throw new Error("filterdTxsHash has been deprecated. use filteredTxsHash.")},MerkleBlock.prototype.filteredTxsHash=function(){if($.checkState(_.isArray(this.flags),"MerkleBlock flags is not an array"),$.checkState(_.isArray(this.hashes),"MerkleBlock hashes is not an array"),this.hashes.length>this.numTransactions)throw new errors.MerkleBlock.InvalidMerkleTree;if(8*this.flags.length<this.hashes.length)throw new errors.MerkleBlock.InvalidMerkleTree;if(1===this.hashes.length)return[];var height=this._calcTreeHeight(),opts={hashesUsed:0,flagBitsUsed:0},txs=this._traverseMerkleTree(height,0,opts,!0);if(opts.hashesUsed!==this.hashes.length)throw new errors.MerkleBlock.InvalidMerkleTree;return txs},MerkleBlock.prototype._traverseMerkleTree=function(depth,pos,opts,checkForTxs){if((opts=opts||{}).txs=opts.txs||[],opts.flagBitsUsed=opts.flagBitsUsed||0,opts.hashesUsed=opts.hashesUsed||0,checkForTxs=checkForTxs||!1,opts.flagBitsUsed>8*this.flags.length)return null;var isParentOfMatch=this.flags[opts.flagBitsUsed>>3]>>>(7&opts.flagBitsUsed++)&1;if(0!==depth&&isParentOfMatch){var left=this._traverseMerkleTree(depth-1,2*pos,opts),right=left;return 2*pos+1<this._calcTreeWidth(depth-1)&&(right=this._traverseMerkleTree(depth-1,2*pos+1,opts)),checkForTxs?opts.txs:Hash.sha256sha256(Buffer.concat([left,right]))}if(opts.hashesUsed>=this.hashes.length)return null;var hash=this.hashes[opts.hashesUsed++];return 0===depth&&isParentOfMatch&&opts.txs.push(hash),Buffer.from(hash,"hex")},MerkleBlock.prototype._calcTreeWidth=function(height){return this.numTransactions+(1<<height)-1>>height},MerkleBlock.prototype._calcTreeHeight=function(){for(var height=0;this._calcTreeWidth(height)>1;)height++;return height},MerkleBlock.prototype.hasTransaction=function(tx){$.checkArgument(!_.isUndefined(tx),"tx cannot be undefined"),$.checkArgument(tx instanceof Transaction||"string"==typeof tx,'Invalid tx given, tx must be a "string" or "Transaction"');var hash=tx;tx instanceof Transaction&&(hash=Buffer.from(tx.id,"hex").reverse().toString("hex"));var txs=[],height=this._calcTreeHeight();return this._traverseMerkleTree(height,0,{txs:txs}),-1!==txs.indexOf(hash)},MerkleBlock._fromBufferReader=function(br){$.checkState(!br.finished(),"No merkleblock data received");var info={};info.header=BlockHeader.fromBufferReader(br),info.numTransactions=br.readUInt32LE();var numHashes=br.readVarintNum();info.hashes=[];for(var i=0;i<numHashes;i++)info.hashes.push(br.read(32).toString("hex"));var numFlags=br.readVarintNum();for(info.flags=[],i=0;i<numFlags;i++)info.flags.push(br.readUInt8());return info},MerkleBlock.fromObject=function(obj){return new MerkleBlock(obj)},module.exports=MerkleBlock},function(module,exports,__webpack_require__){"use strict";var assert=__webpack_require__(24),buffer=__webpack_require__(7),_=__webpack_require__(0),$=__webpack_require__(1),BN=__webpack_require__(2),Base58=__webpack_require__(33),Base58Check=__webpack_require__(26),Hash=__webpack_require__(4),Network=__webpack_require__(21),Point=__webpack_require__(22),PrivateKey=__webpack_require__(32),Random=__webpack_require__(35),errors=__webpack_require__(8),hdErrors=errors.HDPrivateKey,JSUtil=__webpack_require__(3);function HDPrivateKey(arg){if(arg instanceof HDPrivateKey)return arg;if(!(this instanceof HDPrivateKey))return new HDPrivateKey(arg);if(!arg)return this._generateRandomly();if(Network.get(arg))return this._generateRandomly(arg);if(_.isString(arg)||Buffer.isBuffer(arg))if(HDPrivateKey.isValidSerialized(arg))this._buildFromSerialized(arg);else if(JSUtil.isValidJSON(arg))this._buildFromJSON(arg);else{if(!Buffer.isBuffer(arg)||!HDPrivateKey.isValidSerialized(arg.toString()))throw HDPrivateKey.getSerializedError(arg);this._buildFromSerialized(arg.toString())}else{if(!_.isObject(arg))throw new hdErrors.UnrecognizedArgument(arg);this._buildFromObject(arg)}}HDPrivateKey.fromRandom=function(){return new HDPrivateKey},HDPrivateKey.isValidPath=function(arg,hardened){if(_.isString(arg)){var indexes=HDPrivateKey._getDerivationIndexes(arg);return null!==indexes&&_.every(indexes,HDPrivateKey.isValidPath)}return!!_.isNumber(arg)&&(arg<HDPrivateKey.Hardened&&!0===hardened&&(arg+=HDPrivateKey.Hardened),arg>=0&&arg<HDPrivateKey.MaxIndex)},HDPrivateKey._getDerivationIndexes=function(path){var steps=path.split("/");if(_.includes(HDPrivateKey.RootElementAlias,path))return[];if(!_.includes(HDPrivateKey.RootElementAlias,steps[0]))return null;var indexes=steps.slice(1).map((function(step){var isHardened="'"===step.slice(-1);if(isHardened&&(step=step.slice(0,-1)),!step||"-"===step[0])return NaN;var index=+step;return isHardened&&(index+=HDPrivateKey.Hardened),index}));return _.some(indexes,isNaN)?null:indexes},HDPrivateKey.prototype.derive=function(){throw new Error("derive has been deprecated. use deriveChild or, for the old way, deriveNonCompliantChild.")},HDPrivateKey.prototype.deriveChild=function(arg,hardened){if(_.isNumber(arg))return this._deriveWithNumber(arg,hardened);if(_.isString(arg))return this._deriveFromString(arg);throw new hdErrors.InvalidDerivationArgument(arg)},HDPrivateKey.prototype.deriveNonCompliantChild=function(arg,hardened){if(_.isNumber(arg))return this._deriveWithNumber(arg,hardened,!0);if(_.isString(arg))return this._deriveFromString(arg,!0);throw new hdErrors.InvalidDerivationArgument(arg)},HDPrivateKey.prototype._deriveWithNumber=function(index,hardened,nonCompliant){if(!HDPrivateKey.isValidPath(index,hardened))throw new hdErrors.InvalidPath(index);hardened=index>=HDPrivateKey.Hardened||hardened,index<HDPrivateKey.Hardened&&!0===hardened&&(index+=HDPrivateKey.Hardened);var data,indexBuffer=JSUtil.integerAsBuffer(index);if(hardened&&nonCompliant){var nonZeroPadded=this.privateKey.bn.toBuffer();data=Buffer.concat([buffer.Buffer.from([0]),nonZeroPadded,indexBuffer])}else if(hardened){var privateKeyBuffer=this.privateKey.bn.toBuffer({size:32});assert(32===privateKeyBuffer.length,"length of private key buffer is expected to be 32 bytes"),data=Buffer.concat([buffer.Buffer.from([0]),privateKeyBuffer,indexBuffer])}else data=Buffer.concat([this.publicKey.toBuffer(),indexBuffer]);var hash=Hash.sha512hmac(data,this._buffers.chainCode),leftPart=BN.fromBuffer(hash.slice(0,32),{size:32}),chainCode=hash.slice(32,64),privateKey=leftPart.add(this.privateKey.toBigNumber()).umod(Point.getN()).toBuffer({size:32});return PrivateKey.isValid(privateKey)?new HDPrivateKey({network:this.network,depth:this.depth+1,parentFingerPrint:this.fingerPrint,childIndex:index,chainCode:chainCode,privateKey:privateKey}):this._deriveWithNumber(index+1,null,nonCompliant)},HDPrivateKey.prototype._deriveFromString=function(path,nonCompliant){if(!HDPrivateKey.isValidPath(path))throw new hdErrors.InvalidPath(path);return HDPrivateKey._getDerivationIndexes(path).reduce((function(prev,index){return prev._deriveWithNumber(index,null,nonCompliant)}),this)},HDPrivateKey.isValidSerialized=function(data,network){return!HDPrivateKey.getSerializedError(data,network)},HDPrivateKey.getSerializedError=function(data,network){if(!_.isString(data)&&!Buffer.isBuffer(data))return new hdErrors.UnrecognizedArgument("Expected string or buffer");if(!Base58.validCharacters(data))return new errors.InvalidB58Char("(unknown)",data);try{data=Base58Check.decode(data)}catch(e){return new errors.InvalidB58Checksum(data)}if(data.length!==HDPrivateKey.DataLength)return new hdErrors.InvalidLength(data);if(!_.isUndefined(network)){var error=HDPrivateKey._validateNetwork(data,network);if(error)return error}return null},HDPrivateKey._validateNetwork=function(data,networkArg){var network=Network.get(networkArg);if(!network)return new errors.InvalidNetworkArgument(networkArg);var version=data.slice(0,4);return version.readUInt32BE(0)!==network.xprivkey?new errors.InvalidNetwork(version):null},HDPrivateKey.fromString=function(arg){return $.checkArgument(_.isString(arg),"No valid string was provided"),new HDPrivateKey(arg)},HDPrivateKey.fromObject=function(arg){return $.checkArgument(_.isObject(arg),"No valid argument was provided"),new HDPrivateKey(arg)},HDPrivateKey.prototype._buildFromJSON=function(arg){return this._buildFromObject(JSON.parse(arg))},HDPrivateKey.prototype._buildFromObject=function(arg){var buffers={version:arg.network?JSUtil.integerAsBuffer(Network.get(arg.network).xprivkey):arg.version,depth:_.isNumber(arg.depth)?Buffer.from([255&arg.depth]):arg.depth,parentFingerPrint:_.isNumber(arg.parentFingerPrint)?JSUtil.integerAsBuffer(arg.parentFingerPrint):arg.parentFingerPrint,childIndex:_.isNumber(arg.childIndex)?JSUtil.integerAsBuffer(arg.childIndex):arg.childIndex,chainCode:_.isString(arg.chainCode)?Buffer.from(arg.chainCode,"hex"):arg.chainCode,privateKey:_.isString(arg.privateKey)&&JSUtil.isHexa(arg.privateKey)?Buffer.from(arg.privateKey,"hex"):arg.privateKey,checksum:arg.checksum?arg.checksum.length?arg.checksum:JSUtil.integerAsBuffer(arg.checksum):void 0};return this._buildFromBuffers(buffers)},HDPrivateKey.prototype._buildFromSerialized=function(arg){var decoded=Base58Check.decode(arg),buffers={version:decoded.slice(HDPrivateKey.VersionStart,HDPrivateKey.VersionEnd),depth:decoded.slice(HDPrivateKey.DepthStart,HDPrivateKey.DepthEnd),parentFingerPrint:decoded.slice(HDPrivateKey.ParentFingerPrintStart,HDPrivateKey.ParentFingerPrintEnd),childIndex:decoded.slice(HDPrivateKey.ChildIndexStart,HDPrivateKey.ChildIndexEnd),chainCode:decoded.slice(HDPrivateKey.ChainCodeStart,HDPrivateKey.ChainCodeEnd),privateKey:decoded.slice(HDPrivateKey.PrivateKeyStart,HDPrivateKey.PrivateKeyEnd),checksum:decoded.slice(HDPrivateKey.ChecksumStart,HDPrivateKey.ChecksumEnd),xprivkey:arg};return this._buildFromBuffers(buffers)},HDPrivateKey.prototype._generateRandomly=function(network){return HDPrivateKey.fromSeed(Random.getRandomBuffer(64),network)},HDPrivateKey.fromSeed=function(hexa,network){if(JSUtil.isHexaString(hexa)&&(hexa=Buffer.from(hexa,"hex")),!Buffer.isBuffer(hexa))throw new hdErrors.InvalidEntropyArgument(hexa);if(hexa.length<16)throw new hdErrors.InvalidEntropyArgument.NotEnoughEntropy(hexa);if(hexa.length>64)throw new hdErrors.InvalidEntropyArgument.TooMuchEntropy(hexa);var hash=Hash.sha512hmac(hexa,buffer.Buffer.from("Bitcoin seed"));return new HDPrivateKey({network:Network.get(network)||Network.defaultNetwork,depth:0,parentFingerPrint:0,childIndex:0,privateKey:hash.slice(0,32),chainCode:hash.slice(32,64)})},HDPrivateKey.prototype._calcHDPublicKey=function(){if(!this._hdPublicKey){var HDPublicKey=__webpack_require__(67);this._hdPublicKey=new HDPublicKey(this)}},HDPrivateKey.prototype._buildFromBuffers=function(arg){HDPrivateKey._validateBufferArguments(arg),JSUtil.defineImmutable(this,{_buffers:arg});var sequence=[arg.version,arg.depth,arg.parentFingerPrint,arg.childIndex,arg.chainCode,Buffer.alloc(1),arg.privateKey],concat=buffer.Buffer.concat(sequence);if(arg.checksum&&arg.checksum.length){if(arg.checksum.toString()!==Base58Check.checksum(concat).toString())throw new errors.InvalidB58Checksum(concat)}else arg.checksum=Base58Check.checksum(concat);var xprivkey,network=Network.get(arg.version.readUInt32BE(0));xprivkey=Base58Check.encode(buffer.Buffer.concat(sequence)),arg.xprivkey=Buffer.from(xprivkey);var privateKey=new PrivateKey(BN.fromBuffer(arg.privateKey),network),publicKey=privateKey.toPublicKey(),size=HDPrivateKey.ParentFingerPrintSize,fingerPrint=Hash.sha256ripemd160(publicKey.toBuffer()).slice(0,size);return JSUtil.defineImmutable(this,{xprivkey:xprivkey,network:network,depth:arg.depth[0],privateKey:privateKey,publicKey:publicKey,fingerPrint:fingerPrint}),this._hdPublicKey=null,Object.defineProperty(this,"hdPublicKey",{configurable:!1,enumerable:!0,get:function(){return this._calcHDPublicKey(),this._hdPublicKey}}),Object.defineProperty(this,"xpubkey",{configurable:!1,enumerable:!0,get:function(){return this._calcHDPublicKey(),this._hdPublicKey.xpubkey}}),this},HDPrivateKey._validateBufferArguments=function(arg){var checkBuffer=function(name,size){var buff=arg[name];assert(Buffer.isBuffer(buff),name+" argument is not a buffer"),assert(buff.length===size,name+" has not the expected size: found "+buff.length+", expected "+size)};checkBuffer("version",HDPrivateKey.VersionSize),checkBuffer("depth",HDPrivateKey.DepthSize),checkBuffer("parentFingerPrint",HDPrivateKey.ParentFingerPrintSize),checkBuffer("childIndex",HDPrivateKey.ChildIndexSize),checkBuffer("chainCode",HDPrivateKey.ChainCodeSize),checkBuffer("privateKey",HDPrivateKey.PrivateKeySize),arg.checksum&&arg.checksum.length&&checkBuffer("checksum",HDPrivateKey.CheckSumSize)},HDPrivateKey.prototype.toString=function(){return this.xprivkey},HDPrivateKey.prototype.inspect=function(){return"<HDPrivateKey: "+this.xprivkey+">"},HDPrivateKey.prototype.toObject=HDPrivateKey.prototype.toJSON=function(){return{network:Network.get(this._buffers.version.readUInt32BE(0),"xprivkey").name,depth:this._buffers.depth[0],fingerPrint:this.fingerPrint.readUInt32BE(0),parentFingerPrint:this._buffers.parentFingerPrint.readUInt32BE(0),childIndex:this._buffers.childIndex.readUInt32BE(0),chainCode:this._buffers.chainCode.toString("hex"),privateKey:this.privateKey.toBuffer().toString("hex"),checksum:this._buffers.checksum.readUInt32BE(0),xprivkey:this.xprivkey}},HDPrivateKey.fromBuffer=function(buf){return new HDPrivateKey(buf.toString())},HDPrivateKey.fromHex=function(hex){return HDPrivateKey.fromBuffer(Buffer.from(hex,"hex"))},HDPrivateKey.prototype.toBuffer=function(){return Buffer.from(this.toString())},HDPrivateKey.prototype.toHex=function(){return this.toBuffer().toString("hex")},HDPrivateKey.DefaultDepth=0,HDPrivateKey.DefaultFingerprint=0,HDPrivateKey.DefaultChildIndex=0,HDPrivateKey.Hardened=2147483648,HDPrivateKey.MaxIndex=2*HDPrivateKey.Hardened,HDPrivateKey.RootElementAlias=["m","M","m'","M'"],HDPrivateKey.VersionSize=4,HDPrivateKey.DepthSize=1,HDPrivateKey.ParentFingerPrintSize=4,HDPrivateKey.ChildIndexSize=4,HDPrivateKey.ChainCodeSize=32,HDPrivateKey.PrivateKeySize=32,HDPrivateKey.CheckSumSize=4,HDPrivateKey.DataLength=78,HDPrivateKey.SerializedByteSize=82,HDPrivateKey.VersionStart=0,HDPrivateKey.VersionEnd=HDPrivateKey.VersionStart+HDPrivateKey.VersionSize,HDPrivateKey.DepthStart=HDPrivateKey.VersionEnd,HDPrivateKey.DepthEnd=HDPrivateKey.DepthStart+HDPrivateKey.DepthSize,HDPrivateKey.ParentFingerPrintStart=HDPrivateKey.DepthEnd,HDPrivateKey.ParentFingerPrintEnd=HDPrivateKey.ParentFingerPrintStart+HDPrivateKey.ParentFingerPrintSize,HDPrivateKey.ChildIndexStart=HDPrivateKey.ParentFingerPrintEnd,HDPrivateKey.ChildIndexEnd=HDPrivateKey.ChildIndexStart+HDPrivateKey.ChildIndexSize,HDPrivateKey.ChainCodeStart=HDPrivateKey.ChildIndexEnd,HDPrivateKey.ChainCodeEnd=HDPrivateKey.ChainCodeStart+HDPrivateKey.ChainCodeSize,HDPrivateKey.PrivateKeyStart=HDPrivateKey.ChainCodeEnd+1,HDPrivateKey.PrivateKeyEnd=HDPrivateKey.PrivateKeyStart+HDPrivateKey.PrivateKeySize,HDPrivateKey.ChecksumStart=HDPrivateKey.PrivateKeyEnd,HDPrivateKey.ChecksumEnd=HDPrivateKey.ChecksumStart+HDPrivateKey.CheckSumSize,assert(HDPrivateKey.ChecksumEnd===HDPrivateKey.SerializedByteSize),module.exports=HDPrivateKey},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(0),$=__webpack_require__(1),BN=__webpack_require__(2),Base58=__webpack_require__(33),Base58Check=__webpack_require__(26),Hash=__webpack_require__(4),HDPrivateKey=__webpack_require__(66),Network=__webpack_require__(21),Point=__webpack_require__(22),PublicKey=__webpack_require__(13),bsvErrors=__webpack_require__(8),errors=bsvErrors,hdErrors=bsvErrors.HDPublicKey,assert=__webpack_require__(24),JSUtil=__webpack_require__(3);function HDPublicKey(arg){if(arg instanceof HDPublicKey)return arg;if(!(this instanceof HDPublicKey))return new HDPublicKey(arg);if(arg){if(_.isString(arg)||Buffer.isBuffer(arg)){var error=HDPublicKey.getSerializedError(arg);if(error){if(Buffer.isBuffer(arg)&&!HDPublicKey.getSerializedError(arg.toString()))return this._buildFromSerialized(arg.toString());if(error instanceof hdErrors.ArgumentIsPrivateExtended)return new HDPrivateKey(arg).hdPublicKey;throw error}return this._buildFromSerialized(arg)}if(_.isObject(arg))return arg instanceof HDPrivateKey?this._buildFromPrivate(arg):this._buildFromObject(arg);throw new hdErrors.UnrecognizedArgument(arg)}throw new hdErrors.MustSupplyArgument}HDPublicKey.fromHDPrivateKey=function(hdPrivateKey){return new HDPublicKey(hdPrivateKey)},HDPublicKey.isValidPath=function(arg){if(_.isString(arg)){var indexes=HDPrivateKey._getDerivationIndexes(arg);return null!==indexes&&_.every(indexes,HDPublicKey.isValidPath)}return!!_.isNumber(arg)&&(arg>=0&&arg<HDPublicKey.Hardened)},HDPublicKey.prototype.derive=function(){throw new Error("derive has been deprecated. use deriveChild or, for the old way, deriveNonCompliantChild.")},HDPublicKey.prototype.deriveChild=function(arg,hardened){if(_.isNumber(arg))return this._deriveWithNumber(arg,hardened);if(_.isString(arg))return this._deriveFromString(arg);throw new hdErrors.InvalidDerivationArgument(arg)},HDPublicKey.prototype._deriveWithNumber=function(index,hardened){if(index>=HDPublicKey.Hardened||hardened)throw new hdErrors.InvalidIndexCantDeriveHardened;if(index<0)throw new hdErrors.InvalidPath(index);var publicKey,indexBuffer=JSUtil.integerAsBuffer(index),data=Buffer.concat([this.publicKey.toBuffer(),indexBuffer]),hash=Hash.sha512hmac(data,this._buffers.chainCode),leftPart=BN.fromBuffer(hash.slice(0,32),{size:32}),chainCode=hash.slice(32,64);try{publicKey=PublicKey.fromPoint(Point.getG().mul(leftPart).add(this.publicKey.point))}catch(e){return this._deriveWithNumber(index+1)}return new HDPublicKey({network:this.network,depth:this.depth+1,parentFingerPrint:this.fingerPrint,childIndex:index,chainCode:chainCode,publicKey:publicKey})},HDPublicKey.prototype._deriveFromString=function(path){if(_.includes(path,"'"))throw new hdErrors.InvalidIndexCantDeriveHardened;if(!HDPublicKey.isValidPath(path))throw new hdErrors.InvalidPath(path);return HDPrivateKey._getDerivationIndexes(path).reduce((function(prev,index){return prev._deriveWithNumber(index)}),this)},HDPublicKey.isValidSerialized=function(data,network){return _.isNull(HDPublicKey.getSerializedError(data,network))},HDPublicKey.getSerializedError=function(data,network){if(!_.isString(data)&&!Buffer.isBuffer(data))return new hdErrors.UnrecognizedArgument("expected buffer or string");if(!Base58.validCharacters(data))return new errors.InvalidB58Char("(unknown)",data);try{data=Base58Check.decode(data)}catch(e){return new errors.InvalidB58Checksum(data)}if(data.length!==HDPublicKey.DataSize)return new hdErrors.InvalidLength(data);if(!_.isUndefined(network)){var error=HDPublicKey._validateNetwork(data,network);if(error)return error}var version=data.readUInt32BE(0);return version===Network.livenet.xprivkey||version===Network.testnet.xprivkey?new hdErrors.ArgumentIsPrivateExtended:null},HDPublicKey._validateNetwork=function(data,networkArg){var network=Network.get(networkArg);if(!network)return new errors.InvalidNetworkArgument(networkArg);var version=data.slice(HDPublicKey.VersionStart,HDPublicKey.VersionEnd);return version.readUInt32BE(0)!==network.xpubkey?new errors.InvalidNetwork(version):null},HDPublicKey.prototype._buildFromPrivate=function(arg){var args=_.clone(arg._buffers),point=Point.getG().mul(BN.fromBuffer(args.privateKey));return args.publicKey=Point.pointToCompressed(point),args.version=JSUtil.integerAsBuffer(Network.get(args.version.readUInt32BE(0)).xpubkey),args.privateKey=void 0,args.checksum=void 0,args.xprivkey=void 0,this._buildFromBuffers(args)},HDPublicKey.prototype._buildFromObject=function(arg){var buffers={version:arg.network?JSUtil.integerAsBuffer(Network.get(arg.network).xpubkey):arg.version,depth:_.isNumber(arg.depth)?Buffer.from([255&arg.depth]):arg.depth,parentFingerPrint:_.isNumber(arg.parentFingerPrint)?JSUtil.integerAsBuffer(arg.parentFingerPrint):arg.parentFingerPrint,childIndex:_.isNumber(arg.childIndex)?JSUtil.integerAsBuffer(arg.childIndex):arg.childIndex,chainCode:_.isString(arg.chainCode)?Buffer.from(arg.chainCode,"hex"):arg.chainCode,publicKey:_.isString(arg.publicKey)?Buffer.from(arg.publicKey,"hex"):Buffer.isBuffer(arg.publicKey)?arg.publicKey:arg.publicKey.toBuffer(),checksum:_.isNumber(arg.checksum)?JSUtil.integerAsBuffer(arg.checksum):arg.checksum};return this._buildFromBuffers(buffers)},HDPublicKey.prototype._buildFromSerialized=function(arg){var decoded=Base58Check.decode(arg),buffers={version:decoded.slice(HDPublicKey.VersionStart,HDPublicKey.VersionEnd),depth:decoded.slice(HDPublicKey.DepthStart,HDPublicKey.DepthEnd),parentFingerPrint:decoded.slice(HDPublicKey.ParentFingerPrintStart,HDPublicKey.ParentFingerPrintEnd),childIndex:decoded.slice(HDPublicKey.ChildIndexStart,HDPublicKey.ChildIndexEnd),chainCode:decoded.slice(HDPublicKey.ChainCodeStart,HDPublicKey.ChainCodeEnd),publicKey:decoded.slice(HDPublicKey.PublicKeyStart,HDPublicKey.PublicKeyEnd),checksum:decoded.slice(HDPublicKey.ChecksumStart,HDPublicKey.ChecksumEnd),xpubkey:arg};return this._buildFromBuffers(buffers)},HDPublicKey.prototype._buildFromBuffers=function(arg){HDPublicKey._validateBufferArguments(arg),JSUtil.defineImmutable(this,{_buffers:arg});var sequence=[arg.version,arg.depth,arg.parentFingerPrint,arg.childIndex,arg.chainCode,arg.publicKey],concat=Buffer.concat(sequence),checksum=Base58Check.checksum(concat);if(arg.checksum&&arg.checksum.length){if(arg.checksum.toString("hex")!==checksum.toString("hex"))throw new errors.InvalidB58Checksum(concat,checksum)}else arg.checksum=checksum;var xpubkey,network=Network.get(arg.version.readUInt32BE(0));xpubkey=Base58Check.encode(Buffer.concat(sequence)),arg.xpubkey=Buffer.from(xpubkey);var publicKey=new PublicKey(arg.publicKey,{network:network}),size=HDPublicKey.ParentFingerPrintSize,fingerPrint=Hash.sha256ripemd160(publicKey.toBuffer()).slice(0,size);return JSUtil.defineImmutable(this,{xpubkey:xpubkey,network:network,depth:arg.depth[0],publicKey:publicKey,fingerPrint:fingerPrint}),this},HDPublicKey._validateBufferArguments=function(arg){var checkBuffer=function(name,size){var buff=arg[name];assert(Buffer.isBuffer(buff),name+" argument is not a buffer, it's "+typeof buff),assert(buff.length===size,name+" has not the expected size: found "+buff.length+", expected "+size)};checkBuffer("version",HDPublicKey.VersionSize),checkBuffer("depth",HDPublicKey.DepthSize),checkBuffer("parentFingerPrint",HDPublicKey.ParentFingerPrintSize),checkBuffer("childIndex",HDPublicKey.ChildIndexSize),checkBuffer("chainCode",HDPublicKey.ChainCodeSize),checkBuffer("publicKey",HDPublicKey.PublicKeySize),arg.checksum&&arg.checksum.length&&checkBuffer("checksum",HDPublicKey.CheckSumSize)},HDPublicKey.fromString=function(arg){return $.checkArgument(_.isString(arg),"No valid string was provided"),new HDPublicKey(arg)},HDPublicKey.fromObject=function(arg){return $.checkArgument(_.isObject(arg),"No valid argument was provided"),new HDPublicKey(arg)},HDPublicKey.prototype.toString=function(){return this.xpubkey},HDPublicKey.prototype.inspect=function(){return"<HDPublicKey: "+this.xpubkey+">"},HDPublicKey.prototype.toObject=HDPublicKey.prototype.toJSON=function(){return{network:Network.get(this._buffers.version.readUInt32BE(0)).name,depth:this._buffers.depth[0],fingerPrint:this.fingerPrint.readUInt32BE(0),parentFingerPrint:this._buffers.parentFingerPrint.readUInt32BE(0),childIndex:this._buffers.childIndex.readUInt32BE(0),chainCode:this._buffers.chainCode.toString("hex"),publicKey:this.publicKey.toString(),checksum:this._buffers.checksum.readUInt32BE(0),xpubkey:this.xpubkey}},HDPublicKey.fromBuffer=function(arg){return new HDPublicKey(arg)},HDPublicKey.fromHex=function(hex){return HDPublicKey.fromBuffer(Buffer.from(hex,"hex"))},HDPublicKey.prototype.toBuffer=function(){return Buffer.from(this._buffers.xpubkey)},HDPublicKey.prototype.toHex=function(){return this.toBuffer().toString("hex")},HDPublicKey.Hardened=2147483648,HDPublicKey.RootElementAlias=["m","M"],HDPublicKey.VersionSize=4,HDPublicKey.DepthSize=1,HDPublicKey.ParentFingerPrintSize=4,HDPublicKey.ChildIndexSize=4,HDPublicKey.ChainCodeSize=32,HDPublicKey.PublicKeySize=33,HDPublicKey.CheckSumSize=4,HDPublicKey.DataSize=78,HDPublicKey.SerializedByteSize=82,HDPublicKey.VersionStart=0,HDPublicKey.VersionEnd=HDPublicKey.VersionStart+HDPublicKey.VersionSize,HDPublicKey.DepthStart=HDPublicKey.VersionEnd,HDPublicKey.DepthEnd=HDPublicKey.DepthStart+HDPublicKey.DepthSize,HDPublicKey.ParentFingerPrintStart=HDPublicKey.DepthEnd,HDPublicKey.ParentFingerPrintEnd=HDPublicKey.ParentFingerPrintStart+HDPublicKey.ParentFingerPrintSize,HDPublicKey.ChildIndexStart=HDPublicKey.ParentFingerPrintEnd,HDPublicKey.ChildIndexEnd=HDPublicKey.ChildIndexStart+HDPublicKey.ChildIndexSize,HDPublicKey.ChainCodeStart=HDPublicKey.ChildIndexEnd,HDPublicKey.ChainCodeEnd=HDPublicKey.ChainCodeStart+HDPublicKey.ChainCodeSize,HDPublicKey.PublicKeyStart=HDPublicKey.ChainCodeEnd,HDPublicKey.PublicKeyEnd=HDPublicKey.PublicKeyStart+HDPublicKey.PublicKeySize,HDPublicKey.ChecksumStart=HDPublicKey.PublicKeyEnd,HDPublicKey.ChecksumEnd=HDPublicKey.ChecksumStart+HDPublicKey.CheckSumSize,assert(HDPublicKey.PublicKeyEnd===HDPublicKey.DataSize),assert(HDPublicKey.ChecksumEnd===HDPublicKey.SerializedByteSize),module.exports=HDPublicKey},function(module,exports){module.exports={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}},function(module,exports,__webpack_require__){var QRMath=__webpack_require__(70);function QRPolynomial(num,shift){if(void 0===num.length)throw new Error(num.length+"/"+shift);for(var offset=0;offset<num.length&&0===num[offset];)offset++;this.num=new Array(num.length-offset+shift);for(var i=0;i<num.length-offset;i++)this.num[i]=num[i+offset]}QRPolynomial.prototype={get:function(index){return this.num[index]},getLength:function(){return this.num.length},multiply:function(e){for(var num=new Array(this.getLength()+e.getLength()-1),i=0;i<this.getLength();i++)for(var j=0;j<e.getLength();j++)num[i+j]^=QRMath.gexp(QRMath.glog(this.get(i))+QRMath.glog(e.get(j)));return new QRPolynomial(num,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var ratio=QRMath.glog(this.get(0))-QRMath.glog(e.get(0)),num=new Array(this.getLength()),i=0;i<this.getLength();i++)num[i]=this.get(i);for(var x=0;x<e.getLength();x++)num[x]^=QRMath.gexp(QRMath.glog(e.get(x))+ratio);return new QRPolynomial(num,0).mod(e)}},module.exports=QRPolynomial},function(module,exports){for(var QRMath={glog:function(n){if(n<1)throw new Error("glog("+n+")");return QRMath.LOG_TABLE[n]},gexp:function(n){for(;n<0;)n+=255;for(;n>=256;)n-=255;return QRMath.EXP_TABLE[n]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},i=0;i<8;i++)QRMath.EXP_TABLE[i]=1<<i;for(i=8;i<256;i++)QRMath.EXP_TABLE[i]=QRMath.EXP_TABLE[i-4]^QRMath.EXP_TABLE[i-5]^QRMath.EXP_TABLE[i-6]^QRMath.EXP_TABLE[i-8];for(i=0;i<255;i++)QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]]=i;module.exports=QRMath},function(module,exports){module.exports={L:1,M:0,Q:3,H:2}},function(module,exports){module.exports=require("vm")},function(module,exports,__webpack_require__){__webpack_require__(74).config();const{program:program}=__webpack_require__(75),yesno=__webpack_require__(77),glob=__webpack_require__(45),fs=__webpack_require__(19),bsv=__webpack_require__(50),path=__webpack_require__(15),qrcode=__webpack_require__(121),Run=__webpack_require__(128),pkg=__webpack_require__(132),BINDINGS=["location","origin","nonce","owner","satoshis"];function matchAll(text,regex){const matches=text.match(regex)||[],nonglobalRegex=new RegExp(regex.source);return matches.filter(match=>!!match).map(match=>match.match(nonglobalRegex)).filter(match=>!!match)}function loadModule(path){const text=fs.readFileSync(path).toString();if(text.includes("module.exports"))return require(path);const classMatches=matchAll(text,/class (\S+)(\s*extends \S+)?\s*{/g),functionMatches=matchAll(text,/function (\S+)\s*\(/),matches=classMatches.concat(functionMatches),vm=__webpack_require__(72);vm.runInThisContext(text);const module={};return matches.forEach(match=>{module[match[1]]=vm.runInThisContext(match[1])}),module}function hasOwnProperty(obj,name){return Object.getOwnPropertyNames(obj).includes(name)}program.name("deploy").description("Deploy code from modules to the blockhain using RUN.\n\nThis tool will generate new keys if no purse is found.\n\nEnvironment variables may be used to configure deploy. They may be\nprovided on the command line, or in a .env file.\n\nExamples:\n  deploy --main --purse=<key> lib/**.js\n  env NETWORK=test env PURSE=<key> deploy func.js\n  env PURSE_TESTNET=<key> env PURSE_MAINNET=<key> deploy -mt lib/**.js").arguments("<paths...>").option("-m, --main","Deploy to mainnet  (NETWORK=main)").option("-t, --test","Deploy to testnet  (NETWORK=test").option("-s, --stn","Deploy to STN      (NETWORK=stn").option("-p, --purse <key>","Purse private key  (PURSE=<key>)").option("-o, --owner <key>","Owner private key  (OWNER=<key>)").option("-a, --app <app>","App string         (APP=<app>)").option("-v, --verbose","Verbose logging").version(`${pkg.version} (RUN ${Run.version})`).action((async function(globs){try{await async function(globs){const networks=function(){const networks=[];process.env.NETWORK?networks.push(process.env.NETWORK):(program.main&&networks.push("main"),program.test&&networks.push("test"),program.stn&&networks.push("stn"));if(!networks.length)throw new Error("No network specified");return networks}();!function(){program.purse&&(process.env.PURSE=program.purse);program.owner&&(process.env.OWNER=program.owner);program.app&&(process.env.APP=program.app)}();const paths=function(globs){const paths=[];if(globs.forEach(g=>{glob.sync(g,{realpath:!0,nodir:!0}).forEach(p=>paths.push(p))}),!paths.length)throw new Error("No files specified");return paths}(globs),types=function(paths){const types=new Map;for(const path of paths){const module=loadModule(path),exports="function"==typeof module?[module]:module;Object.values(exports).filter(x=>"function"==typeof x).forEach(T=>{types.has(T)||types.set(T,path)})}if(!types.size)throw new Error("No types found");return types}(paths);await async function(networks){let hasAllPurses=!0;for(const network of networks)Run.configure(process.env,network),Run.defaults.purse||(hasAllPurses=!1);hasAllPurses||fs.existsSync(".env")||(hasAllPurses=await async function(networks){if(await yesno({question:"No purse keys found. Generate new keys? (y/n)"})){const keys=new Map;let dotEnvText="";for(const network of networks){const bsvNetwork="main"===network?"mainnet":"testnet",privateKey=new bsv.PrivateKey(bsvNetwork);keys.set(network,privateKey),dotEnvText+=`# ${privateKey.toAddress().toString()}\n`,dotEnvText+=`PURSE_${network.toUpperCase()}=${privateKey.toString()}\n`,dotEnvText+="\n",process.env["PURSE_"+network.toUpperCase()]=privateKey.toString()}fs.writeFileSync(".env",dotEnvText),console.log(""),console.log("   ","Success!"),console.log(""),console.log("   ","Your private keys are in this .env file. Please keep it safe."),console.log(""),console.log("   ",path.resolve(".env"));for(const network of networks){const privateKey=keys.get(network);console.log(""),console.log(`Now send some funds to your ${network}net address`),console.log(""),console.log("   ",privateKey.toAddress().toString()),console.log("");const bip21Uri="bitcoin:"+privateKey.toAddress().toString();qrcode.generate(bip21Uri,{small:!0},qr=>{const indented=qr.split("\n").map(line=>"    "+line).join("\n");console.log(indented)}),console.log(""),console.log("   ","Waiting for funds to be sent...");let balance=0;for(;;){const sleep=ms=>new Promise(resolve=>setTimeout(resolve,ms));await sleep(100);const run=new Run({network:network,purse:privateKey});if(balance=await run.purse.balance(),balance)break}console.log(""),console.log("   ",`Success! Received ${balance} satoshis`)}return console.log(""),console.log("Deploying code to "+networks.toString()),console.log(""),!0}}(networks));if(!hasAllPurses)throw new Error("No purse available")}(networks);const originalPresets=function(types){const originalPresets=new Map;return types.forEach((path,T)=>{const presets=hasOwnProperty(T,"presets")?Object.assign({},T.presets):void 0;originalPresets.set(T,presets)}),originalPresets}(types);(function(networks,types){types.forEach((path,T)=>{networks.forEach(network=>{hasOwnProperty(T,"presets")&&T.presets[network]&&BINDINGS.forEach(binding=>{hasOwnProperty(T.presets[network],binding)&&(program.verbose&&console.log(`Replacing: ${T.name}.presets.${network}.${binding}`),delete T.presets[network][binding])})})})})(networks,types),await async function(networks,types){for(const network of networks){Run.configure(process.env,network);const run=new Run({trust:"*"});run.transaction(()=>{types.forEach((path,T)=>{program.verbose&&console.log(" -",T.name),run.deploy(T)})}),await run.sync()}}(networks,types),function(paths,networks,types,originalPresets){const texts=new Map;paths.forEach(path=>texts.set(path,fs.readFileSync(path).toString())),types.forEach((path,T)=>{let text=texts.get(path),setup="";originalPresets.get(T)||(setup=`${setup}\n${T.name}.presets = {}`),networks.forEach(network=>{originalPresets.get(T)&&originalPresets.get(T)[network]||(setup=`${setup}\n${T.name}.presets.${network} = {}`)}),setup.length&&(text=`${text}\n${setup}`),networks.forEach(network=>{let npresets="";BINDINGS.forEach(binding=>{const left=`${T.name}.presets.${network}.${binding}`,quote="satoshis"===binding||"nonce"===binding?"":"'",right=`${quote}${T.presets[network][binding]}${quote}`;program.verbose&&console.log(`${left} = ${right}`);const regex=new RegExp(`^(\\s*${T.name}.presets.${network}.${binding}\\s*=\\s*)(.*)\\s*$`,"m");text.match(regex)?text=text.replace(regex,"$1"+right):npresets=`${npresets}\n${left} = ${right}`}),npresets.length&&(text=`${text}\n${npresets}`)}),texts.set(path,text)}),texts.forEach((text,path)=>fs.writeFileSync(path,text))}(paths,networks,types,originalPresets),console.log("Success! Presets saved.")}(globs)}catch(e){console.error(e.toString()),process.exit(1)}})).parse()},function(module,exports,__webpack_require__){const fs=__webpack_require__(19),path=__webpack_require__(15);function log(message){console.log("[dotenv][DEBUG] "+message)}const RE_INI_KEY_VAL=/^\s*([\w.-]+)\s*=\s*(.*)?\s*$/,RE_NEWLINES=/\\n/g,NEWLINES_MATCH=/\n|\r|\r\n/;function parse(src,options){const debug=Boolean(options&&options.debug),obj={};return src.toString().split(NEWLINES_MATCH).forEach((function(line,idx){const keyValueArr=line.match(RE_INI_KEY_VAL);if(null!=keyValueArr){const key=keyValueArr[1];let val=keyValueArr[2]||"";const end=val.length-1,isDoubleQuoted='"'===val[0]&&'"'===val[end];"'"===val[0]&&"'"===val[end]||isDoubleQuoted?(val=val.substring(1,end),isDoubleQuoted&&(val=val.replace(RE_NEWLINES,"\n"))):val=val.trim(),obj[key]=val}else debug&&log(`did not match key and value when parsing line ${idx+1}: ${line}`)})),obj}module.exports.config=function(options){let dotenvPath=path.resolve(process.cwd(),".env"),encoding="utf8",debug=!1;options&&(null!=options.path&&(dotenvPath=options.path),null!=options.encoding&&(encoding=options.encoding),null!=options.debug&&(debug=!0));try{const parsed=parse(fs.readFileSync(dotenvPath,{encoding:encoding}),{debug:debug});return Object.keys(parsed).forEach((function(key){Object.prototype.hasOwnProperty.call(process.env,key)?debug&&log(`"${key}" is already defined in \`process.env\` and will not be overwritten`):process.env[key]=parsed[key]})),{parsed:parsed}}catch(e){return{error:e}}},module.exports.parse=parse},function(module,exports,__webpack_require__){const EventEmitter=__webpack_require__(44).EventEmitter,spawn=__webpack_require__(76).spawn,path=__webpack_require__(15),fs=__webpack_require__(19);class Option{constructor(flags,description){this.flags=flags,this.required=flags.indexOf("<")>=0,this.optional=flags.indexOf("[")>=0,this.mandatory=!1,this.negate=-1!==flags.indexOf("-no-");const flagParts=flags.split(/[ ,|]+/);flagParts.length>1&&!/^[[<]/.test(flagParts[1])&&(this.short=flagParts.shift()),this.long=flagParts.shift(),this.description=description||"",this.defaultValue=void 0}name(){return this.long.replace(/^--/,"")}attributeName(){return this.name().replace(/^no-/,"").split("-").reduce((str,word)=>str+word[0].toUpperCase()+word.slice(1))}is(arg){return this.short===arg||this.long===arg}}class CommanderError extends Error{constructor(exitCode,code,message){super(message),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.code=code,this.exitCode=exitCode,this.nestedError=void 0}}class Command extends EventEmitter{constructor(name){super(),this.commands=[],this.options=[],this.parent=null,this._allowUnknownOption=!1,this._args=[],this.rawArgs=null,this._scriptPath=null,this._name=name||"",this._optionValues={},this._storeOptionsAsProperties=!0,this._passCommandToAction=!0,this._actionResults=[],this._actionHandler=null,this._executableHandler=!1,this._executableFile=null,this._defaultCommandName=null,this._exitCallback=null,this._aliases=[],this._hidden=!1,this._helpFlags="-h, --help",this._helpDescription="display help for command",this._helpShortFlag="-h",this._helpLongFlag="--help",this._hasImplicitHelpCommand=void 0,this._helpCommandName="help",this._helpCommandnameAndArgs="help [command]",this._helpCommandDescription="display help for command"}command(nameAndArgs,actionOptsOrExecDesc,execOpts){let desc=actionOptsOrExecDesc,opts=execOpts;"object"==typeof desc&&null!==desc&&(opts=desc,desc=null),opts=opts||{};const args=nameAndArgs.split(/ +/),cmd=this.createCommand(args.shift());return desc&&(cmd.description(desc),cmd._executableHandler=!0),opts.isDefault&&(this._defaultCommandName=cmd._name),cmd._hidden=!(!opts.noHelp&&!opts.hidden),cmd._helpFlags=this._helpFlags,cmd._helpDescription=this._helpDescription,cmd._helpShortFlag=this._helpShortFlag,cmd._helpLongFlag=this._helpLongFlag,cmd._helpCommandName=this._helpCommandName,cmd._helpCommandnameAndArgs=this._helpCommandnameAndArgs,cmd._helpCommandDescription=this._helpCommandDescription,cmd._exitCallback=this._exitCallback,cmd._storeOptionsAsProperties=this._storeOptionsAsProperties,cmd._passCommandToAction=this._passCommandToAction,cmd._executableFile=opts.executableFile||null,this.commands.push(cmd),cmd._parseExpectedArgs(args),cmd.parent=this,desc?this:cmd}createCommand(name){return new Command(name)}addCommand(cmd,opts){if(!cmd._name)throw new Error("Command passed to .addCommand() must have a name");return function checkExplicitNames(commandArray){commandArray.forEach(cmd=>{if(cmd._executableHandler&&!cmd._executableFile)throw new Error("Must specify executableFile for deeply nested executable: "+cmd.name());checkExplicitNames(cmd.commands)})}(cmd.commands),(opts=opts||{}).isDefault&&(this._defaultCommandName=cmd._name),(opts.noHelp||opts.hidden)&&(cmd._hidden=!0),this.commands.push(cmd),cmd.parent=this,this}arguments(desc){return this._parseExpectedArgs(desc.split(/ +/))}addHelpCommand(enableOrNameAndArgs,description){return!1===enableOrNameAndArgs?this._hasImplicitHelpCommand=!1:(this._hasImplicitHelpCommand=!0,"string"==typeof enableOrNameAndArgs&&(this._helpCommandName=enableOrNameAndArgs.split(" ")[0],this._helpCommandnameAndArgs=enableOrNameAndArgs),this._helpCommandDescription=description||this._helpCommandDescription),this}_lazyHasImplicitHelpCommand(){return void 0===this._hasImplicitHelpCommand&&(this._hasImplicitHelpCommand=this.commands.length&&!this._actionHandler&&!this._findCommand("help")),this._hasImplicitHelpCommand}_parseExpectedArgs(args){if(args.length)return args.forEach(arg=>{const argDetails={required:!1,name:"",variadic:!1};switch(arg[0]){case"<":argDetails.required=!0,argDetails.name=arg.slice(1,-1);break;case"[":argDetails.name=arg.slice(1,-1)}argDetails.name.length>3&&"..."===argDetails.name.slice(-3)&&(argDetails.variadic=!0,argDetails.name=argDetails.name.slice(0,-3)),argDetails.name&&this._args.push(argDetails)}),this._args.forEach((arg,i)=>{if(arg.variadic&&i<this._args.length-1)throw new Error(`only the last argument can be variadic '${arg.name}'`)}),this}exitOverride(fn){return this._exitCallback=fn||(err=>{if("commander.executeSubCommandAsync"!==err.code)throw err}),this}_exit(exitCode,code,message){this._exitCallback&&this._exitCallback(new CommanderError(exitCode,code,message)),process.exit(exitCode)}action(fn){return this._actionHandler=args=>{const expectedArgsCount=this._args.length,actionArgs=args.slice(0,expectedArgsCount);this._passCommandToAction?actionArgs[expectedArgsCount]=this:actionArgs[expectedArgsCount]=this.opts(),args.length>expectedArgsCount&&actionArgs.push(args.slice(expectedArgsCount));const actionResult=fn.apply(this,actionArgs);let rootCommand=this;for(;rootCommand.parent;)rootCommand=rootCommand.parent;rootCommand._actionResults.push(actionResult)},this}_optionEx(config,flags,description,fn,defaultValue){const option=new Option(flags,description),oname=option.name(),name=option.attributeName();if(option.mandatory=!!config.mandatory,"function"!=typeof fn)if(fn instanceof RegExp){const regex=fn;fn=(val,def)=>{const m=regex.exec(val);return m?m[0]:def}}else defaultValue=fn,fn=null;if(option.negate||option.optional||option.required||"boolean"==typeof defaultValue){if(option.negate){const positiveLongFlag=option.long.replace(/^--no-/,"--");defaultValue=!this._findOption(positiveLongFlag)||this._getOptionValue(name)}void 0!==defaultValue&&(this._setOptionValue(name,defaultValue),option.defaultValue=defaultValue)}return this.options.push(option),this.on("option:"+oname,val=>{null!==val&&fn&&(val=fn(val,void 0===this._getOptionValue(name)?defaultValue:this._getOptionValue(name))),"boolean"==typeof this._getOptionValue(name)||void 0===this._getOptionValue(name)?null==val?this._setOptionValue(name,!option.negate&&(defaultValue||!0)):this._setOptionValue(name,val):null!==val&&this._setOptionValue(name,!option.negate&&val)}),this}option(flags,description,fn,defaultValue){return this._optionEx({},flags,description,fn,defaultValue)}requiredOption(flags,description,fn,defaultValue){return this._optionEx({mandatory:!0},flags,description,fn,defaultValue)}allowUnknownOption(arg){return this._allowUnknownOption=void 0===arg||arg,this}storeOptionsAsProperties(value){if(this._storeOptionsAsProperties=void 0===value||value,this.options.length)throw new Error("call .storeOptionsAsProperties() before adding options");return this}passCommandToAction(value){return this._passCommandToAction=void 0===value||value,this}_setOptionValue(key,value){this._storeOptionsAsProperties?this[key]=value:this._optionValues[key]=value}_getOptionValue(key){return this._storeOptionsAsProperties?this[key]:this._optionValues[key]}parse(argv,parseOptions){if(void 0!==argv&&!Array.isArray(argv))throw new Error("first parameter to parse must be array or undefined");let userArgs;switch(parseOptions=parseOptions||{},void 0===argv&&(argv=process.argv,process.versions&&process.versions.electron&&(parseOptions.from="electron")),this.rawArgs=argv.slice(),parseOptions.from){case void 0:case"node":this._scriptPath=argv[1],userArgs=argv.slice(2);break;case"electron":process.defaultApp?(this._scriptPath=argv[1],userArgs=argv.slice(2)):userArgs=argv.slice(1);break;case"user":userArgs=argv.slice(0);break;default:throw new Error(`unexpected parse option { from: '${parseOptions.from}' }`)}return!this._scriptPath&&process.mainModule&&(this._scriptPath=process.mainModule.filename),this._name=this._name||this._scriptPath&&path.basename(this._scriptPath,path.extname(this._scriptPath)),this._parseCommand([],userArgs),this}parseAsync(argv,parseOptions){return this.parse(argv,parseOptions),Promise.all(this._actionResults).then(()=>this)}_executeSubCommand(subcommand,args){args=args.slice();let launchWithNode=!1;const sourceExt=[".js",".ts",".mjs"];this._checkForMissingMandatoryOptions();const scriptPath=this._scriptPath;let baseDir;try{const resolvedLink=fs.realpathSync(scriptPath);baseDir=path.dirname(resolvedLink)}catch(e){baseDir="."}let bin=path.basename(scriptPath,path.extname(scriptPath))+"-"+subcommand._name;subcommand._executableFile&&(bin=subcommand._executableFile);const localBin=path.join(baseDir,bin);let proc;fs.existsSync(localBin)?bin=localBin:sourceExt.forEach(ext=>{fs.existsSync(`${localBin}${ext}`)&&(bin=`${localBin}${ext}`)}),launchWithNode=sourceExt.includes(path.extname(bin)),"win32"!==process.platform?launchWithNode?(args.unshift(bin),args=incrementNodeInspectorPort(process.execArgv).concat(args),proc=spawn(process.argv[0],args,{stdio:"inherit"})):proc=spawn(bin,args,{stdio:"inherit"}):(args.unshift(bin),args=incrementNodeInspectorPort(process.execArgv).concat(args),proc=spawn(process.execPath,args,{stdio:"inherit"}));["SIGUSR1","SIGUSR2","SIGTERM","SIGINT","SIGHUP"].forEach(signal=>{process.on(signal,()=>{!1===proc.killed&&null===proc.exitCode&&proc.kill(signal)})});const exitCallback=this._exitCallback;exitCallback?proc.on("close",()=>{exitCallback(new CommanderError(process.exitCode||0,"commander.executeSubCommandAsync","(close)"))}):proc.on("close",process.exit.bind(process)),proc.on("error",err=>{if("ENOENT"===err.code){const executableMissing=`'${bin}' does not exist\n - if '${subcommand._name}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead\n - if the default executable name is not suitable, use the executableFile option to supply a custom name`;throw new Error(executableMissing)}if("EACCES"===err.code)throw new Error(`'${bin}' not executable`);if(exitCallback){const wrappedError=new CommanderError(1,"commander.executeSubCommandAsync","(error)");wrappedError.nestedError=err,exitCallback(wrappedError)}else process.exit(1)}),this.runningCommand=proc}_dispatchSubcommand(commandName,operands,unknown){const subCommand=this._findCommand(commandName);subCommand||this._helpAndError(),subCommand._executableHandler?this._executeSubCommand(subCommand,operands.concat(unknown)):subCommand._parseCommand(operands,unknown)}_parseCommand(operands,unknown){const parsed=this.parseOptions(unknown);if(operands=operands.concat(parsed.operands),unknown=parsed.unknown,this.args=operands.concat(unknown),operands&&this._findCommand(operands[0]))this._dispatchSubcommand(operands[0],operands.slice(1),unknown);else if(this._lazyHasImplicitHelpCommand()&&operands[0]===this._helpCommandName)1===operands.length?this.help():this._dispatchSubcommand(operands[1],[],[this._helpLongFlag]);else if(this._defaultCommandName)outputHelpIfRequested(this,unknown),this._dispatchSubcommand(this._defaultCommandName,operands,unknown);else if(!this.commands.length||0!==this.args.length||this._actionHandler||this._defaultCommandName||this._helpAndError(),outputHelpIfRequested(this,parsed.unknown),this._checkForMissingMandatoryOptions(),parsed.unknown.length>0&&this.unknownOption(parsed.unknown[0]),this._actionHandler){const args=this.args.slice();this._args.forEach((arg,i)=>{arg.required&&null==args[i]?this.missingArgument(arg.name):arg.variadic&&(args[i]=args.splice(i))}),this._actionHandler(args),this.emit("command:"+this.name(),operands,unknown)}else operands.length?this._findCommand("*")?this._dispatchSubcommand("*",operands,unknown):this.listenerCount("command:*")?this.emit("command:*",operands,unknown):this.commands.length&&this.unknownCommand():this.commands.length&&this._helpAndError()}_findCommand(name){if(name)return this.commands.find(cmd=>cmd._name===name||cmd._aliases.includes(name))}_findOption(arg){return this.options.find(option=>option.is(arg))}_checkForMissingMandatoryOptions(){for(let cmd=this;cmd;cmd=cmd.parent)cmd.options.forEach(anOption=>{anOption.mandatory&&void 0===cmd._getOptionValue(anOption.attributeName())&&cmd.missingMandatoryOptionValue(anOption)})}parseOptions(argv){const operands=[],unknown=[];let dest=operands;const args=argv.slice();function maybeOption(arg){return arg.length>1&&"-"===arg[0]}for(;args.length;){const arg=args.shift();if("--"===arg){dest===unknown&&dest.push(arg),dest.push(...args);break}if(maybeOption(arg)){const option=this._findOption(arg);if(option){if(option.required){const value=args.shift();void 0===value&&this.optionMissingArgument(option),this.emit("option:"+option.name(),value)}else if(option.optional){let value=null;args.length>0&&!maybeOption(args[0])&&(value=args.shift()),this.emit("option:"+option.name(),value)}else this.emit("option:"+option.name());continue}}if(arg.length>2&&"-"===arg[0]&&"-"!==arg[1]){const option=this._findOption("-"+arg[1]);if(option){option.required||option.optional?this.emit("option:"+option.name(),arg.slice(2)):(this.emit("option:"+option.name()),args.unshift("-"+arg.slice(2)));continue}}if(/^--[^=]+=/.test(arg)){const index=arg.indexOf("="),option=this._findOption(arg.slice(0,index));if(option&&(option.required||option.optional)){this.emit("option:"+option.name(),arg.slice(index+1));continue}}arg.length>1&&"-"===arg[0]&&(dest=unknown),dest.push(arg)}return{operands:operands,unknown:unknown}}opts(){if(this._storeOptionsAsProperties){const result={},len=this.options.length;for(let i=0;i<len;i++){const key=this.options[i].attributeName();result[key]=key===this._versionOptionName?this._version:this[key]}return result}return this._optionValues}missingArgument(name){const message=`error: missing required argument '${name}'`;console.error(message),this._exit(1,"commander.missingArgument",message)}optionMissingArgument(option,flag){let message;message=flag?`error: option '${option.flags}' argument missing, got '${flag}'`:`error: option '${option.flags}' argument missing`,console.error(message),this._exit(1,"commander.optionMissingArgument",message)}missingMandatoryOptionValue(option){const message=`error: required option '${option.flags}' not specified`;console.error(message),this._exit(1,"commander.missingMandatoryOptionValue",message)}unknownOption(flag){if(this._allowUnknownOption)return;const message=`error: unknown option '${flag}'`;console.error(message),this._exit(1,"commander.unknownOption",message)}unknownCommand(){const partCommands=[this.name()];for(let parentCmd=this.parent;parentCmd;parentCmd=parentCmd.parent)partCommands.unshift(parentCmd.name());const fullCommand=partCommands.join(" "),message=`error: unknown command '${this.args[0]}'. See '${fullCommand} ${this._helpLongFlag}'.`;console.error(message),this._exit(1,"commander.unknownCommand",message)}version(str,flags,description){if(void 0===str)return this._version;this._version=str;const versionOption=new Option(flags=flags||"-V, --version",description=description||"output the version number");return this._versionOptionName=versionOption.long.substr(2)||"version",this.options.push(versionOption),this.on("option:"+this._versionOptionName,()=>{process.stdout.write(str+"\n"),this._exit(0,"commander.version",str)}),this}description(str,argsDescription){return void 0===str&&void 0===argsDescription?this._description:(this._description=str,this._argsDescription=argsDescription,this)}alias(alias){if(void 0===alias)return this._aliases[0];let command=this;if(0!==this.commands.length&&this.commands[this.commands.length-1]._executableHandler&&(command=this.commands[this.commands.length-1]),alias===command._name)throw new Error("Command alias can't be the same as its name");return command._aliases.push(alias),this}aliases(aliases){return void 0===aliases?this._aliases:(aliases.forEach(alias=>this.alias(alias)),this)}usage(str){if(void 0===str){if(this._usage)return this._usage;const args=this._args.map(arg=>humanReadableArgName(arg));return"[options]"+(this.commands.length?" [command]":"")+(this._args.length?" "+args.join(" "):"")}return this._usage=str,this}name(str){return void 0===str?this._name:(this._name=str,this)}prepareCommands(){const commandDetails=this.commands.filter(cmd=>!cmd._hidden).map(cmd=>{const args=cmd._args.map(arg=>humanReadableArgName(arg)).join(" ");return[cmd._name+(cmd._aliases[0]?"|"+cmd._aliases[0]:"")+(cmd.options.length?" [options]":"")+(args?" "+args:""),cmd._description]});return this._lazyHasImplicitHelpCommand()&&commandDetails.push([this._helpCommandnameAndArgs,this._helpCommandDescription]),commandDetails}largestCommandLength(){return this.prepareCommands().reduce((max,command)=>Math.max(max,command[0].length),0)}largestOptionLength(){const options=[].slice.call(this.options);return options.push({flags:this._helpFlags}),options.reduce((max,option)=>Math.max(max,option.flags.length),0)}largestArgLength(){return this._args.reduce((max,arg)=>Math.max(max,arg.name.length),0)}padWidth(){let width=this.largestOptionLength();return this._argsDescription&&this._args.length&&this.largestArgLength()>width&&(width=this.largestArgLength()),this.commands&&this.commands.length&&this.largestCommandLength()>width&&(width=this.largestCommandLength()),width}optionHelp(){const width=this.padWidth(),descriptionWidth=(process.stdout.columns||80)-width-4;function padOptionDetails(flags,description){return pad(flags,width)+"  "+optionalWrap(description,descriptionWidth,width+2)}const help=this.options.map(option=>{const fullDesc=option.description+(option.negate||void 0===option.defaultValue?"":" (default: "+JSON.stringify(option.defaultValue)+")");return padOptionDetails(option.flags,fullDesc)}),showShortHelpFlag=this._helpShortFlag&&!this._findOption(this._helpShortFlag),showLongHelpFlag=!this._findOption(this._helpLongFlag);if(showShortHelpFlag||showLongHelpFlag){let helpFlags=this._helpFlags;showShortHelpFlag?showLongHelpFlag||(helpFlags=this._helpShortFlag):helpFlags=this._helpLongFlag,help.push(padOptionDetails(helpFlags,this._helpDescription))}return help.join("\n")}commandHelp(){if(!this.commands.length&&!this._lazyHasImplicitHelpCommand())return"";const commands=this.prepareCommands(),width=this.padWidth(),descriptionWidth=(process.stdout.columns||80)-width-4;return["Commands:",commands.map(cmd=>{const desc=cmd[1]?"  "+cmd[1]:"";return(desc?pad(cmd[0],width):cmd[0])+optionalWrap(desc,descriptionWidth,width+2)}).join("\n").replace(/^/gm,"  "),""].join("\n")}helpInformation(){let desc=[];if(this._description){desc=[this._description,""];const argsDescription=this._argsDescription;if(argsDescription&&this._args.length){const width=this.padWidth(),descriptionWidth=(process.stdout.columns||80)-width-5;desc.push("Arguments:"),desc.push(""),this._args.forEach(arg=>{desc.push("  "+pad(arg.name,width)+"  "+wrap(argsDescription[arg.name],descriptionWidth,width+4))}),desc.push("")}}let cmdName=this._name;this._aliases[0]&&(cmdName=cmdName+"|"+this._aliases[0]);let parentCmdNames="";for(let parentCmd=this.parent;parentCmd;parentCmd=parentCmd.parent)parentCmdNames=parentCmd.name()+" "+parentCmdNames;const usage=["Usage: "+parentCmdNames+cmdName+" "+this.usage(),""];let cmds=[];const commandHelp=this.commandHelp();commandHelp&&(cmds=[commandHelp]);const options=["Options:",""+this.optionHelp().replace(/^/gm,"  "),""];return usage.concat(desc).concat(options).concat(cmds).join("\n")}outputHelp(cb){cb||(cb=passthru=>passthru);const cbOutput=cb(this.helpInformation());if("string"!=typeof cbOutput&&!Buffer.isBuffer(cbOutput))throw new Error("outputHelp callback must return a string or a Buffer");process.stdout.write(cbOutput),this.emit(this._helpLongFlag)}helpOption(flags,description){this._helpFlags=flags||this._helpFlags,this._helpDescription=description||this._helpDescription;const splitFlags=this._helpFlags.split(/[ ,|]+/);return this._helpShortFlag=void 0,splitFlags.length>1&&(this._helpShortFlag=splitFlags.shift()),this._helpLongFlag=splitFlags.shift(),this}help(cb){this.outputHelp(cb),this._exit(process.exitCode||0,"commander.help","(outputHelp)")}_helpAndError(){this.outputHelp(),this._exit(1,"commander.help","(outputHelp)")}}function pad(str,width){const len=Math.max(0,width-str.length);return str+Array(len+1).join(" ")}function wrap(str,width,indent){const regex=new RegExp(".{1,"+(width-1)+"}([\\s​]|$)|[^\\s​]+?([\\s​]|$)","g");return(str.match(regex)||[]).map((line,i)=>("\n"===line.slice(-1)&&(line=line.slice(0,line.length-1)),(i>0&&indent?Array(indent+1).join(" "):"")+line.trimRight())).join("\n")}function optionalWrap(str,width,indent){if(str.match(/[\n]\s+/))return str;return width<40?str:wrap(str,width,indent)}function outputHelpIfRequested(cmd,args){args.find(arg=>arg===cmd._helpLongFlag||arg===cmd._helpShortFlag)&&(cmd.outputHelp(),cmd._exit(0,"commander.helpDisplayed","(outputHelp)"))}function humanReadableArgName(arg){const nameOutput=arg.name+(!0===arg.variadic?"...":"");return arg.required?"<"+nameOutput+">":"["+nameOutput+"]"}function incrementNodeInspectorPort(args){return args.map(arg=>{let result=arg;if(0===arg.indexOf("--inspect")){let debugOption,match,debugHost="127.0.0.1",debugPort="9229";null!==(match=arg.match(/^(--inspect(-brk)?)$/))?debugOption=match[1]:null!==(match=arg.match(/^(--inspect(-brk|-port)?)=([^:]+)$/))?(debugOption=match[1],/^\d+$/.test(match[3])?debugPort=match[3]:debugHost=match[3]):null!==(match=arg.match(/^(--inspect(-brk|-port)?)=([^:]+):(\d+)$/))&&(debugOption=match[1],debugHost=match[3],debugPort=match[4]),debugOption&&"0"!==debugPort&&(result=`${debugOption}=${debugHost}:${parseInt(debugPort)+1}`)}return result})}(exports=module.exports=new Command).program=exports,exports.Command=Command,exports.Option=Option,exports.CommanderError=CommanderError},function(module,exports){module.exports=require("child_process")},function(module,exports,__webpack_require__){"use strict";const readline=__webpack_require__(78),options_yes=["yes","y"],options_no=["no","n"];function defaultInvalidHandler({question:question,defaultValue:defaultValue,yesValues:yesValues,noValues:noValues}){process.stdout.write("\nInvalid Response.\n"),process.stdout.write("Answer either yes : ("+yesValues.join(", ")+") \n"),process.stdout.write("Or no: ("+noValues.join(", ")+") \n\n")}module.exports=async function ask({question:question,defaultValue:defaultValue,yesValues:yesValues,noValues:noValues,invalid:invalid}){invalid&&"function"==typeof invalid||(invalid=defaultInvalidHandler),yesValues=(yesValues||options_yes).map(v=>v.toLowerCase()),noValues=(noValues||options_no).map(v=>v.toLowerCase());const rl=readline.createInterface({input:process.stdin,output:process.stdout});return new Promise((function(resolve,reject){rl.question(question+" ",(async function(answer){rl.close();const cleaned=answer.trim().toLowerCase();if(""==cleaned&&null!=defaultValue)return resolve(defaultValue);if(yesValues.indexOf(cleaned)>=0)return resolve(!0);if(noValues.indexOf(cleaned)>=0)return resolve(!1);invalid({question:question,defaultValue:defaultValue,yesValues:yesValues,noValues:noValues});const result=await ask({question:question,defaultValue:defaultValue,yesValues:yesValues,noValues:noValues,invalid:invalid});resolve(result)}))}))}},function(module,exports){module.exports=require("readline")},function(module,exports,__webpack_require__){var pathModule=__webpack_require__(15),isWindows="win32"===process.platform,fs=__webpack_require__(19),DEBUG=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function maybeCallback(cb){return"function"==typeof cb?cb:function(){var callback;if(DEBUG){var backtrace=new Error;callback=function(err){err&&(backtrace.message=err.message,missingCallback(err=backtrace))}}else callback=missingCallback;return callback;function missingCallback(err){if(err){if(process.throwDeprecation)throw err;if(!process.noDeprecation){var msg="fs: missing callback "+(err.stack||err.message);process.traceDeprecation?console.trace(msg):console.error(msg)}}}}()}pathModule.normalize;if(isWindows)var nextPartRe=/(.*?)(?:[\/\\]+|$)/g;else nextPartRe=/(.*?)(?:[\/]+|$)/g;if(isWindows)var splitRootRe=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else splitRootRe=/^[\/]*/;exports.realpathSync=function(p,cache){if(p=pathModule.resolve(p),cache&&Object.prototype.hasOwnProperty.call(cache,p))return cache[p];var pos,current,base,previous,original=p,seenLinks={},knownHard={};function start(){var m=splitRootRe.exec(p);pos=m[0].length,current=m[0],base=m[0],previous="",isWindows&&!knownHard[base]&&(fs.lstatSync(base),knownHard[base]=!0)}for(start();pos<p.length;){nextPartRe.lastIndex=pos;var result=nextPartRe.exec(p);if(previous=current,current+=result[0],base=previous+result[1],pos=nextPartRe.lastIndex,!(knownHard[base]||cache&&cache[base]===base)){var resolvedLink;if(cache&&Object.prototype.hasOwnProperty.call(cache,base))resolvedLink=cache[base];else{var stat=fs.lstatSync(base);if(!stat.isSymbolicLink()){knownHard[base]=!0,cache&&(cache[base]=base);continue}var linkTarget=null;if(!isWindows){var id=stat.dev.toString(32)+":"+stat.ino.toString(32);seenLinks.hasOwnProperty(id)&&(linkTarget=seenLinks[id])}null===linkTarget&&(fs.statSync(base),linkTarget=fs.readlinkSync(base)),resolvedLink=pathModule.resolve(previous,linkTarget),cache&&(cache[base]=resolvedLink),isWindows||(seenLinks[id]=linkTarget)}p=pathModule.resolve(resolvedLink,p.slice(pos)),start()}}return cache&&(cache[original]=p),p},exports.realpath=function(p,cache,cb){if("function"!=typeof cb&&(cb=maybeCallback(cache),cache=null),p=pathModule.resolve(p),cache&&Object.prototype.hasOwnProperty.call(cache,p))return process.nextTick(cb.bind(null,null,cache[p]));var pos,current,base,previous,original=p,seenLinks={},knownHard={};function start(){var m=splitRootRe.exec(p);pos=m[0].length,current=m[0],base=m[0],previous="",isWindows&&!knownHard[base]?fs.lstat(base,(function(err){if(err)return cb(err);knownHard[base]=!0,LOOP()})):process.nextTick(LOOP)}function LOOP(){if(pos>=p.length)return cache&&(cache[original]=p),cb(null,p);nextPartRe.lastIndex=pos;var result=nextPartRe.exec(p);return previous=current,current+=result[0],base=previous+result[1],pos=nextPartRe.lastIndex,knownHard[base]||cache&&cache[base]===base?process.nextTick(LOOP):cache&&Object.prototype.hasOwnProperty.call(cache,base)?gotResolvedLink(cache[base]):fs.lstat(base,gotStat)}function gotStat(err,stat){if(err)return cb(err);if(!stat.isSymbolicLink())return knownHard[base]=!0,cache&&(cache[base]=base),process.nextTick(LOOP);if(!isWindows){var id=stat.dev.toString(32)+":"+stat.ino.toString(32);if(seenLinks.hasOwnProperty(id))return gotTarget(null,seenLinks[id],base)}fs.stat(base,(function(err){if(err)return cb(err);fs.readlink(base,(function(err,target){isWindows||(seenLinks[id]=target),gotTarget(err,target)}))}))}function gotTarget(err,target,base){if(err)return cb(err);var resolvedLink=pathModule.resolve(previous,target);cache&&(cache[base]=resolvedLink),gotResolvedLink(resolvedLink)}function gotResolvedLink(resolvedLink){p=pathModule.resolve(resolvedLink,p.slice(pos)),start()}start()}},function(module,exports,__webpack_require__){var concatMap=__webpack_require__(81),balanced=__webpack_require__(82);module.exports=function(str){if(!str)return[];"{}"===str.substr(0,2)&&(str="\\{\\}"+str.substr(2));return function expand(str,isTop){var expansions=[],m=balanced("{","}",str);if(!m||/\$$/.test(m.pre))return[str];var n,isNumericSequence=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(m.body),isAlphaSequence=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(m.body),isSequence=isNumericSequence||isAlphaSequence,isOptions=m.body.indexOf(",")>=0;if(!isSequence&&!isOptions)return m.post.match(/,.*\}/)?(str=m.pre+"{"+m.body+escClose+m.post,expand(str)):[str];if(isSequence)n=m.body.split(/\.\./);else{if(1===(n=function parseCommaParts(str){if(!str)return[""];var parts=[],m=balanced("{","}",str);if(!m)return str.split(",");var pre=m.pre,body=m.body,post=m.post,p=pre.split(",");p[p.length-1]+="{"+body+"}";var postParts=parseCommaParts(post);post.length&&(p[p.length-1]+=postParts.shift(),p.push.apply(p,postParts));return parts.push.apply(parts,p),parts}(m.body)).length)if(1===(n=expand(n[0],!1).map(embrace)).length)return(post=m.post.length?expand(m.post,!1):[""]).map((function(p){return m.pre+n[0]+p}))}var N,pre=m.pre,post=m.post.length?expand(m.post,!1):[""];if(isSequence){var x=numeric(n[0]),y=numeric(n[1]),width=Math.max(n[0].length,n[1].length),incr=3==n.length?Math.abs(numeric(n[2])):1,test=lte;y<x&&(incr*=-1,test=gte);var pad=n.some(isPadded);N=[];for(var i=x;test(i,y);i+=incr){var c;if(isAlphaSequence)"\\"===(c=String.fromCharCode(i))&&(c="");else if(c=String(i),pad){var need=width-c.length;if(need>0){var z=new Array(need+1).join("0");c=i<0?"-"+z+c.slice(1):z+c}}N.push(c)}}else N=concatMap(n,(function(el){return expand(el,!1)}));for(var j=0;j<N.length;j++)for(var k=0;k<post.length;k++){var expansion=pre+N[j]+post[k];(!isTop||isSequence||expansion)&&expansions.push(expansion)}return expansions}(function(str){return str.split("\\\\").join(escSlash).split("\\{").join(escOpen).split("\\}").join(escClose).split("\\,").join(escComma).split("\\.").join(escPeriod)}(str),!0).map(unescapeBraces)};var escSlash="\0SLASH"+Math.random()+"\0",escOpen="\0OPEN"+Math.random()+"\0",escClose="\0CLOSE"+Math.random()+"\0",escComma="\0COMMA"+Math.random()+"\0",escPeriod="\0PERIOD"+Math.random()+"\0";function numeric(str){return parseInt(str,10)==str?parseInt(str,10):str.charCodeAt(0)}function unescapeBraces(str){return str.split(escSlash).join("\\").split(escOpen).join("{").split(escClose).join("}").split(escComma).join(",").split(escPeriod).join(".")}function embrace(str){return"{"+str+"}"}function isPadded(el){return/^-?0\d/.test(el)}function lte(i,y){return i<=y}function gte(i,y){return i>=y}},function(module,exports){module.exports=function(xs,fn){for(var res=[],i=0;i<xs.length;i++){var x=fn(xs[i],i);isArray(x)?res.push.apply(res,x):res.push(x)}return res};var isArray=Array.isArray||function(xs){return"[object Array]"===Object.prototype.toString.call(xs)}},function(module,exports,__webpack_require__){"use strict";function balanced(a,b,str){a instanceof RegExp&&(a=maybeMatch(a,str)),b instanceof RegExp&&(b=maybeMatch(b,str));var r=range(a,b,str);return r&&{start:r[0],end:r[1],pre:str.slice(0,r[0]),body:str.slice(r[0]+a.length,r[1]),post:str.slice(r[1]+b.length)}}function maybeMatch(reg,str){var m=str.match(reg);return m?m[0]:null}function range(a,b,str){var begs,beg,left,right,result,ai=str.indexOf(a),bi=str.indexOf(b,ai+1),i=ai;if(ai>=0&&bi>0){if(a===b)return[ai,bi];for(begs=[],left=str.length;i>=0&&!result;)i==ai?(begs.push(i),ai=str.indexOf(a,i+1)):1==begs.length?result=[begs.pop(),bi]:((beg=begs.pop())<left&&(left=beg,right=bi),bi=str.indexOf(b,i+1)),i=ai<bi&&ai>=0?ai:bi;begs.length&&(result=[left,right])}return result}module.exports=balanced,balanced.range=range},function(module,exports){"function"==typeof Object.create?module.exports=function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype,ctor.prototype=new TempCtor,ctor.prototype.constructor=ctor}},function(module,exports,__webpack_require__){module.exports=globSync,globSync.GlobSync=GlobSync;var fs=__webpack_require__(19),rp=__webpack_require__(46),minimatch=__webpack_require__(37),path=(minimatch.Minimatch,__webpack_require__(45).Glob,__webpack_require__(38),__webpack_require__(15)),assert=__webpack_require__(24),isAbsolute=__webpack_require__(39),common=__webpack_require__(47),setopts=common.setopts,ownProp=common.ownProp,childrenIgnored=common.childrenIgnored,isIgnored=common.isIgnored;function globSync(pattern,options){if("function"==typeof options||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");return new GlobSync(pattern,options).found}function GlobSync(pattern,options){if(!pattern)throw new Error("must provide pattern");if("function"==typeof options||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof GlobSync))return new GlobSync(pattern,options);if(setopts(this,pattern,options),this.noprocess)return this;var n=this.minimatch.set.length;this.matches=new Array(n);for(var i=0;i<n;i++)this._process(this.minimatch.set[i],i,!1);this._finish()}GlobSync.prototype._finish=function(){if(assert(this instanceof GlobSync),this.realpath){var self=this;this.matches.forEach((function(matchset,index){var set=self.matches[index]=Object.create(null);for(var p in matchset)try{p=self._makeAbs(p),set[rp.realpathSync(p,self.realpathCache)]=!0}catch(er){if("stat"!==er.syscall)throw er;set[self._makeAbs(p)]=!0}}))}common.finish(this)},GlobSync.prototype._process=function(pattern,index,inGlobStar){assert(this instanceof GlobSync);for(var prefix,n=0;"string"==typeof pattern[n];)n++;switch(n){case pattern.length:return void this._processSimple(pattern.join("/"),index);case 0:prefix=null;break;default:prefix=pattern.slice(0,n).join("/")}var read,remain=pattern.slice(n);null===prefix?read=".":isAbsolute(prefix)||isAbsolute(pattern.join("/"))?(prefix&&isAbsolute(prefix)||(prefix="/"+prefix),read=prefix):read=prefix;var abs=this._makeAbs(read);childrenIgnored(this,read)||(remain[0]===minimatch.GLOBSTAR?this._processGlobStar(prefix,read,abs,remain,index,inGlobStar):this._processReaddir(prefix,read,abs,remain,index,inGlobStar))},GlobSync.prototype._processReaddir=function(prefix,read,abs,remain,index,inGlobStar){var entries=this._readdir(abs,inGlobStar);if(entries){for(var pn=remain[0],negate=!!this.minimatch.negate,rawGlob=pn._glob,dotOk=this.dot||"."===rawGlob.charAt(0),matchedEntries=[],i=0;i<entries.length;i++){if("."!==(e=entries[i]).charAt(0)||dotOk)(negate&&!prefix?!e.match(pn):e.match(pn))&&matchedEntries.push(e)}var len=matchedEntries.length;if(0!==len)if(1!==remain.length||this.mark||this.stat){remain.shift();for(i=0;i<len;i++){var newPattern;e=matchedEntries[i];newPattern=prefix?[prefix,e]:[e],this._process(newPattern.concat(remain),index,inGlobStar)}}else{this.matches[index]||(this.matches[index]=Object.create(null));for(var i=0;i<len;i++){var e=matchedEntries[i];prefix&&(e="/"!==prefix.slice(-1)?prefix+"/"+e:prefix+e),"/"!==e.charAt(0)||this.nomount||(e=path.join(this.root,e)),this._emitMatch(index,e)}}}},GlobSync.prototype._emitMatch=function(index,e){if(!isIgnored(this,e)){var abs=this._makeAbs(e);if(this.mark&&(e=this._mark(e)),this.absolute&&(e=abs),!this.matches[index][e]){if(this.nodir){var c=this.cache[abs];if("DIR"===c||Array.isArray(c))return}this.matches[index][e]=!0,this.stat&&this._stat(e)}}},GlobSync.prototype._readdirInGlobStar=function(abs){if(this.follow)return this._readdir(abs,!1);var entries,lstat;try{lstat=fs.lstatSync(abs)}catch(er){if("ENOENT"===er.code)return null}var isSym=lstat&&lstat.isSymbolicLink();return this.symlinks[abs]=isSym,isSym||!lstat||lstat.isDirectory()?entries=this._readdir(abs,!1):this.cache[abs]="FILE",entries},GlobSync.prototype._readdir=function(abs,inGlobStar){if(inGlobStar&&!ownProp(this.symlinks,abs))return this._readdirInGlobStar(abs);if(ownProp(this.cache,abs)){var c=this.cache[abs];if(!c||"FILE"===c)return null;if(Array.isArray(c))return c}try{return this._readdirEntries(abs,fs.readdirSync(abs))}catch(er){return this._readdirError(abs,er),null}},GlobSync.prototype._readdirEntries=function(abs,entries){if(!this.mark&&!this.stat)for(var i=0;i<entries.length;i++){var e=entries[i];e="/"===abs?abs+e:abs+"/"+e,this.cache[e]=!0}return this.cache[abs]=entries,entries},GlobSync.prototype._readdirError=function(f,er){switch(er.code){case"ENOTSUP":case"ENOTDIR":var abs=this._makeAbs(f);if(this.cache[abs]="FILE",abs===this.cwdAbs){var error=new Error(er.code+" invalid cwd "+this.cwd);throw error.path=this.cwd,error.code=er.code,error}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(f)]=!1;break;default:if(this.cache[this._makeAbs(f)]=!1,this.strict)throw er;this.silent||console.error("glob error",er)}},GlobSync.prototype._processGlobStar=function(prefix,read,abs,remain,index,inGlobStar){var entries=this._readdir(abs,inGlobStar);if(entries){var remainWithoutGlobStar=remain.slice(1),gspref=prefix?[prefix]:[],noGlobStar=gspref.concat(remainWithoutGlobStar);this._process(noGlobStar,index,!1);var len=entries.length;if(!this.symlinks[abs]||!inGlobStar)for(var i=0;i<len;i++){if("."!==entries[i].charAt(0)||this.dot){var instead=gspref.concat(entries[i],remainWithoutGlobStar);this._process(instead,index,!0);var below=gspref.concat(entries[i],remain);this._process(below,index,!0)}}}},GlobSync.prototype._processSimple=function(prefix,index){var exists=this._stat(prefix);if(this.matches[index]||(this.matches[index]=Object.create(null)),exists){if(prefix&&isAbsolute(prefix)&&!this.nomount){var trail=/[\/\\]$/.test(prefix);"/"===prefix.charAt(0)?prefix=path.join(this.root,prefix):(prefix=path.resolve(this.root,prefix),trail&&(prefix+="/"))}"win32"===process.platform&&(prefix=prefix.replace(/\\/g,"/")),this._emitMatch(index,prefix)}},GlobSync.prototype._stat=function(f){var abs=this._makeAbs(f),needDir="/"===f.slice(-1);if(f.length>this.maxLength)return!1;if(!this.stat&&ownProp(this.cache,abs)){var c=this.cache[abs];if(Array.isArray(c)&&(c="DIR"),!needDir||"DIR"===c)return c;if(needDir&&"FILE"===c)return!1}var stat=this.statCache[abs];if(!stat){var lstat;try{lstat=fs.lstatSync(abs)}catch(er){if(er&&("ENOENT"===er.code||"ENOTDIR"===er.code))return this.statCache[abs]=!1,!1}if(lstat&&lstat.isSymbolicLink())try{stat=fs.statSync(abs)}catch(er){stat=lstat}else stat=lstat}this.statCache[abs]=stat;c=!0;return stat&&(c=stat.isDirectory()?"DIR":"FILE"),this.cache[abs]=this.cache[abs]||c,(!needDir||"FILE"!==c)&&c},GlobSync.prototype._mark=function(p){return common.mark(this,p)},GlobSync.prototype._makeAbs=function(f){return common.makeAbs(this,f)}},function(module,exports,__webpack_require__){var wrappy=__webpack_require__(48),reqs=Object.create(null),once=__webpack_require__(49);function slice(args){for(var length=args.length,array=[],i=0;i<length;i++)array[i]=args[i];return array}module.exports=wrappy((function(key,cb){return reqs[key]?(reqs[key].push(cb),null):(reqs[key]=[cb],function(key){return once((function RES(){var cbs=reqs[key],len=cbs.length,args=slice(arguments);try{for(var i=0;i<len;i++)cbs[i].apply(null,args)}finally{cbs.length>len?(cbs.splice(0,len),process.nextTick((function(){RES.apply(null,args)}))):delete reqs[key]}}))}(key))}))},function(module){module.exports=JSON.parse('{"name":"bsv","version":"1.5.5","description":"A pure and powerful JavaScript Bitcoin SV (BSV) library.","author":"Ryan X. Charles <ryan@moneybutton.com>","main":"index.js","scripts":{"lint":"standard","test":"standard && mocha","coverage":"nyc --reporter=text npm run test","build-bsv":"webpack index.js --config webpack.config.js","build-ecies":"webpack ecies/index.js --config webpack.subproject.config.js --output-library bsvEcies -o bsv-ecies.min.js","build-message":"webpack message/index.js --config webpack.subproject.config.js --output-library bsvMessage -o bsv-message.min.js","build-mnemonic":"webpack mnemonic/index.js --config webpack.subproject.config.js --output-library bsvMnemonic -o bsv-mnemonic.min.js","build":"yarn build-bsv && yarn build-ecies && yarn build-message && yarn build-mnemonic","prepublishOnly":"yarn build"},"unpkg":"bsv.min.js","keywords":["bitcoin","transaction","address","p2p","ecies","cryptocurrency","blockchain","payment","bip21","bip32","bip37","bip69","bip70","multisig"],"repository":{"type":"git","url":"https://github.com/moneybutton/bsv"},"browser":{"request":"browser-request"},"dependencies":{"aes-js":"^3.1.2","bn.js":"=4.11.8","bs58":"=4.0.1","clone-deep":"^4.0.1","elliptic":"6.5.3","hash.js":"^1.1.7","inherits":"2.0.3","unorm":"1.4.1"},"devDependencies":{"brfs":"2.0.1","chai":"4.2.0","mocha":"^5.2.0","nyc":"^14.1.1","sinon":"7.2.3","standard":"12.0.1","webpack":"4.29.3","webpack-cli":"^3.3.12"},"license":"MIT","standard":{"globals":["afterEach","beforeEach","describe","it"]}}')},function(module,exports){module.exports=function(module){return module.webpackPolyfill||(module.deprecate=function(){},module.paths=[],module.children||(module.children=[]),Object.defineProperty(module,"loaded",{enumerable:!0,get:function(){return module.l}}),Object.defineProperty(module,"id",{enumerable:!0,get:function(){return module.i}}),module.webpackPolyfill=1),module}},function(module,exports,__webpack_require__){"use strict";var docsURL="https://docs.moneybutton.com/";module.exports=[{name:"InvalidB58Char",message:"Invalid Base58 character: {0} in {1}"},{name:"InvalidB58Checksum",message:"Invalid Base58 checksum for {0}"},{name:"InvalidNetwork",message:"Invalid version for network: got {0}"},{name:"InvalidState",message:"Invalid state: {0}"},{name:"NotImplemented",message:"Function {0} was not implemented yet"},{name:"InvalidNetworkArgument",message:'Invalid network: must be "livenet" or "testnet", got {0}'},{name:"InvalidArgument",message:function(){return"Invalid Argument"+(arguments[0]?": "+arguments[0]:"")+(arguments[1]?" Documentation: "+docsURL+arguments[1]:"")}},{name:"AbstractMethodInvoked",message:"Abstract Method Invocation: {0}"},{name:"InvalidArgumentType",message:function(){return"Invalid Argument for "+arguments[2]+", expected "+arguments[1]+" but got "+typeof arguments[0]}},{name:"Unit",message:"Internal Error on Unit {0}",errors:[{name:"UnknownCode",message:"Unrecognized unit code: {0}"},{name:"InvalidRate",message:"Invalid exchange rate: {0}"}]},{name:"MerkleBlock",message:"Internal Error on MerkleBlock {0}",errors:[{name:"InvalidMerkleTree",message:"This MerkleBlock contain an invalid Merkle Tree"}]},{name:"Transaction",message:"Internal Error on Transaction {0}",errors:[{name:"Input",message:"Internal Error on Input {0}",errors:[{name:"MissingScript",message:"Need a script to create an input"},{name:"UnsupportedScript",message:"Unsupported input script type: {0}"},{name:"MissingPreviousOutput",message:"No previous output information."}]},{name:"NeedMoreInfo",message:"{0}"},{name:"InvalidSorting",message:"The sorting function provided did not return the change output as one of the array elements"},{name:"InvalidOutputAmountSum",message:"{0}"},{name:"MissingSignatures",message:"Some inputs have not been fully signed"},{name:"InvalidIndex",message:"Invalid index: {0} is not between 0, {1}"},{name:"UnableToVerifySignature",message:"Unable to verify signature: {0}"},{name:"DustOutputs",message:"Dust amount detected in one output"},{name:"InvalidSatoshis",message:"Output satoshis are invalid"},{name:"FeeError",message:"Internal Error on Fee {0}",errors:[{name:"TooSmall",message:"Fee is too small: {0}"},{name:"TooLarge",message:"Fee is too large: {0}"},{name:"Different",message:"Unspent value is different from specified fee: {0}"}]},{name:"ChangeAddressMissing",message:"Change address is missing"},{name:"BlockHeightTooHigh",message:"Block Height can be at most 2^32 -1"},{name:"NLockTimeOutOfRange",message:"Block Height can only be between 0 and 499 999 999"},{name:"LockTimeTooEarly",message:"Lock Time can't be earlier than UNIX date 500 000 000"}]},{name:"Script",message:"Internal Error on Script {0}",errors:[{name:"UnrecognizedAddress",message:"Expected argument {0} to be an address"},{name:"CantDeriveAddress",message:"Can't derive address associated with script {0}, needs to be p2pkh in, p2pkh out, p2sh in, or p2sh out."},{name:"InvalidBuffer",message:"Invalid script buffer: can't parse valid script from given buffer {0}"}]},{name:"HDPrivateKey",message:"Internal Error on HDPrivateKey {0}",errors:[{name:"InvalidDerivationArgument",message:"Invalid derivation argument {0}, expected string, or number and boolean"},{name:"InvalidEntropyArgument",message:"Invalid entropy: must be an hexa string or binary buffer, got {0}",errors:[{name:"TooMuchEntropy",message:'Invalid entropy: more than 512 bits is non standard, got "{0}"'},{name:"NotEnoughEntropy",message:'Invalid entropy: at least 128 bits needed, got "{0}"'}]},{name:"InvalidLength",message:"Invalid length for xprivkey string in {0}"},{name:"InvalidPath",message:"Invalid derivation path: {0}"},{name:"UnrecognizedArgument",message:'Invalid argument: creating a HDPrivateKey requires a string, buffer, json or object, got "{0}"'}]},{name:"HDPublicKey",message:"Internal Error on HDPublicKey {0}",errors:[{name:"ArgumentIsPrivateExtended",message:"Argument is an extended private key: {0}"},{name:"InvalidDerivationArgument",message:"Invalid derivation argument: got {0}"},{name:"InvalidLength",message:'Invalid length for xpubkey: got "{0}"'},{name:"InvalidPath",message:'Invalid derivation path, it should look like: "m/1/100", got "{0}"'},{name:"InvalidIndexCantDeriveHardened",message:"Invalid argument: creating a hardened path requires an HDPrivateKey"},{name:"MustSupplyArgument",message:"Must supply an argument to create a HDPublicKey"},{name:"UnrecognizedArgument",message:"Invalid argument for creation, must be string, json, buffer, or object"}]}]},function(module){module.exports=JSON.parse('{"name":"elliptic","version":"6.5.3","description":"EC cryptography","main":"lib/elliptic.js","files":["lib"],"scripts":{"jscs":"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js","jshint":"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js","lint":"npm run jscs && npm run jshint","unit":"istanbul test _mocha --reporter=spec test/index.js","test":"npm run lint && npm run unit","version":"grunt dist && git add dist/"},"repository":{"type":"git","url":"git@github.com:indutny/elliptic"},"keywords":["EC","Elliptic","curve","Cryptography"],"author":"Fedor Indutny <fedor@indutny.com>","license":"MIT","bugs":{"url":"https://github.com/indutny/elliptic/issues"},"homepage":"https://github.com/indutny/elliptic","devDependencies":{"brfs":"^1.4.3","coveralls":"^3.0.8","grunt":"^1.0.4","grunt-browserify":"^5.0.0","grunt-cli":"^1.2.0","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^1.0.1","grunt-mocha-istanbul":"^3.0.1","grunt-saucelabs":"^9.0.1","istanbul":"^0.4.2","jscs":"^3.0.7","jshint":"^2.10.3","mocha":"^6.2.2"},"dependencies":{"bn.js":"^4.4.0","brorand":"^1.0.1","hash.js":"^1.0.0","hmac-drbg":"^1.0.0","inherits":"^2.0.1","minimalistic-assert":"^1.0.0","minimalistic-crypto-utils":"^1.0.0"}}')},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(5),BN=__webpack_require__(6),inherits=__webpack_require__(11),Base=__webpack_require__(30),assert=utils.assert;function ShortCurve(conf){Base.call(this,"short",conf),this.a=new BN(conf.a,16).toRed(this.red),this.b=new BN(conf.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(conf),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function Point(curve,x,y,isRed){Base.BasePoint.call(this,curve,"affine"),null===x&&null===y?(this.x=null,this.y=null,this.inf=!0):(this.x=new BN(x,16),this.y=new BN(y,16),isRed&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function JPoint(curve,x,y,z){Base.BasePoint.call(this,curve,"jacobian"),null===x&&null===y&&null===z?(this.x=this.curve.one,this.y=this.curve.one,this.z=new BN(0)):(this.x=new BN(x,16),this.y=new BN(y,16),this.z=new BN(z,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}inherits(ShortCurve,Base),module.exports=ShortCurve,ShortCurve.prototype._getEndomorphism=function(conf){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var beta,lambda;if(conf.beta)beta=new BN(conf.beta,16).toRed(this.red);else{var betas=this._getEndoRoots(this.p);beta=(beta=betas[0].cmp(betas[1])<0?betas[0]:betas[1]).toRed(this.red)}if(conf.lambda)lambda=new BN(conf.lambda,16);else{var lambdas=this._getEndoRoots(this.n);0===this.g.mul(lambdas[0]).x.cmp(this.g.x.redMul(beta))?lambda=lambdas[0]:(lambda=lambdas[1],assert(0===this.g.mul(lambda).x.cmp(this.g.x.redMul(beta))))}return{beta:beta,lambda:lambda,basis:conf.basis?conf.basis.map((function(vec){return{a:new BN(vec.a,16),b:new BN(vec.b,16)}})):this._getEndoBasis(lambda)}}},ShortCurve.prototype._getEndoRoots=function(num){var red=num===this.p?this.red:BN.mont(num),tinv=new BN(2).toRed(red).redInvm(),ntinv=tinv.redNeg(),s=new BN(3).toRed(red).redNeg().redSqrt().redMul(tinv);return[ntinv.redAdd(s).fromRed(),ntinv.redSub(s).fromRed()]},ShortCurve.prototype._getEndoBasis=function(lambda){for(var a0,b0,a1,b1,a2,b2,prevR,r,x,aprxSqrt=this.n.ushrn(Math.floor(this.n.bitLength()/2)),u=lambda,v=this.n.clone(),x1=new BN(1),y1=new BN(0),x2=new BN(0),y2=new BN(1),i=0;0!==u.cmpn(0);){var q=v.div(u);r=v.sub(q.mul(u)),x=x2.sub(q.mul(x1));var y=y2.sub(q.mul(y1));if(!a1&&r.cmp(aprxSqrt)<0)a0=prevR.neg(),b0=x1,a1=r.neg(),b1=x;else if(a1&&2==++i)break;prevR=r,v=u,u=r,x2=x1,x1=x,y2=y1,y1=y}a2=r.neg(),b2=x;var len1=a1.sqr().add(b1.sqr());return a2.sqr().add(b2.sqr()).cmp(len1)>=0&&(a2=a0,b2=b0),a1.negative&&(a1=a1.neg(),b1=b1.neg()),a2.negative&&(a2=a2.neg(),b2=b2.neg()),[{a:a1,b:b1},{a:a2,b:b2}]},ShortCurve.prototype._endoSplit=function(k){var basis=this.endo.basis,v1=basis[0],v2=basis[1],c1=v2.b.mul(k).divRound(this.n),c2=v1.b.neg().mul(k).divRound(this.n),p1=c1.mul(v1.a),p2=c2.mul(v2.a),q1=c1.mul(v1.b),q2=c2.mul(v2.b);return{k1:k.sub(p1).sub(p2),k2:q1.add(q2).neg()}},ShortCurve.prototype.pointFromX=function(x,odd){(x=new BN(x,16)).red||(x=x.toRed(this.red));var y2=x.redSqr().redMul(x).redIAdd(x.redMul(this.a)).redIAdd(this.b),y=y2.redSqrt();if(0!==y.redSqr().redSub(y2).cmp(this.zero))throw new Error("invalid point");var isOdd=y.fromRed().isOdd();return(odd&&!isOdd||!odd&&isOdd)&&(y=y.redNeg()),this.point(x,y)},ShortCurve.prototype.validate=function(point){if(point.inf)return!0;var x=point.x,y=point.y,ax=this.a.redMul(x),rhs=x.redSqr().redMul(x).redIAdd(ax).redIAdd(this.b);return 0===y.redSqr().redISub(rhs).cmpn(0)},ShortCurve.prototype._endoWnafMulAdd=function(points,coeffs,jacobianResult){for(var npoints=this._endoWnafT1,ncoeffs=this._endoWnafT2,i=0;i<points.length;i++){var split=this._endoSplit(coeffs[i]),p=points[i],beta=p._getBeta();split.k1.negative&&(split.k1.ineg(),p=p.neg(!0)),split.k2.negative&&(split.k2.ineg(),beta=beta.neg(!0)),npoints[2*i]=p,npoints[2*i+1]=beta,ncoeffs[2*i]=split.k1,ncoeffs[2*i+1]=split.k2}for(var res=this._wnafMulAdd(1,npoints,ncoeffs,2*i,jacobianResult),j=0;j<2*i;j++)npoints[j]=null,ncoeffs[j]=null;return res},inherits(Point,Base.BasePoint),ShortCurve.prototype.point=function(x,y,isRed){return new Point(this,x,y,isRed)},ShortCurve.prototype.pointFromJSON=function(obj,red){return Point.fromJSON(this,obj,red)},Point.prototype._getBeta=function(){if(this.curve.endo){var pre=this.precomputed;if(pre&&pre.beta)return pre.beta;var beta=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(pre){var curve=this.curve,endoMul=function(p){return curve.point(p.x.redMul(curve.endo.beta),p.y)};pre.beta=beta,beta.precomputed={beta:null,naf:pre.naf&&{wnd:pre.naf.wnd,points:pre.naf.points.map(endoMul)},doubles:pre.doubles&&{step:pre.doubles.step,points:pre.doubles.points.map(endoMul)}}}return beta}},Point.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},Point.fromJSON=function(curve,obj,red){"string"==typeof obj&&(obj=JSON.parse(obj));var res=curve.point(obj[0],obj[1],red);if(!obj[2])return res;function obj2point(obj){return curve.point(obj[0],obj[1],red)}var pre=obj[2];return res.precomputed={beta:null,doubles:pre.doubles&&{step:pre.doubles.step,points:[res].concat(pre.doubles.points.map(obj2point))},naf:pre.naf&&{wnd:pre.naf.wnd,points:[res].concat(pre.naf.points.map(obj2point))}},res},Point.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},Point.prototype.isInfinity=function(){return this.inf},Point.prototype.add=function(p){if(this.inf)return p;if(p.inf)return this;if(this.eq(p))return this.dbl();if(this.neg().eq(p))return this.curve.point(null,null);if(0===this.x.cmp(p.x))return this.curve.point(null,null);var c=this.y.redSub(p.y);0!==c.cmpn(0)&&(c=c.redMul(this.x.redSub(p.x).redInvm()));var nx=c.redSqr().redISub(this.x).redISub(p.x),ny=c.redMul(this.x.redSub(nx)).redISub(this.y);return this.curve.point(nx,ny)},Point.prototype.dbl=function(){if(this.inf)return this;var ys1=this.y.redAdd(this.y);if(0===ys1.cmpn(0))return this.curve.point(null,null);var a=this.curve.a,x2=this.x.redSqr(),dyinv=ys1.redInvm(),c=x2.redAdd(x2).redIAdd(x2).redIAdd(a).redMul(dyinv),nx=c.redSqr().redISub(this.x.redAdd(this.x)),ny=c.redMul(this.x.redSub(nx)).redISub(this.y);return this.curve.point(nx,ny)},Point.prototype.getX=function(){return this.x.fromRed()},Point.prototype.getY=function(){return this.y.fromRed()},Point.prototype.mul=function(k){return k=new BN(k,16),this.isInfinity()?this:this._hasDoubles(k)?this.curve._fixedNafMul(this,k):this.curve.endo?this.curve._endoWnafMulAdd([this],[k]):this.curve._wnafMul(this,k)},Point.prototype.mulAdd=function(k1,p2,k2){var points=[this,p2],coeffs=[k1,k2];return this.curve.endo?this.curve._endoWnafMulAdd(points,coeffs):this.curve._wnafMulAdd(1,points,coeffs,2)},Point.prototype.jmulAdd=function(k1,p2,k2){var points=[this,p2],coeffs=[k1,k2];return this.curve.endo?this.curve._endoWnafMulAdd(points,coeffs,!0):this.curve._wnafMulAdd(1,points,coeffs,2,!0)},Point.prototype.eq=function(p){return this===p||this.inf===p.inf&&(this.inf||0===this.x.cmp(p.x)&&0===this.y.cmp(p.y))},Point.prototype.neg=function(_precompute){if(this.inf)return this;var res=this.curve.point(this.x,this.y.redNeg());if(_precompute&&this.precomputed){var pre=this.precomputed,negate=function(p){return p.neg()};res.precomputed={naf:pre.naf&&{wnd:pre.naf.wnd,points:pre.naf.points.map(negate)},doubles:pre.doubles&&{step:pre.doubles.step,points:pre.doubles.points.map(negate)}}}return res},Point.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},inherits(JPoint,Base.BasePoint),ShortCurve.prototype.jpoint=function(x,y,z){return new JPoint(this,x,y,z)},JPoint.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var zinv=this.z.redInvm(),zinv2=zinv.redSqr(),ax=this.x.redMul(zinv2),ay=this.y.redMul(zinv2).redMul(zinv);return this.curve.point(ax,ay)},JPoint.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},JPoint.prototype.add=function(p){if(this.isInfinity())return p;if(p.isInfinity())return this;var pz2=p.z.redSqr(),z2=this.z.redSqr(),u1=this.x.redMul(pz2),u2=p.x.redMul(z2),s1=this.y.redMul(pz2.redMul(p.z)),s2=p.y.redMul(z2.redMul(this.z)),h=u1.redSub(u2),r=s1.redSub(s2);if(0===h.cmpn(0))return 0!==r.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h2=h.redSqr(),h3=h2.redMul(h),v=u1.redMul(h2),nx=r.redSqr().redIAdd(h3).redISub(v).redISub(v),ny=r.redMul(v.redISub(nx)).redISub(s1.redMul(h3)),nz=this.z.redMul(p.z).redMul(h);return this.curve.jpoint(nx,ny,nz)},JPoint.prototype.mixedAdd=function(p){if(this.isInfinity())return p.toJ();if(p.isInfinity())return this;var z2=this.z.redSqr(),u1=this.x,u2=p.x.redMul(z2),s1=this.y,s2=p.y.redMul(z2).redMul(this.z),h=u1.redSub(u2),r=s1.redSub(s2);if(0===h.cmpn(0))return 0!==r.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h2=h.redSqr(),h3=h2.redMul(h),v=u1.redMul(h2),nx=r.redSqr().redIAdd(h3).redISub(v).redISub(v),ny=r.redMul(v.redISub(nx)).redISub(s1.redMul(h3)),nz=this.z.redMul(h);return this.curve.jpoint(nx,ny,nz)},JPoint.prototype.dblp=function(pow){if(0===pow)return this;if(this.isInfinity())return this;if(!pow)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var r=this,i=0;i<pow;i++)r=r.dbl();return r}var a=this.curve.a,tinv=this.curve.tinv,jx=this.x,jy=this.y,jz=this.z,jz4=jz.redSqr().redSqr(),jyd=jy.redAdd(jy);for(i=0;i<pow;i++){var jx2=jx.redSqr(),jyd2=jyd.redSqr(),jyd4=jyd2.redSqr(),c=jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4)),t1=jx.redMul(jyd2),nx=c.redSqr().redISub(t1.redAdd(t1)),t2=t1.redISub(nx),dny=c.redMul(t2);dny=dny.redIAdd(dny).redISub(jyd4);var nz=jyd.redMul(jz);i+1<pow&&(jz4=jz4.redMul(jyd4)),jx=nx,jz=nz,jyd=dny}return this.curve.jpoint(jx,jyd.redMul(tinv),jz)},JPoint.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},JPoint.prototype._zeroDbl=function(){var nx,ny,nz;if(this.zOne){var xx=this.x.redSqr(),yy=this.y.redSqr(),yyyy=yy.redSqr(),s=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);s=s.redIAdd(s);var m=xx.redAdd(xx).redIAdd(xx),t=m.redSqr().redISub(s).redISub(s),yyyy8=yyyy.redIAdd(yyyy);yyyy8=(yyyy8=yyyy8.redIAdd(yyyy8)).redIAdd(yyyy8),nx=t,ny=m.redMul(s.redISub(t)).redISub(yyyy8),nz=this.y.redAdd(this.y)}else{var a=this.x.redSqr(),b=this.y.redSqr(),c=b.redSqr(),d=this.x.redAdd(b).redSqr().redISub(a).redISub(c);d=d.redIAdd(d);var e=a.redAdd(a).redIAdd(a),f=e.redSqr(),c8=c.redIAdd(c);c8=(c8=c8.redIAdd(c8)).redIAdd(c8),nx=f.redISub(d).redISub(d),ny=e.redMul(d.redISub(nx)).redISub(c8),nz=(nz=this.y.redMul(this.z)).redIAdd(nz)}return this.curve.jpoint(nx,ny,nz)},JPoint.prototype._threeDbl=function(){var nx,ny,nz;if(this.zOne){var xx=this.x.redSqr(),yy=this.y.redSqr(),yyyy=yy.redSqr(),s=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);s=s.redIAdd(s);var m=xx.redAdd(xx).redIAdd(xx).redIAdd(this.curve.a),t=m.redSqr().redISub(s).redISub(s);nx=t;var yyyy8=yyyy.redIAdd(yyyy);yyyy8=(yyyy8=yyyy8.redIAdd(yyyy8)).redIAdd(yyyy8),ny=m.redMul(s.redISub(t)).redISub(yyyy8),nz=this.y.redAdd(this.y)}else{var delta=this.z.redSqr(),gamma=this.y.redSqr(),beta=this.x.redMul(gamma),alpha=this.x.redSub(delta).redMul(this.x.redAdd(delta));alpha=alpha.redAdd(alpha).redIAdd(alpha);var beta4=beta.redIAdd(beta),beta8=(beta4=beta4.redIAdd(beta4)).redAdd(beta4);nx=alpha.redSqr().redISub(beta8),nz=this.y.redAdd(this.z).redSqr().redISub(gamma).redISub(delta);var ggamma8=gamma.redSqr();ggamma8=(ggamma8=(ggamma8=ggamma8.redIAdd(ggamma8)).redIAdd(ggamma8)).redIAdd(ggamma8),ny=alpha.redMul(beta4.redISub(nx)).redISub(ggamma8)}return this.curve.jpoint(nx,ny,nz)},JPoint.prototype._dbl=function(){var a=this.curve.a,jx=this.x,jy=this.y,jz=this.z,jz4=jz.redSqr().redSqr(),jx2=jx.redSqr(),jy2=jy.redSqr(),c=jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4)),jxd4=jx.redAdd(jx),t1=(jxd4=jxd4.redIAdd(jxd4)).redMul(jy2),nx=c.redSqr().redISub(t1.redAdd(t1)),t2=t1.redISub(nx),jyd8=jy2.redSqr();jyd8=(jyd8=(jyd8=jyd8.redIAdd(jyd8)).redIAdd(jyd8)).redIAdd(jyd8);var ny=c.redMul(t2).redISub(jyd8),nz=jy.redAdd(jy).redMul(jz);return this.curve.jpoint(nx,ny,nz)},JPoint.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var xx=this.x.redSqr(),yy=this.y.redSqr(),zz=this.z.redSqr(),yyyy=yy.redSqr(),m=xx.redAdd(xx).redIAdd(xx),mm=m.redSqr(),e=this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy),ee=(e=(e=(e=e.redIAdd(e)).redAdd(e).redIAdd(e)).redISub(mm)).redSqr(),t=yyyy.redIAdd(yyyy);t=(t=(t=t.redIAdd(t)).redIAdd(t)).redIAdd(t);var u=m.redIAdd(e).redSqr().redISub(mm).redISub(ee).redISub(t),yyu4=yy.redMul(u);yyu4=(yyu4=yyu4.redIAdd(yyu4)).redIAdd(yyu4);var nx=this.x.redMul(ee).redISub(yyu4);nx=(nx=nx.redIAdd(nx)).redIAdd(nx);var ny=this.y.redMul(u.redMul(t.redISub(u)).redISub(e.redMul(ee)));ny=(ny=(ny=ny.redIAdd(ny)).redIAdd(ny)).redIAdd(ny);var nz=this.z.redAdd(e).redSqr().redISub(zz).redISub(ee);return this.curve.jpoint(nx,ny,nz)},JPoint.prototype.mul=function(k,kbase){return k=new BN(k,kbase),this.curve._wnafMul(this,k)},JPoint.prototype.eq=function(p){if("affine"===p.type)return this.eq(p.toJ());if(this===p)return!0;var z2=this.z.redSqr(),pz2=p.z.redSqr();if(0!==this.x.redMul(pz2).redISub(p.x.redMul(z2)).cmpn(0))return!1;var z3=z2.redMul(this.z),pz3=pz2.redMul(p.z);return 0===this.y.redMul(pz3).redISub(p.y.redMul(z3)).cmpn(0)},JPoint.prototype.eqXToP=function(x){var zs=this.z.redSqr(),rx=x.toRed(this.curve.red).redMul(zs);if(0===this.x.cmp(rx))return!0;for(var xc=x.clone(),t=this.curve.redN.redMul(zs);;){if(xc.iadd(this.curve.n),xc.cmp(this.curve.p)>=0)return!1;if(rx.redIAdd(t),0===this.x.cmp(rx))return!0}},JPoint.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},JPoint.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},function(module,exports,__webpack_require__){"use strict";var BN=__webpack_require__(6),inherits=__webpack_require__(11),Base=__webpack_require__(30),utils=__webpack_require__(5);function MontCurve(conf){Base.call(this,"mont",conf),this.a=new BN(conf.a,16).toRed(this.red),this.b=new BN(conf.b,16).toRed(this.red),this.i4=new BN(4).toRed(this.red).redInvm(),this.two=new BN(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function Point(curve,x,z){Base.BasePoint.call(this,curve,"projective"),null===x&&null===z?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new BN(x,16),this.z=new BN(z,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}inherits(MontCurve,Base),module.exports=MontCurve,MontCurve.prototype.validate=function(point){var x=point.normalize().x,x2=x.redSqr(),rhs=x2.redMul(x).redAdd(x2.redMul(this.a)).redAdd(x);return 0===rhs.redSqrt().redSqr().cmp(rhs)},inherits(Point,Base.BasePoint),MontCurve.prototype.decodePoint=function(bytes,enc){return this.point(utils.toArray(bytes,enc),1)},MontCurve.prototype.point=function(x,z){return new Point(this,x,z)},MontCurve.prototype.pointFromJSON=function(obj){return Point.fromJSON(this,obj)},Point.prototype.precompute=function(){},Point.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},Point.fromJSON=function(curve,obj){return new Point(curve,obj[0],obj[1]||curve.one)},Point.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Point.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},Point.prototype.dbl=function(){var aa=this.x.redAdd(this.z).redSqr(),bb=this.x.redSub(this.z).redSqr(),c=aa.redSub(bb),nx=aa.redMul(bb),nz=c.redMul(bb.redAdd(this.curve.a24.redMul(c)));return this.curve.point(nx,nz)},Point.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},Point.prototype.diffAdd=function(p,diff){var a=this.x.redAdd(this.z),b=this.x.redSub(this.z),c=p.x.redAdd(p.z),da=p.x.redSub(p.z).redMul(a),cb=c.redMul(b),nx=diff.z.redMul(da.redAdd(cb).redSqr()),nz=diff.x.redMul(da.redISub(cb).redSqr());return this.curve.point(nx,nz)},Point.prototype.mul=function(k){for(var t=k.clone(),a=this,b=this.curve.point(null,null),bits=[];0!==t.cmpn(0);t.iushrn(1))bits.push(t.andln(1));for(var i=bits.length-1;i>=0;i--)0===bits[i]?(a=a.diffAdd(b,this),b=b.dbl()):(b=a.diffAdd(b,this),a=a.dbl());return b},Point.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},Point.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},Point.prototype.eq=function(other){return 0===this.getX().cmp(other.getX())},Point.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},Point.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(5),BN=__webpack_require__(6),inherits=__webpack_require__(11),Base=__webpack_require__(30),assert=utils.assert;function EdwardsCurve(conf){this.twisted=1!=(0|conf.a),this.mOneA=this.twisted&&-1==(0|conf.a),this.extended=this.mOneA,Base.call(this,"edwards",conf),this.a=new BN(conf.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new BN(conf.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new BN(conf.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),assert(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|conf.c)}function Point(curve,x,y,z,t){Base.BasePoint.call(this,curve,"projective"),null===x&&null===y&&null===z?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new BN(x,16),this.y=new BN(y,16),this.z=z?new BN(z,16):this.curve.one,this.t=t&&new BN(t,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}inherits(EdwardsCurve,Base),module.exports=EdwardsCurve,EdwardsCurve.prototype._mulA=function(num){return this.mOneA?num.redNeg():this.a.redMul(num)},EdwardsCurve.prototype._mulC=function(num){return this.oneC?num:this.c.redMul(num)},EdwardsCurve.prototype.jpoint=function(x,y,z,t){return this.point(x,y,z,t)},EdwardsCurve.prototype.pointFromX=function(x,odd){(x=new BN(x,16)).red||(x=x.toRed(this.red));var x2=x.redSqr(),rhs=this.c2.redSub(this.a.redMul(x2)),lhs=this.one.redSub(this.c2.redMul(this.d).redMul(x2)),y2=rhs.redMul(lhs.redInvm()),y=y2.redSqrt();if(0!==y.redSqr().redSub(y2).cmp(this.zero))throw new Error("invalid point");var isOdd=y.fromRed().isOdd();return(odd&&!isOdd||!odd&&isOdd)&&(y=y.redNeg()),this.point(x,y)},EdwardsCurve.prototype.pointFromY=function(y,odd){(y=new BN(y,16)).red||(y=y.toRed(this.red));var y2=y.redSqr(),lhs=y2.redSub(this.c2),rhs=y2.redMul(this.d).redMul(this.c2).redSub(this.a),x2=lhs.redMul(rhs.redInvm());if(0===x2.cmp(this.zero)){if(odd)throw new Error("invalid point");return this.point(this.zero,y)}var x=x2.redSqrt();if(0!==x.redSqr().redSub(x2).cmp(this.zero))throw new Error("invalid point");return x.fromRed().isOdd()!==odd&&(x=x.redNeg()),this.point(x,y)},EdwardsCurve.prototype.validate=function(point){if(point.isInfinity())return!0;point.normalize();var x2=point.x.redSqr(),y2=point.y.redSqr(),lhs=x2.redMul(this.a).redAdd(y2),rhs=this.c2.redMul(this.one.redAdd(this.d.redMul(x2).redMul(y2)));return 0===lhs.cmp(rhs)},inherits(Point,Base.BasePoint),EdwardsCurve.prototype.pointFromJSON=function(obj){return Point.fromJSON(this,obj)},EdwardsCurve.prototype.point=function(x,y,z,t){return new Point(this,x,y,z,t)},Point.fromJSON=function(curve,obj){return new Point(curve,obj[0],obj[1],obj[2])},Point.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},Point.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},Point.prototype._extDbl=function(){var a=this.x.redSqr(),b=this.y.redSqr(),c=this.z.redSqr();c=c.redIAdd(c);var d=this.curve._mulA(a),e=this.x.redAdd(this.y).redSqr().redISub(a).redISub(b),g=d.redAdd(b),f=g.redSub(c),h=d.redSub(b),nx=e.redMul(f),ny=g.redMul(h),nt=e.redMul(h),nz=f.redMul(g);return this.curve.point(nx,ny,nz,nt)},Point.prototype._projDbl=function(){var nx,ny,nz,b=this.x.redAdd(this.y).redSqr(),c=this.x.redSqr(),d=this.y.redSqr();if(this.curve.twisted){var f=(e=this.curve._mulA(c)).redAdd(d);if(this.zOne)nx=b.redSub(c).redSub(d).redMul(f.redSub(this.curve.two)),ny=f.redMul(e.redSub(d)),nz=f.redSqr().redSub(f).redSub(f);else{var h=this.z.redSqr(),j=f.redSub(h).redISub(h);nx=b.redSub(c).redISub(d).redMul(j),ny=f.redMul(e.redSub(d)),nz=f.redMul(j)}}else{var e=c.redAdd(d);h=this.curve._mulC(this.z).redSqr(),j=e.redSub(h).redSub(h);nx=this.curve._mulC(b.redISub(e)).redMul(j),ny=this.curve._mulC(e).redMul(c.redISub(d)),nz=e.redMul(j)}return this.curve.point(nx,ny,nz)},Point.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},Point.prototype._extAdd=function(p){var a=this.y.redSub(this.x).redMul(p.y.redSub(p.x)),b=this.y.redAdd(this.x).redMul(p.y.redAdd(p.x)),c=this.t.redMul(this.curve.dd).redMul(p.t),d=this.z.redMul(p.z.redAdd(p.z)),e=b.redSub(a),f=d.redSub(c),g=d.redAdd(c),h=b.redAdd(a),nx=e.redMul(f),ny=g.redMul(h),nt=e.redMul(h),nz=f.redMul(g);return this.curve.point(nx,ny,nz,nt)},Point.prototype._projAdd=function(p){var ny,nz,a=this.z.redMul(p.z),b=a.redSqr(),c=this.x.redMul(p.x),d=this.y.redMul(p.y),e=this.curve.d.redMul(c).redMul(d),f=b.redSub(e),g=b.redAdd(e),tmp=this.x.redAdd(this.y).redMul(p.x.redAdd(p.y)).redISub(c).redISub(d),nx=a.redMul(f).redMul(tmp);return this.curve.twisted?(ny=a.redMul(g).redMul(d.redSub(this.curve._mulA(c))),nz=f.redMul(g)):(ny=a.redMul(g).redMul(d.redSub(c)),nz=this.curve._mulC(f).redMul(g)),this.curve.point(nx,ny,nz)},Point.prototype.add=function(p){return this.isInfinity()?p:p.isInfinity()?this:this.curve.extended?this._extAdd(p):this._projAdd(p)},Point.prototype.mul=function(k){return this._hasDoubles(k)?this.curve._fixedNafMul(this,k):this.curve._wnafMul(this,k)},Point.prototype.mulAdd=function(k1,p,k2){return this.curve._wnafMulAdd(1,[this,p],[k1,k2],2,!1)},Point.prototype.jmulAdd=function(k1,p,k2){return this.curve._wnafMulAdd(1,[this,p],[k1,k2],2,!0)},Point.prototype.normalize=function(){if(this.zOne)return this;var zi=this.z.redInvm();return this.x=this.x.redMul(zi),this.y=this.y.redMul(zi),this.t&&(this.t=this.t.redMul(zi)),this.z=this.curve.one,this.zOne=!0,this},Point.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},Point.prototype.getX=function(){return this.normalize(),this.x.fromRed()},Point.prototype.getY=function(){return this.normalize(),this.y.fromRed()},Point.prototype.eq=function(other){return this===other||0===this.getX().cmp(other.getX())&&0===this.getY().cmp(other.getY())},Point.prototype.eqXToP=function(x){var rx=x.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(rx))return!0;for(var xc=x.clone(),t=this.curve.redN.redMul(this.z);;){if(xc.iadd(this.curve.n),xc.cmp(this.curve.p)>=0)return!1;if(rx.redIAdd(t),0===this.x.cmp(rx))return!0}},Point.prototype.toP=Point.prototype.normalize,Point.prototype.mixedAdd=Point.prototype.add},function(module,exports,__webpack_require__){"use strict";exports.sha1=__webpack_require__(94),exports.sha224=__webpack_require__(95),exports.sha256=__webpack_require__(57),exports.sha384=__webpack_require__(96),exports.sha512=__webpack_require__(58)},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(12),common=__webpack_require__(25),shaCommon=__webpack_require__(56),rotl32=utils.rotl32,sum32=utils.sum32,sum32_5=utils.sum32_5,ft_1=shaCommon.ft_1,BlockHash=common.BlockHash,sha1_K=[1518500249,1859775393,2400959708,3395469782];function SHA1(){if(!(this instanceof SHA1))return new SHA1;BlockHash.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}utils.inherits(SHA1,BlockHash),module.exports=SHA1,SHA1.blockSize=512,SHA1.outSize=160,SHA1.hmacStrength=80,SHA1.padLength=64,SHA1.prototype._update=function(msg,start){for(var W=this.W,i=0;i<16;i++)W[i]=msg[start+i];for(;i<W.length;i++)W[i]=rotl32(W[i-3]^W[i-8]^W[i-14]^W[i-16],1);var a=this.h[0],b=this.h[1],c=this.h[2],d=this.h[3],e=this.h[4];for(i=0;i<W.length;i++){var s=~~(i/20),t=sum32_5(rotl32(a,5),ft_1(s,b,c,d),e,W[i],sha1_K[s]);e=d,d=c,c=rotl32(b,30),b=a,a=t}this.h[0]=sum32(this.h[0],a),this.h[1]=sum32(this.h[1],b),this.h[2]=sum32(this.h[2],c),this.h[3]=sum32(this.h[3],d),this.h[4]=sum32(this.h[4],e)},SHA1.prototype._digest=function(enc){return"hex"===enc?utils.toHex32(this.h,"big"):utils.split32(this.h,"big")}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(12),SHA256=__webpack_require__(57);function SHA224(){if(!(this instanceof SHA224))return new SHA224;SHA256.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}utils.inherits(SHA224,SHA256),module.exports=SHA224,SHA224.blockSize=512,SHA224.outSize=224,SHA224.hmacStrength=192,SHA224.padLength=64,SHA224.prototype._digest=function(enc){return"hex"===enc?utils.toHex32(this.h.slice(0,7),"big"):utils.split32(this.h.slice(0,7),"big")}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(12),SHA512=__webpack_require__(58);function SHA384(){if(!(this instanceof SHA384))return new SHA384;SHA512.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}utils.inherits(SHA384,SHA512),module.exports=SHA384,SHA384.blockSize=1024,SHA384.outSize=384,SHA384.hmacStrength=192,SHA384.padLength=128,SHA384.prototype._digest=function(enc){return"hex"===enc?utils.toHex32(this.h.slice(0,12),"big"):utils.split32(this.h.slice(0,12),"big")}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(12),common=__webpack_require__(25),rotl32=utils.rotl32,sum32=utils.sum32,sum32_3=utils.sum32_3,sum32_4=utils.sum32_4,BlockHash=common.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160;BlockHash.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function f(j,x,y,z){return j<=15?x^y^z:j<=31?x&y|~x&z:j<=47?(x|~y)^z:j<=63?x&z|y&~z:x^(y|~z)}function K(j){return j<=15?0:j<=31?1518500249:j<=47?1859775393:j<=63?2400959708:2840853838}function Kh(j){return j<=15?1352829926:j<=31?1548603684:j<=47?1836072691:j<=63?2053994217:0}utils.inherits(RIPEMD160,BlockHash),exports.ripemd160=RIPEMD160,RIPEMD160.blockSize=512,RIPEMD160.outSize=160,RIPEMD160.hmacStrength=192,RIPEMD160.padLength=64,RIPEMD160.prototype._update=function(msg,start){for(var A=this.h[0],B=this.h[1],C=this.h[2],D=this.h[3],E=this.h[4],Ah=A,Bh=B,Ch=C,Dh=D,Eh=E,j=0;j<80;j++){var T=sum32(rotl32(sum32_4(A,f(j,B,C,D),msg[r[j]+start],K(j)),s[j]),E);A=E,E=D,D=rotl32(C,10),C=B,B=T,T=sum32(rotl32(sum32_4(Ah,f(79-j,Bh,Ch,Dh),msg[rh[j]+start],Kh(j)),sh[j]),Eh),Ah=Eh,Eh=Dh,Dh=rotl32(Ch,10),Ch=Bh,Bh=T}T=sum32_3(this.h[1],C,Dh),this.h[1]=sum32_3(this.h[2],D,Eh),this.h[2]=sum32_3(this.h[3],E,Ah),this.h[3]=sum32_3(this.h[4],A,Bh),this.h[4]=sum32_3(this.h[0],B,Ch),this.h[0]=T},RIPEMD160.prototype._digest=function(enc){return"hex"===enc?utils.toHex32(this.h,"little"):utils.split32(this.h,"little")};var r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(12),assert=__webpack_require__(20);function Hmac(hash,key,enc){if(!(this instanceof Hmac))return new Hmac(hash,key,enc);this.Hash=hash,this.blockSize=hash.blockSize/8,this.outSize=hash.outSize/8,this.inner=null,this.outer=null,this._init(utils.toArray(key,enc))}module.exports=Hmac,Hmac.prototype._init=function(key){key.length>this.blockSize&&(key=(new this.Hash).update(key).digest()),assert(key.length<=this.blockSize);for(var i=key.length;i<this.blockSize;i++)key.push(0);for(i=0;i<key.length;i++)key[i]^=54;for(this.inner=(new this.Hash).update(key),i=0;i<key.length;i++)key[i]^=106;this.outer=(new this.Hash).update(key)},Hmac.prototype.update=function(msg,enc){return this.inner.update(msg,enc),this},Hmac.prototype.digest=function(enc){return this.outer.update(this.inner.digest()),this.outer.digest(enc)}},function(module,exports){module.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},function(module,exports,__webpack_require__){"use strict";var BN=__webpack_require__(6),HmacDRBG=__webpack_require__(101),utils=__webpack_require__(5),curves=__webpack_require__(41),rand=__webpack_require__(54),assert=utils.assert,KeyPair=__webpack_require__(102),Signature=__webpack_require__(103);function EC(options){if(!(this instanceof EC))return new EC(options);"string"==typeof options&&(assert(curves.hasOwnProperty(options),"Unknown curve "+options),options=curves[options]),options instanceof curves.PresetCurve&&(options={curve:options}),this.curve=options.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=options.curve.g,this.g.precompute(options.curve.n.bitLength()+1),this.hash=options.hash||options.curve.hash}module.exports=EC,EC.prototype.keyPair=function(options){return new KeyPair(this,options)},EC.prototype.keyFromPrivate=function(priv,enc){return KeyPair.fromPrivate(this,priv,enc)},EC.prototype.keyFromPublic=function(pub,enc){return KeyPair.fromPublic(this,pub,enc)},EC.prototype.genKeyPair=function(options){options||(options={});for(var drbg=new HmacDRBG({hash:this.hash,pers:options.pers,persEnc:options.persEnc||"utf8",entropy:options.entropy||rand(this.hash.hmacStrength),entropyEnc:options.entropy&&options.entropyEnc||"utf8",nonce:this.n.toArray()}),bytes=this.n.byteLength(),ns2=this.n.sub(new BN(2));;){var priv=new BN(drbg.generate(bytes));if(!(priv.cmp(ns2)>0))return priv.iaddn(1),this.keyFromPrivate(priv)}},EC.prototype._truncateToN=function(msg,truncOnly){var delta=8*msg.byteLength()-this.n.bitLength();return delta>0&&(msg=msg.ushrn(delta)),!truncOnly&&msg.cmp(this.n)>=0?msg.sub(this.n):msg},EC.prototype.sign=function(msg,key,enc,options){"object"==typeof enc&&(options=enc,enc=null),options||(options={}),key=this.keyFromPrivate(key,enc),msg=this._truncateToN(new BN(msg,16));for(var bytes=this.n.byteLength(),bkey=key.getPrivate().toArray("be",bytes),nonce=msg.toArray("be",bytes),drbg=new HmacDRBG({hash:this.hash,entropy:bkey,nonce:nonce,pers:options.pers,persEnc:options.persEnc||"utf8"}),ns1=this.n.sub(new BN(1)),iter=0;;iter++){var k=options.k?options.k(iter):new BN(drbg.generate(this.n.byteLength()));if(!((k=this._truncateToN(k,!0)).cmpn(1)<=0||k.cmp(ns1)>=0)){var kp=this.g.mul(k);if(!kp.isInfinity()){var kpX=kp.getX(),r=kpX.umod(this.n);if(0!==r.cmpn(0)){var s=k.invm(this.n).mul(r.mul(key.getPrivate()).iadd(msg));if(0!==(s=s.umod(this.n)).cmpn(0)){var recoveryParam=(kp.getY().isOdd()?1:0)|(0!==kpX.cmp(r)?2:0);return options.canonical&&s.cmp(this.nh)>0&&(s=this.n.sub(s),recoveryParam^=1),new Signature({r:r,s:s,recoveryParam:recoveryParam})}}}}}},EC.prototype.verify=function(msg,signature,key,enc){msg=this._truncateToN(new BN(msg,16)),key=this.keyFromPublic(key,enc);var r=(signature=new Signature(signature,"hex")).r,s=signature.s;if(r.cmpn(1)<0||r.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var p,sinv=s.invm(this.n),u1=sinv.mul(msg).umod(this.n),u2=sinv.mul(r).umod(this.n);return this.curve._maxwellTrick?!(p=this.g.jmulAdd(u1,key.getPublic(),u2)).isInfinity()&&p.eqXToP(r):!(p=this.g.mulAdd(u1,key.getPublic(),u2)).isInfinity()&&0===p.getX().umod(this.n).cmp(r)},EC.prototype.recoverPubKey=function(msg,signature,j,enc){assert((3&j)===j,"The recovery param is more than two bits"),signature=new Signature(signature,enc);var n=this.n,e=new BN(msg),r=signature.r,s=signature.s,isYOdd=1&j,isSecondKey=j>>1;if(r.cmp(this.curve.p.umod(this.curve.n))>=0&&isSecondKey)throw new Error("Unable to find sencond key candinate");r=isSecondKey?this.curve.pointFromX(r.add(this.curve.n),isYOdd):this.curve.pointFromX(r,isYOdd);var rInv=signature.r.invm(n),s1=n.sub(e).mul(rInv).umod(n),s2=s.mul(rInv).umod(n);return this.g.mulAdd(s1,r,s2)},EC.prototype.getKeyRecoveryParam=function(e,signature,Q,enc){if(null!==(signature=new Signature(signature,enc)).recoveryParam)return signature.recoveryParam;for(var i=0;i<4;i++){var Qprime;try{Qprime=this.recoverPubKey(e,signature,i)}catch(e){continue}if(Qprime.eq(Q))return i}throw new Error("Unable to find valid recovery factor")}},function(module,exports,__webpack_require__){"use strict";var hash=__webpack_require__(31),utils=__webpack_require__(53),assert=__webpack_require__(20);function HmacDRBG(options){if(!(this instanceof HmacDRBG))return new HmacDRBG(options);this.hash=options.hash,this.predResist=!!options.predResist,this.outLen=this.hash.outSize,this.minEntropy=options.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var entropy=utils.toArray(options.entropy,options.entropyEnc||"hex"),nonce=utils.toArray(options.nonce,options.nonceEnc||"hex"),pers=utils.toArray(options.pers,options.persEnc||"hex");assert(entropy.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(entropy,nonce,pers)}module.exports=HmacDRBG,HmacDRBG.prototype._init=function(entropy,nonce,pers){var seed=entropy.concat(nonce).concat(pers);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(seed),this._reseed=1,this.reseedInterval=281474976710656},HmacDRBG.prototype._hmac=function(){return new hash.hmac(this.hash,this.K)},HmacDRBG.prototype._update=function(seed){var kmac=this._hmac().update(this.V).update([0]);seed&&(kmac=kmac.update(seed)),this.K=kmac.digest(),this.V=this._hmac().update(this.V).digest(),seed&&(this.K=this._hmac().update(this.V).update([1]).update(seed).digest(),this.V=this._hmac().update(this.V).digest())},HmacDRBG.prototype.reseed=function(entropy,entropyEnc,add,addEnc){"string"!=typeof entropyEnc&&(addEnc=add,add=entropyEnc,entropyEnc=null),entropy=utils.toArray(entropy,entropyEnc),add=utils.toArray(add,addEnc),assert(entropy.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(entropy.concat(add||[])),this._reseed=1},HmacDRBG.prototype.generate=function(len,enc,add,addEnc){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof enc&&(addEnc=add,add=enc,enc=null),add&&(add=utils.toArray(add,addEnc||"hex"),this._update(add));for(var temp=[];temp.length<len;)this.V=this._hmac().update(this.V).digest(),temp=temp.concat(this.V);var res=temp.slice(0,len);return this._update(add),this._reseed++,utils.encode(res,enc)}},function(module,exports,__webpack_require__){"use strict";var BN=__webpack_require__(6),assert=__webpack_require__(5).assert;function KeyPair(ec,options){this.ec=ec,this.priv=null,this.pub=null,options.priv&&this._importPrivate(options.priv,options.privEnc),options.pub&&this._importPublic(options.pub,options.pubEnc)}module.exports=KeyPair,KeyPair.fromPublic=function(ec,pub,enc){return pub instanceof KeyPair?pub:new KeyPair(ec,{pub:pub,pubEnc:enc})},KeyPair.fromPrivate=function(ec,priv,enc){return priv instanceof KeyPair?priv:new KeyPair(ec,{priv:priv,privEnc:enc})},KeyPair.prototype.validate=function(){var pub=this.getPublic();return pub.isInfinity()?{result:!1,reason:"Invalid public key"}:pub.validate()?pub.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},KeyPair.prototype.getPublic=function(compact,enc){return"string"==typeof compact&&(enc=compact,compact=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),enc?this.pub.encode(enc,compact):this.pub},KeyPair.prototype.getPrivate=function(enc){return"hex"===enc?this.priv.toString(16,2):this.priv},KeyPair.prototype._importPrivate=function(key,enc){this.priv=new BN(key,enc||16),this.priv=this.priv.umod(this.ec.curve.n)},KeyPair.prototype._importPublic=function(key,enc){if(key.x||key.y)return"mont"===this.ec.curve.type?assert(key.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||assert(key.x&&key.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(key.x,key.y));this.pub=this.ec.curve.decodePoint(key,enc)},KeyPair.prototype.derive=function(pub){return pub.mul(this.priv).getX()},KeyPair.prototype.sign=function(msg,enc,options){return this.ec.sign(msg,this,enc,options)},KeyPair.prototype.verify=function(msg,signature){return this.ec.verify(msg,signature,this)},KeyPair.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},function(module,exports,__webpack_require__){"use strict";var BN=__webpack_require__(6),utils=__webpack_require__(5),assert=utils.assert;function Signature(options,enc){if(options instanceof Signature)return options;this._importDER(options,enc)||(assert(options.r&&options.s,"Signature without r or s"),this.r=new BN(options.r,16),this.s=new BN(options.s,16),void 0===options.recoveryParam?this.recoveryParam=null:this.recoveryParam=options.recoveryParam)}function Position(){this.place=0}function getLength(buf,p){var initial=buf[p.place++];if(!(128&initial))return initial;var octetLen=15&initial;if(0===octetLen||octetLen>4)return!1;for(var val=0,i=0,off=p.place;i<octetLen;i++,off++)val<<=8,val|=buf[off],val>>>=0;return!(val<=127)&&(p.place=off,val)}function rmPadding(buf){for(var i=0,len=buf.length-1;!buf[i]&&!(128&buf[i+1])&&i<len;)i++;return 0===i?buf:buf.slice(i)}function constructLength(arr,len){if(len<128)arr.push(len);else{var octets=1+(Math.log(len)/Math.LN2>>>3);for(arr.push(128|octets);--octets;)arr.push(len>>>(octets<<3)&255);arr.push(len)}}module.exports=Signature,Signature.prototype._importDER=function(data,enc){data=utils.toArray(data,enc);var p=new Position;if(48!==data[p.place++])return!1;var len=getLength(data,p);if(!1===len)return!1;if(len+p.place!==data.length)return!1;if(2!==data[p.place++])return!1;var rlen=getLength(data,p);if(!1===rlen)return!1;var r=data.slice(p.place,rlen+p.place);if(p.place+=rlen,2!==data[p.place++])return!1;var slen=getLength(data,p);if(!1===slen)return!1;if(data.length!==slen+p.place)return!1;var s=data.slice(p.place,slen+p.place);if(0===r[0]){if(!(128&r[1]))return!1;r=r.slice(1)}if(0===s[0]){if(!(128&s[1]))return!1;s=s.slice(1)}return this.r=new BN(r),this.s=new BN(s),this.recoveryParam=null,!0},Signature.prototype.toDER=function(enc){var r=this.r.toArray(),s=this.s.toArray();for(128&r[0]&&(r=[0].concat(r)),128&s[0]&&(s=[0].concat(s)),r=rmPadding(r),s=rmPadding(s);!(s[0]||128&s[1]);)s=s.slice(1);var arr=[2];constructLength(arr,r.length),(arr=arr.concat(r)).push(2),constructLength(arr,s.length);var backHalf=arr.concat(s),res=[48];return constructLength(res,backHalf.length),res=res.concat(backHalf),utils.encode(res,enc)}},function(module,exports,__webpack_require__){"use strict";var hash=__webpack_require__(31),curves=__webpack_require__(41),utils=__webpack_require__(5),assert=utils.assert,parseBytes=utils.parseBytes,KeyPair=__webpack_require__(105),Signature=__webpack_require__(106);function EDDSA(curve){if(assert("ed25519"===curve,"only tested with ed25519 so far"),!(this instanceof EDDSA))return new EDDSA(curve);curve=curves[curve].curve;this.curve=curve,this.g=curve.g,this.g.precompute(curve.n.bitLength()+1),this.pointClass=curve.point().constructor,this.encodingLength=Math.ceil(curve.n.bitLength()/8),this.hash=hash.sha512}module.exports=EDDSA,EDDSA.prototype.sign=function(message,secret){message=parseBytes(message);var key=this.keyFromSecret(secret),r=this.hashInt(key.messagePrefix(),message),R=this.g.mul(r),Rencoded=this.encodePoint(R),s_=this.hashInt(Rencoded,key.pubBytes(),message).mul(key.priv()),S=r.add(s_).umod(this.curve.n);return this.makeSignature({R:R,S:S,Rencoded:Rencoded})},EDDSA.prototype.verify=function(message,sig,pub){message=parseBytes(message),sig=this.makeSignature(sig);var key=this.keyFromPublic(pub),h=this.hashInt(sig.Rencoded(),key.pubBytes(),message),SG=this.g.mul(sig.S());return sig.R().add(key.pub().mul(h)).eq(SG)},EDDSA.prototype.hashInt=function(){for(var hash=this.hash(),i=0;i<arguments.length;i++)hash.update(arguments[i]);return utils.intFromLE(hash.digest()).umod(this.curve.n)},EDDSA.prototype.keyFromPublic=function(pub){return KeyPair.fromPublic(this,pub)},EDDSA.prototype.keyFromSecret=function(secret){return KeyPair.fromSecret(this,secret)},EDDSA.prototype.makeSignature=function(sig){return sig instanceof Signature?sig:new Signature(this,sig)},EDDSA.prototype.encodePoint=function(point){var enc=point.getY().toArray("le",this.encodingLength);return enc[this.encodingLength-1]|=point.getX().isOdd()?128:0,enc},EDDSA.prototype.decodePoint=function(bytes){var lastIx=(bytes=utils.parseBytes(bytes)).length-1,normed=bytes.slice(0,lastIx).concat(-129&bytes[lastIx]),xIsOdd=0!=(128&bytes[lastIx]),y=utils.intFromLE(normed);return this.curve.pointFromY(y,xIsOdd)},EDDSA.prototype.encodeInt=function(num){return num.toArray("le",this.encodingLength)},EDDSA.prototype.decodeInt=function(bytes){return utils.intFromLE(bytes)},EDDSA.prototype.isPoint=function(val){return val instanceof this.pointClass}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(5),assert=utils.assert,parseBytes=utils.parseBytes,cachedProperty=utils.cachedProperty;function KeyPair(eddsa,params){this.eddsa=eddsa,this._secret=parseBytes(params.secret),eddsa.isPoint(params.pub)?this._pub=params.pub:this._pubBytes=parseBytes(params.pub)}KeyPair.fromPublic=function(eddsa,pub){return pub instanceof KeyPair?pub:new KeyPair(eddsa,{pub:pub})},KeyPair.fromSecret=function(eddsa,secret){return secret instanceof KeyPair?secret:new KeyPair(eddsa,{secret:secret})},KeyPair.prototype.secret=function(){return this._secret},cachedProperty(KeyPair,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),cachedProperty(KeyPair,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),cachedProperty(KeyPair,"privBytes",(function(){var eddsa=this.eddsa,hash=this.hash(),lastIx=eddsa.encodingLength-1,a=hash.slice(0,eddsa.encodingLength);return a[0]&=248,a[lastIx]&=127,a[lastIx]|=64,a})),cachedProperty(KeyPair,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),cachedProperty(KeyPair,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),cachedProperty(KeyPair,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),KeyPair.prototype.sign=function(message){return assert(this._secret,"KeyPair can only verify"),this.eddsa.sign(message,this)},KeyPair.prototype.verify=function(message,sig){return this.eddsa.verify(message,sig,this)},KeyPair.prototype.getSecret=function(enc){return assert(this._secret,"KeyPair is public only"),utils.encode(this.secret(),enc)},KeyPair.prototype.getPublic=function(enc){return utils.encode(this.pubBytes(),enc)},module.exports=KeyPair},function(module,exports,__webpack_require__){"use strict";var BN=__webpack_require__(6),utils=__webpack_require__(5),assert=utils.assert,cachedProperty=utils.cachedProperty,parseBytes=utils.parseBytes;function Signature(eddsa,sig){this.eddsa=eddsa,"object"!=typeof sig&&(sig=parseBytes(sig)),Array.isArray(sig)&&(sig={R:sig.slice(0,eddsa.encodingLength),S:sig.slice(eddsa.encodingLength)}),assert(sig.R&&sig.S,"Signature without R or S"),eddsa.isPoint(sig.R)&&(this._R=sig.R),sig.S instanceof BN&&(this._S=sig.S),this._Rencoded=Array.isArray(sig.R)?sig.R:sig.Rencoded,this._Sencoded=Array.isArray(sig.S)?sig.S:sig.Sencoded}cachedProperty(Signature,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),cachedProperty(Signature,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),cachedProperty(Signature,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),cachedProperty(Signature,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),Signature.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},Signature.prototype.toHex=function(){return utils.encode(this.toBytes(),"hex").toUpperCase()},module.exports=Signature},function(module,exports,__webpack_require__){"use strict";var hash=__webpack_require__(31),$=__webpack_require__(1),Hash=module.exports;Hash.sha1=function(buf){return $.checkArgument(Buffer.isBuffer(buf)),Buffer.from(hash.sha1().update(buf).digest("hex"),"hex")},Hash.sha1.blocksize=512,Hash.sha256=function(buf){return $.checkArgument(Buffer.isBuffer(buf)),Buffer.from(hash.sha256().update(buf).digest("hex"),"hex")},Hash.sha256.blocksize=512,Hash.sha256sha256=function(buf){return $.checkArgument(Buffer.isBuffer(buf)),Hash.sha256(Hash.sha256(buf))},Hash.ripemd160=function(buf){return $.checkArgument(Buffer.isBuffer(buf)),Buffer.from(hash.ripemd160().update(buf).digest("hex"),"hex")},Hash.sha256ripemd160=function(buf){return $.checkArgument(Buffer.isBuffer(buf)),Hash.ripemd160(Hash.sha256(buf))},Hash.sha512=function(buf){return $.checkArgument(Buffer.isBuffer(buf)),Buffer.from(hash.sha512().update(buf).digest("hex"),"hex")},Hash.sha512.blocksize=1024,Hash.hmac=function(hashf,data,key){$.checkArgument(Buffer.isBuffer(data)),$.checkArgument(Buffer.isBuffer(key)),$.checkArgument(hashf.blocksize);var blocksize=hashf.blocksize/8;if(key.length>blocksize)key=hashf(key);else if(key<blocksize){var fill=Buffer.alloc(blocksize);fill.fill(0),key.copy(fill),key=fill}var oKey=Buffer.alloc(blocksize);oKey.fill(92);var iKey=Buffer.alloc(blocksize);iKey.fill(54);for(var oKeyPad=Buffer.alloc(blocksize),iKeyPad=Buffer.alloc(blocksize),i=0;i<blocksize;i++)oKeyPad[i]=oKey[i]^key[i],iKeyPad[i]=iKey[i]^key[i];return hashf(Buffer.concat([oKeyPad,hashf(Buffer.concat([iKeyPad,data]))]))},Hash.sha256hmac=function(data,key){return Hash.hmac(Hash.sha256,data,key)},Hash.sha512hmac=function(data,key){return Hash.hmac(Hash.sha512,data,key)}},function(module,exports,__webpack_require__){"use strict";var crypto=__webpack_require__(40),$=__webpack_require__(1),Hash=module.exports;Hash.sha1=function(buf){return $.checkArgument(Buffer.isBuffer(buf)),crypto.createHash("sha1").update(buf).digest()},Hash.sha1.blocksize=512,Hash.sha256=function(buf){return $.checkArgument(Buffer.isBuffer(buf)),crypto.createHash("sha256").update(buf).digest()},Hash.sha256.blocksize=512,Hash.sha256sha256=function(buf){return $.checkArgument(Buffer.isBuffer(buf)),Hash.sha256(Hash.sha256(buf))},Hash.ripemd160=function(buf){return $.checkArgument(Buffer.isBuffer(buf)),crypto.createHash("ripemd160").update(buf).digest()},Hash.sha256ripemd160=function(buf){return $.checkArgument(Buffer.isBuffer(buf)),Hash.ripemd160(Hash.sha256(buf))},Hash.sha512=function(buf){return $.checkArgument(Buffer.isBuffer(buf)),crypto.createHash("sha512").update(buf).digest()},Hash.sha512.blocksize=1024,Hash.hmac=function(hashf,data,key){$.checkArgument(Buffer.isBuffer(data)),$.checkArgument(Buffer.isBuffer(key)),$.checkArgument(hashf.blocksize);var blocksize=hashf.blocksize/8;if(key.length>blocksize)key=hashf(key);else if(key<blocksize){var fill=Buffer.alloc(blocksize);fill.fill(0),key.copy(fill),key=fill}var oKey=Buffer.alloc(blocksize);oKey.fill(92);var iKey=Buffer.alloc(blocksize);iKey.fill(54);for(var oKeyPad=Buffer.alloc(blocksize),iKeyPad=Buffer.alloc(blocksize),i=0;i<blocksize;i++)oKeyPad[i]=oKey[i]^key[i],iKeyPad[i]=iKey[i]^key[i];return hashf(Buffer.concat([oKeyPad,hashf(Buffer.concat([iKeyPad,data]))]))},Hash.sha256hmac=function(data,key){return Hash.hmac(Hash.sha256,data,key)},Hash.sha512hmac=function(data,key){return Hash.hmac(Hash.sha512,data,key)}},function(module,exports,__webpack_require__){"use strict";var _Buffer=__webpack_require__(110).Buffer;module.exports=function(ALPHABET){if(ALPHABET.length>=255)throw new TypeError("Alphabet too long");for(var BASE_MAP=new Uint8Array(256),j=0;j<BASE_MAP.length;j++)BASE_MAP[j]=255;for(var i=0;i<ALPHABET.length;i++){var x=ALPHABET.charAt(i),xc=x.charCodeAt(0);if(255!==BASE_MAP[xc])throw new TypeError(x+" is ambiguous");BASE_MAP[xc]=i}var BASE=ALPHABET.length,LEADER=ALPHABET.charAt(0),FACTOR=Math.log(BASE)/Math.log(256),iFACTOR=Math.log(256)/Math.log(BASE);function decodeUnsafe(source){if("string"!=typeof source)throw new TypeError("Expected String");if(0===source.length)return _Buffer.alloc(0);var psz=0;if(" "!==source[psz]){for(var zeroes=0,length=0;source[psz]===LEADER;)zeroes++,psz++;for(var size=(source.length-psz)*FACTOR+1>>>0,b256=new Uint8Array(size);source[psz];){var carry=BASE_MAP[source.charCodeAt(psz)];if(255===carry)return;for(var i=0,it3=size-1;(0!==carry||i<length)&&-1!==it3;it3--,i++)carry+=BASE*b256[it3]>>>0,b256[it3]=carry%256>>>0,carry=carry/256>>>0;if(0!==carry)throw new Error("Non-zero carry");length=i,psz++}if(" "!==source[psz]){for(var it4=size-length;it4!==size&&0===b256[it4];)it4++;var vch=_Buffer.allocUnsafe(zeroes+(size-it4));vch.fill(0,0,zeroes);for(var j=zeroes;it4!==size;)vch[j++]=b256[it4++];return vch}}}return{encode:function(source){if((Array.isArray(source)||source instanceof Uint8Array)&&(source=_Buffer.from(source)),!_Buffer.isBuffer(source))throw new TypeError("Expected Buffer");if(0===source.length)return"";for(var zeroes=0,length=0,pbegin=0,pend=source.length;pbegin!==pend&&0===source[pbegin];)pbegin++,zeroes++;for(var size=(pend-pbegin)*iFACTOR+1>>>0,b58=new Uint8Array(size);pbegin!==pend;){for(var carry=source[pbegin],i=0,it1=size-1;(0!==carry||i<length)&&-1!==it1;it1--,i++)carry+=256*b58[it1]>>>0,b58[it1]=carry%BASE>>>0,carry=carry/BASE>>>0;if(0!==carry)throw new Error("Non-zero carry");length=i,pbegin++}for(var it2=size-length;it2!==size&&0===b58[it2];)it2++;for(var str=LEADER.repeat(zeroes);it2<size;++it2)str+=ALPHABET.charAt(b58[it2]);return str},decodeUnsafe:decodeUnsafe,decode:function(string){var buffer=decodeUnsafe(string);if(buffer)return buffer;throw new Error("Non-base"+BASE+" character")}}}},function(module,exports,__webpack_require__){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var buffer=__webpack_require__(7),Buffer=buffer.Buffer;function copyProps(src,dst){for(var key in src)dst[key]=src[key]}function SafeBuffer(arg,encodingOrOffset,length){return Buffer(arg,encodingOrOffset,length)}Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow?module.exports=buffer:(copyProps(buffer,exports),exports.Buffer=SafeBuffer),SafeBuffer.prototype=Object.create(Buffer.prototype),copyProps(Buffer,SafeBuffer),SafeBuffer.from=function(arg,encodingOrOffset,length){if("number"==typeof arg)throw new TypeError("Argument must not be a number");return Buffer(arg,encodingOrOffset,length)},SafeBuffer.alloc=function(size,fill,encoding){if("number"!=typeof size)throw new TypeError("Argument must be a number");var buf=Buffer(size);return void 0!==fill?"string"==typeof encoding?buf.fill(fill,encoding):buf.fill(fill):buf.fill(0),buf},SafeBuffer.allocUnsafe=function(size){if("number"!=typeof size)throw new TypeError("Argument must be a number");return Buffer(size)},SafeBuffer.allocUnsafeSlow=function(size){if("number"!=typeof size)throw new TypeError("Argument must be a number");return buffer.SlowBuffer(size)}},function(module,exports,__webpack_require__){"use strict";const clone=__webpack_require__(112),typeOf=__webpack_require__(62),isPlainObject=__webpack_require__(113);function cloneDeep(val,instanceClone){switch(typeOf(val)){case"object":return function(val,instanceClone){if("function"==typeof instanceClone)return instanceClone(val);if(instanceClone||isPlainObject(val)){const res=new val.constructor;for(let key in val)res[key]=cloneDeep(val[key],instanceClone);return res}return val}(val,instanceClone);case"array":return function(val,instanceClone){const res=new val.constructor(val.length);for(let i=0;i<val.length;i++)res[i]=cloneDeep(val[i],instanceClone);return res}(val,instanceClone);default:return clone(val)}}module.exports=cloneDeep},function(module,exports,__webpack_require__){"use strict";
/*!
 * shallow-clone <https://github.com/jonschlinkert/shallow-clone>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */const valueOf=Symbol.prototype.valueOf,typeOf=__webpack_require__(62);module.exports=function(val,deep){switch(typeOf(val)){case"array":return val.slice();case"object":return Object.assign({},val);case"date":return new val.constructor(Number(val));case"map":return new Map(val);case"set":return new Set(val);case"buffer":return function(val){const len=val.length,buf=Buffer.allocUnsafe?Buffer.allocUnsafe(len):Buffer.from(len);return val.copy(buf),buf}(val);case"symbol":return function(val){return valueOf?Object(valueOf.call(val)):{}}(val);case"arraybuffer":return function(val){const res=new val.constructor(val.byteLength);return new Uint8Array(res).set(new Uint8Array(val)),res}(val);case"float32array":case"float64array":case"int16array":case"int32array":case"int8array":case"uint16array":case"uint32array":case"uint8clampedarray":case"uint8array":return function(val,deep){return new val.constructor(val.buffer,val.byteOffset,val.length)}(val);case"regexp":return function(val){const flags=void 0!==val.flags?val.flags:/\w+$/.exec(val)||void 0,re=new val.constructor(val.source,flags);return re.lastIndex=val.lastIndex,re}(val);case"error":return Object.create(val);default:return val}}},function(module,exports,__webpack_require__){"use strict";
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var isObject=__webpack_require__(114);function isObjectObject(o){return!0===isObject(o)&&"[object Object]"===Object.prototype.toString.call(o)}module.exports=function(o){var ctor,prot;return!1!==isObjectObject(o)&&("function"==typeof(ctor=o.constructor)&&(!1!==isObjectObject(prot=ctor.prototype)&&!1!==prot.hasOwnProperty("isPrototypeOf")))}},function(module,exports,__webpack_require__){"use strict";
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */module.exports=function(val){return null!=val&&"object"==typeof val&&!1===Array.isArray(val)}},function(module,exports,__webpack_require__){"use strict";var inherits=__webpack_require__(11),$=__webpack_require__(1),Input=__webpack_require__(28),Output=__webpack_require__(18),Sighash=__webpack_require__(17),Script=__webpack_require__(10),Signature=__webpack_require__(9),TransactionSignature=__webpack_require__(29);function PublicKeyInput(){Input.apply(this,arguments)}inherits(PublicKeyInput,Input),PublicKeyInput.prototype.getSignatures=function(transaction,privateKey,index,sigtype){$.checkState(this.output instanceof Output),sigtype=sigtype||Signature.SIGHASH_ALL|Signature.SIGHASH_FORKID;var publicKey=privateKey.toPublicKey();return publicKey.toString()===this.output.script.getPublicKey().toString("hex")?[new TransactionSignature({publicKey:publicKey,prevTxId:this.prevTxId,outputIndex:this.outputIndex,inputIndex:index,signature:Sighash.sign(transaction,privateKey,sigtype,index,this.output.script,this.output.satoshisBN),sigtype:sigtype})]:[]},PublicKeyInput.prototype.addSignature=function(transaction,signature){return $.checkState(this.isValidSignature(transaction,signature),"Signature is invalid"),this.setScript(Script.buildPublicKeyIn(signature.signature.toDER(),signature.sigtype)),this},PublicKeyInput.prototype.clearSignatures=function(){return this.setScript(Script.empty()),this},PublicKeyInput.prototype.isFullySigned=function(){return this.script.isPublicKeyIn()},PublicKeyInput.SCRIPT_MAX_SIZE=74,PublicKeyInput.prototype._estimateSize=function(){return Input.BASE_SIZE+PublicKeyInput.SCRIPT_MAX_SIZE},module.exports=PublicKeyInput},function(module,exports,__webpack_require__){"use strict";var inherits=__webpack_require__(11),$=__webpack_require__(1),Hash=__webpack_require__(4),Input=__webpack_require__(28),Output=__webpack_require__(18),Sighash=__webpack_require__(17),Script=__webpack_require__(10),Signature=__webpack_require__(9),TransactionSignature=__webpack_require__(29);function PublicKeyHashInput(){Input.apply(this,arguments)}inherits(PublicKeyHashInput,Input),PublicKeyHashInput.prototype.getSignatures=function(transaction,privateKey,index,sigtype,hashData){return $.checkState(this.output instanceof Output),hashData=hashData||Hash.sha256ripemd160(privateKey.publicKey.toBuffer()),sigtype=sigtype||Signature.SIGHASH_ALL|Signature.SIGHASH_FORKID,hashData.equals(this.output.script.getPublicKeyHash())?[new TransactionSignature({publicKey:privateKey.publicKey,prevTxId:this.prevTxId,outputIndex:this.outputIndex,inputIndex:index,signature:Sighash.sign(transaction,privateKey,sigtype,index,this.output.script,this.output.satoshisBN),sigtype:sigtype})]:[]},PublicKeyHashInput.prototype.addSignature=function(transaction,signature){return $.checkState(this.isValidSignature(transaction,signature),"Signature is invalid"),this.setScript(Script.buildPublicKeyHashIn(signature.publicKey,signature.signature.toDER(),signature.sigtype)),this},PublicKeyHashInput.prototype.clearSignatures=function(){return this.setScript(Script.empty()),this},PublicKeyHashInput.prototype.isFullySigned=function(){return this.script.isPublicKeyHashIn()},PublicKeyHashInput.SCRIPT_MAX_SIZE=108,PublicKeyHashInput.prototype._estimateSize=function(){return Input.BASE_SIZE+PublicKeyHashInput.SCRIPT_MAX_SIZE},module.exports=PublicKeyHashInput},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(0),inherits=__webpack_require__(11),Input=__webpack_require__(28),Output=__webpack_require__(18),$=__webpack_require__(1),Script=__webpack_require__(10),Signature=__webpack_require__(9),Sighash=__webpack_require__(17),TransactionSignature=__webpack_require__(29),PublicKey=__webpack_require__(13),Varint=__webpack_require__(27);function MultiSigInput(input,pubkeys,threshold,signatures){Input.apply(this,arguments);var self=this;pubkeys=pubkeys||input.publicKeys,threshold=threshold||input.threshold,signatures=signatures||input.signatures,this.publicKeys=pubkeys.map(k=>k.toString("hex")).sort().map(k=>new PublicKey(k)),$.checkState(Script.buildMultisigOut(this.publicKeys,threshold).equals(this.output.script),"Provided public keys don't match to the provided output script"),this.publicKeyIndex={},_.each(this.publicKeys,(function(publicKey,index){self.publicKeyIndex[publicKey.toString()]=index})),this.threshold=threshold,this.signatures=signatures?this._deserializeSignatures(signatures):new Array(this.publicKeys.length)}inherits(MultiSigInput,Input),MultiSigInput.prototype.toObject=function(){var obj=Input.prototype.toObject.apply(this,arguments);return obj.threshold=this.threshold,obj.publicKeys=_.map(this.publicKeys,(function(publicKey){return publicKey.toString()})),obj.signatures=this._serializeSignatures(),obj},MultiSigInput.prototype._deserializeSignatures=function(signatures){return _.map(signatures,(function(signature){if(signature)return new TransactionSignature(signature)}))},MultiSigInput.prototype._serializeSignatures=function(){return _.map(this.signatures,(function(signature){if(signature)return signature.toObject()}))},MultiSigInput.prototype.getSignatures=function(transaction,privateKey,index,sigtype){$.checkState(this.output instanceof Output),sigtype=sigtype||Signature.SIGHASH_ALL|Signature.SIGHASH_FORKID;var self=this,results=[];return _.each(this.publicKeys,(function(publicKey){publicKey.toString()===privateKey.publicKey.toString()&&results.push(new TransactionSignature({publicKey:privateKey.publicKey,prevTxId:self.prevTxId,outputIndex:self.outputIndex,inputIndex:index,signature:Sighash.sign(transaction,privateKey,sigtype,index,self.output.script,self.output.satoshisBN),sigtype:sigtype}))})),results},MultiSigInput.prototype.addSignature=function(transaction,signature){return $.checkState(!this.isFullySigned(),"All needed signatures have already been added"),$.checkArgument(!_.isUndefined(this.publicKeyIndex[signature.publicKey.toString()]),"Signature has no matching public key"),$.checkState(this.isValidSignature(transaction,signature)),this.signatures[this.publicKeyIndex[signature.publicKey.toString()]]=signature,this._updateScript(),this},MultiSigInput.prototype._updateScript=function(){return this.setScript(Script.buildMultisigIn(this.publicKeys,this.threshold,this._createSignatures())),this},MultiSigInput.prototype._createSignatures=function(){return _.map(_.filter(this.signatures,(function(signature){return!_.isUndefined(signature)})),(function(signature){return Buffer.concat([signature.signature.toDER(),Buffer.from([255&signature.sigtype])])}))},MultiSigInput.prototype.clearSignatures=function(){this.signatures=new Array(this.publicKeys.length),this._updateScript()},MultiSigInput.prototype.isFullySigned=function(){return this.countSignatures()===this.threshold},MultiSigInput.prototype.countMissingSignatures=function(){return this.threshold-this.countSignatures()},MultiSigInput.prototype.countSignatures=function(){return _.reduce(this.signatures,(function(sum,signature){return sum+!!signature}),0)},MultiSigInput.prototype.publicKeysWithoutSignature=function(){var self=this;return _.filter(this.publicKeys,(function(publicKey){return!self.signatures[self.publicKeyIndex[publicKey.toString()]]}))},MultiSigInput.prototype.isValidSignature=function(transaction,signature){return signature.signature.nhashtype=signature.sigtype,Sighash.verify(transaction,signature.signature,signature.publicKey,signature.inputIndex,this.output.script,this.output.satoshisBN)},MultiSigInput.normalizeSignatures=function(transaction,input,inputIndex,signatures,publicKeys){return publicKeys.map((function(pubKey){var signatureMatch=null;return signatures=signatures.filter((function(signatureBuffer){if(signatureMatch)return!0;var signature=new TransactionSignature({signature:Signature.fromTxFormat(signatureBuffer),publicKey:pubKey,prevTxId:input.prevTxId,outputIndex:input.outputIndex,inputIndex:inputIndex,sigtype:Signature.SIGHASH_ALL});return signature.signature.nhashtype=signature.sigtype,!Sighash.verify(transaction,signature.signature,signature.publicKey,signature.inputIndex,input.output.script)||(signatureMatch=signature,!1)})),signatureMatch||null}))},MultiSigInput.SIGNATURE_SIZE=73,MultiSigInput.prototype._estimateSize=function(){var scriptSize=1+this.threshold*MultiSigInput.SIGNATURE_SIZE;return Input.BASE_SIZE+Varint(scriptSize).toBuffer().length+scriptSize},module.exports=MultiSigInput},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(0),inherits=__webpack_require__(11),Input=__webpack_require__(28),Output=__webpack_require__(18),$=__webpack_require__(1),Script=__webpack_require__(10),Signature=__webpack_require__(9),Sighash=__webpack_require__(17),TransactionSignature=__webpack_require__(29),PublicKey=__webpack_require__(13),Varint=__webpack_require__(27);function MultiSigScriptHashInput(input,pubkeys,threshold,signatures){Input.apply(this,arguments);var self=this;pubkeys=pubkeys||input.publicKeys,threshold=threshold||input.threshold,signatures=signatures||input.signatures,this.publicKeys=pubkeys.map(k=>k.toString("hex")).sort().map(k=>new PublicKey(k)),this.redeemScript=Script.buildMultisigOut(this.publicKeys,threshold),$.checkState(Script.buildScriptHashOut(this.redeemScript).equals(this.output.script),"Provided public keys don't hash to the provided output"),this.publicKeyIndex={},_.each(this.publicKeys,(function(publicKey,index){self.publicKeyIndex[publicKey.toString()]=index})),this.threshold=threshold,this.signatures=signatures?this._deserializeSignatures(signatures):new Array(this.publicKeys.length)}inherits(MultiSigScriptHashInput,Input),MultiSigScriptHashInput.prototype.toObject=function(){var obj=Input.prototype.toObject.apply(this,arguments);return obj.threshold=this.threshold,obj.publicKeys=_.map(this.publicKeys,(function(publicKey){return publicKey.toString()})),obj.signatures=this._serializeSignatures(),obj},MultiSigScriptHashInput.prototype._deserializeSignatures=function(signatures){return _.map(signatures,(function(signature){if(signature)return new TransactionSignature(signature)}))},MultiSigScriptHashInput.prototype._serializeSignatures=function(){return _.map(this.signatures,(function(signature){if(signature)return signature.toObject()}))},MultiSigScriptHashInput.prototype.getSignatures=function(transaction,privateKey,index,sigtype){$.checkState(this.output instanceof Output),sigtype=sigtype||Signature.SIGHASH_ALL|Signature.SIGHASH_FORKID;var self=this,results=[];return _.each(this.publicKeys,(function(publicKey){publicKey.toString()===privateKey.publicKey.toString()&&results.push(new TransactionSignature({publicKey:privateKey.publicKey,prevTxId:self.prevTxId,outputIndex:self.outputIndex,inputIndex:index,signature:Sighash.sign(transaction,privateKey,sigtype,index,self.redeemScript,self.output.satoshisBN),sigtype:sigtype}))})),results},MultiSigScriptHashInput.prototype.addSignature=function(transaction,signature){return $.checkState(!this.isFullySigned(),"All needed signatures have already been added"),$.checkArgument(!_.isUndefined(this.publicKeyIndex[signature.publicKey.toString()]),"Signature has no matching public key"),$.checkState(this.isValidSignature(transaction,signature)),this.signatures[this.publicKeyIndex[signature.publicKey.toString()]]=signature,this._updateScript(),this},MultiSigScriptHashInput.prototype._updateScript=function(){return this.setScript(Script.buildP2SHMultisigIn(this.publicKeys,this.threshold,this._createSignatures(),{cachedMultisig:this.redeemScript})),this},MultiSigScriptHashInput.prototype._createSignatures=function(){return _.map(_.filter(this.signatures,(function(signature){return!_.isUndefined(signature)})),(function(signature){return Buffer.concat([signature.signature.toDER(),Buffer.from([255&signature.sigtype])])}))},MultiSigScriptHashInput.prototype.clearSignatures=function(){this.signatures=new Array(this.publicKeys.length),this._updateScript()},MultiSigScriptHashInput.prototype.isFullySigned=function(){return this.countSignatures()===this.threshold},MultiSigScriptHashInput.prototype.countMissingSignatures=function(){return this.threshold-this.countSignatures()},MultiSigScriptHashInput.prototype.countSignatures=function(){return _.reduce(this.signatures,(function(sum,signature){return sum+!!signature}),0)},MultiSigScriptHashInput.prototype.publicKeysWithoutSignature=function(){var self=this;return _.filter(this.publicKeys,(function(publicKey){return!self.signatures[self.publicKeyIndex[publicKey.toString()]]}))},MultiSigScriptHashInput.prototype.isValidSignature=function(transaction,signature){return signature.signature.nhashtype=signature.sigtype,Sighash.verify(transaction,signature.signature,signature.publicKey,signature.inputIndex,this.redeemScript,this.output.satoshisBN)},MultiSigScriptHashInput.SIGNATURE_SIZE=73,MultiSigScriptHashInput.PUBKEY_SIZE=34,MultiSigScriptHashInput.prototype._estimateSize=function(){var redeemScriptSize=3+this.publicKeys.length*MultiSigScriptHashInput.PUBKEY_SIZE,scriptLength=this.threshold*MultiSigScriptHashInput.SIGNATURE_SIZE+1+(redeemScriptSize<=75?1:redeemScriptSize<=255?2:3)+redeemScriptSize;return Input.BASE_SIZE+Varint(scriptLength).toBuffer().length+scriptLength},module.exports=MultiSigScriptHashInput},function(module,exports,__webpack_require__){module.exports=__webpack_require__(120),module.exports.BlockHeader=__webpack_require__(36),module.exports.MerkleBlock=__webpack_require__(65)},function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(0),BlockHeader=__webpack_require__(36),BN=__webpack_require__(2),BufferReader=__webpack_require__(16),BufferWriter=__webpack_require__(14),Hash=__webpack_require__(4),Transaction=__webpack_require__(34),$=__webpack_require__(1);function Block(arg){return this instanceof Block?(_.extend(this,Block._from(arg)),this):new Block(arg)}Block.MAX_BLOCK_SIZE=128e6,Block._from=function(arg){var info={};if(Buffer.isBuffer(arg))info=Block._fromBufferReader(BufferReader(arg));else{if(!_.isObject(arg))throw new TypeError("Unrecognized argument for Block");info=Block._fromObject(arg)}return info},Block._fromObject=function(data){var transactions=[];return data.transactions.forEach((function(tx){tx instanceof Transaction?transactions.push(tx):transactions.push(Transaction().fromObject(tx))})),{header:BlockHeader.fromObject(data.header),transactions:transactions}},Block.fromObject=function(obj){var info=Block._fromObject(obj);return new Block(info)},Block._fromBufferReader=function(br){var info={};$.checkState(!br.finished(),"No block data received"),info.header=BlockHeader.fromBufferReader(br);var transactions=br.readVarintNum();info.transactions=[];for(var i=0;i<transactions;i++)info.transactions.push(Transaction().fromBufferReader(br));return info},Block.fromBufferReader=function(br){$.checkArgument(br,"br is required");var info=Block._fromBufferReader(br);return new Block(info)},Block.fromBuffer=function(buf){return Block.fromBufferReader(new BufferReader(buf))},Block.fromString=function(str){var buf=Buffer.from(str,"hex");return Block.fromBuffer(buf)},Block.fromRawBlock=function(data){Buffer.isBuffer(data)||(data=Buffer.from(data,"binary"));var br=BufferReader(data);br.pos=Block.Values.START_OF_BLOCK;var info=Block._fromBufferReader(br);return new Block(info)},Block.prototype.toObject=Block.prototype.toJSON=function(){var transactions=[];return this.transactions.forEach((function(tx){transactions.push(tx.toObject())})),{header:this.header.toObject(),transactions:transactions}},Block.prototype.toBuffer=function(){return this.toBufferWriter().concat()},Block.prototype.toString=function(){return this.toBuffer().toString("hex")},Block.prototype.toBufferWriter=function(bw){bw||(bw=new BufferWriter),bw.write(this.header.toBuffer()),bw.writeVarintNum(this.transactions.length);for(var i=0;i<this.transactions.length;i++)this.transactions[i].toBufferWriter(bw);return bw},Block.prototype.getTransactionHashes=function(){var hashes=[];if(0===this.transactions.length)return[Block.Values.NULL_HASH];for(var t=0;t<this.transactions.length;t++)hashes.push(this.transactions[t]._getHash());return hashes},Block.prototype.getMerkleTree=function(){for(var tree=this.getTransactionHashes(),j=0,size=this.transactions.length;size>1;size=Math.floor((size+1)/2)){for(var i=0;i<size;i+=2){var i2=Math.min(i+1,size-1),buf=Buffer.concat([tree[j+i],tree[j+i2]]);tree.push(Hash.sha256sha256(buf))}j+=size}return tree},Block.prototype.getMerkleRoot=function(){var tree=this.getMerkleTree();return tree[tree.length-1]},Block.prototype.validMerkleRoot=function(){var h=new BN(this.header.merkleRoot.toString("hex"),"hex"),c=new BN(this.getMerkleRoot().toString("hex"),"hex");return 0===h.cmp(c)},Block.prototype._getHash=function(){return this.header._getHash()};var idProperty={configurable:!1,enumerable:!0,get:function(){return this._id||(this._id=this.header.id),this._id},set:_.noop};Object.defineProperty(Block.prototype,"id",idProperty),Object.defineProperty(Block.prototype,"hash",idProperty),Block.prototype.inspect=function(){return"<Block "+this.id+">"},Block.Values={START_OF_BLOCK:8,NULL_HASH:Buffer.from("0000000000000000000000000000000000000000000000000000000000000000","hex")},module.exports=Block},function(module,exports,__webpack_require__){var QRCode=__webpack_require__(122),QRErrorCorrectLevel=__webpack_require__(71),white="[47m  [0m",toCell=function(isBlack){return isBlack?"[40m  [0m":white},repeat=function(color){return{times:function(count){return new Array(count).join(color)}}};module.exports={error:QRErrorCorrectLevel.L,generate:function(input,opts,cb){"function"==typeof opts&&(cb=opts,opts={});var qrcode=new QRCode(-1,this.error);qrcode.addData(input),qrcode.make();var output="";if(opts&&opts.small){var moduleCount=qrcode.getModuleCount(),moduleData=qrcode.modules.slice(),oddRow=moduleCount%2==1;oddRow&&moduleData.push(function(length,value){for(var arr=new Array(length),i=0;i<length;i++)arr[i]=value;return arr}(moduleCount,!1));var platte={WHITE_ALL:"█",WHITE_BLACK:"▀",BLACK_WHITE:"▄",BLACK_ALL:" "},borderTop=repeat(platte.BLACK_WHITE).times(moduleCount+3),borderBottom=repeat(platte.WHITE_BLACK).times(moduleCount+3);output+=borderTop+"\n";for(var row=0;row<moduleCount;row+=2){output+=platte.WHITE_ALL;for(var col=0;col<moduleCount;col++)!1===moduleData[row][col]&&!1===moduleData[row+1][col]?output+=platte.WHITE_ALL:!1===moduleData[row][col]&&!0===moduleData[row+1][col]?output+=platte.WHITE_BLACK:!0===moduleData[row][col]&&!1===moduleData[row+1][col]?output+=platte.BLACK_WHITE:output+=platte.BLACK_ALL;output+=platte.WHITE_ALL+"\n"}oddRow||(output+=borderBottom)}else{var border=repeat(white).times(qrcode.getModuleCount()+3);output+=border+"\n",qrcode.modules.forEach((function(row){output+=white,output+=row.map(toCell).join(""),output+=white+"\n"})),output+=border}cb?cb(output):console.log(output)},setErrorLevel:function(error){this.error=QRErrorCorrectLevel[error]||this.error}}},function(module,exports,__webpack_require__){var QR8bitByte=__webpack_require__(123),QRUtil=__webpack_require__(124),QRPolynomial=__webpack_require__(69),QRRSBlock=__webpack_require__(126),QRBitBuffer=__webpack_require__(127);function QRCode(typeNumber,errorCorrectLevel){this.typeNumber=typeNumber,this.errorCorrectLevel=errorCorrectLevel,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}QRCode.prototype={addData:function(data){var newData=new QR8bitByte(data);this.dataList.push(newData),this.dataCache=null},isDark:function(row,col){if(row<0||this.moduleCount<=row||col<0||this.moduleCount<=col)throw new Error(row+","+col);return this.modules[row][col]},getModuleCount:function(){return this.moduleCount},make:function(){if(this.typeNumber<1){var typeNumber=1;for(typeNumber=1;typeNumber<40;typeNumber++){for(var rsBlocks=QRRSBlock.getRSBlocks(typeNumber,this.errorCorrectLevel),buffer=new QRBitBuffer,totalDataCount=0,i=0;i<rsBlocks.length;i++)totalDataCount+=rsBlocks[i].dataCount;for(var x=0;x<this.dataList.length;x++){var data=this.dataList[x];buffer.put(data.mode,4),buffer.put(data.getLength(),QRUtil.getLengthInBits(data.mode,typeNumber)),data.write(buffer)}if(buffer.getLengthInBits()<=8*totalDataCount)break}this.typeNumber=typeNumber}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(test,maskPattern){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var row=0;row<this.moduleCount;row++){this.modules[row]=new Array(this.moduleCount);for(var col=0;col<this.moduleCount;col++)this.modules[row][col]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(test,maskPattern),this.typeNumber>=7&&this.setupTypeNumber(test),null===this.dataCache&&(this.dataCache=QRCode.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,maskPattern)},setupPositionProbePattern:function(row,col){for(var r=-1;r<=7;r++)if(!(row+r<=-1||this.moduleCount<=row+r))for(var c=-1;c<=7;c++)col+c<=-1||this.moduleCount<=col+c||(this.modules[row+r][col+c]=0<=r&&r<=6&&(0===c||6===c)||0<=c&&c<=6&&(0===r||6===r)||2<=r&&r<=4&&2<=c&&c<=4)},getBestMaskPattern:function(){for(var minLostPoint=0,pattern=0,i=0;i<8;i++){this.makeImpl(!0,i);var lostPoint=QRUtil.getLostPoint(this);(0===i||minLostPoint>lostPoint)&&(minLostPoint=lostPoint,pattern=i)}return pattern},createMovieClip:function(target_mc,instance_name,depth){var qr_mc=target_mc.createEmptyMovieClip(instance_name,depth);this.make();for(var row=0;row<this.modules.length;row++)for(var y=1*row,col=0;col<this.modules[row].length;col++){var x=1*col;this.modules[row][col]&&(qr_mc.beginFill(0,100),qr_mc.moveTo(x,y),qr_mc.lineTo(x+1,y),qr_mc.lineTo(x+1,y+1),qr_mc.lineTo(x,y+1),qr_mc.endFill())}return qr_mc},setupTimingPattern:function(){for(var r=8;r<this.moduleCount-8;r++)null===this.modules[r][6]&&(this.modules[r][6]=r%2==0);for(var c=8;c<this.moduleCount-8;c++)null===this.modules[6][c]&&(this.modules[6][c]=c%2==0)},setupPositionAdjustPattern:function(){for(var pos=QRUtil.getPatternPosition(this.typeNumber),i=0;i<pos.length;i++)for(var j=0;j<pos.length;j++){var row=pos[i],col=pos[j];if(null===this.modules[row][col])for(var r=-2;r<=2;r++)for(var c=-2;c<=2;c++)2===Math.abs(r)||2===Math.abs(c)||0===r&&0===c?this.modules[row+r][col+c]=!0:this.modules[row+r][col+c]=!1}},setupTypeNumber:function(test){for(var mod,bits=QRUtil.getBCHTypeNumber(this.typeNumber),i=0;i<18;i++)mod=!test&&1==(bits>>i&1),this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=mod;for(var x=0;x<18;x++)mod=!test&&1==(bits>>x&1),this.modules[x%3+this.moduleCount-8-3][Math.floor(x/3)]=mod},setupTypeInfo:function(test,maskPattern){for(var mod,data=this.errorCorrectLevel<<3|maskPattern,bits=QRUtil.getBCHTypeInfo(data),v=0;v<15;v++)mod=!test&&1==(bits>>v&1),v<6?this.modules[v][8]=mod:v<8?this.modules[v+1][8]=mod:this.modules[this.moduleCount-15+v][8]=mod;for(var h=0;h<15;h++)mod=!test&&1==(bits>>h&1),h<8?this.modules[8][this.moduleCount-h-1]=mod:h<9?this.modules[8][15-h-1+1]=mod:this.modules[8][15-h-1]=mod;this.modules[this.moduleCount-8][8]=!test},mapData:function(data,maskPattern){for(var inc=-1,row=this.moduleCount-1,bitIndex=7,byteIndex=0,col=this.moduleCount-1;col>0;col-=2)for(6===col&&col--;;){for(var c=0;c<2;c++)if(null===this.modules[row][col-c]){var dark=!1;byteIndex<data.length&&(dark=1==(data[byteIndex]>>>bitIndex&1)),QRUtil.getMask(maskPattern,row,col-c)&&(dark=!dark),this.modules[row][col-c]=dark,-1===--bitIndex&&(byteIndex++,bitIndex=7)}if((row+=inc)<0||this.moduleCount<=row){row-=inc,inc=-inc;break}}}},QRCode.PAD0=236,QRCode.PAD1=17,QRCode.createData=function(typeNumber,errorCorrectLevel,dataList){for(var rsBlocks=QRRSBlock.getRSBlocks(typeNumber,errorCorrectLevel),buffer=new QRBitBuffer,i=0;i<dataList.length;i++){var data=dataList[i];buffer.put(data.mode,4),buffer.put(data.getLength(),QRUtil.getLengthInBits(data.mode,typeNumber)),data.write(buffer)}for(var totalDataCount=0,x=0;x<rsBlocks.length;x++)totalDataCount+=rsBlocks[x].dataCount;if(buffer.getLengthInBits()>8*totalDataCount)throw new Error("code length overflow. ("+buffer.getLengthInBits()+">"+8*totalDataCount+")");for(buffer.getLengthInBits()+4<=8*totalDataCount&&buffer.put(0,4);buffer.getLengthInBits()%8!=0;)buffer.putBit(!1);for(;!(buffer.getLengthInBits()>=8*totalDataCount||(buffer.put(QRCode.PAD0,8),buffer.getLengthInBits()>=8*totalDataCount));)buffer.put(QRCode.PAD1,8);return QRCode.createBytes(buffer,rsBlocks)},QRCode.createBytes=function(buffer,rsBlocks){for(var offset=0,maxDcCount=0,maxEcCount=0,dcdata=new Array(rsBlocks.length),ecdata=new Array(rsBlocks.length),r=0;r<rsBlocks.length;r++){var dcCount=rsBlocks[r].dataCount,ecCount=rsBlocks[r].totalCount-dcCount;maxDcCount=Math.max(maxDcCount,dcCount),maxEcCount=Math.max(maxEcCount,ecCount),dcdata[r]=new Array(dcCount);for(var i=0;i<dcdata[r].length;i++)dcdata[r][i]=255&buffer.buffer[i+offset];offset+=dcCount;var rsPoly=QRUtil.getErrorCorrectPolynomial(ecCount),modPoly=new QRPolynomial(dcdata[r],rsPoly.getLength()-1).mod(rsPoly);ecdata[r]=new Array(rsPoly.getLength()-1);for(var x=0;x<ecdata[r].length;x++){var modIndex=x+modPoly.getLength()-ecdata[r].length;ecdata[r][x]=modIndex>=0?modPoly.get(modIndex):0}}for(var totalCodeCount=0,y=0;y<rsBlocks.length;y++)totalCodeCount+=rsBlocks[y].totalCount;for(var data=new Array(totalCodeCount),index=0,z=0;z<maxDcCount;z++)for(var s=0;s<rsBlocks.length;s++)z<dcdata[s].length&&(data[index++]=dcdata[s][z]);for(var xx=0;xx<maxEcCount;xx++)for(var t=0;t<rsBlocks.length;t++)xx<ecdata[t].length&&(data[index++]=ecdata[t][xx]);return data},module.exports=QRCode},function(module,exports,__webpack_require__){var QRMode=__webpack_require__(68);function QR8bitByte(data){this.mode=QRMode.MODE_8BIT_BYTE,this.data=data}QR8bitByte.prototype={getLength:function(){return this.data.length},write:function(buffer){for(var i=0;i<this.data.length;i++)buffer.put(this.data.charCodeAt(i),8)}},module.exports=QR8bitByte},function(module,exports,__webpack_require__){var QRMode=__webpack_require__(68),QRPolynomial=__webpack_require__(69),QRMath=__webpack_require__(70),QRMaskPattern=__webpack_require__(125),QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(data){for(var d=data<<10;QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15)>=0;)d^=QRUtil.G15<<QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15);return(data<<10|d)^QRUtil.G15_MASK},getBCHTypeNumber:function(data){for(var d=data<<12;QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18)>=0;)d^=QRUtil.G18<<QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18);return data<<12|d},getBCHDigit:function(data){for(var digit=0;0!==data;)digit++,data>>>=1;return digit},getPatternPosition:function(typeNumber){return QRUtil.PATTERN_POSITION_TABLE[typeNumber-1]},getMask:function(maskPattern,i,j){switch(maskPattern){case QRMaskPattern.PATTERN000:return(i+j)%2==0;case QRMaskPattern.PATTERN001:return i%2==0;case QRMaskPattern.PATTERN010:return j%3==0;case QRMaskPattern.PATTERN011:return(i+j)%3==0;case QRMaskPattern.PATTERN100:return(Math.floor(i/2)+Math.floor(j/3))%2==0;case QRMaskPattern.PATTERN101:return i*j%2+i*j%3==0;case QRMaskPattern.PATTERN110:return(i*j%2+i*j%3)%2==0;case QRMaskPattern.PATTERN111:return(i*j%3+(i+j)%2)%2==0;default:throw new Error("bad maskPattern:"+maskPattern)}},getErrorCorrectPolynomial:function(errorCorrectLength){for(var a=new QRPolynomial([1],0),i=0;i<errorCorrectLength;i++)a=a.multiply(new QRPolynomial([1,QRMath.gexp(i)],0));return a},getLengthInBits:function(mode,type){if(1<=type&&type<10)switch(mode){case QRMode.MODE_NUMBER:return 10;case QRMode.MODE_ALPHA_NUM:return 9;case QRMode.MODE_8BIT_BYTE:case QRMode.MODE_KANJI:return 8;default:throw new Error("mode:"+mode)}else if(type<27)switch(mode){case QRMode.MODE_NUMBER:return 12;case QRMode.MODE_ALPHA_NUM:return 11;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 10;default:throw new Error("mode:"+mode)}else{if(!(type<41))throw new Error("type:"+type);switch(mode){case QRMode.MODE_NUMBER:return 14;case QRMode.MODE_ALPHA_NUM:return 13;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 12;default:throw new Error("mode:"+mode)}}},getLostPoint:function(qrCode){var moduleCount=qrCode.getModuleCount(),lostPoint=0,row=0,col=0;for(row=0;row<moduleCount;row++)for(col=0;col<moduleCount;col++){for(var sameCount=0,dark=qrCode.isDark(row,col),r=-1;r<=1;r++)if(!(row+r<0||moduleCount<=row+r))for(var c=-1;c<=1;c++)col+c<0||moduleCount<=col+c||0===r&&0===c||dark===qrCode.isDark(row+r,col+c)&&sameCount++;sameCount>5&&(lostPoint+=3+sameCount-5)}for(row=0;row<moduleCount-1;row++)for(col=0;col<moduleCount-1;col++){var count=0;qrCode.isDark(row,col)&&count++,qrCode.isDark(row+1,col)&&count++,qrCode.isDark(row,col+1)&&count++,qrCode.isDark(row+1,col+1)&&count++,0!==count&&4!==count||(lostPoint+=3)}for(row=0;row<moduleCount;row++)for(col=0;col<moduleCount-6;col++)qrCode.isDark(row,col)&&!qrCode.isDark(row,col+1)&&qrCode.isDark(row,col+2)&&qrCode.isDark(row,col+3)&&qrCode.isDark(row,col+4)&&!qrCode.isDark(row,col+5)&&qrCode.isDark(row,col+6)&&(lostPoint+=40);for(col=0;col<moduleCount;col++)for(row=0;row<moduleCount-6;row++)qrCode.isDark(row,col)&&!qrCode.isDark(row+1,col)&&qrCode.isDark(row+2,col)&&qrCode.isDark(row+3,col)&&qrCode.isDark(row+4,col)&&!qrCode.isDark(row+5,col)&&qrCode.isDark(row+6,col)&&(lostPoint+=40);var darkCount=0;for(col=0;col<moduleCount;col++)for(row=0;row<moduleCount;row++)qrCode.isDark(row,col)&&darkCount++;return lostPoint+=10*(Math.abs(100*darkCount/moduleCount/moduleCount-50)/5)}};module.exports=QRUtil},function(module,exports){module.exports={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7}},function(module,exports,__webpack_require__){var QRErrorCorrectLevel=__webpack_require__(71);function QRRSBlock(totalCount,dataCount){this.totalCount=totalCount,this.dataCount=dataCount}QRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],QRRSBlock.getRSBlocks=function(typeNumber,errorCorrectLevel){var rsBlock=QRRSBlock.getRsBlockTable(typeNumber,errorCorrectLevel);if(void 0===rsBlock)throw new Error("bad rs block @ typeNumber:"+typeNumber+"/errorCorrectLevel:"+errorCorrectLevel);for(var length=rsBlock.length/3,list=[],i=0;i<length;i++)for(var count=rsBlock[3*i+0],totalCount=rsBlock[3*i+1],dataCount=rsBlock[3*i+2],j=0;j<count;j++)list.push(new QRRSBlock(totalCount,dataCount));return list},QRRSBlock.getRsBlockTable=function(typeNumber,errorCorrectLevel){switch(errorCorrectLevel){case QRErrorCorrectLevel.L:return QRRSBlock.RS_BLOCK_TABLE[4*(typeNumber-1)+0];case QRErrorCorrectLevel.M:return QRRSBlock.RS_BLOCK_TABLE[4*(typeNumber-1)+1];case QRErrorCorrectLevel.Q:return QRRSBlock.RS_BLOCK_TABLE[4*(typeNumber-1)+2];case QRErrorCorrectLevel.H:return QRRSBlock.RS_BLOCK_TABLE[4*(typeNumber-1)+3];default:return}},module.exports=QRRSBlock},function(module,exports){function QRBitBuffer(){this.buffer=[],this.length=0}QRBitBuffer.prototype={get:function(index){var bufIndex=Math.floor(index/8);return 1==(this.buffer[bufIndex]>>>7-index%8&1)},put:function(num,length){for(var i=0;i<length;i++)this.putBit(1==(num>>>length-i-1&1))},getLengthInBits:function(){return this.length},putBit:function(bit){var bufIndex=Math.floor(this.length/8);this.buffer.length<=bufIndex&&this.buffer.push(0),bit&&(this.buffer[bufIndex]|=128>>>this.length%8),this.length++}},module.exports=QRBitBuffer},function(module,exports,__webpack_require__){module.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"u",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.u)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.u?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=59)}([function(t,e,n){const{InternalError:InternalError,TimeoutError:TimeoutError}=n(10),r=n(47),{g:o}=n(7),i=new WeakSet,s=new WeakSet,c=new WeakSet,a=["toString","upgrade","sync","destroy","auth","load","init"],h=["sync","interactive"],u=["interactive"],f=[...a,"deps"],l=[...h,"init"],d=[...u,"init"];function p(){const t=n(48);if(!t._)throw new Error("Run instance not active");return t._}function w(t){return o(()=>{switch(typeof t){case"string":return`"${t.length>20?t.slice(0,20)+"…":t}"`;case"object":{if(!t)return"null";if(!t.constructor.name)return"[anonymous object]";const Jig=n(5),Berry=n(12);return`[${t instanceof Jig?"jig":t instanceof Berry?"berry":"object"} ${t.constructor.name}]`}case"function":{let e=null;const Code=n(1);return e=t instanceof Code?Code.prototype.toString.apply(t):"function"!=typeof t.toString||t.toString.toString().startsWith("class")?Function.prototype.toString.apply(t):t.toString(),/^\(/.test(e)||/^function\s*\(/.test(e)||/^[a-zA-Z0-9_$]+\s*=>/.test(e)?"[anonymous function]":/^class\s*{/.test(e)?"[anonymous class]":t.name}case"undefined":return"undefined";default:return t.toString()}})}function y(t){return"object"==typeof t&&!!t&&2===x(t)}function b(t){return Array.isArray(t)&&3===x(t)}function g(t){const e=n(8),r=e.P;return(t instanceof e.$.Set||t instanceof r.Set)&&3===x(t)}function _(t){const e=n(8),r=e.P;return(t instanceof e.$.Map||t instanceof r.Map)&&3===x(t)}function m(t){const e=n(8),r=e.P;return(t instanceof e.$.Uint8Array||t instanceof r.Uint8Array)&&4===x(t)}function E(t){if("object"!=typeof t||!t)return!1;const Code=n(1);return t.constructor instanceof Code&&(!(t instanceof n(5))&&!(t instanceof n(12)))}function P(t){const e=n(8);return!!e.O.has(t)||!!e.S.has(t)}function $(t){return void 0===t||("boolean"==typeof t||("number"==typeof t||("string"==typeof t||(null===t||!P(t)&&(!!y(t)||(!!b(t)||(!!g(t)||(!!_(t)||(!!m(t)||(!!E(t)||t instanceof n(3)))))))))))}const O=/^class\s*{/,v=/^class\s+(extends)?\s+\S+\s*{/,S=/^function\s*\(/;function x(t){if(!t)return 0;let e=0;do{e++,t=Object.getPrototypeOf(t)}while(t);return e}function A(t,e="limit"){if(null===t)return Number.MAX_VALUE;if(-1===t)return Number.MAX_VALUE;if(t===1/0)return Number.MAX_VALUE;if("number"!=typeof t||t<0)throw new Error(`Invalid ${e}: ${w(t)}`);return t}const I=r(R);function R(t,e){if(typeof t!=typeof e)return"symbol"==typeof t?1:-1;"symbol"==typeof t&&(t=t.toString()),"symbol"==typeof e&&(e=e.toString());const n=parseInt(t),r=parseInt(e),o=n.toString()===t,i=r.toString()===e;return o&&!i?-1:i&&!o?1:o&&i?n-r:t<e?-1:e<t?1:0}function j(t,e,n){return n&&"string"==typeof e&&m(t)&&n.writable&&n.enumerable&&n.configurable?(Reflect.set(t,e,n.value),t):Reflect.defineProperty(t,e,n)}t.exports={A:i,I:s,R:c,j:["encryption","blockhash","blocktime","blockheight","latest","recent","mustBeLatest","mustBeRecent","checkForUpdates","recover","replicate","makeBackup","restricts","delegate","consume","eject","armored","armoured"],C:a,k:h,N:u,U:f,D:l,M:d,F:p,B:function(t,e){if(!t)throw new InternalError(e||"assert failed")},L:function(t){return t.startsWith("main")?"mainnet":"testnet"},G:function(t){if("function"!=typeof t)return;const e=n(8),Code=n(1),r=e.P.Object,o=e.$.Object,i=Object.getPrototypeOf(t);return i!==o.getPrototypeOf(o)&&i!==r.getPrototypeOf(r)&&i!==Code.prototype?i:void 0},J:function(t){const e=t.match(/^\s*class\s+[a-zA-Z0-9_$]+\s+extends\s+([a-zA-Z0-9_$]+)\s*{/);return e&&e[1]},W:function(t,B){for(;t;)if((t=Object.getPrototypeOf(t))===B)return!0;return!1},Y:w,V:y,K:b,H:g,q:_,Z:m,X:E,tt:function(t){return void 0!==t},et:function(t){return 0===t&&1/t==-1/0},nt:P,rt:function(t){const{ot:e}=n(14);let r=!0;try{o(()=>e(t,t=>{r=r&&$(t)}))}catch(t){}return r},it:$,st:function(t){if("function"!=typeof t)return!1;if(!t.name)return!0;const e=t.toString();return!e.startsWith("class")&&!e.startsWith("function")||O.test(e)||v.test(e)||S.test(e)},ct:x,at:function(t,e){if(!t||"function"!=typeof t&&"object"!=typeof t)return;const n=Object.getOwnPropertyDescriptor(t,e);return n&&n.value},ht:function(t,e){return!(!t||"function"!=typeof t&&"object"!=typeof t)&&("string"==typeof e?Object.getOwnPropertyNames(t).includes(e):"symbol"==typeof e?Object.getOwnPropertySymbols(t).includes(e):void 0)},ut:function(t,e,n){let r=Object.getOwnPropertyDescriptor(t,e);(!r||r.get||r.set)&&(r={configurable:!0,enumerable:!0,writable:!0}),r.value=n,j(t,e,r)},ft:function(t,e,n){Object.defineProperty(t,e,{get:n,configurable:!0,enumerable:!0})},lt:function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t)).filter(e=>Object.getOwnPropertyDescriptor(t,e).get)},dt:function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t)).filter(t=>"constructor"!==t).filter(e=>"function"==typeof Object.getOwnPropertyDescriptor(t,e).value)},wt:A,yt:class{constructor(t,e=p().bt){this.gt=new Date,this._t=t,this.bt=e}Et(){if(new Date-this.gt>A(this.bt,"timeout"))throw new TimeoutError(this._t+" timeout")}},Pt:I,$t:function(t){return Object.keys(t).sort(R)},Ot:R,vt:j,St:function(){return process&&process.version},xt:function(){return"undefined"!=typeof window&&window.document&&window.navigator},At:function(t,e){let n=0;return t.forEach((r,o)=>{e(r,o,t)&&(t[n++]=r)}),t.length=n,t}}},function(t,e,n){class CodeDeps{static get It(){return n(18)}static get Rt(){return n(2)}static get jt(){return n(4)}static get Ct(){return n(0)}static get Tt(){return n(9)}static get g(){return n(7).g}static get kt(){return n(58)}static get Nt(){return"Code"}static get Ut(){return n(28)}}class Code{constructor(){throw new Error("Cannot instantiate Code")}toString(){const t=CodeDeps.Rt,e=CodeDeps.g,{B:n}=CodeDeps.Ct,r=t.Dt(this);if(!r)return e(()=>this.toString());const o=r.Mt,i=r.Ft;return n(i),r.Bt?i.startsWith("class")?`class ${o.name} { [native code] }`:`function ${o.name}() { [native code] }`:i}sync(t={}){const e=CodeDeps.Rt,n=CodeDeps.jt,r=CodeDeps.kt,o=CodeDeps.Nt,{Y:i}=CodeDeps.Ct,s=CodeDeps.Ut,c=CodeDeps.Tt.zt;if(n.Lt&&n.Gt(o,"Sync",i(this)),s.Jt)throw new Error("sync disabled during atomic update");if(c.Xe.length)throw new Error("sync cannot be called internally");const a=e.Dt(this);if(!a)throw new Error("sync unavailable");if(!a.Bt)return r(this,t).then(()=>this)}upgrade(t){return CodeDeps.Rt.Wt(this,t),this}auth(){const t=CodeDeps.It,e=CodeDeps.Rt,{Y:n}=CodeDeps.Ct,r=CodeDeps.Tt,o=CodeDeps.jt,i=CodeDeps.Nt;o.Lt&&o.Gt(i,"Auth",n(this));const s=e.Dt(this);if(!s)throw new Error("auth unavailable on non-jigs");if(s.Bt)throw new Error("auth unavailable on native jigs");if(r.zt.Vt.Yt(this))throw new Error("auth unavailable on new jigs");return t.Kt(this),this}destroy(){const t=CodeDeps.It,e=CodeDeps.Rt,n=CodeDeps.jt,{Y:r}=CodeDeps.Ct,o=CodeDeps.Nt;n.Lt&&n.Gt(o,"Destroy",r(this));const i=e.Dt(this);if(!i||i.Bt)throw new Error("destroy unavailable");return t.Ht(this),this}[Symbol.hasInstance](t){const e=CodeDeps.Rt,n=CodeDeps.g;if("object"!=typeof t||!t)return!1;const r=e.qt(this);return!!r&&n(()=>{let e=Object.getPrototypeOf(t);for(;e;){if(e.constructor.origin&&e.constructor.origin===r.origin)return!0;e=Object.getPrototypeOf(e)}return!1})}static[Symbol.hasInstance](t){return CodeDeps.Ct.I.has(t)}}Code.deps={CodeDeps:CodeDeps},Code.sealed=!0,Code.toString();const r=CodeDeps.Rt.Zt();CodeDeps.Rt.Dt(r).Xt(Code,!1),t.exports=r},function(t,e,n){const{Y:r,F:o,G:i,st:s,tt:c,I:a,V:h,ht:u,ut:f,B:l,W:d,j:p,C:w,k:y}=n(0),b=n(21),{Qt:g}=n(32),_=n(57),m=n(4),{te:E,ot:P}=n(14),$=n(11),{g:O}=n(7),{ee:v,ne:S,re:x,oe:A,ie:I}=$,R=n(23),j=n(8),C=n(22),{ArgumentError:ArgumentError}=n(10),T=n(27),k=j.P,N="Editor",U=new WeakMap,D={},M=new Map,F={};class L{ce(t,e){this.ae=void 0,this.Mt=e,this.he=t,this.ue=void 0,this.Ft=void 0,this.fe=!1,this.le=!1,this.de=!1,this.pe="";try{this.pe=o().we().network}catch(t){}this.Bt=void 0,this.ye=!1}be(t,e=!0,o=[],i){const Code=n(1);if(m.Lt&&m.Gt(N,"Install",r(t)),this.fe)return l(t===this.ae||t===this.he),this.ge();l(!this.Bt);const s=_._e(this.Mt);D[this.pe]=D[this.pe]||new Map,D[this.pe].delete(this.ae),e&&D[this.pe].set(t,this.he);try{this.me(t,e,o),this.Ee(),this.Pe(this.le?s:null),this.ae=t,this.ue=t.name,this.Ft=i||T.$e(this.Mt.toString(),this.ue),this.de=e,this.fe=!1,this.le=!0,this.Bt=!1,this.ye=!1,u(t,"presets")&&u(t.presets,this.pe)&&u(t.presets[this.pe],"location")&&(O(()=>P(this.he,t=>{if(t instanceof Code&&t!==this.he&&S(t.location).Oe)throw new ArgumentError(r(t)+" must have presets")})),this.ve(this.ae.presets[this.pe]))}catch(e){throw D[this.pe].delete(t),this.local&&D[this.pe].set(this.ae,this.he),_.Se(this.Mt,s),e}}xe(){if(this.Bt)throw new Error("Cannot uninstall native code");this.le&&(D[this.pe].delete(this.ae),this.le=!1),this.fe&&(M.delete(this.ae),this.fe=!1),this.ae&&(v.forEach(t=>{delete this.ae[t]}),delete this.ae.presets),u(this.ae,Symbol.hasInstance)&&delete this.ae[Symbol.hasInstance],this.ae=void 0,this.de=!1}Ae(t){if(this.fe)return;let e=!0;try{o()}catch(t){e=!1}if(e)this.be(t);else{if(m.Lt&&m.Gt(N,"Preinstall",r(t)),this.le||this.Bt)throw new Error("Cannot preinstall "+r(t));M.set(t,this.he);try{this.me(t,!0),this.ae=t,this.ue=t.name,this.Ft=T.$e(this.Mt.toString(),this.ue),this.de=!0,this.fe=!0,this.le=!1,this.Bt=!1,this.ye=!1}catch(e){throw M.delete(t),e}}}ge(){if(this.fe){m.Lt&&m.Gt(N,"Postinstall",r(this.ae)),this.pe=o().we().network;try{M.delete(this.ae),D[this.pe]=D[this.pe]||new Map,D[this.pe].set(this.ae,this.he),this.Ee(),this.Pe(),this.fe=!1,this.le=!0;const Code=n(1),t=t=>{t instanceof Code&&L.Dt(t).ge()};O(()=>P(this.he,t))}catch(t){throw M.set(this.ae,this.he),D[this.pe].delete(this.ae),this.pe="",t}}}me(t,e=!1,o=[]){const i=e?q(this.he,t,e,o)[0]:t,Jig=n(5),Berry=n(12);let s=null;if(d(t,Jig))s=R.Ie();else{const e=t.toString().startsWith("class");s=R.Re(e)}if(C.Ce(this.he).je=s,this.le&&d(this.ae,Jig)!==d(t,Jig))throw new Error("Cannot change jigs to sidekicks, or vice versa");if(this.le&&d(this.ae,Berry))throw new Error("Cannot upgrade from berry class: "+r(this.ae));if(this.le&&d(t,Berry))throw new Error("Cannot upgrade to berry class: "+r(t));Q(i,this.he),tt(t),_.Se(this.Mt,i)}Ee(){O(()=>{if(u(this.he,"presets")){const t=this.he.presets[this.pe];Object.getOwnPropertyNames(t||{}).forEach(e=>f(this.he,e,t[e])),delete this.he.presets}})}Pe(t){O(()=>{t?v.forEach(e=>f(this.he,e,t[e])):u(this.he,"location")||$.Te(this.he)})}Xt(t,e=!1){m.Lt&&m.Gt(N,"Install native",r(t)),l(void 0===this.Bt),l(!i(t)),l(!(t.name in F));const[n,o]=j.ke(t,{},!0,!1);Object.assign(o,t.deps);const s=t.sealed,a=t.upgradable,h=t.interactive;process.env.COVER&&Object.keys(n).forEach(t=>{delete n[t]}),c(s)&&f(n,"sealed",s),c(a)&&f(n,"upgradable",a),c(h)&&f(n,"interactive",h),Q(n,this.he),_.Se(this.Mt,n),n.origin="native://"+t.name,n.location="native://"+t.name,n.nonce=0,n.owner=null,n.satoshis=0,F[t.name]=this.he,C.Ce(this.he).je=R.Ne(),this.ae=t,this.ue=t.name,this.Ft=T.$e(this.Mt.toString(),this.ue),this.fe=!1,this.le=!0,this.de=!0,this.Bt=!0,this.ye=e}Ue(){m.De&&m.Me(N,"Deploy",r(this.he)),this.Bt||(this.ge(),et(this.he))}ve(t){if(!this.de)return;const e=this.ae;u(e,"presets")||f(e,"presets",{}),u(e.presets,this.pe)||f(e.presets,this.pe,{}),O(()=>{v.forEach(n=>{const r=e.presets[this.pe];u(r,n)||f(r,n,t[n]),u(e,n)||f(e,n,t[n])})})}Fe(){return{he:this.he,ae:this.ae,ue:this.ue,Ft:this.Ft,Be:_._e(this.Mt)}}Le(t){l(this.he===t.he),this.ae=t.ae,this.ue=t.ue,this.Ft=t.Ft,_.Se(this.Mt,t.Be)}}function G(t,e=!0,r=[]){l(!rt(t));const o=new _,i=new L,s=new(n(19))(o);return _.Ge(o,s),i.ce(s,o),U.set(s,i),a.add(s),t&&i.be(t,e,r),r.push(s),s}function J(t,e=!0,n=[]){return rt(t)||G(t,e,n)}function W(t){const Jig=n(5),Berry=n(12);if("function"!=typeof t)throw new ArgumentError("Only functions and classes are supported: "+r(t));if(H(t),d(t,Jig)&&function(t){const e=Object.getOwnPropertyNames(t.prototype),r=p.find(t=>e.includes(t))||y.find(t=>e.includes(t))||v.find(t=>e.includes(t));if(r)throw new ArgumentError("Must not have any reserved jig words: "+r);const Jig=n(5),o=[];let i=t;for(;i!==Jig;)o.push(i),i=Object.getPrototypeOf(i);const s=/\s+constructor\s*\(/;if(o.some(t=>s.test(t.toString())))throw new Error("Jig must use init() instead of constructor()")}(t),d(t,Berry)&&function(t){const e=Object.getOwnPropertyNames(t.prototype),r=p.find(t=>e.includes(t))||v.find(t=>e.includes(t));if(r)throw new ArgumentError("Must not have any reserved berry words: "+r);const Berry=n(12),o=[];let i=t;for(;i!==Berry;)o.push(i),i=Object.getPrototypeOf(i);const s=/\s+constructor\s*\(/;if(o.some(t=>s.test(t.toString())))throw new Error("Berry must use init() instead of constructor()")}(t),t.prototype&&t.prototype.constructor!==t)throw new ArgumentError("Prototypal inheritance not supported: "+r(t));if(s(t))throw new ArgumentError("Anonymous types not supported: "+r(t));if(-1!==t.toString().indexOf("[native code]"))throw new ArgumentError("Cannot install intrinsic: "+r(t));!function(t){O(()=>{if(Object.getOwnPropertySymbols(t).length||Object.getOwnPropertySymbols(t.prototype).length)throw new Error("Symbol methods not supported")})}(t),function(t){const e=t=>{if("get"in t||"set"in t)throw new Error("Getters and setters not supported")};O(()=>{Object.getOwnPropertyNames(t).map(e=>Object.getOwnPropertyDescriptor(t,e)).forEach(t=>e(t)),Object.getOwnPropertyNames(t.prototype).map(e=>Object.getOwnPropertyDescriptor(t.prototype,e)).forEach(t=>e(t))})}(t)}function Y(t){u(t,"sealed")&&V(t.sealed),u(t,"upgradable")&&z(t.upgradable),u(t,"interactive")&&K(t.interactive)}function V(t){if(!0!==t&&!1!==t&&"owner"!==t)throw new ArgumentError("Invalid sealed option: "+t)}function z(t){if(!0!==t&&!1!==t)throw new ArgumentError("Invalid upgradable option: "+t)}function K(t){if(!0!==t&&!1!==t)throw new ArgumentError("Invalid interactive option: "+t)}function H(t){const e=Object.getOwnPropertyNames(t),n=p.find(t=>e.includes(t))||w.find(t=>e.includes(t));if(n)throw new ArgumentError("Must not have any reserved words: "+n)}function q(t,e,o=!1,s){W(e),function(t,e){if(e.le){if(e.Bt)throw new Error("Cannot upgrade native code");if(t instanceof n(1))throw new ArgumentError("Cannot upgrade to a code jig");if(u(t,"presets")){const n=t.presets[e.pe],r=t=>{if(t in n)throw new Error("Preset bindings not supported for upgrades")};$.ee.forEach(t=>r(t))}if(O(()=>e.he.origin)===$.Je)throw new Error("Cannot upgrade undeployed code")}}(e,U.get(t));const a=i(e),l=a&&J(a,o,s);if(l){if(!0===l.sealed)throw new ArgumentError(r(l)+" is sealed");L.Dt(l).ge()}const d=new Set([t]);let p=i(e);for(;p;){if(d.has(p))throw new Error("Cannot extend the self");d.add(t),p=i(p)}!function(t,e){if(u(t,"deps")){if(!h(t.deps))throw new ArgumentError("deps must be a basic object");if(e){const n=t.deps[e.name],r=rt(n);if(n&&!b.We(r,e))throw new ArgumentError("Parent dependency mismatch")}if(t.name in t.deps)throw new ArgumentError("Illegal dependency")}}(e,l),function(t){if(!u(t,"presets"))return;const e=t.presets;if(!h(e))throw new ArgumentError("presets must be a basic object");for(const t of Object.keys(e)){const n=e[t];if(!h(n))throw new ArgumentError(`Presets for ${t} network must be an object`);const r=v.some(t=>c(n[t])),o=v.find(t=>!c(n[t]));if(r&&o)throw new ArgumentError(`${t} presets not fully defined: ${o} missing`);if(r){const t=S(n.location);if(!t.Ye||!c(t.Ve)&&!c(t.ze)||c(t.Ke))throw new ArgumentError("Bad location");const e=S(n.origin);if(!e.Ye||!c(e.Ve)&&!c(e.ze)||c(e.Ke))throw new ArgumentError("Bad origin");x(n.nonce),A(n.owner,!0),I(n.satoshis)}if("deps"in n)throw new ArgumentError(t+" presets must not contain deps");if("presets"in n)throw new ArgumentError(t+" presets must not contain presets");H(n),Y(n)}}(e),Y(e),function(t){const e=Object.getOwnPropertyNames(t),n=v.find(t=>e.includes(t));if(n)throw new ArgumentError("Must not have any bindings: "+n)}(e);const w={};l&&(w[l.name]=l);const[y,_]=j.ke(e,w,!1,!0);Object.defineProperty(y,"name",{value:e.name,configurable:!0});const m=Object.assign({},e),P=E(m,k,t=>"function"==typeof t?J(t,o,s):void 0);return g(P),"deps"in P||(P.deps=new k.Object),l&&(P.deps[l.name]=l),Object.keys(P.deps||{}).forEach(e=>{Object.defineProperty(_,e,{get:()=>t.deps[e],set:n=>{t.deps[e]=n},configurable:!0,enumerable:!0})}),f(_,e.name,t),P.deps=Z(t,_,P.deps),Object.keys(P).forEach(t=>f(y,t,P[t])),X(_),[y,_]}function Z(t,e,n){return new k.Proxy(n,{defineProperty:(n,r,o)=>{const i=Reflect.defineProperty(n,r,o);return Object.defineProperty(e,r,{get:()=>t.deps[r],set:e=>{t.deps[r]=e},configurable:!0,enumerable:!0}),i},deleteProperty:(t,n)=>{const r=Reflect.deleteProperty(t,n);return Reflect.deleteProperty(e,n),"caller"===n&&X(e),r},set:(n,r,o,i)=>(f(n,r,o),Object.defineProperty(e,r,{get:()=>t.deps[r],set:e=>{t.deps[r]=e},configurable:!0,enumerable:!0}),!0)})}function X(t){if("caller"in t)return;const e=n(9);Object.defineProperty(t,"caller",{get:()=>e.zt.He(),set:()=>{throw new Error("Cannot set caller")},configurable:!0,enumerable:!0})}function Q(t,e){Object.getOwnPropertyNames(t.prototype).concat(Object.getOwnPropertySymbols(t.prototype)).filter(t=>"constructor"!==t).forEach(r=>{const o=n(19),i=R.qe(e,!0);t.prototype[r]=new o(t.prototype[r],i)})}function tt(t){const Jig=n(5),Berry=n(12);if(!d(t,Jig)&&!d(t,Berry)&&!u(t,Symbol.hasInstance)){const e={configurable:!0,enumerable:!0,writable:!1},Code=n(1);e.value=Code.prototype[Symbol.hasInstance],Object.defineProperty(t,Symbol.hasInstance,e)}}function et(...t){const e=n(18),r=new Set;t.forEach(t=>{const e=U.get(t);l(!e.Bt),function nt(t,e=new Set){const Code=n(1);if(l(t instanceof Code),e.has(t))return;L.Dt(t).ge();const r=O(()=>t.location),{Oe:o}=S(r);if(!o)return e;const s=i(t);s&&nt(s,e),e.add(t);const c=O(()=>Object.assign({},t)),Creation=n(3);return O(()=>P(c,t=>(t instanceof Code&&nt(t,e),!(t instanceof Creation)))),e}(t=rt(t)).forEach(t=>r.add(t))}),r.size&&e.Ue([...r])}function rt(t){if(U.has(t))return t;if(M.has(t))return M.get(t);let e="";try{e=o().we().network}catch(t){}const n=D[e];if(!n)return;if(n.has(t))return n.get(t);const r=u(t,"presets")&&u(t.presets,e)&&t.presets[e].location;if(r)for(const t of n.values())if(O(()=>t.location)===r)return t}L.Zt=G,L.Ze=J,L.Wt=function(t,e,o=!0,i){const s=n(9),c=n(33),a=n(18);if(m.Lt&&m.Gt(N,"Upgrade",r(t),"to",r(e)),s.zt.Xe.length)throw new Error("upgrade unavailable");const h=L.Dt(t);if(!h||h.Bt)throw new Error("upgrade unavailable");if(!O(()=>!u(t,"upgradable")||t.upgradable))throw new Error(r(t)+" is non-upgradable");const f=new c(t);try{const n=[];h.be(e,o,n,i),s.zt.Qe(()=>{n.length&&et(...n),a.tn(t,f)})}catch(t){throw f.en(t),t}},L.qt=rt,L.nn=function(t){const e=F[t];if(e){if(U.get(e).ye)throw new Error(t+" is internal to RUN and cannot be deployed");return e}},L.rn=function(){let t="";try{t=o().we().network}catch(t){}function e(t,e){j.sn.includes(e.name)||(v.forEach(t=>{delete e[t]}),delete e[Symbol.hasInstance])}m.De&&m.Me(N,"Deactivate",t,"bindings"),D[t]&&O(()=>D[t].forEach(e))},L.cn=function(){let t="";try{t=o().we().network}catch(t){}function e(e,n){u(n,"presets")&&u(n.presets,t)?v.forEach(e=>f(n,e,n.presets[t][e])):j.sn.includes(n.name)||$.Te(n),tt(n)}m.De&&m.Me(N,"Activate",t,"bindings"),Array.from(M.values()).forEach(t=>L.Dt(t).ge()),D[t]&&O(()=>D[t].forEach(e))},L.an=q,L.hn=Z,L.Ae=function(t){const e=rt(t);if(e)return e;const n=L.Zt();return L.Dt(n).Ae(t),n},L.Dt=t=>U.get(t),L.un=V,L.fn=z,L.ln=K,L.dn=U,t.exports=L},function(t,e,n){class CreationDeps{static get Rt(){return n(2)}static get Ct(){return n(0)}}class Creation{static[Symbol.hasInstance](t){const{A:e,I:n,R:r}=CreationDeps.Ct;return!!e.has(t)||!!n.has(t)||!!r.has(t)}}Creation.deps={CreationDeps:CreationDeps},Creation.sealed=!0,Creation.toString();const r=CreationDeps.Rt.Zt();CreationDeps.Rt.Dt(r).Xt(Creation,!1),t.exports=r},function(t,e,n){const{ft:r}=n(0),o={};function i(t,e,...n){o.pn&&o.pn[t]&&"function"==typeof o.pn[t]&&o.pn[t]((new Date).toISOString(),t.toUpperCase(),`[${e}]`,...n)}o.wn={warn:console.warn,error:console.error},o.pn=o.wn,o.Me=(...t)=>i("info",...t),o.yn=(...t)=>i("warn",...t),o.bn=(...t)=>i("error",...t),o.Gt=(...t)=>i("debug",...t);const[s,c,a,h]=Object.keys({De:1,gn:2,_n:3,Lt:4});r(o,s,()=>!!o.pn&&!!o.pn.info&&"function"==typeof o.pn.info),r(o,c,()=>!!o.pn&&!!o.pn.warn&&"function"==typeof o.pn.warn),r(o,a,()=>!!o.pn&&!!o.pn.error&&"function"==typeof o.pn.error),r(o,h,()=>!!o.pn&&!!o.pn.debug&&"function"==typeof o.pn.debug),t.exports=o},function(t,e,n){class JigDeps{static get It(){return n(18)}static get mn(){return n(11)}static get En(){return n(1)}static get Pn(){return n(14)}static get Rt(){return n(2)}static get $n(){return n(16)}static get jt(){return n(4)}static get On(){return n(19)}static get Ct(){return n(0)}static get vn(){return n(5)}static get Tt(){return n(9)}static get Sn(){return n(23)}static get xn(){return n(8)}static get g(){return n(7).g}static get kt(){return n(58)}static get Ut(){return n(28)}static get Nt(){return"Jig"}}class Jig{constructor(...t){const e=JigDeps.It,n=JigDeps.mn,Code=JigDeps.En,r=JigDeps.Rt,o=JigDeps.Pn.te,i=JigDeps.Ct.A,s=JigDeps.On,c=JigDeps.vn,a=JigDeps.Tt,h=JigDeps.Sn,u=JigDeps.xn.P,f=JigDeps.g,l=a.zt;if(this.constructor===c)throw new Error("Jig must be extended");if(!(this.constructor instanceof Code))return l.Qe(()=>{const e=r.Ze(this.constructor);return r.Dt(e).Ue(),new e(...t)});r.Dt(this.constructor).Ue(),n.Te(this);const d=l.Xe,p=d.length&&d[d.length-1];p&&(this.owner=f(()=>o(p.owner,u)));const w=new s(this,h.An(!1));i.add(w);const y=!p||l.In(p,!0);return e.Rn(this.constructor,w,t,y),w}init(){}sync(t={}){const e=JigDeps.jt,n=JigDeps.Nt,r=JigDeps.kt,o=JigDeps.Ct.Y,i=JigDeps.vn,s=JigDeps.Tt.zt;if(JigDeps.Ut.Jt)throw new Error("sync disabled during atomic update");if(e.Lt&&e.Gt(n,"Sync",o(this)),!(this instanceof i))throw new Error("sync unavailable");if(s.Xe.length)throw new Error("sync cannot be called internally");return r(this,t).then(()=>this)}destroy(){const t=JigDeps.jt,e=JigDeps.Nt,n=JigDeps.Ct.Y,r=JigDeps.vn,o=JigDeps.It;if(t.Lt&&t.Gt(e,"Destroy",n(this)),!(this instanceof r))throw new Error("destroy unavailable");return o.Ht(this),this}auth(){const t=JigDeps.jt,e=JigDeps.Nt,n=JigDeps.Ct.Y,r=JigDeps.vn,o=JigDeps.It,i=JigDeps.Tt;if(t.Lt&&t.Gt(e,"Auth",n(this)),!(this instanceof r))throw new Error("auth unavailable on native jigs");if(i.zt.Vt.Yt(this))throw new Error("auth unavailable on new jigs");return o.Kt(this),this}toString(){return`[jig ${this.constructor.name}]`}static load(t){const{F:e,Y:n,W:r}=JigDeps.Ct,o=JigDeps.$n,i=JigDeps.vn,s=JigDeps.Tt.zt;if(JigDeps.Ut.Jt)throw new Error("load disabled during atomic update");if(this!==i&&!r(this,i))throw new Error("load unavailable");if(s.Xe.length)throw new Error("load cannot be called internally");return(async()=>{const r=e(),i=new o(r),s=await i.jn(t);if(s instanceof this)return s;throw new Error(`Cannot load ${t}\n\n${n(s)} not an instance of ${n(this)}`)})()}static[Symbol.hasInstance](t){if(!JigDeps.Ct.A.has(t))return!1;if(this===JigDeps.vn)return!0;const e=JigDeps.Rt.qt(this);return!!e&&JigDeps.g(()=>{let n=Object.getPrototypeOf(t);for(;n;){if(n.constructor.origin===e.origin)return!0;n=Object.getPrototypeOf(n)}return!1})}}Jig.deps={JigDeps:JigDeps},Jig.sealed=!1,Jig.toString();const r=JigDeps.Rt.Zt();JigDeps.Rt.Dt(r).Xt(Jig,!1),t.exports=r},function(t,e){t.exports=__webpack_require__(50)},function(t,e){let n=!1;t.exports={g:function(t){const e=n;try{return n=!0,t()}finally{n=e}},Cn:function(){return n}}},function(module,exports,__webpack_require__){const DeterministicRealm=__webpack_require__(49),{ft:_defineGetter}=__webpack_require__(0),Source=__webpack_require__(27),Log=__webpack_require__(4),TAG="Sandbox";class Sandbox{constructor(){this.sn=[],Log.Lt&&Log.Gt(TAG,"Creating deterministic realm"),this.Tn=new DeterministicRealm,this.kn=new WeakSet;const compartment=this.Tn.makeCompartment();this.P=compartment.evaluate(_getIntrinsicsSrc),this.$=eval(_getIntrinsicsSrc),this.S=new Set(Object.entries(this.P).map(([t,e])=>e)),this.O=new Set(Object.entries(this.$).map(([t,e])=>e))}ke(t,e,n=!1,r=!1){let o=t.toString();if(process.env.COVER&&(n||this.sn.includes(t.name))){if(!this.kn.has(t))return[t,"undefined"!=typeof global?global:window];const e=/(cov_[a-zA-Z0-9]+\(\).[a-zA-Z0-9\[\]]+\+\+,?)/g;o=o.replace(e,"")}const i=Source.Nn(o,t),s=r?Source.Un(i):i;return this.Dn(s,e)}Dn(t,e={}){const n=this.Tn.makeCompartment();Object.assign(n.global,this.P,e);const r=t.startsWith("class")?"AnonymousClass":"anonymousFunction",o=`const ${r}=${t};${r}`;"Math"in e||_defineGetter(n.global,"Math",()=>{throw new ReferenceError("Math is not defined\n\nHint: Math is disabled because it is non-deterministic.")}),"Date"in e||_defineGetter(n.global,"Date",()=>{throw new ReferenceError("Date is not defined\n\nHint: Date is disabled because it is non-deterministic.")});const i=n.evaluate(o);return"function"==typeof i&&this.kn.add(i),[i,n.global]}}const _intrinsicNames=["console","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","Object","Function","Boolean","Symbol","Error","EvalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError","Number","BigInt","Math","Date","String","RegExp","Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array","Map","Set","WeakMap","WeakSet","ArrayBuffer","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"];let _getIntrinsicsSrc="const x = {}\n";_intrinsicNames.forEach(t=>{_getIntrinsicsSrc+=`x.${t} = typeof ${t} !== 'undefined' ? ${t} : undefined\n`}),_getIntrinsicsSrc+="x",module.exports=new Sandbox},function(t,e,n){const r=n(6),{crypto:o}=r,{B:i,Y:s,F:c,tt:a}=n(0),h=n(21),{ne:u,Mn:f,Je:l}=n(11),{g:d}=n(7),p=n(33),w=n(4),y=n(22),{ot:b}=n(14),g="Record";class _{constructor(){this.Fn=o.Random.getRandomBuffer(32).toString("hex"),this.Bn=0,this.Ln=[],this.Xe=[],this.bn=null,this.Vt=new h,this.Gn=new h,this.Jn=new h,this.Wn=new h,this.Yn=new h,this.Vn=new h,this.zn=new h,this.Kn=new h,this.Hn=new h,this.qn=[],this.Zn=new Map,this.Xn=!0,this.Qn=!1,this.tr=!1}er(){i(!this.tr),w.Lt&&w.Gt(g,"Begin"),this.Bn++}nr(){i(this.Bn),w.Lt&&w.Gt(g,"End"),this.Bn--,this.Bn||!this.Xn||this.tr||this.rr()}ir(t){const Creation=n(3);i(!this.tr),i(t instanceof Creation),w.Lt&&w.Gt(g,"Push "+s(t)),this.Xe.push(t)}sr(){i(this.Xe.length);const t=this.Xe.pop();w.Lt&&w.Gt(g,"Pop "+s(t))}cr(t){if(i(!this.Xe.length),w.Lt&&w.Gt(g,"Action "+t),this.Ln.push(t),this.ar(),!this.Qn){const t=c();this.Kn.hr(e=>t.ur("update",e)),this.Wn.hr(e=>t.ur("update",e))}!this.Bn&&this.Xn&&this.rr()}ar(){!function(t,e){t.zn=new h;for(const e of t.Jn)t.zn.lr(e);for(const e of t.Yn)t.zn.lr(e);for(const e of t.Wn)t.zn.lr(e);for(const e of t.Vt)t.zn.dr(e);t.Kn=new h;for(const e of t.zn)t.Kn.lr(e);for(const e of t.Vt)t.Kn.lr(e);for(const e of t.Wn)t.Kn.dr(e);t.Hn=new h;for(const e of t.Gn)t.Hn.lr(e);for(const e of t.zn)t.Hn.dr(e);for(const e of t.Kn)t.Hn.dr(e);for(const e of t.Wn)t.Hn.dr(e)}(this),function(t){const e=e=>{const n=u(e.origin);return n.Oe||n.pr===t.Fn};d(()=>{t.Kn.hr((n,r)=>{n.location=f({pr:t.Fn,Ve:r}),e(n)&&(n.origin=n.location),n.nonce=t.Zn.get(n).wr.nonce+1}),t.Wn.hr((n,r)=>{n.location=f({pr:t.Fn,ze:r}),e(n)&&(n.origin=n.location),n.nonce=t.Zn.get(n).wr.nonce+1})})}(this)}yr(t){i(!this.tr),this.Vn.Yt(t)||(w.Lt&&w.Gt(g,"Unbind "+s(t)),this.Vn.lr(t))}rr(){i(!this.tr);const t=n(36);if(w.Lt&&w.Gt(g,"Commit"),this.Fn===_.zt.Fn&&(i(!_.zt.Bn),_.zt=new _),!this.Ln.length)return w.gn&&w.yn(g,"No actions found"),i(!this.Vt.br),i(!this.Jn.br),i(!this.Wn.br),void i(!this.Yn.br);if(!this.Ln.length||this.Vt.br||this.Jn.br||this.Wn.br||this.Yn.br){this.gr();try{return new t(this)}catch(t){throw this.en(t),t}}}gr(){const Code=n(1),Creation=n(3),t=this.Kn._r().concat(this.Wn._r()).concat(this.Hn._r()).map(t=>t instanceof Code?t:t.constructor);t.filter(t=>!1===t.interactive).forEach(e=>{const n=new Set([e]);d(()=>b(e,t=>{t instanceof Creation&&n.add(t)}));const r=t.find(t=>!n.has(t));if(r)throw new Error(`${e.name} is not permitted to interact with ${r.name}`)})}mr(t){if(this.Er(t,"create"),i(!this.tr),this.Vt.Yt(t))return void this.Pr();w.Lt&&w.Gt(g,"Create",s(t));const Code=n(1),Jig=n(5);i(t instanceof Code||t instanceof Jig);const e=d(()=>u(t.origin).Bt);i(!a(e)),i(!this.Jn.Yt(t)),i(!this.Wn.Yt(t)),i(!this.Yn.Yt(t)),i(!this.Vn.Yt(t)),this.Vt.lr(t),this.$r(t,!1,"create"),this.Or(t),this.Pr(t)}_read(t){if(i(!this.tr),this.Gn.Yt(t))return;w.Lt&&w.Gt(g,"Read",s(t));const Creation=n(3);i(t instanceof Creation),this.Gn.lr(t),this.$r(t,!0,"read"),this.Or(t,void 0,!0)}vr(t,e){if(this.Er(t,"update"),i(!this.tr),this.Jn.Yt(t))return this.Sr(t,"update"),void this.Pr(t);w.Lt&&w.Gt(g,"Update",s(t));const Code=n(1),Jig=n(5);i(t instanceof Code||t instanceof Jig);const r=d(()=>t.origin===l);i(!r||this.Vt.Yt(t));const o=d(()=>u(t.origin).Bt);i(!a(o)),this.Sr(t,"update"),this.Jn.lr(t),this.$r(t,!1,"update"),this.Or(t,e),this.Pr(t)}dr(t){if(this.Er(t,"delete"),i(!this.tr),this.Wn.Yt(t))return this.Sr(t,"delete"),void this.Pr(t);w.Lt&&w.Gt(g,"Delete",s(t));const Code=n(1),Jig=n(5);i(t instanceof Code||t instanceof Jig);const e=d(()=>u(t.origin).Bt);i(!a(e)),this.Sr(t,"delete"),this.Wn.lr(t),this.$r(t,!1,"delete"),this.Or(t),this.Pr(t),d(()=>{t.owner=null,t.satoshis=0})}Kt(t,e){if(this.Er(t,"auth"),i(!this.tr),this.Yn.Yt(t))return this.Sr(t,"auth",!e),void(e||this.Pr(t));w.Lt&&w.Gt(g,"Auth",s(t));const Code=n(1),Jig=n(5);i(t instanceof Code||t instanceof Jig),i(!this.Vt.Yt(t)),this.Sr(t,"auth",!e),this.Yn.lr(t),this.$r(t,!1,"auth"),this.Or(t),this.Pr(t)}Pr(t){i(!this.tr),this.Xe.filter(e=>t!==e).filter(t=>!!t).filter(t=>!this.Vt.Yt(t)).forEach(t=>this.Kt(t,!0))}Sr(t,e,n){if(this.In(t,n)){const n=this.Wn.Yt(t)?s(t)+" deleted":s(t)+" has an unbound owner or satoshis value";throw new Error(`${e} disabled: ${n}`)}}In(t,e){return this.Vn.Yt(t)||e&&y.Ce(t).Ar()}Er(t,e){if(!this.Xe.length)return;const Berry=n(12);if(this.Xe.some(t=>t instanceof Berry))throw new Error(`Cannot ${e} ${s(t)} in berry`)}Or(t,e,n){const r=n||!(()=>{try{return c().Ir}catch(t){return!1}})(),o=this.Zn.get(t);if(o)return!r&&o.Rr&&o.jr(),void(n||(o.Cr=!0));const i=e||new p(t,r,n);this.Zn.set(t,i)}$r(t,e,r){i(!this.tr);const o=d(()=>t.location),c=u(o);if(a(c.pr)){if(c.pr===this.Fn)return;const o=n(36).Tr(c.pr);if(!o&&!e)throw new Error(`Cannot ${r} ${s(t)}: open transaction`);!o||this.qn.includes(o)||o.kr||this.qn.push(o)}}en(t){if(this.tr)return;w.Lt&&w.Gt(g,"Rollback"),this.Zn.forEach(e=>e.en(t)),this.Fn===_.zt.Fn&&(_.zt=new _);const e=c();this.Kn.hr(t=>e.ur("update",t)),this.Wn.hr(t=>e.ur("update",t)),this.tr=!0}He(){return this.Xe.length<2?null:this.Xe[this.Xe.length-2]}Qe(t){try{this.er();const e=t();return this.nr(),e}catch(t){throw this.en(t),t}}}_.zt=new _,t.exports=_},function(t,e){class ArgumentError extends Error{constructor(t="Unknown reason"){super(t),this.name=this.constructor.name}}class ClientModeError extends Error{constructor(t,e){super(`Cannot load ${t}\n\nOnly cached ${e}s may be loaded in client mode`),this.data=t,this.type=e,this.name=this.constructor.name}}class InternalError extends Error{constructor(t){super(t),this.name=this.constructor.name}}class NotImplementedError extends Error{constructor(t){super(t),this.name=this.constructor.name}}class RequestError extends Error{constructor(t,e,n,r,o){super(`${e} ${n}\n\n${r} ${o}\n\n${t}`),this.reason=t,this.status=e,this.statusText=n,this.method=r,this.url=o,this.name=this.constructor.name}}class TimeoutError extends Error{constructor(t){super(t),this.name=this.constructor.name}}class TrustError extends Error{constructor(t,e){super(`Cannot load untrusted code${e?" via "+e:""}: ${t}\n\nHint: Trust this txid using run.trust(txid) if you know it is safe`),this.txid=t,this.method=e,this.name=this.constructor.name}}t.exports={ArgumentError:ArgumentError,ClientModeError:ClientModeError,InternalError:InternalError,NotImplementedError:NotImplementedError,RequestError:RequestError,TimeoutError:TimeoutError,TrustError:TrustError}},function(t,e,n){const r=n(6),{Y:o,ut:i,tt:s,B:c}=n(0),{g:a}=n(7),{Nr:h}=n(15),f=/^(?<protocol>error):\/\/(?<error>.*)/s,l=/^(?<protocol>native):\/\/(?<native>[a-zA-Z0-9_$]+)/s,d=/^(?<protocol>record):\/\/(?<record>[a-f0-9]{64})_(?:o(?<vout>[0-9]+)|(?:d(?<vdel>[0-9]+)))$/,p=/^(?<txid>[a-f0-9]{64})?_(?:(?:o(?<vout>[0-9]+))|(?:d(?<vdel>[0-9]+)))$/s,w=/^(?<txid>[a-f0-9]{64})_(?:(?:o(?<vout>[0-9]+))|(?:d(?<vdel>[0-9]+)))(?:\?berry=(?<berry>[a-zA-Z0-9\-_.!~*'()%]*)(&hash=(?<hash>[a-f0-9]{64}))?(&version=(?<version>[1-9][0-9]*))?)?$/s,y=["location","origin","nonce"],b=["owner","satoshis"],g=y.concat(b),_="error://Undeployed";t.exports={ne:function(t){if("string"!=typeof t)throw new Error("Location is not a string: "+o(t));const e=t.match(p)||t.match(w)||t.match(d)||t.match(f)||t.match(l);if(e){const n={},r=e.groups;return"record"===r.protocol&&(n.pr=r.record),"error"===r.protocol&&(n.bn=r.error),"native"===r.protocol&&(n.Bt=r.native),s(r.txid)&&(n.Ye=r.txid),s(r.vout)&&(n.Ve=parseInt(r.vout)),s(r.vdel)&&(n.ze=parseInt(r.vdel)),s(r.berry)&&(n.Ke=decodeURIComponent(r.berry)),s(r.hash)&&(n._hash=r.hash),s(r.version)&&(n.Nr=h(parseInt(r.version))),t===_&&(n.Oe=!0),n}throw new Error("Bad location: "+o(t))},Mn:function(t){if(c("object"==typeof t&&t),s(t.bn))return"error://"+t.bn;if(s(t.Bt))return"native://"+t.Bt;let e="";s(t.pr)&&(e="record://"+t.pr),s(t.Ye)&&(e=t.Ye);let n="";s(t.Ve)&&(n="_o"+t.Ve),s(t.ze)&&(n="_d"+t.ze);const r=[];return s(t.Ke)&&(r.push("berry="+encodeURIComponent(t.Ke)),s(t._hash)&&r.push("hash="+t._hash),s(t.Nr)&&r.push("version="+t.Nr)),`${e}${n}${r.length?"?"+r.join("&"):""}`},re:function(t){if(Number.isInteger(t)&&t>=1)return t;throw new Error("Invalid nonce: "+o(t))},oe:function(t,e=!1,i){const CommonLock=n(40);if("string"==typeof t){try{const e=new r.PublicKey(t,{network:i}),n=i?"testnet"===i:void 0;return new CommonLock(e.toAddress().toString(),n)}catch(t){}try{const e=new CommonLock(t,i?"testnet"===i:void 0);return e.script(),e}catch(t){}}const{Lock:s}=n(26);if(t instanceof s)return t;if(null===t&&e)return null;throw new Error("Invalid owner: "+o(t))},ie:function(t){if("number"!=typeof t)throw new Error("satoshis must be a number");if(!Number.isInteger(t))throw new Error("satoshis must be an integer");if(t<0)throw new Error("satoshis must be non-negative");if(t>1e8)throw new Error("satoshis must be <= 100000000");return t},Te:function(t){a(()=>{i(t,"location",_),i(t,"origin",_),i(t,"nonce",0),i(t,"owner",void 0),i(t,"satoshis",void 0)})},Ur:y,Dr:b,ee:g,Je:_,Mr:0}},function(t,e,n){class BerryDeps{static get It(){return n(18)}static get mn(){return n(11)}static get Rt(){return n(2)}static get $n(){return n(16)}static get On(){return n(19)}static get Ct(){return n(0)}static get Fr(){return n(12)}static get Tt(){return n(9)}static get Sn(){return n(23)}static get g(){return n(7).g}static get Ut(){return n(28)}}class Berry{constructor(...t){const e=BerryDeps.It,n=BerryDeps.Ct.R,r=BerryDeps.Fr,o=BerryDeps.On,i=BerryDeps.$n.Br,s=BerryDeps.Sn,{Je:c}=BerryDeps.mn;if(this.constructor===r)throw new Error("Berry must be extended");i(this.constructor),this.location=c,this.origin=c,this.nonce=0,this.owner=null,this.satoshis=0;const a=s.Lr(!1),h=new o(this,a);return n.add(h),a.Gr=!1,e.Jr(this.constructor,h,t),a.Gr=!0,h}static[Symbol.hasInstance](t){if(!BerryDeps.Ct.R.has(t))return!1;if(this===BerryDeps.Fr)return!0;const e=BerryDeps.Rt.qt(this);return!!e&&BerryDeps.g(()=>{let n=Object.getPrototypeOf(t);for(;n;){if(n.constructor.location===e.location)return!0;n=Object.getPrototypeOf(n)}return!1})}static async pluck(t,e,n){return new this}static load(t){const{F:e,Y:n,W:r}=BerryDeps.Ct,o=BerryDeps.$n,i=BerryDeps.Fr,s=BerryDeps.Tt.zt;if(BerryDeps.Ut.Jt)throw new Error("load disabled during atomic update");if(this!==i&&!r(this,i))throw new Error("load unavailable");if(s.Xe.length)throw new Error("load cannot be called internally");const B=this===i?void 0:this,c=new o(e()).jn(t,B);return(async()=>{const e=await c;if(e instanceof this)return e;throw new Error(`Cannot load ${t}\n\n${n(e)} not an instance of ${n(this)}`)})()}init(...t){}}Berry.deps={BerryDeps:BerryDeps},Berry.sealed=!1,Berry.toString();const r=BerryDeps.Rt.Zt();BerryDeps.Rt.Dt(r).Xt(Berry,!1),t.exports=r},function(t,e,n){const r=n(6),{Script:o,Transaction:i}=r,{Interpreter:s}=o,{Input:c}=i,{ECDSA:a,Signature:h}=r.crypto,{BufferReader:u,BufferWriter:f}=r.encoding,{BN:l}=r.deps.bnjs,d=n(4),p=new Map;async function w(t,e,n,r,o){const i=t.inputs[n];async function s(e){const n=new f;if(void 0===e){if(t._hashOutputsAll)return t._hashOutputsAll;t.outputs.forEach(t=>{t.toBufferWriter(n)})}else t.outputs[e].toBufferWriter(n);const r=n.toBuffer(),o=await b(r);return void 0===e&&(t._hashOutputsAll=o),o}let c=Buffer.alloc(32),a=Buffer.alloc(32),l=Buffer.alloc(32);e&h.SIGHASH_ANYONECANPAY||(c=await async function(){if(t._hashPrevouts)return t._hashPrevouts;const e=new f;t.inputs.forEach(t=>{e.writeReverse(t.prevTxId),e.writeUInt32LE(t.outputIndex)});const n=e.toBuffer();return t._hashPrevouts=await b(n),t._hashPrevouts}()),e&h.SIGHASH_ANYONECANPAY||(31&e)===h.SIGHASH_SINGLE||(31&e)===h.SIGHASH_NONE||(a=await async function(){if(t._hashSequence)return t._hashSequence;const e=new f;t.inputs.forEach(t=>{e.writeUInt32LE(t.sequenceNumber)});const n=e.toBuffer();return t._hashSequence=await b(n),t._hashSequence}()),(31&e)!==h.SIGHASH_SINGLE&&(31&e)!==h.SIGHASH_NONE?l=await s():(31&e)===h.SIGHASH_SINGLE&&n<t.outputs.length&&(l=await s(n));const d=new f;d.writeInt32LE(t.version),d.write(c),d.write(a),d.writeReverse(i.prevTxId),d.writeUInt32LE(i.outputIndex),d.writeVarintNum(r.toBuffer().length),d.write(r.toBuffer()),d.writeUInt64LEBN(o),d.writeUInt32LE(i.sequenceNumber),d.write(l),d.writeUInt32LE(t.nLockTime),d.writeUInt32LE(e>>>0);const p=d.toBuffer(),w=await b(p);return new u(w).readReverse()}async function y(t){const sha256=n(41).util.sha256,e=await sha256(t);return r.deps.Buffer.from(e)}async function b(t){const e=await y(t);return await y(e)}t.exports={Wr:function(t){if(t.Yr)return;t.Yr=!0,i.FEE_PER_KB=500;const e=i.prototype.sign;i.prototype.sign=function(...t){const n=c.prototype.isValidSignature;c.prototype.isValidSignature=()=>!0;const r=e.call(this,...t);return c.prototype.isValidSignature=n,r},c.prototype.clearSignatures=()=>{},c.prototype.getSignatures=()=>[],c.prototype.isFullySigned=function(){return!!this.script.toBuffer().length},i.prototype.isFullySigned=function(){return!this.inputs.some(t=>!t.isFullySigned())},i.prototype.isValidSignature=function(t){const e=new s,n=t.inputIndex,r=this.inputs[n],o=s.SCRIPT_VERIFY_STRICTENC|s.SCRIPT_VERIFY_DERSIG|s.SCRIPT_VERIFY_LOW_S|s.SCRIPT_VERIFY_NULLDUMMY|s.SCRIPT_VERIFY_SIGPUSHONLY|s.SCRIPT_ENABLE_MONOLITH_OPCODES|s.SCRIPT_ENABLE_MAGNETIC_OPCODES|s.SCRIPT_ENABLE_SIGHASH_FORKID;return e.verify(r.script,r.output.script,this,n,o,r.output.satoshisBN)}},Vr:function(t,e){const n=8+(t<=75?1:t<=255?2:t<=65535?3:5)+t+148;return Math.ceil(3*n*e/1e3)},zr:async function(t){const e=p.get(t);if(e)return p.delete(t),p.set(t,e),e;const n=(await y(new r.Script(t).toBuffer())).reverse().toString("hex");if(p.set(t,n),p.size>100){const t=p.keys().next().value;p.delete(t)}return n},Kr:w,Hr:async function(t,e,n,r,o,i=h.SIGHASH_ALL){i|=h.SIGHASH_FORKID;const s=new l(r),c=await w(t,i,e,n,s),u=a.sign(c,o,"little"),f=Buffer.from(u.toDER());return Buffer.concat([f,Buffer.from([255&i])]).toString("hex")},qr:y,Zr:function(t){const e=r.deps.Buffer.from(t),n=r.crypto.Hash.sha256(e);return new Uint8Array(n)},Xr:function(t){const e=new Set;return t.filter(t=>{const n=`${t.txid}_o${t.vout}`;return e.has(n)?(d.gn&&d.yn("bsv","Duplicate utxo returned from server:",n),!1):(e.add(n),!0)})}}},function(t,e,n){const{K:r,V:o,Y:i,H:s,q:c,Z:a,X:h,ut:u,$t:f,B:l}=n(0),d=n(21),p=n(8),w=p.$,y=p.P,b=p.O,g=p.S,_=w.Object,m=y.Object;t.exports={ot:function t(e,n,r=new Set){if("function"!=typeof e&&"object"!=typeof e||!e)return void n(e);if(r.has(e))return;if(r.add(e),!1===n(e))return;if(e instanceof w.Set||e instanceof y.Set)for(const o of e)t(o,n,r);if(e instanceof w.Map||e instanceof y.Map)for(const[o,i]of e)t(o,n,r),t(i,n,r);f(e).forEach(o=>{t(e[o],n,r)}),"object"!=typeof e||b.has(e.constructor)||g.has(e.constructor)||t(e.constructor,n,r);const o=Object.getPrototypeOf(e);"function"==typeof e&&o!==_.getPrototypeOf(_)&&o!==m.getPrototypeOf(m)&&t(o,n,r)},Qr:function t(e,r,o=new Map){if("function"!=typeof e&&"object"!=typeof e||!e)return e;if(o.has(e))return o.get(e);let i=!0;const s=r(e,t=>{i=t})||e;if(o.set(e,s),"function"!=typeof s&&"object"!=typeof s||!s||!i)return s;const c=n(8),Code=n(1),a=c.$,h=c.P,d=c.O,p=c.S,w=a.Object,y=h.Object;if(s instanceof a.Set||s instanceof h.Set){const e=Array.from(s);for(let n=0;n<e.length;n++)e[n]=t(e[n],r,o);s.clear(),e.forEach(t=>s.add(t))}if(s instanceof a.Map||s instanceof h.Map){const e=Array.from(s);for(let n=0;n<e.length;n++)e[n][0]=t(e[n][0],r,o),e[n][1]=t(e[n][1],r,o);s.clear(),e.forEach(t=>s.set(t[0],t[1]))}if(f(s).forEach(e=>{const n=s[e],i=t(n,r,o);n!==i&&u(s,e,i)}),"object"==typeof s&&!d.has(s.constructor)&&!p.has(s.constructor)){const e=t(s.constructor,r,o);Object.getPrototypeOf(s)!==e.prototype&&Object.setPrototypeOf(s,e.prototype)}const b=Object.getPrototypeOf(s);if("function"==typeof s&&b!==w.getPrototypeOf(w)&&b!==y.getPrototypeOf(y)){const e=t(b,r,o);if(b!==e){l(s!==e),Object.setPrototypeOf(s,e);const t=s instanceof Code?Object.getPrototypeOf(s.prototype):s.prototype;Object.setPrototypeOf(t,e.prototype)}}return s},te:function t(e,l,d,p=new Map){if("symbol"==typeof e)throw new Error("Cannot clone: "+i(e));if("function"!=typeof e&&"object"!=typeof e||!e)return e;if(p.has(e))return p.get(e);if(d){const t=d(e);if(t)return p.set(e,t),t}const w=n(8),Creation=n(3),y=w.$,b=w.O,g=w.S;if(l=l||y,e instanceof Creation)return e;if("function"==typeof e)throw new Error("Cannot clone non-code function: "+i(e));if(b.has(e)||g.has(e))throw new Error("Cannot clone intrinsic: "+i(e));let _=null;if(r(e)&&(_=new l.Array),o(e)&&(_=new l.Object),a(e))return new l.Uint8Array(l.Array.from(e));s(e)&&(_=new l.Set),c(e)&&(_=new l.Map);let m=!1;if(_||(m=!0,_=new l.Object),!_)throw new Error("Cannot clone: "+i(e));if(p.set(e,_),_ instanceof l.Set)for(const n of e){const e=t(n,l,d,p);_.add(e)}if(_ instanceof l.Map)for(const n of e){const e=t(n[0],l,d,p),r=t(n[1],l,d,p);_.set(e,r)}if(f(e).forEach(n=>{if("symbol"==typeof n)throw new Error("Cannot clone: "+i(n));u(_,n,t(e[n],l,d,p))}),!b.has(e.constructor)&&!g.has(e.constructor)){const n=t(e.constructor,l,d,p);Object.setPrototypeOf(_,n.prototype)}if(m&&!h(_))throw new Error("Cannot clone: "+i(e));return _},eo:function t(e,i,h={}){if(typeof e!=typeof i)return!1;if("number"==typeof e&&isNaN(e)&&isNaN(i))return!0;const Creation=n(3);if(e instanceof Creation)return d.We(e,i);if("object"!=typeof e||!e||!i)return e===i;const u=Object.getOwnPropertyNames(e),f=Object.getOwnPropertyNames(i),l=Object.getOwnPropertyDescriptors(e),p=Object.getOwnPropertyDescriptors(i),w=u.filter(t=>l[t].enumerable),y=f.filter(t=>p[t].enumerable);if(w.length!==y.length)return!1;if(h.no)for(let n=0;n<w.length;n++){const r=w[n],o=y[n];if(r!==o)return!1;if(!t(e[r],i[o]))return!1}else{if(w.some(t=>!y.includes(t)))return!1;if(w.some(n=>!t(e[n],i[n],h)))return!1}if(o(e))return!!o(i);if(r(e))return!!r(i);if(s(e))return!!s(i)&&e.size===i.size&&!!t(Array.from(e.entries()),Array.from(i.entries()));if(c(e))return!!c(i)&&e.size===i.size&&!!t(Array.from(e.entries()),Array.from(i.entries()));if(a(e))return!!a(i);throw new Error("Unsupported: "+e)}}},function(t,e){t.exports={ro:5,Nr:function(t){if(5!==t)throw new Error("Unsupported version: "+t);return t},oo:function(t){if("05"===t)return 5;throw new Error("Unsupported metadata version: "+t)},io:function(t){if("04"===t)return 5;throw new Error("Unsupported state version: "+t)},so:function(t){if(5===t)return"05";throw new Error("Unsupported protocol version: "+t)},co:function(t){if(5===t)return"04";throw new Error("Unsupported protocol version: "+t)}}},function(t,e,n){const r=n(6),{Transaction:o}=r,i=n(4),{B:s,W:c,Y:a,yt:h,Pt:u,tt:f}=n(0),{ne:l,Mn:d,Je:p}=n(11),{g:w}=n(7),y=n(8),{ArgumentError:ArgumentError,ClientModeError:ClientModeError}=n(10),{ro:b}=n(15),{qr:g}=n(13),{ao:_}=n(35),Code=n(1),m=n(2),E=y.P,P=y.$,$="Loader",O=new Map;let v=[],S=0,x=null;class A{constructor(t,e=new h("load",t.bt)){s(t),this.ho=new Map,this.uo=new Map,this.fo=[],this.F=t,this.bt=e}async jn(t,e,n=!1){try{if(this.bt.Et(),!e){const e=this.ho.get(t);if(e)return e}const r=this.lo(t,e);e||this.ho.set(t,r);const o=await r;if(!n)for(;this.fo.length;){const t=this.fo;this.fo=[],await Promise.all(t)}return o}catch(t){throw S&&(x=x||t),t}}async lo(t,e){this.bt.Et(),e?i.De&&i.Me($,"Load",t,"with",a(e)):i.De&&i.Me($,"Load",t);const n=new Date;try{if(e)return await this.do(t,e);const r=l(t);if(f(r.bn)||f(r.pr))throw new ArgumentError("Bad location: "+t);if(f(r.Bt))return this.po(t);if(!r.Ye)throw new ArgumentError("Bad location: "+t);return f(r.Ke)?await this.wo(t):await this.yo(t)}finally{i.Lt&&i.Gt($,"Load (end): "+(new Date-n)+"ms")}}async wo(t){this.bt.Et();const{bo:e}=n(24),r=l(t),o=r.Ye+(f(r.Ve)?"_o"+r.Ve:"'_d"+r.ze),i=r.Ke,s=r._hash,c=r.Nr||b,a="berry://"+d({Ye:r.Ye,ze:r.ze,Ve:r.Ve,Ke:i,Nr:c}),h=await this.F._o().get(a);if(h){const n=await e(t,h,s,this);return this.fo.push(n.mo),n.Eo}{const t=new A(this.F,this.bt),e=await t.jn(o);return this.Po(i,s,c,e)}}async yo(t){this.bt.Et();const e="jig://"+t,n=await this.F._o().get(e);return n?this.$o(t,n):this.Oo(t)}async $o(t,e){const{Ye:r,Ve:i,ze:s}=l(t);let c=null;if(!this.F.vo.has("cache")){const e=await this.F.we().fetch(r),n=new o(e),a=_(n),h="number"==typeof i&&i>a.vrun&&i<a.out.length+a.vrun+1,u="number"==typeof s&&s>=0&&s<a.del.length;if(!h&&!u)throw new ArgumentError("Not a jig: "+t);c=h?a.out[i-a.vrun-1]:a.del[s]}const{bo:a}=n(24),h=await a(t,e,c,this);return this.fo.push(h.mo),h.Eo}async Oo(t){if(this.bt.Et(),this.F.So)throw new ClientModeError(t,"jig");const{Ye:e,Ve:r,ze:i}=l(t),s=await this.F.we().fetch(e),c=new o(s),a=_(c);let h=null;if(this.uo.has(e))h=await this.uo.get(e);else{if(O.has(e))return await O.get(e),await this.yo(t);try{const t=n(34),r=!0,o=null,i=!1,s=t(c,e,a,this.F,r,o,this.bt,i);this.uo.set(e,s),O.set(e,s),h=await s}finally{this.uo.delete(e),O.delete(e)}}const u=h.pr;if(u.Kn.hr(t=>this.F.ur("load",t)),u.Wn.hr(t=>this.F.ur("load",t)),"number"==typeof r&&r>a.vrun&&r<u.Kn.br+a.vrun+1)return u.Kn._r()[r-a.vrun-1];if("number"==typeof i&&i>=0&&i<u.Wn.br)return u.Wn._r()[i];throw new ArgumentError("Jig not found: "+t)}async do(t,e){this.bt.Et();const Berry=n(12),{bo:r}=n(24);if(!c(e,Berry))throw new ArgumentError("Berry class must extend from Berry");if("string"!=typeof t)throw new ArgumentError("Berry path must be a string");const B=m.Ze(e);if(w(()=>l(B.location)).Ye){const e={Ke:t,Nr:b},n=Object.assign(l(B.location),e),o=d(n),i="berry://"+o,s=await this.F._o().get(i);if(s){const t=await r(o,s,void 0,this);return this.fo.push(t.mo),t.Eo}}return this.Po(t,null,b,B)}async Po(t,e,o,B){this.bt.Et(),s(B instanceof Code),i.De&&i.Me($,"Pluck",a(B),t);const c={b:this.F.we(),se:t=>{x=x||t}},[h]=y.Dn("async function(txid) {\n      try {\n        return await b.fetch(txid)\n      } catch (e) {\n        se(e)\n        throw e\n      }\n    }",c);Object.freeze(h);try{const i=!!w(()=>l(B.location)).Ye;let s=p;if(i&&(s=d(Object.assign(l(B.location),{Ke:t,Nr:o}))),v.push(B),S++,x)throw x;const c=B.pluck(t,h);if(!(c instanceof E.Promise||c instanceof P.Promise))throw new Error("pluck method must be async");const f=await c;if(!f||f.constructor!==B)throw new Error("Berry must be an instance of "+a(B));if(i){w(()=>{f.location=f.origin=s});const{xo:t}=n(24),i=t(f,o),c=u(i),a=new r.deps.Buffer(c,"utf8"),h=(await g(a)).toString("hex");if(e&&e!==h)throw new Error("Berry state mismatch");const p=d(Object.assign({_hash:h},l(s)));w(()=>{f.location=f.origin=p});const y="berry://"+s;await this.F._o().set(y,i)}if(x)throw x;return f}catch(t){throw x=x||t,t}finally{0==--S&&(v=[],x=null)}}po(t){this.bt.Et();const{Bt:e}=l(t),n=m.nn(e);if(!n)throw new ArgumentError("Native code not found: "+e);if(m.Dt(n).ye)throw new ArgumentError(a(n)+" cannot be a dependency");return n}}A.Br=function(B){const t=v.indexOf(B);if(-1===t)throw new Error("Must only create berry from its berry class");v.splice(t,1)},t.exports=A},function(t,e,n){const r=n(6),o=n(16),{B:i,Y:s,L:c,yt:a,F:h,tt:u}=n(0),{te:f,ot:l}=n(14),d=n(4),p=n(29),{Vr:w}=n(13),{ne:y,oe:b}=n(11),{g:g}=n(7),_=n(50),m=n(8).Ao,{so:E}=n(15),P=n(2),$=n(9),O=n(21),{Transaction:v,Script:S}=r,x="Publish",A=new _,I=new _;async function R(t){try{d.Lt&&d.Gt(x,"Publish",t.pr.Fn);const e=new Date,n=t.F,o=t.pr;t.Io()||t.Ro(!0);const i=new a("publish",n.bt);await C(t),i.Et();const c=await T(t);i.Et(),await j(t,i),i.Et(),k(t);const h=N(o),u=await U(t,i);i.Et();const f=await D(t,u),l=M(o,h),p=F(t,f,l,h),w=r.Transaction.FEE_PER_KB,y=L(t,p,c,w);await G(n,o,u,p,y,i),i.Et();const b=await I.jo(async()=>{const e=await W(y,t,w);i.Et();const n=await z(e,t,w);i.Et(),K(n,o,y);const r=await H(t,n,i);if("string"!=typeof r||64!==r.length)throw new Error("Invalid txid: "+s(r));return i.Et(),r});i.Et(),J(t,b),await q(t,u,b),i.Et(),(p.exec.some(t=>"DEPLOY"===t.op)||p.exec.some(t=>"UPGRADE"===t.op))&&n.vo.add(b),t.Co(),d.Lt&&d.Gt(x,"Publish (end): "+(new Date-e)+"ms")}catch(e){t.To(e)}}async function j(t,e){const n=await t.ko(),r=t.pr;for(const t of r.Hn){const e=r.Zn.get(t);if(!(e.wr.origin in n))continue;const o=n[e.wr.origin][1];if(e.wr.nonce<o)throw new Error("Time travel for "+s(t))}}async function C(t){const Creation=n(3),e=t.pr;async function r(){const n=[];for(let r=0;r<e.Vt.br;r++){const o=e.Vt._r()[r],i=void 0===t.No.get(o).wr.owner&&await t.F.Uo().nextOwner();n.push(i)}return n}function o(e){l(e,e=>{if(e instanceof Creation)return t.pr._read(e),!1})}d.Lt&&d.Gt(x,"Assign owners"),await A.jo(async()=>{const n=await r(),i=[],s=$.zt;try{$.zt=t.pr,t.pr.Xn=!1;for(const t of n){if(!t){i.push(t);continue}const e=f(t,m,t=>{if("function"!=typeof t)return;const e=P.Ze(t);return P.Dt(e).Ue(),e});i.push(e)}}finally{$.zt=s}o(i),t.Do(),i.forEach((n,r)=>{if(!n)return;const o=e.Vt._r()[r];t.No.get(o).wr.owner=n});const c=await r(),a=[];for(const t of c){if(!t){a.push(t);continue}const e=f(t,m,t=>{if("function"==typeof t)return P.Ze(t)});a.push(e)}a.forEach((n,r)=>{if(!n)return;const o=e.Vt._r()[r];t.No.get(o).wr.owner=n}),o(a),t.pr.ar()}),await t.Mo()}async function T(t){const e=c(t.F.we().network),n=[],r=$.zt;try{$.zt=t.pr,t.pr.Kn.hr(r=>{try{t.pr.ir(r);const o=t.No.get(r).wr.owner,i=b(o,!1,e).script();n.push(i)}finally{t.pr.sr()}}),t.pr.ar()}finally{$.zt=r}return await t.Mo(),n}function k(t){const e=t.pr;e.Kn.hr(e=>{const n=t.No.get(e).wr;n.satoshis=n.satoshis||0,g(()=>{u(e.owner)||(e.owner=n.owner),u(e.satoshis)||(e.satoshis=n.satoshis)})}),e.Wn.hr(t=>{g(()=>{i(null===t.owner),i(0===t.satoshis)})})}function N(t){const e=new O;for(const n of t.zn)e.lr(n);for(const n of t.Hn)e.lr(n);for(const n of t.Vt)e.lr(n);return e._r()}async function U(t,e){if(t.Fo)return t.Fo;const{Bo:r}=n(24),o=new Map,i=t.pr,s=[],c=new Map,a=new Map;i.Kn.hr((t,e)=>{s.push(t),c.set(t,e)}),i.Wn.hr((t,e)=>{s.push(t),a.set(t,e)});for(const n of s){const i=await r(n,t,c,a,e);o.set(n,i)}return t.Fo=o,o}async function D(t,e){if(t.Lo)return t.Lo;const{Go:r}=n(24),o=new Map,i=[];for(const[t,n]of e){if(o.has(t))continue;const e=await r(n).then(e=>o.set(t,e));i.push(e)}return await Promise.all(i),t.Lo=o,o}function M(t,e){const n=(new p).Jo(t=>{const n=e.indexOf(t);return i(n>=0),n});return t.Ln.map(t=>({op:t.op(),data:n.Wo(t.data())}))}function F(t,e,n,r){const o=t.pr,s=o.Kn._r().map(t=>e.get(t)),c=o.Wn._r().map(t=>e.get(t)),a=(new p).Jo(t=>{const e=r.indexOf(t);return i(e>=0),e}),h=o.Vt._r().map(e=>t.No.get(e).wr.owner).map(t=>a.Wo(t)),u=o.Hn._r().map(t=>o.Zn.get(t).wr.location),f={app:t.Yo,version:t.Nr,base:t.Vo.toString("hex"),vrun:t.Vo.outputs.length,in:o.zn.br,ref:u,out:s,del:c,cre:h,exec:n};return d.Lt&&d.Gt(x,"Metadata",JSON.stringify(f,0,2)),f}function L(t,e,n,o){d.Lt&&d.Gt(x,"Create partial tx");const i=new v(t.Vo.toString("hex")),s=r.deps.Buffer,a=s.from("run","utf8"),h=E(e.version),u=s.from(h,"hex"),f=s.from(e.app,"utf8"),l=Object.assign({},e);delete l.app,delete l.version,delete l.vrun,delete l.base;const p=s.from(JSON.stringify(l),"utf8"),g=S.buildSafeDataOut([a,u,f,p]),_=new v.Output({script:g,satoshis:0});i.addOutput(_);const m=c(t.F.we().network),P=t.pr;return P.zn.hr(t=>{const e=P.Zn.get(t),n=e.wr.location,{Ye:r,Ve:o}=y(n),s=e.wr.satoshis,c=e.wr.owner,a=b(c,!1,m).script(),h={txid:r,vout:o,script:S.fromHex(a),satoshis:s};i.from(h)}),P.Kn.hr((e,r)=>{const s=t.No.get(e),c=n[r].length/2,a=Math.max(s.wr.satoshis,w(c,o)),h=S.fromHex(n[r]);i.addOutput(new v.Output({script:h,satoshis:a})),r++}),i}async function G(t,e,r,o,i,s){if(t.zo){d.De&&d.Me(x,"Preverify");const c=new Date;try{const c=n(34),{Ko:a}=c,h="0000000000000000000000000000000000000000000000000000000000000000",u=!1,f=null,l=new a(e,r);await c(i,h,o,t,u,f,s,l)}catch(t){throw d._n&&d.bn(x,t),new Error("Pre-verification failed: "+t.message)}d.Lt&&d.Gt(x,"Preverify (end): "+(new Date-c)+"ms")}}function J(t,e){const Code=n(1),r=t.pr;r.Kn.hr((n,r)=>{const o=t.Vo.outputs.length+1+r,i=t.No.get(n),s=`${e}_o${o}`;i.wr.origin.startsWith("record://")&&(i.wr.origin=s),i.wr.location=s,g(()=>{n.origin.startsWith("record://")&&(n.origin=s),t.Ho(n)||(n.location=s)}),n instanceof Code&&P.Dt(n).ve(i.wr)}),r.Wn.hr((n,r)=>{const o=t.No.get(n),i=`${e}_d${r}`;o.wr.origin.startsWith("record://")&&(o.wr.origin=i),o.wr.location=i,g(()=>{n.origin.startsWith("record://")&&(n.origin=i),n.location=i}),n instanceof Code&&P.Dt(n).ve(o.wr)})}async function W(t,e,n){const o=r.deps.Buffer,i=Y(e.pr),s=await V(t,e.pr,i,n),c=i.map(t=>o.alloc(t.domain())),a=[...Array(i.length).keys()].filter(e=>!t.inputs[e].script.toBuffer().length);a.forEach(e=>t.inputs[e].setScript(c[e]));const h=t.toString("hex"),u=await e.F.qo().pay(h,s),f=new v(u);return a.forEach(t=>f.inputs[t].setScript("")),f}function Y(t){return t.zn._r().map(e=>t.Zn.get(e)).map(t=>t.wr.owner).map(t=>b(t))}async function V(t,e,n,o){const i=t.inputs,s=i.map(t=>t.prevTxId.toString("hex")),c=(await Promise.all(s.map(t=>h().we().fetch(t)))).map(t=>new r.Transaction(t)),a=i.map((t,e)=>c[e].outputs[t.outputIndex]),u=a.map(t=>t.script.toHex()),f=a.map(t=>t.satoshis);return u.map((t,e)=>({script:t,satoshis:f[e]}))}async function z(t,e,n){const o=Y(e.pr),i=await V(t),s=t.toString("hex"),c=await e.F.Uo().sign(s,i,o);return new v(c)}function K(t,e,n){e.zn.hr((n,r)=>{if(t.inputs[r].isFullySigned())return;const o=e.Zn.get(n),i=`${"origin: "+o.wr.origin}\n${"location: "+o.wr.location}\n${"owner: "+o.wr.owner}`,c=t.inputs[r].script.toBuffer().length?"Bad signature":"Missing signature";throw new Error(`${c} for ${s(n)}\n\n${i}`)});for(let e=0;e<n.inputs.length;e++)if(n.inputs[e].prevTxId.toString("hex")!==t.inputs[e].prevTxId.toString("hex")||n.inputs[e].outputIndex!==t.inputs[e].outputIndex)throw new Error(`Transaction input ${e} changed`);for(let e=0;e<n.outputs.length;e++)if(n.outputs[e].script.toHex()!==t.outputs[e].script.toHex())throw new Error(`Transaction output ${e} changed`)}async function H(t,e,r){let i=null;try{await t.F.qo().broadcast(e.toString("hex"))}catch(t){d._n&&d.bn(x,t.toString())}try{i=await t.F.we().broadcast(e.toString("hex"))}catch(i){throw await async function(t,e,r,i){const s=t.toString();let c="Broadcast failed: "+t.message;if(-1===s.indexOf("tx has no inputs")&&-1===s.indexOf("insufficient priority")||(c+="\n\nHint: Is the purse funded to pay for this transaction?"),-1!==s.indexOf("Missing inputs")||-1!==s.indexOf("txn-mempool-conflict"))for(const s of r.inputs)try{const r=s.prevTxId.toString("hex"),a=s.outputIndex,h=`${r}_o${a}`,u=await e.F.we().spends(r,a);if(!u)continue;let f="Payment";try{const t=new o(e.F,i),r=await t.jn(h);f=r instanceof n(1)?r.name:r.toString()}catch(t){}c=`${c}\n\n${f} was spent in another transaction\n`,c=`${c}\nLocation: ${h}`,c=`${c}\nSpending Tx: ${u}`}catch(t){}return new Error(c)}(i,t,e,r)}return i}async function q(t,e,n){const r=[],o=t.pr;o.Kn.hr((o,s)=>{const c=e.get(o);i(c);const a=t.Vo.outputs.length+1+s,h=`jig://${n}_o${a}`;r.push(t.F._o().set(h,c))}),o.Wn.hr((o,s)=>{const c=e.get(o);i(c);const a=`jig://${n}_d${s}`;r.push(t.F._o().set(a,c))}),await Promise.all(r)}R.Zo=j,R.Xo=C,R.Qo=T,R.ti=k,R.ei=N,R.ni=U,R.ri=D,R.oi=M,R.ii=F,R.si=L,R.zo=G,R.ci=I,R.ai=W,R.hi=z,R.ui=K,R.fi=H,R.li=J,R.di=q,t.exports=R},function(t,e,n){const{pi:r}=n(19),{ee:o,ne:i}=n(11),{B:s,Y:c,G:a,ht:h,tt:u}=n(0),{ot:f,te:l}=n(14),{NotImplementedError:NotImplementedError}=n(10),{g:d}=n(7),p=n(4),w=n(22),y="Action";class b{constructor(t){this.wi=t}toString(){return""+this.constructor.name}op(){throw new NotImplementedError}data(){throw new NotImplementedError}}class g extends b{constructor(){super(null),this.yi=[],this.bi=[]}toString(){return`Deploy (count: ${this.yi.length})`}op(){return"DEPLOY"}data(){s(this.yi.length===this.bi.length);const t=[];for(let e=0;e<this.yi.length;e++){const n=this.yi[e],r=this.bi[e];t.push(n),t.push(r)}return t}}class _ extends b{constructor(t,e,n){super(t),this.Ft=e,this.wr=n}toString(){return"Upgrade "+c(this.wi)}op(){return"UPGRADE"}data(){const t=[];return t.push(this.wi),t.push(this.Ft),t.push(this.wr),t}}class m extends b{constructor(t,e,n){super(t),this._t=e,this.gi=n}toString(){return`Call ${c(this.wi)} ${this._t}`}op(){return"CALL"}data(){const t=[];return t.push(this.wi),t.push(this._t),t.push(this.gi),t}}class E extends b{constructor(t,e,n){super(e),this._i=t,this.gi=n}toString(){return"New "+c(this.wi)}op(){return"NEW"}data(){const t=[];return t.push(this._i),t.push(this.gi),t}}function P(t,e){const r=n(2),o=n(9).zt,i=a(t);if(!i)return;if(P(i,e),r.Dt(i).Bt)return;const s=h(i,"sealed")?i.sealed:"owner";switch(s){case"owner":o.Vt.Yt(i)||o.Kt(i);break;case!0:throw new Error(`Cannot ${e}: ${c(i)} is sealed`);case!1:break;default:throw new Error("Invalid sealed option: "+s)}}function $(t){const Creation=n(3),e=n(9).zt;d(()=>f(t,t=>{if(t instanceof Creation)return e._read(t),!1}))}t.exports={It:b,mi:g,Ei:_,Pi:m,$i:E,Ue:function(t){const Code=n(1),e=n(9).zt;s(t.length),s(t.every(t=>t instanceof Code)),p.Lt&&p.Gt(y,"Deploy",t.map(t=>c(t)).join(", ")),e.Qe(()=>{t.forEach(t=>e.mr(t)),t.forEach(t=>P(t,"deploy")),t.forEach(t=>e.yr(t));const n=new g;for(const e of t){const t=e.toString(),r=d(()=>l(Object.assign({},e)));$(r),o.forEach(t=>delete r[t]),s(!r.presets),n.yi.push(t),n.bi.push(r)}e.cr(n)})},tn:function(t,e){const Code=n(1),r=n(9).zt;if(s(t instanceof Code),p.Lt&&p.Gt(y,"Upgrade",c(t)),u(i(d(()=>t.location)).ze))throw new Error("Cannot upgrade destroyed jig");r.Qe(()=>{P(t,"upgrade");const n=t.toString(),i=d(()=>l(Object.assign({},t)));$(i),o.forEach(t=>delete i[t]),s(!i.presets);const c=new _(t,n,i);r.vr(t,e),r.cr(c)})},Ht:function(t){const e=n(9),Code=n(1),Jig=n(5),r=e.zt;s(t instanceof Code||t instanceof Jig),p.De&&p.Me(y,"Destroy",c(t)),u(i(d(()=>t.location)).ze)||r.Qe(()=>{if(r.dr(t),!r.Xe.length){const e=new m(t,"destroy",[]);r.cr(e)}})},Kt:function(t){const e=n(9).zt,Code=n(1),Jig=n(5);if(s(t instanceof Code||t instanceof Jig),p.De&&p.Me(y,"Auth",c(t)),u(i(d(()=>t.location)).ze))throw new Error("Cannot auth destroyed jigs");e.Qe(()=>{if(e.Kt(t),!e.Xe.length){const n=new m(t,"auth",[]);e.cr(n)}})},Oi:function(t,e,r,o,i=!0){const s=n(9).zt;p.De&&p.Me(y,"Call",c(t),e),s.Qe(()=>{if($(r),s.ir(t),o(),s.sr(),!s.Xe.length&&i){const n=new m(t,e,r);s.cr(n)}})},Rn:function(t,e,o,i){const Jig=n(5),s=n(9).zt;p.De&&p.Me(y,"New",c(t)),s.Qe(()=>{let n=t;for(;n!==Jig;)s._read(n),n=Object.getPrototypeOf(n);const c=r(e,o);if($(c),s.mr(e),void 0!==e.init(...c))throw new Error("init must not return a value");if(i&&s.yr(e),w.Ce(e).je.vi.push("init"),!s.Xe.length){const n=new E(t,e,c);s.cr(n)}})},Jr:function(t,e,o){const Berry=n(12),i=n(9).zt;if(p.De&&p.Me(y,"Pluck",c(t)),i.Xn=!1,i.Qe(()=>{let n=t;for(;n!==Berry;)i._read(n),n=Object.getPrototypeOf(n);const s=r(e,o);if($(s),void 0!==e.init(...s))throw new Error("init must not return a value");w.Ce(e).je.vi.push("init")}),i.Ln.length)throw new Error("Not actions allowed during pluck");i.en()}}},function(t,e,n){const{Cn:r,g:o}=n(7),{B:i,Y:s,ht:c,ut:a,rt:h,it:u,j:f,C:l,k:d,N:p,U:w,D:y,M:b,at:g,Ot:_,H:m,q:E,tt:P,vt:$,Z:O}=n(0),{ne:v,oe:S,ie:x,Ur:A,Dr:I}=n(11),{te:R,ot:j,Qr:C}=n(14),T=n(8),k=T.P,N=T.$,U=n(22),{Qt:D}=n(32),M=n(23),F=n(2),L=()=>n(9).zt,G=()=>L().Xe;let J,W=null;class Y{constructor(t,e=new M){return i(!U.Si(t)),this.xi=new U(t,this),this.je=e,this.wi=e.wi||this.xi,e.wi||(this.Ai=new WeakMap),this.xi}Ii(t,e,r){return this.Ri()?Reflect.apply(t,e,r):this.ji(()=>{this.Ci();const c=this.je;c.Ti&&(e=void 0),this.ki()&&L()._read(this.wi);let a=U.Ce(e),h=a&&a.je,u=!a||!h.Ni||!c.Ui;c.Di&&u&&"function"==typeof e&&(e=F.Ze(e),a=U.Ce(e),h=a&&a.je,u=!a||!h.Ni||!c.Ui);const Berry=n(12);e instanceof Berry&&"init"===t.name&&(u=!1);const f=a&&a.je.vi;if(f&&f.includes(t.name))throw new Error(t.name+" disabled");if(c.Ui&&!a)throw new Error(`Cannot call ${t.name} on ${s(e)}`);if(u)return Reflect.apply(t,e,r);const l=!a.Mi();return L().Qe(()=>{G().length||(r=H(e,r)),G().length&&K(r),a.Fi(t.name,"call");const c=l?o(()=>R(r,k)):r;let h=null;const u=W;try{!l&&W||(W={Bi:new Set,yr:!1,wi:e});const f=()=>{const r=function(t,e){if(!t)return e;if(!(t instanceof n(3)))return null;const r=U.Si(e).name;if("function"!=typeof t[r])return null;if(t[r]===e)return e;const i=U.Ce(e).wi,s=o(()=>i.origin),c=o(()=>i.nonce),a=U.Ce(t).Li(r),h=o(()=>a.origin),u=o(()=>a.nonce);if(h===s){if(u<c)throw new Error("Method time travel");return t[r]}const f=L().Xe;if(!(f.length>=2&&f[f.length-2]===t))return null;let l=Object.getPrototypeOf(t);for(;l;){const t=g(l,r);if(t===e)return t;const n="function"==typeof l?l:l.constructor;if(t&&o(()=>n.origin===s))return o(()=>{if(n.nonce<c)throw new Error("Method time travel")}),t;l=Object.getPrototypeOf(l)}return null}(e,this.xi);if(!r)throw new Error(`Cannot call ${t.name} on ${s(e)}`);const i=U.Si(r),u=U.Ce(r).wi;if(this.ki()&&L()._read(u),h=Reflect.apply(i,e,c),h instanceof k.Promise||h instanceof N.Promise)throw new Error("async methods not supported");K(h),h=a.Gi(h,l),l&&a.Ji()},d=!a.je.Wi||!a.je.Wi.includes(t.name);if(n(18).Oi(e,t.name,r,f,d),l){const Creation=n(3);o(()=>j(U.Si(e),t=>{if(t instanceof Creation)return!1;i(!U.Si(t))}))}return h}finally{W=u}})})}Yi(t,e,n){return this.Ri()?Reflect.construct(t,e,n):this.ji(()=>(this.Ci(),this.ki()&&L()._read(this.wi),Reflect.construct(t,e,n)))}Vi(t,e,n){return this.Ri()?$(t,e,n):this.ji(()=>(this.Ci(),this.zi(e,n.value,"define"),z(n,!0),this.Ki()&&L().vr(this.wi),n.value=this.Hi(n.value),this.qi(e)&&(W.yr=!0),$(t,e,n)))}Zi(t,e){return this.Ri()?Reflect.deleteProperty(t,e):this.ji(()=>(this.Ci(),this.zi(e,void 0,"delete"),this.Ki()&&L().vr(this.wi),Reflect.deleteProperty(t,e)))}Dt(t,e,r){return this.Ri()?Reflect.get(t,e,r):this.ji(()=>{this.Ci();const i=e===Symbol.hasInstance&&t[Symbol.hasInstance]!==k.Function.prototype[Symbol.hasInstance]&&t[Symbol.hasInstance]!==N.Function.prototype[Symbol.hasInstance];if(this.Xi(e)&&!i)return s=e,o(()=>Object.getPrototypeOf(n(1).prototype)[s]);var s;if(this.Qi(e))return Reflect.get(t,e,r);if(this.ki()&&L()._read(this.wi),this.ts(e))return Reflect.get(t,e,r);this.es(e,"get");let c=Reflect.get(t,e,r);if(!c)return c;const a=this.Li(e);return a&&(c=U.Ce(a).ns(c)),c})}rs(t,e){return this.Ri()?Reflect.getOwnPropertyDescriptor(t,e):this.ji(()=>{if(this.Ci(),this.Qi(e))return;if(this.ki()&&L()._read(this.wi),this.ts(e))return Reflect.getOwnPropertyDescriptor(t,e);this.es(e,"get descriptor for");const n=Reflect.getOwnPropertyDescriptor(t,e);return n?(n.value=this.ns(n.value),n):n})}os(t){return this.Ri()?Reflect.getPrototypeOf(t):this.ji(()=>(this.Ci(),this.ki()&&L()._read(this.wi),Reflect.getPrototypeOf(t)))}Yt(t,e){return this.Ri()?Reflect.has(t,e):this.ji(()=>(this.Ci(),this.ki()&&L()._read(this.wi),!!this.ss(e)||(this.Fi(e,"check"),this.cs(e,"check"),Reflect.has(t,e))))}hs(t){return this.Ri()?Reflect.isExtensible(t):this.ji(()=>(this.Ci(),!0))}us(t){return this.Ri()?Reflect.ownKeys(t):this.ji(()=>{this.Ci(),this.ki()&&L()._read(this.wi);let e=Reflect.ownKeys(t);return e=e.sort(_),e=e.filter(t=>this.fs(t)),e})}ls(t){return this.Ri()?Reflect.preventExtensions(t):this.ji(()=>{throw this.Ci(),new Error("preventExtensions disabled")})}ds(t,e,n,r){return this.Ri()?(a(t,e,n),!0):this.ji(()=>(this.Ci(),r!==this.xi?(a(r,e,n),!0):(this.zi(e,n,"set"),this.Ki()&&L().vr(this.wi),n=this.Hi(n),this.qi(e)&&(W.yr=!0),o(()=>a(t,e,n)),!0)))}ps(t,e){return this.Ri()?Reflect.setPrototypeOf(t,e):this.ji(()=>{throw this.Ci(),new Error("setPrototypeOf disabled")})}ws(){if(!this.Ri())return this.ji(()=>{this.Ci(),this.ki()&&L()._read(this.wi)})}ys(t){return this.Ri()?t:this.ji(()=>(this.Ci(),this.ns(t)))}bs(t){return this.Ri()?t:this.ji(()=>(this.Ci(),K(t),t=this.Hi(t)))}gs(){if(!this.Ri())return this.ji(()=>{this.Ci(),this.ki()&&L()._read(this.wi)})}_s(){if(!this.Ri())return this.ji(()=>{this.Ci(),this.Ki()&&L().vr(this.wi),this.Es("update",s(this.wi))})}ji(t){const e=L();try{const n=t();if(e.bn)throw e.bn;return n}catch(t){throw e.Xe.length&&!e.bn&&(e.bn=t),t}}Ci(){const t=U.Si(this.wi);if(!c(t,"location"))return;const{bn:e,Oe:n}=v(t.location);if(e&&!n)throw new Error(e)}zi(t,e,n){if("__proto__"===t)throw new Error(n+" __proto__ disabled");if("symbol"==typeof t)throw new Error(`Cannot ${n} symbol property`);if(this.ss(t))throw new Error(`Cannot ${n} ${t}: reserved`);this.Ps(t,e,n),this.$s(t,e,n),this.Os(t,e,n),this.cs(t,n),this.Fi(t,n),this.Es(n,t),K(e)}Es(t,e){if(this.je.Gr)throw new Error(`Cannot ${t} ${e}: immutable`);if(this.vs(),L().Vn.Yt(this.wi))throw new Error(`Cannot ${t} ${e}: unbound`)}es(t,e){this.Ss(t),this.xs(t),this.Fi(t,e),this.cs(t,e)}ts(t){return"function"==typeof this.xi&&"prototype"===t||"constructor"===t||"symbol"==typeof t}Ss(t){if(this.As(t))try{const e=U.Si(this.xi);if("location"===t||"origin"===t||"nonce"===t){const n=Reflect.get(e,t),r=v("nonce"===t?e.location:n);if(P(r.Oe))throw new Error("Hint: Sync the jig to deploy it");if(P(r.bn))throw new Error("A previous error occurred\n\n"+r.bn);if(P(r.Bt))return;if(!P(r.Ye))throw new Error("Hint: Sync the jig to assign it in a transaction");if(P(r.Ke)&&!P(r._hash))throw new Error}}catch(e){throw new Error(`Cannot read ${t}${e.message?"\n\n"+e.message:""}`)}}xs(t){if(this.qi(t))try{const e=U.Si(this.xi);if("owner"===t||"satoshis"===t){const n=Reflect.get(e,t);if(void 0===n)throw new Error("Hint: Sync the jig to bind it in a transaction");const r=!0;"owner"===t&&S(n,r),"satoshis"===t&&x(n)}}catch(e){throw new Error(`Cannot read ${t}\n\n${e.message}`)}}$s(t,e,n){if(this.As(t))throw new Error(`Cannot ${n} ${t}`)}Os(t,e,n){if(this.qi(t)){if("delete"===n)throw new Error(`Cannot ${n} ${t}`);if(this.Is())throw new Error(`Cannot ${n} ${t}`);"owner"===t&&S(e,!1),"satoshis"===t&&x(e)}}Ps(t,e,n){this.je.Rs&&("sealed"===t&&"delete"!==n&&F.un(e),"upgradable"===t&&"delete"!==n&&F.fn(e),"interactive"===t&&"delete"!==n&&F.ln(e))}cs(t,e){if(!this.je.js)return;const n=()=>{const n=`Cannot ${e} ${"symbol"==typeof t?t.toString():t}: reserved`;throw new Error(n)};f.includes(t)&&n(),this.je.Cs&&d.includes(t)&&n(),this.je.Rs&&l.includes(t)&&n(),this.je.Ts&&p.includes(t)&&n()}Fi(t,e){const n="call"===e,r=n?"method":"property";if(!this.fs(t,n))throw new Error(`Cannot ${e} private ${r} ${t}`)}fs(t,e=!1){if(!this.je.ks)return!0;if("string"!=typeof t||!t.startsWith("_"))return!0;if("__proto__"===t)return!0;const Jig=n(5),Berry=n(12),r=G();if(!r.length)return!e;const o=r[r.length-1];return"function"==typeof this.wi?o===this.wi||o.constructor===this.wi:(i(this.wi instanceof Jig||this.wi instanceof Berry),o.constructor===this.wi.constructor||o===this.wi.constructor)}vs(){if(this.je.Ns&&!this.Mi())throw new Error(`Attempt to update ${s(this.wi)} outside of a method`)}ns(t){return V(t)||t instanceof n(3)||this.Us(t)?t:this.Ds(t)}Gi(t,e,n=new Set){if(V(t))return t;if(n.has(t))return t;if(U.Si(t))return t;const r=this.Us(t);if(!r){n.add(t);const r=t=>this.Gi(t,e,n);return o(()=>function(t,e){if(Object.keys(t).forEach(n=>{a(t,n,e(t[n]))}),m(t)){const n=Array.from(t.values());t.clear(),n.forEach(n=>t.add(e(n)))}if(E(t)){const n=Array.from(t.entries());t.clear(),n.forEach(([n,r])=>t.set(e(n),e(r)))}}(t,r)),t}return!e&&r?t:this.Ds(t)}Ds(t){if(V(t))return t;if(U.Si(t))return t;const e=this.Ms();if(e.has(t))return e.get(t);const n="function"==typeof t,r=M.qe(this.wi,n),o=new Y(t,r);return e.set(t,o),o}Hi(t){if(V(t))return t;if(t instanceof n(3))return t;const e=U.Ce(t),r=U.Si(t)||t;return e?e.je.wi===this.wi?r:R(e.xi,k):(G().length&&W.Bi&&W.Bi.add(r),r)}Li(t){let e=this.wi,r=this.xi;for(;!c(r,t);)r=Object.getPrototypeOf(r),i(r),e="object"==typeof r?r.constructor:r,e instanceof n(3)||(e=null),e&&this.ki()&&U.Ce(e).ki()&&L()._read(e);return e}Ji(){i(W),C(W.Bi,(t,e)=>{if(!u(t))throw new Error("Not serializable: "+s(t));if(V(t))return;if(t instanceof n(3))return void e(!1);!function(t){o(()=>{if(Object.getOwnPropertySymbols(t).length)throw new Error("Symbol properties not supported");const e=[];(t instanceof k.Array||t instanceof N.Array)&&e.push("length");const n=!O(t);Object.getOwnPropertyNames(t).filter(t=>!e.includes(t)).map(e=>Object.getOwnPropertyDescriptor(t,e)).forEach(t=>z(t,n))})}(t);const r=U.Ce(t);if(!r)return void e(!0);const i=U.Si(t);return e(!1),r.je.wi===this.wi?i:R(r.xi,k)}),this.Is()&&(W.yr=!0),W.yr&&L().yr(this.wi)}Us(t){if(!W)return!1;if(U.Si(t))return!1;const e=L().Xe;if(!e.length||e[e.length-1]!==this.wi)return!1;if(W.Bi.has(t))return!0;let n=!1;return j(W.Bi,e=>!n&&!U.Si(e)&&(e===t?(n=!0,!1):void 0)),n&&W.Bi.add(t),n}Ri(){return this.je.Cn&&r()}Xi(t){return this.je.Rs&&function(){if(!J){const t=o(()=>Object.getPrototypeOf(n(1).prototype));J=Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}return J}().includes(t)}ss(t){return this.Fs(t)||this.Bs(t)||this.Ls(t)}Fs(t){return this.je.Rs&&w.includes(t)}Bs(t){return this.je.Cs&&y.includes(t)}Ls(t){return this.je.Ts&&b.includes(t)}Qi(t){return this.Fs(t)&&l.includes(t)||this.Bs(t)&&d.includes(t)||this.Ls(t)&&p.includes(t)}ki(){return this.je.Gs&&G().length}Ki(){return this.je.Js&&G().length}As(t){return this.je.Ws&&A.includes(t)}qi(t){return this.je.Ys&&I.includes(t)}Mi(){const t=G();return t.length&&t[t.length-1]===this.wi}Ms(){return U.Ce(this.wi).Ai}Is(){const t=U.Si(this.wi);return null===t.owner&&0===t.satoshis}Ar(){return W&&W.wi===this.wi&&W.yr}}function V(t){return["undefined","boolean","number","string","symbol"].includes(typeof t)||null===t}function z(t,e=!0){if(!("value"in t))throw new Error("Descriptor must have a value");if("get"in t)throw new Error("Getters are not supported");if("set"in t)throw new Error("Getters are not supported");if(e&&!t.configurable)throw new Error("Descriptor must be configurable");if(!t.writable)throw new Error("Descriptor must be writable");if(!t.enumerable)throw new Error("Descriptor must be enumerable")}function K(t){if(!h(t))throw new Error("Not serializable: "+s(t))}function H(t,e){const Code=n(1);t instanceof Code&&F.Dt(t).Ue();const Creation=n(3),r=R(e,k,t=>{if("function"==typeof t&&!(t instanceof Creation)){const e=F.Ze(t);return F.Dt(e).Ue(),e}t instanceof Code&&F.Dt(t).Ue()});return D([t,r],[t]),r}Y.pi=H,t.exports=Y},function(t,e,n){const r=n(4),{RequestError:RequestError,TimeoutError:TimeoutError}=n(10),{wt:o}=n(0),i="Request",s={},c={};async function a(t,e={}){const n=`${(e=Object.assign({},a.defaults,e)).method} ${t}`,o="GET"===e.method&&e.dedup?f:(t,e,n)=>n(),d="GET"===e.method&&e.cache?l:(t,e,n,r)=>r();return await o(s,n,async()=>await d(c,n,e.cache,async()=>await(async t=>e.response?e.response(await t()):await t())(async()=>await u(e.retries,n,async()=>await async function(){r.De&&r.Me(i,n);let o=null;try{o=await h(t,e.method,e.body,e.timeout,e.headers)}catch(n){throw n.message+=`\n\n${e.method} ${t}`,n}const{data:s,status:c,statusText:a}=o;if(c>=200&&c<300)return s;const u=s.message?s.message.message||s.message:s,f=s.name&&u?`${s.name}: ${u}`:s.name||u;throw new RequestError(f,c,a,e.method,t)}()))))}let h=null;async function u(t,e,n){for(let o=0;o<=t;o++)try{return await n()}catch(n){if(o===t)throw n;r.gn&&r.yn(n.toString()),r.De&&r.Me(i,e,`(Retry ${o+1}/${t})`)}}async function f(t,e,n){const r=t[e];if(r)return new Promise((t,e)=>r.push({resolve:t,reject:e}));const o=t[e]=[];try{const r=await n();return o.forEach(t=>t.resolve(r)),r}catch(t){throw o.forEach(e=>e.reject(t)),t}finally{delete t[e]}}async function l(t,e,n,r){const o=Date.now();for(const e of Object.keys(t))o>t[e].expires&&delete t[e];const i=t[e];if(i&&o<i.expires){if(i.error)throw i.error;return i.result}if(!n)return await r();try{const i=await r();return t[e]={expires:o+n,result:i},i}catch(r){throw t[e]={expires:o+n,error:r},r}}h=async function(t,e,r,i,s){return new Promise((c,a)=>{const h=t.startsWith("http://")?n(64):n(65),u=n(66);s.accept="application/json",s["accept-encoding"]="gzip",r&&(s["content-type"]="application/json");const f={method:e,headers:s,timeout:o(i,"timeout")};function l(t,e){const n=t.headers["content-type"];n&&n.includes("application/json")&&e&&(e=JSON.parse(e)),c({data:e,status:t.statusCode,statusText:t.statusMessage})}const d=h.request(t,f,(function(t){let e=Buffer.alloc(0);t.on("data",t=>{e=Buffer.concat([e,t])}),t.on("end",()=>{"gzip"===t.headers["content-encoding"]?u.gunzip(e,(function(e,n){if(e)return a(e);l(t,n.toString())})):l(t,e.toString())})}));r&&d.write(JSON.stringify(r)),d.on("error",t=>a(t)),d.on("timeout",()=>{d.abort(),a(new TimeoutError(`Request timed out after ${i}ms`))}),d.end()})},a.defaults={},a.defaults.method="GET",a.defaults.body=void 0,a.defaults.headers={},a.defaults.timeout=3e4,a.defaults.retries=2,a.defaults.dedup=!0,a.defaults.cache=0,a.Vs=u,a.zs=f,a.Ks=l,t.exports=a},function(t,e,n){const{g:r}=n(7),{B:o,Y:i}=n(0);class s{constructor(){this.Hs=new Set,this.qs=new Map,this.Zs=null}lr(t){if(this.Hs.has(t))return;const Creation=n(3);o(t instanceof Creation);const e=r(()=>t.origin);if(e.startsWith("error://")||e.startsWith("record://"))return this.Hs.add(t),void(this.Zs=null);const s=this.qs.get(e);if(s){const e=r(()=>t.location),n=r(()=>s.location);if(e!==n){const r=`${i(t)}: ${e}`,o=`${i(s)}: ${n}`;throw new Error(`Inconsistent worldview\n\n${r}\n${o}`)}}else this.Hs.add(t),this.qs.set(e,t),this.Zs=null}dr(t){if(this.Hs.has(t)){const e=r(()=>t.origin);this.qs.delete(e),this.Hs.delete(t),this.Zs=null}const Creation=n(3);o(t instanceof Creation);const e=r(()=>t.origin);if(e.startsWith("error://")||e.startsWith("record://"))return;const s=this.qs.get(e);if(!s)return;const c=r(()=>t.location),a=r(()=>s.location);if(c!==a){const e=`${i(t)}: ${c}`,n=`${i(s)}: ${a}`;throw new Error(`Inconsistent worldview\n\n${e}\n${n}`)}this.Hs.delete(s),this.qs.delete(e),this.Zs=null}Yt(t){if(this.Hs.has(t))return!0;const Creation=n(3);if(!(t instanceof Creation))return!1;const e=r(()=>t.origin);if(e.startsWith("error://")||e.startsWith("record://"))return!1;const o=this.qs.get(e);if(!o)return!1;const s=r(()=>t.location),c=r(()=>o.location);if(s!==c){const e=`${i(t)}: ${s}`,n=`${i(o)}: ${c}`;throw new Error(`Inconsistent worldview\n\n${e}\n${n}`)}return!0}Dt(t){if(this.Hs.has(t))return t;const Creation=n(3);if(!(t instanceof Creation))return;const e=r(()=>t.origin);if(e.startsWith("error://")||e.startsWith("record://"))return;const o=this.qs.get(e);if(!o)return;const s=r(()=>t.location),c=r(()=>o.location);if(s!==c){const e=`${i(t)}: ${s}`,n=`${i(o)}: ${c}`;throw new Error(`Inconsistent worldview\n\n${e}\n${n}`)}return o}hr(t){let e=0;for(const n of this.Hs)t(n,e++)}_r(){return this.Zs=this.Zs||Array.from(this.Hs),this.Zs}get br(){return this.Hs.size}[Symbol.iterator](){return this.Hs[Symbol.iterator]()}static We(t,e){const Creation=n(3);if(!(t instanceof Creation))return!1;if(!(e instanceof Creation))return!1;if(t===e)return!0;const{ne:o}=n(11);return r(()=>{if(o(t.origin).bn)return!1;if(o(e.origin).bn)return!1;if(t.origin!==e.origin)return!1;if(t.location!==e.location){const n=`${i(t)}: ${t.location}`,r=`${i(e)}: ${e.location}`;throw new Error(`Inconsistent worldview\n\n${n}\n${r}`)}return!0})}}t.exports=s},function(t,e,n){const{H:r,q:o,Z:i,lt:s,dt:c,B:a}=n(0),h=n(8),u=h.P,f=new WeakMap,l=new WeakMap,d=new WeakMap,p=new WeakMap,w=s(Set.prototype),y=s(Map.prototype),b=s(Uint8Array.prototype).concat(s(Object.getPrototypeOf(Uint8Array.prototype))),g=c(Set.prototype),_=c(Map.prototype),m=c(Uint8Array.prototype).concat(c(Object.getPrototypeOf(Uint8Array.prototype))),E=["add","clear","copyWithin","delete","fill","reverse","set","sort"],P=["entries","every","filter","find","findIndex","forEach","get","has","includes","indexOf","join","keys","lastIndexOf","map","reduce","reduceRight","slice","some","subarray","toLocaleString","toString","values",Symbol.iterator];class ${constructor(t,e){const n=new u.Proxy(t,this);return f.set(n,t),l.set(t,e),l.set(n,e),d.set(n,this),this.Xs=e,this.Qs=t,this.tc=r(t),this.ec=o(t),this.nc=i(t),n}apply(t,e,n){return this.Xs.Ii?this.Xs.Ii(this.Qs,e,n):Reflect.apply(this.Qs,e,n)}construct(t,e,n){return this.Xs.Yi?this.Xs.Yi(this.Qs,e,n):Reflect.construct(this.Qs,e,n)}defineProperty(t,e,n){return this.Xs.Vi?this.Xs.Vi(this.Qs,e,n):Reflect.defineProperty(this.Qs,e,n)}deleteProperty(t,e){return this.Xs.Zi?this.Xs.Zi(this.Qs,e):Reflect.deleteProperty(this.Qs,e)}getOwnPropertyDescriptor(t,e){return this.Xs.rs?this.Xs.rs(this.Qs,e):Reflect.getOwnPropertyDescriptor(this.Qs,e)}getPrototypeOf(t){return this.Xs.os?this.Xs.os(this.Qs):Reflect.getPrototypeOf(this.Qs)}has(t,e){return this.Xs.Yt?this.Xs.Yt(this.Qs,e):Reflect.has(this.Qs,e)}isExtensible(t){return this.Xs.hs?this.Xs.hs(this.Qs):Reflect.isExtensible(this.Qs)}ownKeys(t){return this.Xs.us?this.Xs.us(this.Qs):Reflect.ownKeys(this.Qs)}preventExtensions(t){return this.Xs.ls?this.Xs.ls(this.Qs):Reflect.preventExtensions(this.Qs)}set(t,e,n,r){return this.Xs.ds?this.Xs.ds(this.Qs,e,n,r):Reflect.set(this.Qs,e,n,r)}setPrototypeOf(t,e){return this.Xs.ps?this.Xs.ps(this.Qs,e):Reflect.setPrototypeOf(this.Qs,e)}get(t,e,n){if(this.tc&&w.includes(e)||this.ec&&y.includes(e)||this.nc&&b.includes(e))return this.Xs.ws&&this.Xs.ws(),Reflect.get(this.Qs,e,this.Qs);if(this.tc&&g.includes(e)||this.ec&&_.includes(e)||this.nc&&m.includes(e)){const t=Reflect.get(this.Qs,e,n);if(this.Xs.ws&&this.Xs.ws(),p.has(t))return p.get(t);const r=new O(this.tc,this.ec,this.nc,e),o=new Proxy(t,r);return p.set(t,o),o}return this.Xs.Dt?this.Xs.Dt(this.Qs,e,n):Reflect.get(this.Qs,e,n)}static Ce(t){return l.get(t)}static Si(t){return f.get(t)}static rc(t,e){const n=f.get(t),r=l.get(t),o=d.get(t);a(n),o.Qs=e,l.delete(n),l.set(e,r),f.set(t,e)}}class O{constructor(t,e,n,r){this.tc=t,this.ec=e,this.Z=n,this.oc=r,this._read=P.includes(r),this.vr=E.includes(r),this.ic=t&&["add"].includes(r)||e&&["set"].includes(r)||n&&["copyWithin","fill","reverse","sort"].includes(r),this.sc=t&&["entries","values",Symbol.iterator].includes(r)||e&&["entries","keys","values",Symbol.iterator].includes(r),this.cc=this.sc&&"entries"===r,this.ac=e&&"get"===r,this.hc=t&&["add","delete","has"].includes(r)||e&&["delete","get","has","set"].includes(r),this.uc=e&&"set"===r,this.fc=t&&"forEach"===r||e&&"forEach"===r}apply(t,e,n){const r=$.Ce(e);r&&(r.gs&&this._read&&r.gs(),r._s&&this.vr&&r._s()),this.fc&&(n[0]=t=>r&&r.ys&&t?r.ys(t):t),this.hc&&n[0]&&r&&r.bs&&(n[0]=r.bs(n[0])),this.uc&&n[1]&&r&&r.bs&&(n[1]=r.bs(n[1]));const o=$.Si(e)||e,i=Reflect.apply(t,o,n);return this.ic?e:this.ac?r&&r.ys&&i?r.ys(i):i:this.sc?new S(i,r,this.cc):i}}class v{constructor(t,e,n){this.lc=t,this.Xs=e,this.dc=n}next(){const t=this.lc.next(),e={};if(e.done=t.done,e.value=t.value,this.Xs&&this.Xs.ys)if(this.dc&&e.value){const t=e.value[0]?this.Xs.ys(e.value[0]):e.value[0],n=e.value[1]?this.Xs.ys(e.value[1]):e.value[1];e.value=[t,n]}else e.value=e.value?this.Xs.ys(e.value):e.value;return e}[Symbol.iterator](){return this}}const S=h.ke(v,{},!0,!1)[0];t.exports=$},function(t,e,n){const{B:r}=n(0),o=n(22),{ro:i}=n(15);class s{constructor(){this.wi=void 0,this.Cn=!1,this.Ws=!1,this.Ys=!1,this.js=!1,this.Rs=!1,this.Cs=!1,this.Ts=!1,this.ks=!1,this.Gr=!1,this.Gs=!1,this.Js=!1,this.Ui=!1,this.Ni=!1,this.Ns=!1,this.Ti=!1,this.Wi=[],this.vi=[],this.Di=!1,this.Nr=i}static Ie(){const t=new s;return t.wi=void 0,t.Cn=!0,t.Ws=!0,t.Ys=!0,t.js=!0,t.Rs=!0,t.Cs=!1,t.Ts=!1,t.ks=!0,t.Gr=!1,t.Gs=!0,t.Js=!0,t.Ui=!0,t.Ni=!0,t.Ns=!0,t.Ti=!1,t.vi=[],t.Wi=[],t.Di=!0,t}static Re(t){const e=new s;return e.wi=void 0,e.Cn=!0,e.Ws=!0,e.Ys=!0,e.js=!0,e.Rs=!0,e.Cs=!1,e.Ts=!1,e.ks=!1,e.Gr=!0,e.Gs=!0,e.Js=!1,e.Ui=!1,e.Ni=!1,e.Ns=!1,e.Ti=!t,e.vi=[],e.Wi=[],e.Di=!1,e}static Ne(){const t=new s;return t.wi=void 0,t.Cn=!0,t.Ws=!0,t.Ys=!0,t.js=!1,t.Rs=!0,t.Cs=!1,t.Ts=!1,t.ks=!1,t.Gr=!0,t.Gs=!1,t.Js=!1,t.Ui=!1,t.Ni=!1,t.Ns=!0,t.Ti=!1,t.vi=[],t.Wi=[],t.Di=!1,t}static An(t){const e=new s;return e.wi=void 0,e.Cn=!0,e.Ws=!0,e.Ys=!0,e.js=!0,e.Rs=!1,e.Cs=!0,e.Ts=!1,e.ks=!0,e.Gr=!1,e.Gs=!0,e.Js=!0,e.Ui=!0,e.Ni=!0,e.Ns=!0,e.Ti=!1,e.vi=t?["init"]:[],e.Wi=["init"],e.Di=!1,e}static Lr(t){const e=new s;return e.wi=void 0,e.Cn=!0,e.Ws=!0,e.Ys=!0,e.js=!0,e.Rs=!1,e.Cs=!1,e.Ts=!0,e.ks=!1,e.Gr=!0,e.Gs=!0,e.Js=!1,e.Ui=!1,e.Ni=!1,e.Ns=!1,e.Ti=!1,e.vi=t?["init"]:[],e.Wi=["init"],e.Di=!1,e}static qe(t,e){const n=o.Ce(t);r(n);const i=n.je,c=new s;return c.wi=t,c.Cn=i.Cn,c.Ws=!1,c.Ys=!1,c.js=!1,c.Rs=!1,c.Cs=!1,c.Ts=!1,c.ks=i.ks,c.Gr=i.Gr||e,c.Gs=i.Gs,c.Js=i.Js,c.Ui=i.Ui,c.Ni=!1,c.Ns=i.Ns,c.Ti=i.Ti,c.vi=[],c.Wi=[],c.Di=i.Di,c}}t.exports=s},function(t,e,n){const r=n(6),o=n(4),{F:i,B:s,J:c,Y:a,ut:h,Pt:u,tt:f,A:l,R:d}=n(0),{ne:p,Mn:w}=n(11),{g:y}=n(7),{qr:b}=n(13),g=n(2),_=n(19),m=n(23),E=n(29),P=n(8),{co:$,io:O}=n(15),{TrustError:TrustError}=n(10),v="State";class S{constructor(t,e){s(e instanceof Promise),this.Eo=t,this.mo=e}}t.exports={Bo:async function(t,e,n,r,i){o.Lt&&o.Gt(v,"Capture",a(t));const c=e.pr,h=e.No.get(t);s(h);const u=await e.ko(i);i.Et();const l=(new E).Jo(t=>{const o=n.get(t);if(f(o))return"_o"+(e.Vo.outputs.length+1+o);const i=r.get(t);if(f(i))return"_d"+i;const a=c.Hn.Dt(t);if(a)return c.Zn.get(a).wr.location;const h=y(()=>t.origin);if(h.startsWith("native://"))return h;const l=u[h]&&u[h][0];return s(l),l}),d={};h.wc&&(d.cls=l.Wo(h.wc)),d.kind=h.yc;const p=Object.assign({},h.wr),w=n.get(t),b=r.get(t),g=f(w)?"_o"+(e.Vo.outputs.length+1+w):"_d"+b;return p.location=g,s(!p.origin.startsWith("record://")||p.origin.startsWith("record://"+c.Fn)),p.origin.startsWith("record://"+c.Fn)&&(p.origin=g),d.props=l.Wo(p),h.Ft&&(d.src=h.Ft),d.version=$(e.Nr),d},xo:function(t,e){const n=(new E).Jo(t=>{const e=y(()=>t.location),n=p(e);return s(f(n.Ye)&&!f(n.pr)&&!f(n.bn)),e}),r={};r.cls=n.Wo(t.constructor),r.kind="berry";const o=y(()=>Object.assign({},t));return r.props=n.Wo(o),r.version=$(e),r},bo:async function(t,e,s,a){const f=n(16);a=a||new f(i()),o.De&&o.Me(v,"Recreate",t),O(e.version);let $=null;if("berry"===e.kind||s&&!a.F.vo.has("cache")){const n=u(e),o=new r.deps.Buffer(n,"utf8");if($=(await b(o)).toString("hex"),s&&$!==s)throw new Error("State hash mismatch for "+t)}const x=new Map,A=(new E).gc().bc(t=>(x.set(t,null),(t=>{class e{}return e.location=t,e})(t))),I=A._c(e.props);switch(e.cls&&A._c(e.cls),e.kind){case"code":{const n=t.split("_")[0];return async function(t,e,n,r,o){const i={},s=e.origin.startsWith("_")?r:e.origin.slice(0,64),a=o.F;try{if(!await a.mc(s,"cache"))throw new TrustError(s,"cache")}catch(t){if(!await a.mc(r,"cache"))throw new TrustError(r,"cache")}const u=c(t.src);if(u){const t=e.deps[u].location,s=w(Object.assign({Ye:r},p(t))),c=await o.jn(s,void 0,!0);n.set(t,c),i[u]=c}const f=g.Zt(),l=P.Dn(t.src,i)[0],[d,b]=g.an(f,l);g.Dt(f).be(d,!1);const m=(async()=>{for(const t of n.keys()){if(n.get(t))continue;const e=w(Object.assign({Ye:r},p(t))),i=await o.jn(e,void 0,!0);n.set(t,i)}const i=(new E).gc().bc((function(t){const e=n.get(t),o=w(Object.assign({Ye:r},p(t)));if(!e)throw new Error("Jig not loaded: "+o);return e}))._c(t.props);y(()=>{Object.keys(f).forEach(t=>{delete f[t]}),Object.keys(i).forEach(t=>h(f,t,i[t]))}),y(()=>{f.location=w(Object.assign({Ye:r},p(f.location))),f.origin=w(Object.assign({Ye:r},p(f.origin)))}),y(()=>{const t=g.hn(f,b,f.deps);h(f,"deps",t),Object.keys(i.deps||{}).forEach(t=>{f.deps[t]=i.deps[t]})}),o.F.ur("load",f)})();return new S(f,m)}(e,I,x,n,a)}case"jig":{const n=t.split("_")[0];return async function(t,e,n,r,o){const s=m.An(!0),c=new _(e,s);l.add(c);const u=async function(){for(const t of n.keys()){if(n.get(t))continue;const e=w(Object.assign({Ye:r},p(t))),i=await o.jn(e,void 0,!0);n.set(t,i)}const e=n.get(t.cls.$jig);y(()=>Object.setPrototypeOf(c,e.prototype));const s=(new E).gc().bc((function(t){const e=n.get(t),o=w(Object.assign({Ye:r},p(t)));if(!e)throw new Error("Jig not loaded: "+o);return e}))._c(t.props);y(()=>{Object.keys(s).forEach(t=>{h(c,t,s[t])})}),y(()=>{c.location=w(Object.assign({Ye:r},p(c.location))),c.origin=w(Object.assign({Ye:r},p(c.origin)))}),o.F.ur("load",c)}();return new S(c,u)}(e,I,x,n,a)}case"berry":return async function(t,e,n,r,o){const s=m.Lr(!0),c=new _(e,s);d.add(c);const u=async function(){for(const t of n.keys()){if(n.get(t))continue;const e=w(Object.assign({_hash:r},p(t))),i=await o.jn(e,void 0,!0);n.set(t,i)}const B=n.get(t.cls.$jig);y(()=>Object.setPrototypeOf(c,B.prototype));const i=(new E).gc().bc((function(t){const e=n.get(t),o=w(Object.assign({_hash:r},p(t)));if(!e)throw new Error("Jig not loaded: "+o);return e}))._c(t.props);y(()=>{Object.keys(i).forEach(t=>{h(c,t,i[t])})}),y(()=>{c.location=w(Object.assign({_hash:r},p(c.location))),c.origin=w(Object.assign({_hash:r},p(c.origin)))}),o.F.ur("load",c)}();return new S(c,u)}(e,I,x,$,a);default:throw new Error("Unknown jig kind: "+e.kind)}},Go:async function(t){const e=u(t),n=r.deps.Buffer.from(e,"utf8");return(await b(n)).toString("hex")}}},function(t,e,n){const r=n(2);class Hex{static stringToBytes(t){if("string"!=typeof t||t.length%2!=0)throw new Error("Bad hex: "+t);t=t.toLowerCase();const e="0123456789abcdef".split(""),n=[];for(let r=0;r<t.length;r+=2){const o=e.indexOf(t[r]),i=e.indexOf(t[r+1]);if(-1===o||-1===i)throw new Error("Bad hex: "+t);n.push(16*o+i)}return n}static bytesToString(t){if(!Array.isArray(t))throw new Error("Bad bytes: "+t);return t.forEach(t=>{if(!(t=>Number.isInteger(t)&&t>=0&&t<256)(t))throw new Error("Bad digit: "+t)}),t.map(t=>t.toString("16")).map(t=>1===t.length?"0"+t:t).join("")}}Hex.toString(),Hex.presets={},Hex.presets.main={},Hex.presets.test={},Hex.presets.main.location="727e7b423b7ee40c0b5be87fba7fa5673ea2d20a74259040a7295d9c32a90011_o1",Hex.presets.main.origin="727e7b423b7ee40c0b5be87fba7fa5673ea2d20a74259040a7295d9c32a90011_o1",Hex.presets.main.nonce=1,Hex.presets.main.owner="1PytriYokKN3GpKw84L4vvrGBwUvTYzCpx",Hex.presets.main.satoshis=0,Hex.presets.test.location="1f0abf8d94477b1cb57629d861376616f6e1d7b78aba23a19da3e6169caf489e_o2",Hex.presets.test.origin="1f0abf8d94477b1cb57629d861376616f6e1d7b78aba23a19da3e6169caf489e_o2",Hex.presets.test.nonce=1,Hex.presets.test.owner="n3CiECgxW1pB1rGbYiX67e4U7AnS3MpJeE",Hex.presets.test.satoshis=0,t.exports=r.Ae(Hex)},function(t,e,n){const{NotImplementedError:NotImplementedError}=n(10);class r{get network(){throw new NotImplementedError}async broadcast(t){throw new NotImplementedError}async fetch(t){throw new NotImplementedError}async utxos(t){throw new NotImplementedError}async time(t){throw new NotImplementedError}async spends(t,e){throw new NotImplementedError}static[Symbol.hasInstance](t){return("object"==typeof t||"function"==typeof t)&&!!t&&"string"==typeof t.network&&"function"==typeof t.broadcast&&"function"==typeof t.fetch&&"function"==typeof t.utxos&&"function"==typeof t.time&&"function"==typeof t.spends}}class o{async pay(t,e){throw new NotImplementedError}async broadcast(t){throw new NotImplementedError}static[Symbol.hasInstance](t){return("object"==typeof t||"function"==typeof t)&&!!t&&"function"==typeof t.pay}}class i{async sign(t,e,n){throw new NotImplementedError}async nextOwner(){throw new NotImplementedError}static[Symbol.hasInstance](t){return!("object"!=typeof t&&"function"!=typeof t||!t||"function"!=typeof t.sign||"function"!=typeof t.nextOwner&&"function"!=typeof t.owner)}}class s{info(...t){}debug(...t){}warn(...t){}error(...t){}static[Symbol.hasInstance](t){return!(Array.isArray(t)||"object"!=typeof t&&"function"!=typeof t||!t)}}class c{async get(t){throw new NotImplementedError}async set(t,e){throw new NotImplementedError}static[Symbol.hasInstance](t){return("object"==typeof t||"function"==typeof t)&&!!t&&"function"==typeof t.get&&"function"==typeof t.set}}class a{script(){throw new NotImplementedError}domain(){throw new NotImplementedError}static[Symbol.hasInstance](t){if("object"!=typeof t||!t)return!1;if("function"!=typeof t.constructor.prototype.script)return!1;if(Object.getOwnPropertyNames(t).includes("script"))return!1;const e=t.script();if(e.length%2!=0)return!1;const n="01234567890abcdefABCDEF".split("");return!e.split("").some(t=>!n.includes(t))&&!("function"!=typeof t.constructor.prototype.domain||Object.getOwnPropertyNames(t).includes("domain")||!Number.isSafeInteger(t.domain())||t.domain()<0)}}t.exports={Blockchain:r,Purse:o,Logger:s,Cache:c,Lock:a,Owner:i}},function(t,e,n){const r=/^\s*function\s+[a-zA-Z0-9$_]+\s*\(.*?{(.*)}\s*$/s,o=/^\s*class\s+[a-zA-Z0-9$_]+\s*{(.*)}\s*$/s,i=/^\s*class\s+[a-zA-Z0-9$_]+\s+extends\s+[a-zA-Z0-9$_]+\s*{(.*)}\s*$/s,s=/^(function\s+)([a-zA-Z0-9$_]+)(\s*)\((.*)$/s,c=/^(class\s+)([a-zA-Z0-9$_]+)(\s*){(.*)$/s,a=/^(class\s+)([a-zA-Z0-9$_]+)(\s*)extends(.*)$/s,h=/^\s*class\s+[a-zA-Z0-9_$]+\s+extends\s+[a-zA-Z0-9_.$]+\s*{/s,u=/^([a-zA-Z0-9_$]+)\s*\(/s;t.exports={Nn:function(t,e){const n=Object.getPrototypeOf(e);if(n.prototype)return t.replace(h,`class ${e.name} extends ${n.name} {`);const r=t.match(u);return r&&"function"!==r[1]?"function "+t:t},Un:function(t){const e=t.match(s);if(e)return`${e[1]}${e[3]}(${e[4]}`;const n=t.match(c);if(n)return`${n[1]}${n[3]}{${n[4]}`;const r=t.match(a);if(r)return`${r[1]}${r[3]}extends${r[4]}`;throw new Error("Bad source code: "+t)},$e:function(t,e){if(n(8).sn.includes(e))return t;const r=t.match(/^(function\s)(.*)/s);if(r)return`${r[1]}${e}${r[2]}`;const o=t.match(/^(class\s)(.*)/s);if(o)return`${o[1]}${e}${o[2]}`;throw new Error("Bad source code: "+t)},Et:function(t){const e=t.match(r)||t.match(o)||t.match(i);if(!e)throw new Error("Bad source code: "+t);let n=e[1];const s=(t,e,n)=>t.split(e).join(n);n=s(n,/\/\/.*?([\n\r])/s,"\n"),n=s(n,/\/\*.*?\*\//s,""),n=s(n,/(?:`(?:(?:\\`)|[^`])*?`)|(?:"(?:(?:\\")|[^"])*?")|(?:'(?:(?:\\')|[^'])*?')/s,"''");let c=0;for(let e=0;e<n.length;e++)if("{"===n[e]&&c++,"}"===n[e]&&c--,c<0)throw new Error("Multiple definitions not permitted: "+t)}}},function(t,e,n){const r=n(6),o=n(9),i=n(34),s=n(4),{B:c,Y:a,F:h,yt:u}=n(0),{ao:f}=n(35),{ArgumentError:ArgumentError}=n(10),l="Transaction";class d{constructor(){this.pr=new o,this.pr.Qn=!1,this.pr.Xn=!1,this.Vo=new r.Transaction,this.rr=null,this.Ec=null,this.Ye=null,this.Pc=null,this.$c=null,this.Oc=null,this.vc=null,this.Sc=null,this.xc=null,this.kr=!1,this.Ac=!1}set base(t){const e=new r.Transaction(t);if(e.inputs.length)throw new Error("Only custom outputs are supported in base transactions");this.Vo=e}get base(){return this.Vo.toString("hex")}get outputs(){return[...this.pr.Kn]}get deletes(){return[...this.pr.Wn]}update(t){if("function"!=typeof t)throw new ArgumentError("Invalid callback");if(s.De&&s.Me(l,"Update"),d.Jt)throw new Error("update disabled during atomic update");if(this.vc)throw new Error("update disabled during export");if(this.Sc)throw new Error("update disabled during publish");if(this.$c)throw new Error("update disabled during pay");if(this.Oc)throw new Error("update disabled during sign");if(this.Pc)throw new Error("update disabled during build");if(this.xc)throw new Error("update disabled during cache");if(this.kr)throw new Error("update disabled once published");if(this.Ac)throw new Error("update disabled once cached");this.rr=null,this.Ec=null,this.Ye=null;const e=o.zt;try{o.zt=this.pr,o.zt.er();let n=null;try{d.Jt=!0,n=t()}finally{d.Jt=!1}if(n instanceof Promise)throw new Error("async transactions not supported");return o.zt.nr(),n}catch(t){throw this.rollback(),t}finally{o.zt=e}}pay(){if(d.Jt)throw new Error("pay disabled during atomic update");if(this.Oc)throw new Error("pay disabled during sign");if(this.vc)throw new Error("pay disabled during export");if(this.Sc)throw new Error("pay disabled during publish");if(this.$c)return this.$c;if(this.Pc)throw new Error("pay disabled during build");if(this.xc)throw new Error("pay disabled during cache");if(this.kr)throw new Error("pay disabled once published");if(this.Ac)throw new Error("pay disabled once cached");const t=new u("pay"),e=async()=>{const{ci:e,ai:o}=n(17);await e.jo(async()=>{const e=r.Transaction.FEE_PER_KB;this.Ec=await o(this.Ec,this.rr,e),this.Ye=null,t.Et()})};return this.$c=this.Ic(t,!1).then(()=>e()),this.$c.then(()=>{this.$c=null}).catch(t=>{throw this.$c=null,t}),this.$c}sign(){if(d.Jt)throw new Error("sign disabled during atomic update");if(this.$c)throw new Error("sign disabled during pay");if(this.vc)throw new Error("sign disabled during export");if(this.Sc)throw new Error("sign disabled during publish");if(this.Oc)return this.Oc;if(this.Pc)throw new Error("sign disabled during build");if(this.xc)throw new Error("sign disabled during cache");if(this.kr)throw new Error("sign disabled once published");if(this.Ac)throw new Error("sign disabled once cached");const t=new u("sign"),e=async()=>{const{ci:e,hi:o}=n(17);await e.jo(async()=>{const e=r.Transaction.FEE_PER_KB;this.Ec=await o(this.Ec,this.rr,e),this.Ye=null,t.Et()})};return this.Oc=this.Ic(t,!1).then(()=>e()),this.Oc.then(()=>{this.Oc=null}).catch(t=>{throw this.Oc=null,t}),this.Oc}cache(){s.De&&s.Me(l,"Cache");const t=new Date;if(d.Jt)throw new Error("cache disabled during atomic update");if(this.$c)throw new Error("cache disabled during pay");if(this.Oc)throw new Error("cache disabled during sign");if(this.vc)throw new Error("cache disabled during export");if(this.Sc)throw new Error("cache disabled during publish");if(this.Pc)throw new Error("cache disabled during build");if(this.xc)return this.xc;if(this.Ac)return!0;const e=new u("cache"),r=async()=>{const{di:t,li:r}=n(17);this.Ye=this.Ye||this.Ec.hash,await t(this.rr,this.rr.Fo,this.Ye),e.Et(),r(this.rr,this.Ye)};return this.xc=this.Ic(e,!1).then(()=>r()),this.xc.then(()=>{s.Lt&&s.Gt(l,"Cache (end): "+(new Date-t)+"ms"),this.Ac=!0,this.xc=null}).catch(t=>{throw this.xc=null,t}),this.xc}publish(t={}){s.De&&s.Me(l,"Publish");const e=new Date;if(d.Jt)throw new Error("publish disabled during atomic update");if(this.$c)throw new Error("publish disabled during pay");if(this.Oc)throw new Error("publish disabled during sign");if(this.vc)throw new Error("publish disabled during export");if(this.Sc)return this.Sc;if(this.kr)return!0;if(this.Pc)throw new Error("publish disabled during build");if(this.xc)throw new Error("publish disabled during cache");if(void 0!==t.pay&&"boolean"!=typeof t.pay)throw new ArgumentError("Invalid pay: "+a(t.pay));if(void 0!==t.sign&&"boolean"!=typeof t.sign)throw new ArgumentError("Invalid sign: "+a(t.sign));const n=void 0===t.pay||t.pay,r=void 0===t.sign||t.sign;if(this.Ac&&n)throw new Error("pay disabled once cached");if(this.Ac&&r)throw new Error("sign disabled once cached");const o=new u("publish");return this.Sc=this.Ic(o,!0).then(()=>this.Rc(n,r,o)),this.Sc=this.Sc.then(()=>{s.Lt&&s.Gt(l,"Publish (end): "+(new Date-e)+"ms"),this.kr=!0,this.Sc=null}).catch(t=>{throw this.Sc=null,t}),this.Sc=this.Sc.then(()=>this.Ye),this.Sc}export(t={}){s.De&&s.Me(l,"Export");const e=new Date;if(d.Jt)throw new Error("export disabled during atomic update");if(this.$c)throw new Error("export disabled during pay");if(this.Oc)throw new Error("export disabled during sign");if(this.Sc)throw new Error("export disabled during publish");if(this.xc)throw new Error("export disabled during cache");if(this.vc)return this.vc;if(void 0!==t.pay&&"boolean"!=typeof t.pay)throw new ArgumentError("Invalid pay: "+a(t.pay));if(void 0!==t.sign&&"boolean"!=typeof t.sign)throw new ArgumentError("Invalid sign: "+a(t.sign));const n=void 0===t.pay||t.pay,r=void 0===t.sign||t.sign;if(this.Ac&&n)throw new Error("pay disabled once cached");if(this.Ac&&r)throw new Error("sign disabled once cached");if(this.kr&&n)throw new Error("pay disabled once published");if(this.kr&&r)throw new Error("sign disabled once published");const o=new u("export");return this.vc=this.Ic(o,!1).then(()=>this.jc(n,r,o)),this.vc.then(t=>(s.Lt&&s.Gt(l,"Export (end): "+(new Date-e)+"ms"),this.vc=null,t)).catch(t=>{throw this.vc=null,t}),this.vc}rollback(){if(s.De&&s.Me(l,"Rollback"),d.Jt)throw new Error("rollback disabled during atomic update");if(this.vc)throw new Error("rollback disabled during export");if(this.Sc)throw new Error("rollback disabled during publish");if(this.$c)throw new Error("rollback disabled during pay");if(this.Oc)throw new Error("rollback disabled during sign");if(this.Pc)throw new Error("rollback disabled during build");if(this.xc)throw new Error("rollback disabled during cache");if(this.kr)throw new Error("rollback disabled once published");this.pr.en(),this.pr=new o,this.pr.Qn=!1,this.pr.Xn=!1}static async Cc(t,e){s.De&&s.Me(l,"Replay");const n=f(t),r=h(),o=await i(t,e,n,r,!1,null,void 0,!1),c=new d;return c.pr=o.pr,c.rr=o,c.Ec=t,c.Ye=e,c}Ic(t,e){if(this.rr&&this.Ec)return e&&this.rr.Ro(!0),Promise.resolve();if(c(!this.rr&&!this.Ec),this.Pc)return this.Pc;const n=this.pr.rr();if(!n)throw new Error("Nothing to commit");return n.Vo=this.Vo,e&&n.Ro(!0),this.Pc=this.Tc(n,t),this.Pc.then(t=>(this.Pc=null,t)).catch(t=>{throw this.Pc=null,t}),this.Pc}async Tc(t,e){try{await t.Mo();const o=t.pr;c(!o.qn.length);const{Zo:i,Xo:s,Qo:a,ti:h,ei:u,ni:f,ri:l,oi:d,ii:p,si:w,zo:y}=n(17);await s(t),e.Et();const b=await a(t);e.Et(),await i(t,e),e.Et(),h(t);const g=u(o),_=await f(t,e);e.Et();const E=p(t,await l(t,_),d(o,g),g),P=w(t,E,b,r.Transaction.FEE_PER_KB);await y(t.F,o,_,E,P,e),e.Et(),this.rr=t,this.Ec=P,this.Ye=null}catch(e){throw t.Io()&&t.To(e),e}}async Rc(t,e,o){const{ni:i,ci:s,ai:c,hi:h,ui:u,fi:f,li:l,di:d}=n(17);this.rr.Io()||this.rr.Ro(!0);try{const n=this.rr.pr,p=await i(this.rr,o);o.Et(),this.Ye=await s.jo(async()=>{const i=this.Ec,s=r.Transaction.FEE_PER_KB,l=t?await c(i,this.rr,s):i;o.Et();const d=e?await h(l,this.rr,s):l;o.Et(),u(d,n,i);const p=await f(this.rr,d,o);if("string"!=typeof p||64!==p.length)throw new Error("Invalid txid: "+a(p));return o.Et(),p}),o.Et(),l(this.rr,this.Ye),await d(this.rr,p,this.Ye),o.Et(),(n.Ln.some(t=>"DEPLOY"===t.op())||n.Ln.some(t=>"UPGRADE"===t.op()))&&this.rr.F.vo.add(this.Ye),this.rr.Co()}catch(t){throw this.rr.To(t),t}}async jc(t,e,o){const{ci:i,ai:s,hi:c}=n(17),a=await i.jo(async()=>{const n=this.Ec,i=r.Transaction.FEE_PER_KB,a=t?await s(n,this.rr,i):n;o.Et();const h=e?await c(a,this.rr,i):a;return o.Et(),h});return o.Et(),a.toString("hex")}}d.Jt=!1,t.exports=d},function(t,e,n){const{Y:r,V:o,K:i,H:s,q:c,Z:a,tt:h,et:u,$t:f}=n(0),l=n(8),d=l.P,p=l.$,w=l.S,y=l.O,b=new Set;"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split("").forEach(t=>b.add(t));const g=t=>{throw new Error("Cannot encode "+r(t))},_=t=>{throw new Error("Cannot decode "+r(JSON.stringify(t)))};t.exports=class{constructor(){this.kc=p,this.Nc=void 0,this.Uc=void 0,this.Dc=new Map,this.Mc=new Map,this.Fc=null}Wo(t){return this.Dc=new Map,this.Bc(t,[])}_c(t){return this.Mc=new Map,this.Fc=t,this.Lc(t)}gc(){return this.kc=d,this}Jo(t){return this.Nc=t,this}bc(t){return this.Uc=t,this}Bc(t,e){switch(typeof t){case"undefined":{const t=this.Gc();return t.$und=1,t}case"string":case"boolean":return t;case"number":if(isNaN(t)||!isFinite(t)||u(t)){const e=this.Gc();return isNaN(t)&&(e.$nan=1),t===1/0&&(e.$inf=1),t===-1/0&&(e.$ninf=1),u(t)&&(e.$n0=1),e}return t;case"symbol":break;case"object":case"function":if(!t)return null;if(this.Dc.has(t)){const e=this.Gc();return e.$dup=this.kc.Array.from(this.Dc.get(t)),e}return this.Dc.set(t,e),this.Jc(t,e)}g(t)}Jc(t,e){if((w.has(t)||y.has(t))&&g(t),o(t)){const n=f(t).some(t=>t.startsWith("$")),r=this.Gc();let o=r,i=e;return n&&(r.$obj=this.Gc(),o=r.$obj,i=e.concat(["$obj"])),f(t).forEach(e=>{o[e]=this.Bc(t[e],i.concat([e.toString()]))}),r}if(i(t)){const n=f(t);if(n.length===t.length){const r=this.Wc();return n.forEach(n=>r.push(this.Bc(t[n],e.concat([n.toString()])))),r}{const r=this.Gc(),o=this.Gc(),i=e.concat(["$arr"]);return n.forEach(e=>{o[e]=this.Bc(t[e],i.concat([e.toString()]))}),r.$arr=o,r}}if(s(t)){const n=this.Gc();n.$set=this.Wc();let r=0;const o=e.concat(["$set"]);for(const e of t)n.$set.push(this.Bc(e,o.concat([r.toString()]))),r++;if(f(t).length){n.props=this.Gc();const r=e.concat(["props"]);f(t).forEach(e=>{n.props[e]=this.Bc(t[e],r.concat([e.toString()]))})}return n}if(c(t)){const n=this.Gc();n.$map=this.Wc();let r=0;const o=e.concat(["$map"]);for(const[e,i]of t){const t=this.Wc();t.push(this.Bc(e,o.concat([r.toString(),"0"]))),t.push(this.Bc(i,o.concat([r.toString(),"1"]))),n.$map.push(t),r++}if(f(t).length){n.props=this.Gc();const r=e.concat(["props"]);f(t).forEach(e=>{n.props[e]=this.Bc(t[e],r.concat([e.toString()]))})}return n}if(a(t)){f(t).length!==t.length&&g(t);const e=this.Gc(),n=Buffer.from(new Uint8Array(t));return e.$ui8a=n.toString("base64"),e}if(this.Nc){const Creation=n(3);if(t instanceof Creation){const e=this.Gc();return e.$jig=this.Nc(t),e}const r=this.Gc(),o=Object.assign({},t),i=e.concat(["$arb"]),s=e.concat(["T"]);return r.$arb=this.Bc(o,i),r.T=this.Bc(t.constructor,s),r}g(t)}Lc(t){switch(typeof t){case"string":case"boolean":return t;case"number":if(isNaN(t)||!isFinite(t))break;return u(t)?0:t;case"object":case"function":return t?this.Yc(t):null}_(t)}Yc(t){if(o(t)){let e;if(f(t).forEach(n=>{n.startsWith("$")&&(e&&_(t),e=n)}),"$und"===e&&1===t.$und)return;if("$n0"===e&&1===t.$n0)return-0;if("$nan"===e&&1===t.$nan)return NaN;if("$inf"===e&&1===t.$inf)return 1/0;if("$ninf"===e&&1===t.$ninf)return-1/0;if(!e){const e=this.Gc();return this.Mc.set(t,e),f(t).forEach(n=>{e[n]=this.Lc(t[n])}),e}if("$obj"===e){const e=t.$obj;o(e)&&e||_(t);const n=this.Gc();return this.Mc.set(t,n),f(e).forEach(t=>{n[t]=this.Lc(e[t])}),n}if("$arr"===e){o(t.$arr)&&t.$arr||_(t);const e=this.Wc();this.Mc.set(t,e);const n=t.$arr;return f(n).forEach(t=>{e[t]=this.Lc(n[t])}),e}if("$dup"===e){const e=t.$dup;i(e)||_(t);let n=this.Fc;for(let r=0;r<e.length;r++){const o=e[r];o in n||_(t),n=n[o]}this.Mc.has(n)||_(t);const r=this.Mc.get(n);return this.Mc.set(t,r),r}if("$set"===e){i(t.$set)||_(t),h(t.props)&&!o(t.props)&&_(t);const e=this.Vc();this.Mc.set(t,e);for(const n of t.$set)e.add(this.Lc(n));const n=t.props;return n&&f(n).forEach(t=>{e[t]=this.Lc(n[t])}),e}if("$map"===e){i(t.$map)||_(t),h(t.props)&&!o(t.props)&&_(t);const e=this.zc();this.Mc.set(t,e);for(const n of t.$map)i(n)&&2===n.length||_(t),e.set(this.Lc(n[0]),this.Lc(n[1]));const n=t.props;return n&&f(n).forEach(t=>{e[t]=this.Lc(n[t])}),e}if("$ui8a"===e){"string"!=typeof t.$ui8a&&_(t),t.$ui8a.split("").some(t=>!b.has(t))&&_(t);const e=Buffer.from(t.$ui8a,"base64"),n=new this.kc.Uint8Array(e);return this.Mc.set(n,n),n}}if(i(t)){const e=this.Wc();this.Mc.set(t,e);for(const n of t)e.push(this.Lc(n));return e}if(this.Uc){if(o(t)&&h(t.$jig)){const e=this.Uc(t.$jig);if(e)return this.Mc.set(t,e),e}if(o(t)&&h(t.$arb)&&h(t.T)){const e=this.Gc();this.Mc.set(t,e),Object.assign(e,this.Lc(t.$arb));const n=this.Lc(t.T);return Object.setPrototypeOf(e,n.prototype),e}}_(t)}Gc(){return new this.kc.Object}Wc(){return new this.kc.Array}Vc(){return new this.kc.Set}zc(){return new this.kc.Map}}},function(t,e,n){t.exports=null},function(t,e,n){const r=n(4),{Y:o,wt:i}=n(0),{eo:s}=n(14),c=n(37),a="LocalCache",h="config://code-filter";class u{constructor(t={}){this.Kc=new Map,this.Hc=0,this.qc=1e3*f(t.maxSizeMB)*1e3}get maxSizeMB(){return this.qc/1e3/1e3}set maxSizeMB(t){this.qc=1e3*f(t)*1e3,this.Zc()}get sizeBytes(){return this.Hc}async get(t){const e=this.Kc.has(t),n=this.Kc.get(t);if(e)return this.Kc.delete(t),this.Kc.set(t,n),n}async set(t,e){const n=this.Kc.has(t),o=this.Kc.get(t),i=["jig","berry","tx"].includes(t.split("://")[0]);if(n&&i&&!s(e,o))throw r._n&&r.bn(a,"Expected:",JSON.stringify(o,0,3)),r._n&&r.bn(a,"Actual:",JSON.stringify(e,0,3)),new Error(`Attempt to set different values for the same key: ${t}\n\nThis is an internal RUN bug. Please report it to the library developers.`);this.Kc.delete(t),this.Kc.set(t,e),n||(this.Hc+=u.Xc(t),this.Hc+=u.Xc(e),this.Zc())}clear(){r.Lt&&r.Gt(a,"Clear"),this.Kc.clear(),this.Hc=0}Zc(){if(!(this.Hc<=i(this.qc)))for(this.Qc(h),this.Qc("config://recent-broadcasts");this.Hc>i(this.qc);){const t=this.Kc.keys().next().value,e=this.Kc.get(t);if(t.startsWith("jig://")&&"code"===e.kind){const e=this.Kc.get(h);e&&(c.remove(e,t),this.Kc.set(h,e))}this.Kc.delete(t),this.Hc-=u.Xc(t),this.Hc-=u.Xc(e)}}static Xc(t){switch(typeof t){case"undefined":throw new Error("Cannot cache undefined");case"boolean":return 5;case"number":if(Number.isFinite(t))return 9;throw new Error("Cannot cache number: "+o(t));case"string":return 2*t.length+1;case"object":{if(!t)return 5;const e=Object.keys(t);let n=1+4*e.length;return e.forEach(e=>{n+=u.Xc(e),n+=u.Xc(t[e])}),n}case"function":throw new Error("Cannot cache function: "+o(t));case"symbol":throw new Error("Cannot cache symbol: "+o(t))}}Qc(t){const e=this.Kc.get(t);void 0!==e&&(this.Kc.delete(t),this.Kc.set(t,e))}}function f(t){if(void 0===t)return 10;if("number"==typeof t&&!Number.isNaN(t)&&t>=0)return t;throw new Error("Invalid maxSizeMB: "+o(t))}t.exports=u},function(t,e,n){const{Y:r,B:o,ht:i}=n(0),{ot:s,Qr:c}=n(14),{g:a}=n(7);let h=!0;t.exports={ta:function(t,e,i){return a(()=>{const h=t.concat(e),u={};h.forEach(t=>{const e=u[t.origin];if(e){const n="1st location: "+t.location,o="2nd location: "+e.location,i=`Inconsistent reference: ${r(t)}\n\n${n}\n${o}`;throw new Error(i)}u[t.origin]=t});const f={},l=new Set,d=new Map;h.forEach(t=>{f[t.origin]=t});const Creation=n(3);a(()=>s(h,t=>{if(t instanceof Creation){l.add(t);const e=t.origin,n=u[e];if(n&&t.nonce>n.nonce){const e="1st location: "+t.location,o="2nd location: "+n.location;throw new Error(`Time travel: ${r(t)}\n\n${e}\n${o}`)}const o=f[e];(!o||t.nonce>o.nonce)&&(f[e]=t)}})),i&&(f[i.origin]=i),c(i,(t,e)=>{if(t!==i&&t instanceof Creation)return e(!1),f[t.origin]});for(const e of l){const n=new Map;c(e,(t,r)=>{if(t!==e&&t instanceof Creation){const e=f[t.origin];return t!==e&&n.set(e,t),o(e),r(!1),e}}),t.includes(e)||d.set(e,n)}const p={};return Object.entries(f).forEach(([t,e])=>{p[t]=[e.location,e.nonce]}),{ea:p,na:d}})},ra:function(t){a(()=>{for(const[e,r]of t.entries()){const Creation=n(3);c(e,(t,n)=>{if(t!==e&&t instanceof Creation)return n(!1),r.get(t)||t})}})},Qt:function(t,e=[]){const Creation=n(3);if(!h)return;const u=t=>a(()=>!i(t,"origin")||t.origin.startsWith("error://")?t:t.origin);return a(()=>{const n=new Map;return e.forEach(t=>{o(t instanceof Creation);const e=u(t);if(n.has(e)&&n.get(e).nonce!==t.nonce){const o=a(()=>`There are conflicting jigs for ${t.origin}, nonces ${n.get(e).nonce}, ${t.nonce}`);throw new Error(`Cannot unify inconsistent ${r(t)}\n\n${o}`)}n.set(e,t)}),a(()=>s(t,t=>{if(t instanceof Creation){const o=u(t),i=n.get(o)||t;if(n.has(o)||n.set(o,t),t.nonce>i.nonce){if(e.includes(i)){const e="1st location: "+t.location,n="2nd location: "+i.location;throw new Error(`Cannot unify inconsistent ${r(t)}\n\n${e}\n${n}`)}n.set(o,t)}}})),c(t,t=>{if(t instanceof Creation)return n.get(u(t))})})},oa:function(t){h=t}}},function(t,e,n){const{Y:r,ut:o}=n(0),{te:i}=n(14),{g:s}=n(7),{Je:c,Mn:a}=n(11),h=n(8).P,u=n(4);t.exports=class{constructor(t,e,n){if(u.Lt&&u.Gt("Snapshot","Snapshot",r(t),e?"(bindings only)":""),this.wi=t,this.Rr=e,this.Cr=!n,e){const e=this.wr={};s(()=>{e.location=t.location,e.origin=t.origin,e.nonce=t.nonce,e.owner=i(t.owner,h),e.satoshis=t.satoshis})}else this.jr()}jr(){const t=this.wi;this.Rr=!1,this.Cr=!0;const Jig=n(5),Code=n(1),Berry=n(12),e=n(2);if(t instanceof Jig)this.yc="jig";else if(t instanceof Code)this.yc=e.Dt(t).Bt?"native":"code";else{if(!(t instanceof Berry))throw new Error("Not a creation: "+r(t));this.yc="berry"}if(s(()=>{const e=Object.assign({},t),n=i(e,h);this.wr=n}),"jig"!==this.yc&&"berry"!==this.yc||(this.wc=s(()=>t.constructor)),"code"===this.yc){const n=e.Dt(t);this.Ft=n.Ft,this.ia=n.Fe()}}en(t){if("native"!==this.yc&&this.Cr)return s(()=>{if(this.Rr)if(t){const e=a({bn:"A previous error occurred\n\n"+t});o(this.wi,"location",e)}else o(this.wi,"location",c);else if("code"===this.yc&&n(2).Dt(this.wi).Le(this.ia),Object.keys(this.wi).forEach(t=>{delete this.wi[t]}),Object.keys(this.wr).forEach(t=>{o(this.wi,t,this.wr[t])}),t){const Jig=n(5),Code=n(1);if((this.wi instanceof Jig||this.wi instanceof Code)&&this.wr.location===c){const e=a({bn:"Deploy failed\n\n"+t});o(this.wi,"origin",e),o(this.wi,"location",e)}}})}}},function(t,e,n){const r=n(6),{Y:o,Pt:i,yt:s}=n(0),c=n(4),a=n(16),h=n(9),{ta:u,ra:f,oa:l}=n(32),{g:d}=n(7),p=n(29),{ei:w,ti:y,ni:b,ri:g,Qo:_,oi:m,ii:E,si:P,li:$,di:O}=n(17),v=n(21),{TrustError:TrustError}=n(10),S="Replay";async function x(t,e,x,A,I,R,j,C){const T=n(63);c.De&&c.Me(S,"Replay",e);const k=new Date;if((j=j||new s("replay",A.bt)).Et(),!C&&(x.exec.some(t=>"DEPLOY"===t.op)||x.exec.some(t=>"UPGRADE"===t.op))&&!await A.mc(e,"replay"))throw new TrustError(e,"replay");let N=[],U=[];const D=new a(A,j);for(let e=0;e<x.in;e++){const n=t.inputs[e];if(!n)throw new Error("Jig input missing for _i"+e);const r=`${n.prevTxId.toString("hex")}_o${n.outputIndex}`,o=D.jn(r);N.push(o)}for(let t=0;t<x.ref.length;t++){const e=x.ref[t],n=D.jn(e);U.push(n)}if(N=await Promise.all(N),U=await Promise.all(U),R&&!N.some(t=>t.location===R.location))throw new Error(`${o(R)} not found in the transaction\n\ntxid: ${e}\njig: ${R.location}`);const{ea:M,na:F}=u(N,U,R);R&&(N[N.findIndex(t=>t.location===R.location)]=R);const L=new h;L.Qn=!0,L.Xn=!1;const G=h.zt;l(!1);try{N.forEach(t=>L.vr(t)),U.forEach(t=>L._read(t)),h.zt=L;for(const t of x.exec){const{op:e,data:n}=t;if(2!==Object.keys(t).length)throw new Error("Invalid exec");if("string"!=typeof e)throw new Error("Invalid op: "+e);if("object"!=typeof n||!n)throw new Error("Invalid data: "+n);const r=new v;for(const t of N)r.lr(t);for(const t of U)r.lr(t);for(const t of L.Vt)r.lr(t);T(e,n,r._r())}}catch(t){throw L.en(t),t}finally{h.zt=G,l(!0)}let J=null;try{if(J=L.rr(),!J)throw new Error("Invalid metadata: no commit generated");return J.Yo=x.app,J.Nr=x.version,J.Vo=new r.Transaction(x.base),J.ea=M,await async function(t,e,n,r,o,s,a){c.Lt&&c.Gt(S,"Verify",n);const h=new Date,u=t.pr,f=w(u);!function(t,e,n){const r=(new p).gc().bc(t=>n[t]),o=e.cre.map(t=>r._c(t));if(t.pr.Vt.br!==e.cre.length)throw new Error("Invalid number of cre entries");for(let e=0;e<o.length;e++){const n=o[e],r=t.pr.Vt._r()[e],i=t.No.get(r);d(()=>{r.owner=n}),i.wr.owner=n}}(t,r,f);const l=await _(t);y(t);const v=await b(t,s);s.Et();const x=await g(t,v),A=m(u,f),I=E(t,x,A,f),R=P(t,I,l,0);i(I)!==i(r)&&function(t,e,n,r,o){function i(t,e,n,o){if(t===e)return;const i=r.get(n);o?(c.bn(S,"Expected state:",JSON.stringify(o,0,3)),c.bn(S,"Actual state:",JSON.stringify(i,0,3))):c.bn(S,"State mismatch:",JSON.stringify(i,0,3))}throw c._n&&c.bn(S,"Expected metadata:",JSON.stringify(t,0,3)),c._n&&c.bn(S,"Actual metadata:",JSON.stringify(e,0,3)),c._n&&(t.out.length===e.out.length?t.out.forEach((t,r)=>{i(t,e.out[r],n.Kn._r()[r],o&&o.sa(r))}):c.bn(S,`Expected ${t.out.length} outputs but actual was ${e.out.length}`),t.del.length===e.del.length?t.del.forEach((t,r)=>{i(t,e.del[r],n.Wn._r()[r],o&&o.dr(r))}):c.bn(S,`Expected ${t.del.length} deletes but actual was ${e.del.length}`)),new Error("Metadata mismatch\n\nHint: See logs")}(r,I,u,v,a);for(let t=0;t<I.in;t++){const n=e.inputs[t],r=R.inputs[t];if(n.prevTxId.toString("hex")!==r.prevTxId.toString("hex"))throw new Error("Txid mismatch on input "+t);if(n.outputIndex!==r.outputIndex)throw new Error("Vout mismatch on input "+t)}for(let t=0;t<I.out.length;t++){const n=e.outputs[t+I.vrun+1],r=R.outputs[t+I.vrun+1];if(!n)throw new Error("Jig output missing for _o"+(t+I.vrun+1));if(n.script.toString("hex")!==r.script.toString("hex"))throw new Error("Script mismatch on output "+(t+I.vrun+1));if(n.satoshis<r.satoshis){const e=`Hint: Transaction has ${n.satoshis} but expected ${r.satoshis}`;throw new Error(`Satoshis mismatch on output ${t+I.vrun+1}\n\n${e}`)}}c.Lt&&c.Gt(S,"Verify (end): "+(new Date-h)+"ms"),o&&($(t,n),await O(t,v,n),s.Et())}(J,t,e,x,I,j,C),f(F),J}finally{c.Lt&&c.Gt(S,"Replay (end): "+(new Date-k)+"ms")}}x.Ko=class{constructor(t,e){this.pr=t,this.Fo=e}sa(t){return this.Fo.get(this.pr.Kn._r()[t])}dr(t){return this.Fo.get(this.pr.Wn._r()[t])}},t.exports=x},function(t,e,n){const r=n(6);t.exports={ao:function(t){const{oo:e}=n(15),o="Not a run transaction: invalid op_return protocol",i="Not a run transaction: invalid run metadata";if(!t.outputs.length)throw new Error(o);let s=null;const c=new r.Transaction;for(let e=0;e<t.outputs.length&&(s=t.outputs[e].script.chunks,6!==s.length||0!==s[0].opcodenum||106!==s[1].opcodenum||"run"!==s[2].buf.toString());e++)c.addOutput(t.outputs[e]),s=null;if(!s)throw new Error(o);const a=e(s[3].buf.toString("hex")),h=s[4].buf?s[4].buf.toString():"";try{const t=s[5].buf.toString("utf8"),e=JSON.parse(t);if(6!==Object.keys(e).length||"number"!=typeof e.in||!Array.isArray(e.ref)||!Array.isArray(e.out)||!Array.isArray(e.del)||!Array.isArray(e.cre)||!Array.isArray(e.exec)||e.ref.some(t=>"string"!=typeof t)||e.out.some(t=>"string"!=typeof t)||e.del.some(t=>"string"!=typeof t)||e.exec.some(t=>"object"!=typeof t))throw new Error(i);return e.app=h,e.version=a,e.base=c.toString("hex"),e.vrun=c.outputs.length,e}catch(t){throw new Error(i)}}}},function(t,e,n){const r=n(6),{B:o,F:i,tt:s}=n(0),{g:c}=n(7),{ot:a}=n(14),{ee:h,Mn:u}=n(11),f=n(33),l=n(4),d=n(17),{ro:p}=n(15),w="Commit",y=new Map;class b{constructor(t){l.Lt&&l.Gt(w,"Create",t.Fn),o(t.Ln.length),o(t.zn.br||t.Kn.br||t.Wn.br),this.pr=t,this.F=i(),this.Yo=this.F.Yo,this.Nr=p,this.Vo=new r.Transaction,this.ca=[],this.No=new Map,this.Do(),this.ea=null,this.aa=[],this.ha=[],this.kr=!1,this.pr.Xn&&(this.Ro(!0),this.Mo().then(()=>d(this))),this.pr.Qn||(this.pr.Kn.hr(t=>this.F.ur("update",t)),this.pr.Wn.hr(t=>this.F.ur("update",t))),this.states=null,this.stateHashes=null}Do(){const t=t=>{if(!this.No.has(t)){const e=new f(t);this.No.set(t,e)}};this.pr.Kn.hr(e=>t(e)),this.pr.Wn.hr(e=>t(e))}Ro(t){t?(o(!this.kr),o(!y.has(this.pr.Fn)),y.set(this.pr.Fn,this)):(y.delete(this.pr.Fn),o(!this.ha.length),o(!this.ca.length))}Io(){return y.has(this.pr.Fn)}async Mo(){const t=this.pr;t.qn=t.qn.filter(t=>!t.kr),t.qn.length&&(t.qn.filter(t=>!t.ca.includes(this)).forEach(t=>t.ca.push(this)),await new Promise((t,e)=>this.aa.push({resolve:t,reject:e})))}async ua(){o(this.Io()),await new Promise((t,e)=>this.ha.push({resolve:t,reject:e}))}fa(t){const e=this.pr;for(const[n,r]of t.No){const t=e.zn.Dt(n)||e.Hn.Dt(n);if(!t)continue;const o=e.Zn.get(t);o&&h.forEach(t=>{o.wr[t]=r.wr[t]});const i=this.No.get(t);if(i){const t=i.wr;i.wr.origin=r.wr.origin,s(t.owner)||(t.owner=r.wr.owner),s(t.satoshis)||(t.satoshis=r.wr.satoshis)}c(()=>{t.origin=r.wr.origin,s(t.owner)||(t.owner=r.wr.owner),s(t.satoshis)||(t.satoshis=r.wr.satoshis)})}e.qn=e.qn.filter(e=>e!==t),e.qn.length||(this.aa.forEach(t=>t.resolve()),this.aa=[])}Ho(t){return this.ca.some(e=>e.pr.zn.Yt(t))}async ko(t){if(this.ea)return this.ea;const e=new(n(16))(this.F,t),r=this.pr,o=r.zn._r().concat(r.Hn._r()).map(t=>r.Zn.get(t).wr.location),i=await Promise.all(o.map(t=>e.jn(t)));return this.ea=b.la(i,t),this.ea}static async la(t,e){l.Lt&&l.Gt(w,"Build refmap");const Creation=n(3),r={};return c(()=>a(t,e=>{if(e instanceof Creation)return c(()=>{(!(e.origin in r)||r[e.origin][1]<=e.nonce)&&(r[e.origin]=[e.location,e.nonce])}),t.includes(e)})),r}Co(){this.kr=!0,this.ha.forEach(t=>t.resolve()),this.ha=[],this.ca.forEach(t=>t.fa(this));const t=t=>{this.Ho(t)||this.F.ur("publish",t)};this.pr.Kn.hr(e=>t(e)),this.pr.Wn.hr(e=>t(e)),this.ca=[],this.Ro(!1)}To(t){o(t);const e=this.pr;this.kr=!1,this.ca.forEach(e=>e.To(t)),this.ca=[];const n=t&&0===this.ha.length;if(l._n&&l.bn(w,n?"Unhandled":"",t),this.pr.en(t),n){const n=u({bn:"Unhandled "+t});c(()=>{e.Kn.hr(t=>{t.location=n}),e.Wn.hr(t=>{t.location=n})})}e.Qn||(e.Kn.hr(t=>this.F.ur("update",t)),e.Wn.hr(t=>this.F.ur("update",t))),t&&(this.ha.forEach(e=>e.reject(t)),this.ha=[]),this.Ro(!1)}}b.Tr=t=>y.get(t),b.da=async()=>{const t=[];for(const e of y.values())t.push(e.ua());return Promise.all(t)},t.exports=b},function(t,e){function n(t,e){const n=3&t.length,r=t.length-n;let o=e;const i=3432918353,s=461845907;let c=0,a=0,h=0;for(;c<r;)h=255&t.charCodeAt(c)|(255&t.charCodeAt(++c))<<8|(255&t.charCodeAt(++c))<<16|(255&t.charCodeAt(++c))<<24,++c,h=(65535&h)*i+(((h>>>16)*i&65535)<<16)&4294967295,h=h<<15|h>>>17,h=(65535&h)*s+(((h>>>16)*s&65535)<<16)&4294967295,o^=h,o=o<<13|o>>>19,a=5*(65535&o)+((5*(o>>>16)&65535)<<16)&4294967295,o=27492+(65535&a)+((58964+(a>>>16)&65535)<<16);switch(h=0,n){case 3:h^=(255&t.charCodeAt(c+2))<<16;case 2:h^=(255&t.charCodeAt(c+1))<<8;case 1:h^=255&t.charCodeAt(c),h=(65535&h)*i+(((h>>>16)*i&65535)<<16)&4294967295,h=h<<15|h>>>17,h=(65535&h)*s+(((h>>>16)*s&65535)<<16)&4294967295,o^=h}return o^=t.length,o^=o>>>16,o=2246822507*(65535&o)+((2246822507*(o>>>16)&65535)<<16)&4294967295,o^=o>>>13,o=3266489909*(65535&o)+((3266489909*(o>>>16)&65535)<<16)&4294967295,o^=o>>>16,o>>>0}t.exports={create:function(t=960,e=7){if("number"!=typeof t||!Number.isInteger(t)||t<=0)throw new Error("invalid size: "+t);if(t%8!=0)throw new Error("size must be a multiple of 8: "+t);if("number"!=typeof e||!Number.isInteger(e)||e<=0)throw new Error("invalid numHashes: "+e);return{buckets:new Array(t).fill(0),numHashes:e}},add:function(t,e){if("string"!=typeof e)throw new Error("invalid key: "+e);if(!this.possiblyHas(t,e))for(let r=1;r<=t.numHashes;r++){const o=n(e,r)%t.buckets.length;t.buckets[o]++}},remove:function(t,e){if("string"!=typeof e)throw new Error("invalid key: "+e);const r=[];for(let o=1;o<=t.numHashes;o++){const i=n(e,o)%t.buckets.length;if(!t.buckets[i])return!1;r.push(i)}return r.forEach(e=>t.buckets[e]--),!0},possiblyHas:function(t,e){for(let r=1;r<=t.numHashes;r++){const o=n(e,r)%t.buckets.length;if(!t.buckets[o])return!1}return!0},toBase64:function(t){const e=t.buckets,n=new Array(1+e.length/8);n[0]=t.numHashes;for(let t=0,r=1;t<e.length;t+=8,r++)n[r]=(e[t+0]>0)<<7|(e[t+1]>0)<<6|(e[t+2]>0)<<5|(e[t+3]>0)<<4|(e[t+4]>0)<<3|(e[t+5]>0)<<2|(e[t+6]>0)<<1|(e[t+7]>0)<<0;return Buffer.from(n).toString("base64")},fromBase64:function(t){const e=Buffer.from(t,"base64"),n=e[0],r=new Array(8*(e.length-1));for(let t=1,n=0;t<e.length;t++,n+=8)r[n+0]=e[t]>>7&1,r[n+1]=e[t]>>6&1,r[n+2]=e[t]>>5&1,r[n+3]=e[t]>>4&1,r[n+4]=e[t]>>3&1,r[n+5]=e[t]>>2&1,r[n+6]=e[t]>>1&1,r[n+7]=e[t]>>0&1;return{numHashes:n,buckets:r}}}},function(t,e,n){const{At:r}=n(0),o="config://recent-broadcasts";function i(t,e,n){const r=e.inputs.map(t=>({txid:t.prevTxId.toString("hex"),vout:t.outputIndex})),o=e.outputs.map((t,e)=>{const r=t.script.toHex(),o=t.satoshis;return{txid:n,vout:e,script:r,satoshis:o}}),i={time:Date.now(),inputs:r,outputs:o};t.push(i)}function s(t,e,n){t.forEach(t=>{t.outputs.forEach(t=>{t.script===n&&(e.some(e=>e.txid===t.txid&&e.vout===t.vout)||e.push(t))})}),r(e,e=>!t.some(t=>t.inputs.some(t=>t.txid===e.txid&&t.vout===e.vout)))}function c(t,e=1e4){r(t,t=>Date.now()-t.time<e)}t.exports={pa:async function(t,e,n,r=1e4){const s=await t.get(o)||[];c(s,r),i(s,e,n),await t.set(o,s)},wa:async function(t,e,n,r=1e4){const i=await t.get(o);i&&(c(i,r),s(i,e,n))},lr:i,ya:s,ba:c}},function(t,e,n){const Jig=n(5),r=n(2);class Token extends Jig{init(t,e){if(this.ga(t),this.constructor===Token)throw new Error("Token must be extended");const n=caller===this.constructor,r=caller&&caller.constructor===this.constructor;if(!n&&!r)throw new Error("Must create token using mint()");this.sender=r?caller.owner:null,this.amount=t,e&&(this.owner=e)}static mint(t,e){return this.supply+=t,new this(t,e)}send(t,e=this.amount){if(this.ga(e),this.amount===e)this.destroy();else{if(!(this.amount>e))throw new Error("Not enough funds");this.amount-=e}return new this.constructor(e,t)}combine(...t){if(!t.length)return this;const e=t.concat(this);if(e.some(t=>t.constructor!==this.constructor))throw new Error("Cannot combine different token classes");if(e.some(t=>(t=>e.reduce((e,n)=>n===t?e+1:e,0))(t)>1))throw new Error("Cannot combine duplicate tokens");return t.forEach(t=>{this.amount+=t.amount,t.destroy()}),this.sender=null,this.ga(this.amount),this}destroy(){super.destroy(),this.amount=0,this.sender=null}ga(t){if("number"!=typeof t)throw new Error("amount is not a number");if(!Number.isInteger(t))throw new Error("amount must be an integer");if(t<=0)throw new Error("amount must be positive");if(t>Number.MAX_SAFE_INTEGER)throw new Error("amount too large")}}Token.sealed=!1,Token.decimals=0,Token.icon={emoji:null},Token.symbol=null,Token.supply=0,Token.version="2.0",Token.toString(),Token.presets={},Token.presets.main={},Token.presets.test={},Token.presets.main.location="72a61eb990ffdb6b38e5f955e194fed5ff6b014f75ac6823539ce5613aea0be8_o1",Token.presets.main.origin="72a61eb990ffdb6b38e5f955e194fed5ff6b014f75ac6823539ce5613aea0be8_o1",Token.presets.main.nonce=1,Token.presets.main.owner="1PytriYokKN3GpKw84L4vvrGBwUvTYzCpx",Token.presets.main.satoshis=0,Token.presets.test.location="7d14c868fe39439edffe6982b669e7b4d3eb2729eee7c262ec2494ee3e310e99_o1",Token.presets.test.origin="7d14c868fe39439edffe6982b669e7b4d3eb2729eee7c262ec2494ee3e310e99_o1",Token.presets.test.nonce=1,Token.presets.test.owner="n3CiECgxW1pB1rGbYiX67e4U7AnS3MpJeE",Token.presets.test.satoshis=0,t.exports=r.Ae(Token)},function(t,e,n){const r=n(2);class CommonLock{constructor(t,e){this.address=t,this.testnet=e}script(){if("string"!=typeof this.address)throw new Error("Address is not a string: "+this.address);const t=[],e=[];let n,r,o;const i=this.address;for(let s=0;s<i.length;s++){if(n=0,r="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz".indexOf(i[s]),r<0)throw new Error(`Invalid character in address: ${i}\n\nDetails: i=${s}, c=${i[s]}`);for(r||e.length^s||e.push(0);n in t||r;)o=t[n],o=o?58*o+r:r,r=o>>8,t[n]=o%256,n++}for(;n--;)e.push(t[n]);if(e.length<6)throw new Error("Address too short: "+i);if(0!==e[0]&&111!==e[0])throw new Error("Address may only be a P2PKH type: "+i);if(!0===this.testnet&&0===e[0]||!1===this.testnet&&111===e[0])throw new Error("Invalid network");return[118,169,20,...e.slice(1,e.length-4),136,172].map(t=>t.toString("16")).map(t=>1===t.length?"0"+t:t).join("")}domain(){return 108}}CommonLock.sealed=!0,CommonLock.toString();const o=r.Zt();r.Dt(o).Xt(CommonLock,!0),t.exports=o},function(t,e,n){const r=n(6),{PrivateKey:o,PublicKey:i,Address:s}=r,c=n(48),{Blockchain:a,Logger:h,Purse:u,Cache:f,Lock:l,Owner:d}=n(26),Jig=n(5),Berry=n(12),Code=n(1),p=n(2),w=n(36),y=n(16),Creation=n(3),{Zr:b}=n(13),CommonLock=n(40),g=n(28),{Qt:_}=n(32),m=n(8),E=n(4),{Y:P,ft:$,wt:O,xt:v}=n(0),S=n(20),{ArgumentError:ArgumentError}=n(10),{ao:x}=n(35),A=n(30),I=n(67),R=n(68),j=n(31),C=n(69),T=n(70),k=n(71),N=n(72),U=n(73),D=n(74),M=n(51),F=n(75),L=n(76),G="Run";class J{constructor(t={}){E.De&&E.Me(G,"Create"),function(t){if(t.blockchain&&void 0!==t.api&&t.blockchain.api!==t.api)throw new Error(`Blockchain mismatch with "${t.api}" api`);if(t.blockchain&&void 0!==t.network&&t.blockchain.network!==t.network)throw new Error(`Blockchain mismatch with "${t.network}" network`)}(t);const e=Object.keys(t);t=Object.assign({},J.defaults,t),this.Gt=st(t.debug);const n=K(t.logger,this.Gt);this.pn=t.logger,E.pn=n,this.networkRetries=t.networkRetries,this.networkTimeout=t.networkTimeout,this.F=new c,this.F.So=it(t.client),this.F.Ks=Z(t.cache,t.network,e.includes("cache")),this.F._a=z(t.blockchain,e.includes("blockchain"),t.api,t.apiKey,t.network,this.F._o()),this.F.ma=H(t.purse,this.F.we(),t.wallet),this.F.Yo=q(t.app),this.F.oe=et(t.owner,this.F.we(),t.wallet),this.F.bt=tt(t.timeout),this.F.vo=function(t){const e=c._&&c._.vo;if(void 0===t)return e||[];if("string"==typeof t&&(t=[t]),!Array.isArray(t)||t.some(t=>!at(t)))throw new Error("Not trustable: "+P(t));return new Set(t.concat(["61e1265acb3d93f1bf24a593d70b2a6b1c650ec1df90ddece8d6954ae3cdd915","49145693676af7567ebe20671c5cb01369ac788c20f3b1c804f624a1eda18f3f","284ce17fd34c0f41835435b03eed149c4e0479361f40132312b4001093bb158f","6fe169894d313b44bd54154f88e1f78634c7f5a23863d1713342526b86a39b8b","5332c013476cd2a2c18710a01188695bc27a5ef1748a51d4a5910feb1111dab4","81bcef29b0e4ed745f3422c0b764a33c76d0368af2d2e7dd139db8e00ee3d8a6","71fba386341b932380ec5bfedc3a40bce43d4974decdc94c419a94a8ce5dfc23","780ab8919cb89323707338070323c24ce42cdec2f57d749bd7aceef6635e7a4d","90a3ece416f696731430efac9657d28071cc437ebfff5fb1eaf710fe4b3c8d4e","727e7b423b7ee40c0b5be87fba7fa5673ea2d20a74259040a7295d9c32a90011","3b7ef411185bbe3d01caeadbe6f115b0103a546c4ef0ac7474aa6fbb71aff208","b17a9af70ab0f46809f908b2e900e395ba40996000bf4f00e3b27a1e93280cf1","72a61eb990ffdb6b38e5f955e194fed5ff6b014f75ac6823539ce5613aea0be8","312985bd960ae4c59856b3089b04017ede66506ea181333eec7c9bb88b11c490","05f67252e696160a7c0099ae8d1ec23c39592378773b3a5a55f16bd1286e7dcb","d792d10294a0d9b05a30049f187a1704ced14840ecf41d00663d79c695f86633","318d2a009e29cb3a202b2a167773341dcd39809b967889a7e306d504cc266faf","5a8d4b4da7c5f27a39adac3a9256a7e15e03a7266c81ac8369a3b634560e7814","d7273b6790a4dec4aa116661aff0ec35381794e552807014ca6a536f4454976d","ce8629aa37a1777d6aa64d0d33cd739fd4e231dc85cfe2f9368473ab09078b78","ca1818540d2865c5b6a53e06650eafadc10b478703aa7cf324145f848fec629b","1de3951603784df7c872519c096445a415d9b0d3dce7bbe3b7a36ca82cf1a91c","367b4980287f8abae5ee4b0c538232164d5b2463068067ec1e510c91114bced2","1f0abf8d94477b1cb57629d861376616f6e1d7b78aba23a19da3e6169caf489e","8b9380d445b6fe01ec7230d8363febddc99feee6064d969ae8f98fdb25e1393f","03e21aa8fcf08fa6985029ad2e697a2309962527700246d47d891add3cfce3ac","5435ae2760dc35f4329501c61c42e24f6a744861c22f8e0f04735637c20ce987","b44a203acd6215d2d24b33a41f730e9acf2591c4ae27ecafc8d88ef83da9ddea","424abf066be56b9dd5203ed81cf1f536375351d29726d664507fdc30eb589988","f97d4ac2a3d6f5ed09fad4a4f341619dc5a3773d9844ff95c99c5d4f8388de2f","63e0e1268d8ab021d1c578afb8eaa0828ccbba431ffffd9309d04b78ebeb6e56","03320f1244e509bb421e6f1ff724bf1156182890c3768cfa4ea127a78f9913d2","4a1929527605577a6b30710e6001b9379400421d8089d34bb0404dd558529417","0bdf33a334a60909f4c8dab345500cbb313fbfd50b1d98120227eae092b81c39","7d14c868fe39439edffe6982b669e7b4d3eb2729eee7c262ec2494ee3e310e99","33e78fa7c43b6d7a60c271d783295fa180b7e9fce07d41ff1b52686936b3e6ae","d476fd7309a0eeb8b92d715e35c6e273ad63c0025ff6cca927bd0f0b64ed88ff","24cde3638a444c8ad397536127833878ffdfe1b04d5595489bd294e50d77105a","bfa5180e601e92af23d80782bf625b102ac110105a392e376fe7607e4e87dc8d","3f9de452f0c3c96be737d42aa0941b27412211976688967adb3174ee18b04c64"]))}(t.trust),this.F.zo=nt(t.preverify),this.F.Ir=rt(t.rollbacks),this.Ea=ot(t.autofund),this.Pa=ct(t.inventory),V(this),this.activate()}get api(){return this.blockchain.api}get apiKey(){return this.blockchain.apiKey}get app(){return this.F.Yo}get autofund(){return this.Ea}get blockchain(){return this.F._a}get cache(){return this.F.Ks}get client(){return this.F.So}get debug(){return this.Gt}get inventory(){return this.Pa}get logger(){return this.pn}get network(){return this.blockchain.network}get networkRetries(){return this.$a}get networkTimeout(){return this.Oa}get owner(){return this.F.oe}get preverify(){return this.F.zo}get purse(){return this.F.ma}get rollbacks(){return this.F.Ir}get timeout(){return this.F.bt}get wallet(){return this.F.ma===this.F.oe?this.F.ma:void 0}set api(t){this.F._a=z(void 0,!1,t,this.blockchain.apiKey,this.blockchain.network,this.F._o())}set apiKey(t){this.F._a=z(void 0,!1,this.blockchain.api,t,this.blockchain.network,this.F._o())}set app(t){this.F.Yo=q(t)}set autofund(t){this.Ea=ot(t),V(this)}set blockchain(t){this.F._a=z(t,!0),this.F.ma instanceof T&&(this.F.ma.blockchain=this.F._a),V(this)}set cache(t){this.F.Ks=Z(t,this.network,!0)}set client(t){this.F.So=it(t)}set debug(t){this.Gt=st(t),W(this)&&(E.pn=K(this.pn,t))}set inventory(t){this.Pa&&this.Pa.deactivate(),this.Pa=ct(t),this.Pa&&this.Pa.activate(this)}set logger(t){const e=K(t,this.Gt);this.pn=t,W(this)&&(E.pn=e)}set network(t){this.F._a=z(void 0,!1,this.blockchain.api,this.blockchain.apiKey,t,this.F._o())}set networkRetries(t){this.$a=S.defaults.retries=X(t),W(this)&&(S.defaults.retries=X(t))}set networkTimeout(t){this.Oa=Q(t),W(this)&&(S.defaults.timeout=Q(t))}set owner(t){this.F.oe=et(t,this.F.we()),this.Pa&&this.Pa.deactivate(),this.Pa=new R,this.Pa.activate(this)}set rollbacks(t){this.F.Ir=rt(t)}set preverify(t){this.F.zo=nt(t)}set purse(t){this.F.ma=H(t,this.blockchain)}set timeout(t){this.F.bt=tt(t)}set wallet(t){this.purse=t,this.owner=t}load(t,e={}){if(Y(this),g.Jt)throw new Error("load disabled during atomic update");return e.trust&&this.trust(t.slice(0,64)),new y(this.F).jn(t)}sync(){if(g.Jt)throw new Error("sync all disabled during atomic update");return w.da()}deploy(t){Y(this);const e=ht(t);return p.Dt(e).Ue(),e}transaction(t){Y(this);const e=new g,n=e.update(t);return e.publish(),n}import(t,e={}){if(g.Jt)throw new Error("import disabled during atomic update");const n=new r.Transaction(t),o=e.txid||n.hash;return e.trust&&this.trust(o),g.Cc(n,o)}trust(t){if(t instanceof Array)t.forEach(t=>this.trust(t));else{if(E.De&&E.Me(G,"Trust",t),!at(t))throw new ArgumentError("Not trustable: "+P(t));this.F.vo.add(t)}}on(t,e){if(!c.va.includes(t))throw new ArgumentError("Invalid event: "+t);if("function"!=typeof e)throw new ArgumentError("Invalid listener: "+P(O));this.F.Sa.some(n=>n.xa===t&&n.Aa===e)||this.F.Sa.push({xa:t,Aa:e})}off(t,e){if(!c.va.includes(t))throw new ArgumentError("Invalid event: "+t);if("function"!=typeof e)throw new ArgumentError("Invalid listener: "+P(e));this.F.Sa=this.F.Sa.filter(n=>!(n=>n.xa===t&&n.Aa===e)(n))}activate(){if(E.De&&E.Me(G,"Activate"),g.Jt)throw new Error("activate disabled during atomic update");return J.instance=this,this.Pa&&this.Pa.activate(this),this.F.cn(),this.logger=this.pn,this.networkRetries=this.$a,this.networkTimeout=this.Oa,this}deactivate(){if(E.De&&E.Me(G,"Deactivate"),g.Jt)throw new Error("deactivate disabled during atomic update");return J.instance=null,this.Pa&&this.Pa.deactivate(),this.F.rn(),this}}function W(t){return c._===t.F}function Y(t){if(c._!==t.F)throw new Error("This Run instance is not active\n\nHint: Call run.activate() on this instance first")}function V(t){t.blockchain instanceof N&&t.purse instanceof T&&t.autofund&&t.blockchain.fund(t.purse.bsvAddress,1e8)}function z(t,e,n,r,o,i){if(t instanceof a)return t;const s=c._&&c._._a;if(void 0!==n&&"run"!==n&&"mattercloud"!==n&&"whatsonchain"!==n)throw new Error("Invalid API: "+n);if(void 0===t&&!e)switch(o){case"mock":if(void 0!==n)throw new Error(`"mock" network is not compatible with the "${n}" api`);return s instanceof N?s:new N;case"main":case"test":case"stn":{if((s instanceof D||s instanceof k||s instanceof L)&&s.api===n&&s.apiKey===r&&s.network===o)return s;const t={apiKey:r,network:o,cache:i};switch(typeof n){case"string":switch(n){case"run":return new D(t);case"mattercloud":return new k(t);case"whatsonchain":return new L(t)}break;case"undefined":return"stn"===o?new L(t):new D(t);default:throw new Error("Invalid API: "+n)}}break;default:if(J.defaults.blockchain instanceof a)return J.defaults.blockchain;throw new Error("Unsupported network: "+o)}throw new Error("Invalid blockchain: "+P(t))}function K(t,e){if(t instanceof h){const n={};return t.info&&(n.info=(...e)=>t.info(...e)),t.warn&&(n.warn=(...e)=>t.warn(...e)),t.error&&(n.error=(...e)=>t.error(...e)),t.debug&&e&&(n.debug=(...e)=>t.debug(...e)),n}if(null===t)return null;throw new Error("Invalid logger: "+P(t))}function H(t,e,n){if(n){if(!(n instanceof u))throw new Error("wallet does not implement the Purse API");return n}if(t instanceof u)return t;switch(typeof t){case"string":return new T({privkey:t,blockchain:e});case"undefined":return new T({blockchain:e});case"object":if(t instanceof o)return new T({privkey:t,blockchain:e})}throw new Error("Invalid purse: "+P(t))}function q(t){if("string"!=typeof t)throw new Error("Invalid app: "+P(t));return t}function Z(t,e,n){if(t instanceof f)return t;if(void 0===t&&!n)return J.instance&&J.instance.cache&&J.instance.network===e?J.instance.cache:"main"===e?new D:v()?new A:new j;throw new Error("Invalid cache: "+P(t))}function X(t){switch(typeof t){case"number":if(Number.isNaN(t)||t<0)throw new Error("Invalid network retries: "+t);return t;case"undefined":return 2;default:throw new Error("Invalid timeout: "+t)}}function Q(t){switch(typeof t){case"number":if(Number.isNaN(t)||t<0)throw new Error("Invalid network timeout: "+t);return t;case"undefined":return 1e4;default:throw new Error("Invalid network timeout: "+t)}}function tt(t){switch(typeof t){case"number":if(Number.isNaN(t)||t<0)throw new Error("Invalid timeout: "+t);return t;case"undefined":return 3e4;default:throw new Error("Invalid timeout: "+t)}}function et(t,e,n){if(n){if(!(n instanceof d))throw new Error("wallet does not implement the Owner API");return n}if(t instanceof d)return t;if(void 0===t||"string"==typeof t||t instanceof o)try{return new C(t,e.network)}catch(t){}if("string"==typeof t||t instanceof i||t instanceof s)try{return new F(t.toString())}catch(t){}if("object"==typeof t)try{return new F(t)}catch(t){}throw new Error("Invalid owner: "+P(t))}function nt(t){switch(typeof t){case"boolean":return t;case"undefined":return J.defaults.preverify;default:throw new Error("Invalid preverify: "+t)}}function rt(t){switch(typeof t){case"boolean":return t;case"undefined":return J.defaults.rollbacks;default:throw new Error("Invalid rollbacks: "+t)}}function ot(t){if("boolean"!=typeof t)throw new Error("Invalid autofund: "+t);return t}function it(t){if("boolean"!=typeof t)throw new Error("Invalid client: "+t);return t}function st(t){if("boolean"!=typeof t)throw new Error("Invalid debug: "+t);return t}function ct(t){switch(typeof t){case"boolean":return null;case"object":return t;case"undefined":return new R;default:throw new Error("Invalid inventory: "+t)}}function at(t){return"*"===t||"cache"===t||"string"==typeof t&&64===t.length&&/[a-fA-F0-9]+/.test(t)}function ht(t){const e=p.qt(t)||p.Zt(),n=p.Dt(e);return J.instance?n.le||n.be(t):n.Ae(t),e}function ut(t){const e=p.qt(t);e&&p.Dt(e).xe()}J.instance=null,J.defaults={},J.defaults.api=void 0,J.defaults.apiKey=void 0,J.defaults.app="",J.defaults.autofund=!0,J.defaults.blockchain=void 0,J.defaults.client=!1,J.defaults.debug=!1,J.defaults.inventory=void 0,J.defaults.logger=E.wn,J.defaults.network="main",J.defaults.networkRetries=2,J.defaults.networkTimeout=1e4,J.defaults.owner=void 0,J.defaults.preverify=!0,J.defaults.purse=void 0,J.defaults.rollbacks=!0,J.defaults.timeout=3e4,J.defaults.trust=[],J.configure=(t,e)=>{if(t.APP&&(J.defaults.app=t.APP),e=e||t.NETWORK||J.defaults.network,J.defaults.network=e,"debug"===t.LOGGER)J.defaults.logger=console;else if(t.LOGGER&&JSON.parse(t.LOGGER)){const t={info:console.info,warn:console.warn,error:console.error};J.defaults.logger=t}else t.LOGGER&&!JSON.parse(t.LOGGER)&&(J.defaults.logger={});E.pn=J.defaults.logger;const n=t.PURSE||t["PURSE_"+e.toUpperCase()];void 0!==n&&(J.defaults.purse=n);const r=t.OWNER||t["OWNER_"+e.toUpperCase()];void 0!==r&&(J.defaults.owner=r),void 0!==t.API&&(J.defaults.api=t.API);const o=t.APIKEY||t["APIKEY_"+(J.defaults.api||"").toUpperCase()];void 0!==o&&(J.defaults.apiKey=o)},J.cover=t=>{m.sn.includes(t)||m.sn.push(t)};const ft=(t,e="Run.")=>console.warn(`${e}${t} deprecated. Use Run.extra.${t}.`),lt=(t,e="Run.")=>console.warn(`${e}${t} deprecated. Use Run.plugins.${t}.`),dt=(t,e="Run.")=>console.warn(`${e}${t} deprecated. Use Run.util.${t}.`);J.Berry=Berry,J.Code=Code,J.Jig=Jig,J.Creation=Creation,J.Transaction=g,J.plugins={},J.plugins.BrowserCache=A,J.plugins.IndexedDbCache=I,J.plugins.Inventory=R,J.plugins.LocalCache=j,J.plugins.LocalOwner=C,J.plugins.LocalPurse=T,J.plugins.MatterCloud=k,J.plugins.Mockchain=N,J.plugins.PayServer=U,J.plugins.RunConnect=D,J.plugins.RunDB=M,J.plugins.Viewer=F,J.plugins.WhatsOnChain=L,$(J,"BrowserCache",()=>(lt("BrowserCache"),A)),$(J,"IndexedDbCache",()=>(lt("IndexedDbCache"),I)),$(J,"Inventory",()=>(lt("Inventory"),R)),$(J,"LocalCache",()=>(lt("LocalCache"),j)),$(J,"LocalOwner",()=>(lt("LocalOwner"),C)),$(J,"LocalPurse",()=>(lt("LocalPurse"),T)),$(J,"MatterCloud",()=>(lt("MatterCloud"),k)),$(J,"Mockchain",()=>(lt("Mockchain"),N)),$(J,"PayServer",()=>(lt("PayServer"),U)),$(J,"RunConnect",()=>(lt("RunConnect"),D)),$(J,"RunDB",()=>(lt("RunDB"),M)),$(J,"Viewer",()=>(lt("Viewer"),F)),$(J,"WhatsOnChain",()=>(lt("WhatsOnChain"),L)),J.module={};const pt="Run.module";$(J.module,"BrowserCache",()=>(lt("BrowserCache",pt),A)),$(J.module,"IndexedDbCache",()=>(lt("IndexedDbCache",pt),I)),$(J.module,"Inventory",()=>(lt("Inventory",pt),R)),$(J.module,"LocalCache",()=>(lt("LocalCache",pt),j)),$(J.module,"LocalOwner",()=>(lt("LocalOwner",pt),C)),$(J.module,"LocalPurse",()=>(lt("LocalPurse",pt),T)),$(J.module,"MatterCloud",()=>(lt("MatterCloud",pt),k)),$(J.module,"Mockchain",()=>(lt("Mockchain",pt),N)),$(J.module,"PayServer",()=>(lt("PayServer",pt),U)),$(J.module,"RunConnect",()=>(lt("RunConnect",pt),D)),$(J.module,"RunDB",()=>(lt("RunDB",pt),M)),$(J.module,"Viewer",()=>(lt("Viewer",pt),F)),$(J.module,"WhatsOnChain",()=>(lt("WhatsOnChain",pt),L)),J.extra={},$(J.extra,"asm",()=>n(43)),$(J.extra,"B",()=>n(52)),$(J.extra,"Base58",()=>n(53)),$(J.extra,"expect",()=>n(54)),$(J.extra,"Group",()=>n(42)),$(J.extra,"Hex",()=>n(25)),$(J.extra,"sha256",()=>n(55)),$(J.extra,"Token",()=>n(39)),$(J.extra,"Token10",()=>n(56)),$(J.extra,"Token20",()=>n(39)),$(J.extra,"Tx",()=>n(45)),$(J.extra,"txo",()=>n(44)),$(J,"asm",()=>(ft("asm"),n(43))),$(J,"B",()=>(ft("B"),n(52))),$(J,"Base58",()=>(ft("Base58"),n(53))),$(J,"expect",()=>(ft("expect"),n(54))),$(J,"Group",()=>(ft("Group"),n(42))),$(J,"Hex",()=>(ft("Hex"),n(25))),$(J,"sha256",()=>(ft("sha256"),n(55))),$(J,"Token",()=>(ft("Token"),n(39))),$(J,"Token10",()=>(ft("Token10"),n(56))),$(J,"Token20",()=>(ft("Token10"),n(39))),$(J,"Tx",()=>(ft("Tx"),n(45))),$(J,"txo",()=>(ft("txo"),n(44))),J.Cn=n(7).Cn,J.mn=n(11),J.Ia=n(13),J.Ra=n(29),J.ja=n(21),J.Pn=n(14),J.Ca=n(49),J.Ta=n(57),J.dn=n(2).dn,J.ka=n(46),J.jt=n(4),J.On=n(19),J.Ct=n(0),J.Na=n(22),J.Ua=n(38),J.Tt=n(9),J.Da=n(20),J.j=n(0).j,J.C=n(0).C,J.k=n(0).k,J.Sn=n(23),J.xn=m,J.Ma=n(50),J.Kr=n(13).Kr,J.Fa=n(33),J.Ba=n(27),J.La=n(37),J.g=n(7).g,J.Nr=n(15),J.api={},J.api.Blockchain=a,J.api.Logger=h,J.api.Purse=u,J.api.Cache=f,J.api.Lock=l,J.api.Owner=d,J.errors=n(10),J.util={},J.util.CommonLock=CommonLock,J.util.metadata=t=>{if("string"!=typeof t||!t.length)throw new Error("Invalid transaction: "+t);return x(new r.Transaction(t))},J.util.install=ht,J.util.sha256=b,J.util.unify=function(...t){if(!t.length)throw new ArgumentError("No creations to unify");if(t.some(t=>!(t instanceof Creation)))throw new ArgumentError("Must only unify creations");_(t,t)},J.util.uninstall=ut,$(J,"CommonLock",()=>(dt("CommonLock"),CommonLock)),$(J,"install",()=>(dt("install"),ht)),$(J,"uninstall",()=>(dt("uninstall"),ut)),$(J.prototype,"payload",()=>(console.warn("Run.prototype.payload deprecated. Use Run.util.metadata."),J.util.metadata)),$(J.prototype,"unify",()=>(console.warn("Run.prototype.unify deprecated. Use Run.util.unify."),J.util.unify)),J.version="0.6.23",J.protocol=n(15).ro,t.exports=J},function(t,e,n){const r=n(2),asm=n(43),Hex=n(25);class Group{constructor(t,e){this.pubkeys=t,this.required=void 0===e?this.pubkeys.length:e}script(){if(!Array.isArray(this.pubkeys))throw new Error("pubkeys not an array");if(this.pubkeys.length<1)throw new Error("pubkeys must have at least one entry");if(this.pubkeys.length>16)throw new Error("No more than 16 pubkeys allowed");const t=new Set;for(const e of this.pubkeys)t.add(e);if(t.size!==this.pubkeys.length)throw new Error("pubkeys contains duplicates");if(this.pubkeys.forEach(t=>Hex.stringToBytes(t)),"number"!=typeof this.required||!Number.isInteger(this.required)||this.required<1)throw new Error("required must be a non-negative integer");if(this.required>this.pubkeys.length)throw new Error("required must be <= the number of pubkeys");return asm(`OP_${this.required} ${this.pubkeys.join(" ")} OP_${this.pubkeys.length} OP_CHECKMULTISIG`)}domain(){return 1+74*this.required}add(t){this.pubkeys.includes(t)||this.pubkeys.push(t)}}Group.deps={asm:asm,Hex:Hex},Group.sealed=!1,Group.toString(),Group.presets={},Group.presets.main={},Group.presets.test={},Group.presets.main.location="780ab8919cb89323707338070323c24ce42cdec2f57d749bd7aceef6635e7a4d_o1",Group.presets.main.origin="90a3ece416f696731430efac9657d28071cc437ebfff5fb1eaf710fe4b3c8d4e_o1",Group.presets.main.nonce=2,Group.presets.main.owner="1PytriYokKN3GpKw84L4vvrGBwUvTYzCpx",Group.presets.main.satoshis=0,Group.presets.test.location="63e0e1268d8ab021d1c578afb8eaa0828ccbba431ffffd9309d04b78ebeb6e56_o1",Group.presets.test.origin="03320f1244e509bb421e6f1ff724bf1156182890c3768cfa4ea127a78f9913d2_o1",Group.presets.test.nonce=3,Group.presets.test.owner="n3CiECgxW1pB1rGbYiX67e4U7AnS3MpJeE",Group.presets.test.satoshis=0,t.exports=r.Ae(Group)},function(t,e,n){const r=n(2),Hex=n(25);function asm(t){const e=t.split(" ");let n=[];for(const t of e){if(void 0!==asm.OP_CODES[t]){n.push(asm.OP_CODES[t]);continue}const e=Hex.stringToBytes(1===t.length?"0"+t:t);if(1===e.length&&0===e[0]){n.push(e[0]);continue}if(1===e.length&&e[0]>=1&&e[0]<=16){n.push(e[0]+80);continue}if(e.length<=75){n=n.concat(e.length).concat(e);continue}if(e.length<256){n=n.concat(asm.OP_CODES.OP_PUSHDATA1).concat([e.length]).concat(e);continue}const r=t=>parseInt(t.toString(),10);if(e.length<65536){const t=[e.length%256,r(e.length/256)];n=n.concat(asm.OP_CODES.OP_PUSHDATA2).concat(t).concat(e);continue}const o=[e.length%256,r(e.length/256)%256,r(e.length/256/256)%256,r(e.length/256/256/256)];n=n.concat(asm.OP_CODES.OP_PUSHDATA4).concat(o).concat(e)}return Hex.bytesToString(n)}asm.OP_CODES={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_IF:99,OP_NOTIF:100,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SPLIT:127,OP_NUM2BIN:128,OP_BIN2NUM:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_1ADD:139,OP_1SUB:140,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_NOP3:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255},asm.deps={Hex:Hex},asm.toString(),asm.presets={},asm.presets.main={},asm.presets.test={},asm.presets.main.location="284ce17fd34c0f41835435b03eed149c4e0479361f40132312b4001093bb158f_o1",asm.presets.main.origin="61e1265acb3d93f1bf24a593d70b2a6b1c650ec1df90ddece8d6954ae3cdd915_o1",asm.presets.main.nonce=3,asm.presets.main.owner="1PytriYokKN3GpKw84L4vvrGBwUvTYzCpx",asm.presets.main.satoshis=0,asm.presets.test.location="03e21aa8fcf08fa6985029ad2e697a2309962527700246d47d891add3cfce3ac_o1",asm.presets.test.origin="1f0abf8d94477b1cb57629d861376616f6e1d7b78aba23a19da3e6169caf489e_o1",asm.presets.test.nonce=3,asm.presets.test.owner="n3CiECgxW1pB1rGbYiX67e4U7AnS3MpJeE",asm.presets.test.satoshis=0,t.exports=r.Ae(asm)},function(t,e,n){const r=n(2),Tx=n(45),Hex=n(25);function txo(t){const e={};function n(t,e){const n={};return function(t){const e=Hex.stringToBytes(t);let n=0;function r(){return e[n++]}function o(){return r()+256*r()}function i(t){const r=Hex.bytesToString(e.slice(n,n+t));return n+=t,r}const s=[];for(;n<e.length;){const t=r();if(t>0&&t<76)s.push({buf:i(t),len:t,opcodenum:t});else if(76===t){const e=r();s.push({buf:i(e),len:e,opcodenum:t})}else if(77===t){const e=o();s.push({buf:i(e),len:e,opcodenum:t})}else if(78===t){const e=o()+256*o()*256;s.push({buf:i(e),len:e,opcodenum:t})}else s.push({opcodenum:t})}return s}(t).forEach((t,r)=>{if(t.buf){n["b"+r]=function(t){const e=t=>t.toString(2).padStart(8,0),n=t.length;let r="";for(let o=0;o<=(n-1)/3;o++){const i=3*o+1>=n,s=3*o+2>=n;r+=(e(t[3*o])+e(i?0:t[3*o+1])+e(s?0:t[3*o+2])).match(/.{1,6}/g).map((t,e)=>3===e&&s||2===e&&i?"=":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[+("0b"+t)]).join("")}return r}(Hex.stringToBytes(t.buf));const o=t.buf.replace(/[0-9a-f]{2}/g,"%$&");if(e)try{n["s"+r]=decodeURIComponent(o)}catch(t){}e&&(n["h"+r]=t.buf)}else n["b"+r]={op:t.opcodenum}}),n}const r=new Tx(t);return e.in=r.inputs.map((function(t,e){const r=n(t.script);return r.e={h:t.prevTxId,i:t.outputIndex},r.i=e,r.seq=t.sequenceNumber,r})),e.out=r.outputs.map((function(t,e){const r=n(t.script,!0);return r.e={v:t.satoshis,i:e},r.i=e,r})),e.lock=r.nLockTime,e}txo.deps={Tx:Tx,Hex:Hex},Tx.toString(),txo.presets={},txo.presets.main={},txo.presets.test={},txo.presets.main.location="05f67252e696160a7c0099ae8d1ec23c39592378773b3a5a55f16bd1286e7dcb_o2",txo.presets.main.origin="05f67252e696160a7c0099ae8d1ec23c39592378773b3a5a55f16bd1286e7dcb_o2",txo.presets.main.nonce=2,txo.presets.main.owner="1PytriYokKN3GpKw84L4vvrGBwUvTYzCpx",txo.presets.main.satoshis=0,txo.presets.test.location="d476fd7309a0eeb8b92d715e35c6e273ad63c0025ff6cca927bd0f0b64ed88ff_o2",txo.presets.test.origin="d476fd7309a0eeb8b92d715e35c6e273ad63c0025ff6cca927bd0f0b64ed88ff_o2",txo.presets.test.nonce=2,txo.presets.test.owner="n3CiECgxW1pB1rGbYiX67e4U7AnS3MpJeE",txo.presets.test.satoshis=0,t.exports=r.Ae(txo)},function(t,e,n){const r=n(2),Hex=n(25);class Tx{constructor(t){const e=Hex.stringToBytes(t);let n=0;function r(){return e[n++]}function o(){return r()+256*r()}function i(){return o()+256*o()*256}function s(){return i()+256*i()*256*256*256}function c(){const t=r();return 255===t?s():254===t?i():253===t?o():t}function a(){const t=Hex.bytesToString(e.slice(n,n+32).reverse());return n+=32,t}function h(){const t=c(),r=Hex.bytesToString(e.slice(n,n+t));return n+=t,r}this.version=i();const u=c();this.inputs=[];for(let t=0;t<u;t++)this.inputs.push({prevTxId:a(),outputIndex:i(),script:h(),sequenceNumber:i()});const f=c();this.outputs=[];for(let t=0;t<f;t++)this.outputs.push({satoshis:s(),script:h()});this.nLockTime=i()}}Tx.deps={Hex:Hex},Tx.toString(),Tx.presets={},Tx.presets.main={},Tx.presets.test={},Tx.presets.main.location="05f67252e696160a7c0099ae8d1ec23c39592378773b3a5a55f16bd1286e7dcb_o1",Tx.presets.main.origin="05f67252e696160a7c0099ae8d1ec23c39592378773b3a5a55f16bd1286e7dcb_o1",Tx.presets.main.nonce=2,Tx.presets.main.owner="1PytriYokKN3GpKw84L4vvrGBwUvTYzCpx",Tx.presets.main.satoshis=0,Tx.presets.test.location="d476fd7309a0eeb8b92d715e35c6e273ad63c0025ff6cca927bd0f0b64ed88ff_o1",Tx.presets.test.origin="d476fd7309a0eeb8b92d715e35c6e273ad63c0025ff6cca927bd0f0b64ed88ff_o1",Tx.presets.test.nonce=2,Tx.presets.test.owner="n3CiECgxW1pB1rGbYiX67e4U7AnS3MpJeE",Tx.presets.test.satoshis=0,t.exports=r.Ae(Tx)},function(t,e,n){const r=n(6),{xt:o,St:i}=n(0);function s(){if("string"!=typeof r.version||!r.version.startsWith("v1."))throw new Error("RUN requires version 1.x of the bsv library\n\nHint: Please install bsv version 1.5.4 or install the RUN SDK from NPM")}function c(){if(!i())return;const t=Number(process.version.match(/^v(\d+\.\d+)/)[1]);if(t<10)throw new Error("RUN is supported only on Node 10 and above");if(t>=17)throw new Error("RUN is supported only on Node 16 and below")}function a(){if(!o())return;const t=window.navigator.userAgent;if(-1!==t.indexOf("MSIE")||-1!==t.indexOf("Trident"))throw new Error("RUN is not supported on Internet Explorer. Please upgrade to Edge.");if(/iP(hone|od|ad)/.test(navigator.platform)){var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);if([parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)][0]<13)throw new Error("RUN is not supported on this iOS version. Please upgrade to iOS 13 or above.")}}t.exports={Et:function(){s(),c(),a()},Ga:s,Ja:c,Wa:a}},function(t,e){t.exports=function(t){const e=JSON.stringify;return function(n,r,o){"number"==typeof o&&(o=Array(o+1).join(" ")),"string"!=typeof o&&(o="");const i=new Set;return function n(s,c,a,h){const u=o?"\n"+new Array(h+1).join(o):"",f=o?": ":":";if(a&&"function"==typeof a.toJSON&&(a=a.toJSON()),void 0===(a=r?r.call(s,c,a):a))return;if("object"!=typeof a||null===a)return e(a);if(i.has(a))throw new TypeError("Converting circular structure to JSON");let l;if(i.add(a),Array.isArray(a)){const t=[];for(let r=0;r<a.length;r++){const i=n(a,r,a[r],h+1)||e(null);t.push(u+o+i)}l="["+t.join(",")+(t.length?u:"")+"]"}else{let r=Object.keys(a);t&&(r=r.sort(t));const i=[];for(let t=0;t<r.length;t++){const s=r[t],c=n(a,s,a[s],h+1);if(!c)continue;const l=e(s)+f+c;i.push(u+o+l)}l="{"+i.join(",")+(i.length?u:"")+"}"}return i.delete(a),l}({"":n},"",n,0)}}},function(t,e,n){const r=n(6),{B:o,L:i}=n(0),s=n(2),c=n(4),{ClientModeError:ClientModeError}=n(10),a=n(37),h=["load","sync","publish","update"],u="config://code-filter";class f{constructor(){this._a=null,this.Ks=null,this.oe=null,this.ma=null,this.Yo=null,this.Sa=[],this.bt=1e4,this.vo=new Set,this.zo=!0,this.So=!1,this.Ir=!1}we(){const t=this._a,e=this;return{get network(){return t.network},async broadcast(n){if(c.De){const t=new r.Transaction(n).hash;c.Me("Blockchain","Broadcast",t)}const o=new Date,i=await t.broadcast(n);return c.Lt&&c.Gt("Blockchain","Broadcast (end): "+(new Date-o)+"ms"),await e.Ks.set("tx://"+i,n),i},async fetch(n){if(c.De&&c.Me("Blockchain","Fetch",n),e.So){const t=await e.Ks.get("tx://"+n);if(!t)throw new ClientModeError(n,"transaction");return t}const r=new Date,o=await t.fetch(n);return c.Lt&&c.Gt("Blockchain","Fetch (end): "+(new Date-r)+"ms"),o},async utxos(e){c.De&&c.Me("Blockchain","Utxos",e);const n=new Date,r=await t.utxos(e);return c.Lt&&c.Gt("Blockchain","Utxos (end): "+(new Date-n)+"ms"),r},async spends(n,r){if(c.De&&c.Me("Blockchain",`Spends ${n}_o${r}`),e.So)return await e.Ks.get(`spend://${n}_o${r}`);const o=new Date,i=await t.spends(n,r);return c.Lt&&c.Gt("Blockchain","Spends (end): "+(new Date-o)+"ms"),i},async time(n){if(c.De&&c.Me("Blockchain","Time",n),e.So)return await e.Ks.get("time://"+n);const r=new Date,o=await t.time(n);return c.Lt&&c.Gt("Blockchain","Time (end): "+(new Date-r)+"ms"),o}}}_o(){const t=this.Ks;return{async get(e){c.De&&c.Me("Cache","Get",e);const n=new Date,r=await t.get(e);return c.Lt&&c.Gt("Cache","Get (end): "+(new Date-n)+"ms"),c.Lt&&c.Gt("Cache","Value",JSON.stringify(r,0,3)),r},async set(e,n){c.De&&c.Me("Cache","Set",e),c.Lt&&c.Gt("Cache","Value",JSON.stringify(n,0,3));const r=new Date,o=await t.set(e,n);if(e.startsWith("jig://")&&"code"===n.kind){const n=await t.get(u)||a.create();a.add(n,e),await t.set(u,n)}return c.Lt&&c.Gt("Cache","Set (end): "+(new Date-r)+"ms"),o}}}Uo(){const t=this.oe;return{async nextOwner(){c.De&&c.Me("Owner","Next owner");const e=new Date;let n=null;return"function"==typeof t.owner?(c.yn("Kernel","Owner.prototype.owner() is deprecated. Please rename owner() to nextOwner()."),n=await t.owner()):n=await t.nextOwner(),c.Lt&&c.Gt("Owner","Next owner (end): "+(new Date-e)+"ms"),n},async sign(e,n,r){c.De&&c.Me("Owner","Sign");const o=new Date,i=await t.sign(e,n,r);return c.Lt&&c.Gt("Owner","Sign (end): "+(new Date-o)+"ms"),i}}}qo(){const t=this.ma;return{async pay(e,n){c.De&&c.Me("Purse","Pay");const r=new Date,o=await t.pay(e,n);return c.Lt&&c.Gt("Purse","Pay (end): "+(new Date-r)+"ms"),o},async broadcast(e){if("function"==typeof t.broadcast){c.De&&c.Me("Purse","Broadcast");const n=new Date,r=await t.broadcast(e);return c.Lt&&c.Gt("Purse","Broadcast (end): "+(new Date-n)+"ms"),r}}}}cn(){f._!==this&&(f._&&f._.rn(),f._=this,r.Networks.defaultNetwork=r.Networks[i(this.we().network)],s.cn())}rn(){f._&&(s.rn(),f._=null)}ur(t,e){o(h.includes(t)),this.Sa.filter(e=>e.xa===t).forEach(n=>n.Aa(t,e))}async mc(t,e){return this.vo.has("*")||this.vo.has(t)||"cache"===e&&this.vo.has("cache")||await this.Ks.get("trust://"+t)}}f._=null,f.va=h,t.exports=f},function(t,e,n){const r=n(60),{makeDeterministic:o,nonDeterministicIntrinsics:i}=n(61),s=n(47),{g:c}=n(7);t.exports=class{constructor(){const t=`var n=${s.toString()};var m=${o.toString()};m(n);`,e=`(()=>{\n      ${r};\n      ${t};\n      SES.lockdown();\n      var C = this.Compartment;\n      delete this.SES;\n      delete this.Compartment;\n      return C\n    })()`;{const t=n(62);this.Compartment=t.runInNewContext(e)}this.globalOverrides={},i.forEach(t=>{this.globalOverrides[t]=void 0});const a=this.Ya();a.global.c=console,a.global.s=c,this.globalOverrides.console=a.evaluate("\n      const o = { }\n      Object.keys(c).forEach(name => {\n        o[name] = (...args) => s(() => c[name](...args))\n      })\n      o\n    ")}makeCompartment(){const t=this.Ya();return Object.assign(t.global,this.globalOverrides),{evaluate:e=>(this.Va(e),t.evaluate(e)),global:new Proxy({},{set:(e,n,r)=>(e[n]=t.global[n]=r,!0),deleteProperty:(e,n)=>(delete e[n],n in this.globalOverrides?t.global[n]=this.globalOverrides[n]:delete t.global[n],!0),defineProperty:(e,n,r)=>(Object.defineProperty(e,n,r),Object.defineProperty(t.global,n,r),!0)})}}Ya(){return new this.Compartment}Va(t){if(/for\s*\([^)]+\s+in\s+\S+\)/g.test(t))throw new Error("for-in loops are not supported")}}},function(t,e){t.exports=class{constructor(){this.tasks=[]}async jo(t){return new Promise((e,n)=>{this.tasks.push({func:t,reject:n,resolve:e}),1===this.tasks.length&&this.za()})}async za(){const t=this.tasks[0];try{const e=t.func();t.resolve(e instanceof Promise?await e:e)}catch(e){t.reject(e)}finally{this.tasks.shift(),this.tasks.length&&this.za()}}}},function(t,e,n){const r=n(31),o=n(30),i=n(20),{xt:s}=n(0);t.exports=class{constructor(t,e){this.host=t,this.localCache=e||(s()?new o:new r),this.request=i}async get(t){const e=await this.localCache.get(t);if(e)return e;let n;const[r,o]=t.split("://");switch(r){case"tx":n=`${this.host}/tx/${o}`;break;case"jig":n=`${this.host}/jig/${o}`;break;case"berry":n=`${this.host}/berry/${o}`;break;case"spend":n=`${this.host}/spends/${o}`;break;case"time":n=`${this.host}/time/${o}`;break;case"trust":n=`${this.host}/trust/${o}`;break;case"ban":default:return}try{const e=await this.request(n);return e&&await this.localCache.set(t,e),e}catch(t){if(404===t.status)return;throw t}}async set(t,e){await this.localCache.set(t,e)}async unspent(t){const e=`${this.host}/unspent?scripthash=${t}`;return await this.request(e)}}},function(t,e,n){const Berry=n(12),r=n(2),txo=n(44);class B extends Berry{init(t,e,n,r,o={}){this.base64Data=t,this.mediaType=e,this.encoding=n,this.filename=r,this.metadata=o,"image/svg+xml"!==e&&"image/png"!==e||(this.metadata.image=this)}static async pluck(t,e){const n=64===t.length?t:JSON.parse(t).txid,r=64===t.length?{}:JSON.parse(t).metadata,o=txo(await e(n)).out.find(t=>"19HxigV4QyBv3tHpQVcUEQyq1pzZVdoAut"===t.s2);if(!o)throw new Error("Cannot find B:// data in "+n);return new B(o.b3,o.s4,o.s5,o.s6,r)}static async loadWithMetadata(t,e){return this.load(JSON.stringify({txid:t,metadata:e}))}}B.metadata={author:"Run ▸ Extra",website:"https://www.run.network",license:"MIT"},B.deps={txo:txo},B.toString(),B.presets={},B.presets.main={},B.presets.test={},B.presets.main.location="05f67252e696160a7c0099ae8d1ec23c39592378773b3a5a55f16bd1286e7dcb_o3",B.presets.main.origin="05f67252e696160a7c0099ae8d1ec23c39592378773b3a5a55f16bd1286e7dcb_o3",B.presets.main.nonce=2,B.presets.main.owner="1PytriYokKN3GpKw84L4vvrGBwUvTYzCpx",B.presets.main.satoshis=0,B.presets.test.location="d476fd7309a0eeb8b92d715e35c6e273ad63c0025ff6cca927bd0f0b64ed88ff_o3",B.presets.test.origin="d476fd7309a0eeb8b92d715e35c6e273ad63c0025ff6cca927bd0f0b64ed88ff_o3",B.presets.test.nonce=2,B.presets.test.owner="n3CiECgxW1pB1rGbYiX67e4U7AnS3MpJeE",B.presets.test.satoshis=0,t.exports=r.Ae(B)},function(t,e,n){const r=n(2);class Base58{static decode(t){if("string"!=typeof t)throw new Error("Cannot decode: "+t);const e=[],n=[];let r,o,i;for(let s=0;s<t.length;s++){if(r=0,o="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz".indexOf(t[s]),o<0)throw new Error(`Invalid base58 character: ${t}\n\nDetails: i=${s}, c=${t[s]}`);for(o||n.length^s||n.push(0);r in e||o;)i=e[r],i=i?58*i+o:o,o=i>>8,e[r]=i%256,r++}for(;r--;)n.push(e[r]);if(n.length<5)throw new Error("Base58 string too short: "+t);return n.slice(1,n.length-4)}}Base58.toString(),Base58.presets={},Base58.presets.main={},Base58.presets.test={},Base58.presets.main.location="81bcef29b0e4ed745f3422c0b764a33c76d0368af2d2e7dd139db8e00ee3d8a6_o1",Base58.presets.main.origin="81bcef29b0e4ed745f3422c0b764a33c76d0368af2d2e7dd139db8e00ee3d8a6_o1",Base58.presets.main.nonce=1,Base58.presets.main.owner="1PytriYokKN3GpKw84L4vvrGBwUvTYzCpx",Base58.presets.main.satoshis=0,Base58.presets.test.location="424abf066be56b9dd5203ed81cf1f536375351d29726d664507fdc30eb589988_o1",Base58.presets.test.origin="424abf066be56b9dd5203ed81cf1f536375351d29726d664507fdc30eb589988_o1",Base58.presets.test.nonce=1,Base58.presets.test.owner="n3CiECgxW1pB1rGbYiX67e4U7AnS3MpJeE",Base58.presets.test.satoshis=0,t.exports=r.Ae(Base58)},function(t,e,n){const Jig=n(5),r=n(2);function expect(t){let e=!1;const n=t=>{if("object"!=typeof t||!t)return t;try{return JSON.stringify(t)}catch(e){return t.toString()}};function r(r,o,i){if(e?r:!r)throw new Error(i||`expected value${e?" not":""} to be ${o} but was ${n(t)}`)}function i(t,e){if("function"!=typeof t)return!1;if("function"!=typeof e)return!1;for(;t;)if((t=Object.getPrototypeOf(t))===e)return!0;return!1}return{get not(){return e=!e,this},toBe:(e,o)=>r(t===e,""+n(e),o),toEqual:(e,i)=>r(function o(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if("object"!=typeof t)return!1;if(null===t||null===e)return!1;if(Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;if(!Object.keys(t).every(n=>o(t[n],e[n])))return!1;if(t instanceof Set){if(t.size!==e.size)return!1;if(!o(Array.from(t.entries()),Array.from(e.entries())))return!1}if(t instanceof Map){if(t.size!==e.size)return!1;if(!o(Array.from(t.entries()),Array.from(e.entries())))return!1}return!0}(t,e),"equal to "+n(e),i),toBeInstanceOf:(e,n)=>r(t&&t instanceof e,"an instance of "+(e&&e.name),n),toBeDefined:e=>r(void 0!==t,"defined",e),toBeNull:e=>r(null===t,"null",e),toBeNumber:e=>r("number"==typeof t,"a number",e),toBeInteger:e=>r(Number.isInteger(t),"an integer",e),toBeLessThan:(e,n)=>r(t<e&&"number"==typeof t&&"number"==typeof e,"less than "+e,n),toBeLessThanOrEqualTo:(e,n)=>r(t<=e&&"number"==typeof t&&"number"==typeof e,"less than or equal to "+e,n),toBeGreaterThan:(e,n)=>r(t>e&&"number"==typeof t&&"number"==typeof e,"greater than "+e,n),toBeGreaterThanOrEqualTo:(e,n)=>r(t>=e&&"number"==typeof t&&"number"==typeof e,"greater than or equal to "+e,n),toBeBoolean:e=>r("boolean"==typeof t,"a boolean",e),toBeString:e=>r("string"==typeof t,"a string",e),toBeObject:e=>r(t&&"object"==typeof t,"an object",e),toBeArray:e=>r(Array.isArray(t),"an array",e),toBeSet:e=>r(t instanceof Set,"a set",e),toBeMap:e=>r(t instanceof Map,"a map",e),toBeUint8Array:e=>r(t instanceof Uint8Array,"a uint8array",e),toBeClass:e=>r("function"==typeof t&&t.toString().startsWith("class"),"a class",e),toBeFunction:e=>r("function"==typeof t&&!t.toString().startsWith("class"),"a function",e),toBeJigClass:e=>r("function"==typeof t&&t.toString().startsWith("class")&&i(t,Jig),"a jig class",e),toExtendFrom:(e,n)=>r(i(t,e),"an extension of "+(e&&e.name),n)}}expect.deps={Jig:Jig},expect.toString(),expect.presets={},expect.presets.main={},expect.presets.test={},expect.presets.main.location="71fba386341b932380ec5bfedc3a40bce43d4974decdc94c419a94a8ce5dfc23_o1",expect.presets.main.origin="71fba386341b932380ec5bfedc3a40bce43d4974decdc94c419a94a8ce5dfc23_o1",expect.presets.main.nonce=1,expect.presets.main.owner="1PytriYokKN3GpKw84L4vvrGBwUvTYzCpx",expect.presets.main.satoshis=0,expect.presets.test.location="f97d4ac2a3d6f5ed09fad4a4f341619dc5a3773d9844ff95c99c5d4f8388de2f_o1",expect.presets.test.origin="f97d4ac2a3d6f5ed09fad4a4f341619dc5a3773d9844ff95c99c5d4f8388de2f_o1",expect.presets.test.nonce=1,expect.presets.test.owner="n3CiECgxW1pB1rGbYiX67e4U7AnS3MpJeE",expect.presets.test.satoshis=0,t.exports=r.Ae(expect)},function(t,e,n){const r=n(2);function sha256(t){if(!Array.isArray(t))throw new Error("Invalid bytes: "+t);const e=[-2147483648,8388608,32768,128],n=[24,16,8,0],r=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];let i=1779033703,s=3144134277,c=1013904242,a=2773480762,h=1359893119,u=2600822924,f=528734635,l=1541459225,d=0,p=0,w=0,y=0,b=!0,g=!1,_=0;return function(){let e,r=0;const i=t.length;for(;r<i;){for(g&&(g=!1,o[0]=d,o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),e=p;r<i&&e<64;++r)o[e>>2]|=t[r]<<n[3&e++];_=e,w+=e-p,e>=64?(d=o[16],p=e-64,m(),g=!0):p=e}w>4294967295&&(y+=w/4294967296<<0,w%=4294967296)}(),o[16]=d,o[_>>2]|=e[3&_],d=o[16],_>=56&&(g||m(),o[0]=d,o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),o[14]=y<<3|w>>>29,o[15]=w<<3,m(),[i>>24&255,i>>16&255,i>>8&255,255&i,s>>24&255,s>>16&255,s>>8&255,255&s,c>>24&255,c>>16&255,c>>8&255,255&c,a>>24&255,a>>16&255,a>>8&255,255&a,h>>24&255,h>>16&255,h>>8&255,255&h,u>>24&255,u>>16&255,u>>8&255,255&u,f>>24&255,f>>16&255,f>>8&255,255&f,l>>24&255,l>>16&255,l>>8&255,255&l];function m(){let t,e,n,d,p,w,y,g,_,m,E,P=i,$=s,O=c,v=a,S=h,x=u,A=f,I=l;for(t=16;t<64;++t)p=o[t-15],e=(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3,p=o[t-2],n=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10,o[t]=o[t-16]+e+o[t-7]+n<<0;for(E=$&O,t=0;t<64;t+=4)b?(g=704751109,p=o[0]-210244248,I=p-1521486534<<0,v=p+143694565<<0,b=!1):(e=(P>>>2|P<<30)^(P>>>13|P<<19)^(P>>>22|P<<10),n=(S>>>6|S<<26)^(S>>>11|S<<21)^(S>>>25|S<<7),g=P&$,d=g^P&O^E,y=S&x^~S&A,p=I+n+y+r[t]+o[t],w=e+d,I=v+p<<0,v=p+w<<0),e=(v>>>2|v<<30)^(v>>>13|v<<19)^(v>>>22|v<<10),n=(I>>>6|I<<26)^(I>>>11|I<<21)^(I>>>25|I<<7),_=v&P,d=_^v&$^g,y=I&S^~I&x,p=A+n+y+r[t+1]+o[t+1],w=e+d,A=O+p<<0,O=p+w<<0,e=(O>>>2|O<<30)^(O>>>13|O<<19)^(O>>>22|O<<10),n=(A>>>6|A<<26)^(A>>>11|A<<21)^(A>>>25|A<<7),m=O&v,d=m^O&P^_,y=A&I^~A&S,p=x+n+y+r[t+2]+o[t+2],w=e+d,x=$+p<<0,$=p+w<<0,e=($>>>2|$<<30)^($>>>13|$<<19)^($>>>22|$<<10),n=(x>>>6|x<<26)^(x>>>11|x<<21)^(x>>>25|x<<7),E=$&O,d=E^$&v^m,y=x&A^~x&I,p=S+n+y+r[t+3]+o[t+3],w=e+d,S=P+p<<0,P=p+w<<0;i=i+P<<0,s=s+$<<0,c=c+O<<0,a=a+v<<0,h=h+S<<0,u=u+x<<0,f=f+A<<0,l=l+I<<0}}sha256.toString(),sha256.presets={},sha256.presets.main={},sha256.presets.test={},sha256.presets.main.location="3b7ef411185bbe3d01caeadbe6f115b0103a546c4ef0ac7474aa6fbb71aff208_o1",sha256.presets.main.origin="3b7ef411185bbe3d01caeadbe6f115b0103a546c4ef0ac7474aa6fbb71aff208_o1",sha256.presets.main.nonce=1,sha256.presets.main.owner="1PytriYokKN3GpKw84L4vvrGBwUvTYzCpx",sha256.presets.main.satoshis=0,sha256.presets.test.location="4a1929527605577a6b30710e6001b9379400421d8089d34bb0404dd558529417_o1",sha256.presets.test.origin="4a1929527605577a6b30710e6001b9379400421d8089d34bb0404dd558529417_o1",sha256.presets.test.nonce=1,sha256.presets.test.owner="n3CiECgxW1pB1rGbYiX67e4U7AnS3MpJeE",sha256.presets.test.satoshis=0,t.exports=r.Ae(sha256)},function(t,e,n){const Jig=n(5),r=n(2);class Token extends Jig{init(...t){if(Object.getPrototypeOf(this.constructor)===Jig)throw new Error("Token must be extended");if(caller===this.constructor)return this.ga(caller.mintAmount),this.amount=caller.mintAmount,void(this.sender=null);if(caller&&caller.constructor===this.constructor)return this.ga(caller.sendAmount),this.amount=caller.sendAmount,this.owner=caller.sendOwner,void(this.sender=caller.owner);if(!Array.isArray(t)||t.length<2)throw new Error("Invalid tokens to combine");if(t.some(t=>t.constructor!==this.constructor))throw new Error("Cannot combine different token classes");if(t.some(e=>(e=>t.reduce((t,n)=>n===e?t+1:t,0))(e)>1))throw new Error("Cannot combine duplicate tokens");this.amount=0,t.forEach(t=>{this.amount+=t.amount,t.destroy()}),this.sender=null,this.ga(this.amount)}static mint(t){this.mintAmount=t;const e=new this;return delete this.mintAmount,this.supply+=t,e}destroy(){super.destroy(),this.amount=0,this.sender=null}send(t,e=this.amount){if(this.ga(e),e>this.amount)throw new Error("Not enough funds");this.sendAmount=e,this.sendOwner=t;const n=new this.constructor;return delete this.sendAmount,delete this.sendOwner,this.amount===e?this.destroy():(this.amount-=e,this.sender=null),n}ga(t){if("number"!=typeof t)throw new Error("amount is not a number");if(!Number.isInteger(t))throw new Error("amount must be an integer");if(t<=0)throw new Error("amount must be positive");if(t>Number.MAX_SAFE_INTEGER)throw new Error("amount too large")}}Token.sealed=!1,Token.decimals=0,Token.icon={emoji:null},Token.symbol=null,Token.supply=0,Token.toString(),Token.presets={},Token.presets.main={},Token.presets.test={},Token.presets.main.location="b17a9af70ab0f46809f908b2e900e395ba40996000bf4f00e3b27a1e93280cf1_o1",Token.presets.main.origin="b17a9af70ab0f46809f908b2e900e395ba40996000bf4f00e3b27a1e93280cf1_o1",Token.presets.main.nonce=1,Token.presets.main.owner="1PytriYokKN3GpKw84L4vvrGBwUvTYzCpx",Token.presets.main.satoshis=0,Token.presets.test.location="0bdf33a334a60909f4c8dab345500cbb313fbfd50b1d98120227eae092b81c39_o1",Token.presets.test.origin="0bdf33a334a60909f4c8dab345500cbb313fbfd50b1d98120227eae092b81c39_o1",Token.presets.test.nonce=1,Token.presets.test.owner="n3CiECgxW1pB1rGbYiX67e4U7AnS3MpJeE",Token.presets.test.satoshis=0,t.exports=r.Ae(Token)},function(t,e,n){const r=n(8),{Y:o}=n(0),{Cn:i}=n(7),{ArgumentError:ArgumentError}=n(10),s=r.P,c=new WeakMap;function a(t){const e=c.get(t);if(!e)throw new ArgumentError("Not a dynamic type: "+o(t));return e}function h(){const t=c.get(this),e=t?t.Be:this;return s.Function.prototype.toString.apply(e)}class u{constructor(){const t=r.Dn("function dynamic() {}")[0],e=e=>{delete t.prototype[e]};Object.getOwnPropertyNames(t.prototype).forEach(e),Object.getOwnPropertySymbols(t.prototype).forEach(e);const n={},o=new l,i=new Proxy(n,o),s=Object.getPrototypeOf(t.prototype);Object.setPrototypeOf(n,s),Object.setPrototypeOf(t.prototype,i),Object.freeze(t.prototype);const a=new f;o.ce(i,a);const h=new Proxy(t,a);return a.ce(t,n,h),c.set(h,a),h}static _e(t){return a(t).Be}static Se(t,e){a(t).Se(e)}static Ka(t){return a(t).Ha}static Ge(t,e){a(t).Ge(e)}}class f{ce(t,e,n){this.qa=t,this.Be=t,this.Ha=n,this.xi=n,this.Za=e}apply(t,e,n){return Reflect.apply(this.Be,e,n)}construct(t,e,n){let r=n;try{r=u.Ka(n)}catch(t){}return Reflect.construct(this.Be,e,r)}defineProperty(t,e,n){if("prototype"===e)throw new Error("Cannot define prototype");if("toString"===e)throw new Error("Cannot define toString");if(!n.configurable)throw new Error("Cannot define nonconfigurable property");return Reflect.defineProperty(this.Be,e,n),!0}deleteProperty(t,e){if("prototype"===e)throw new Error("Cannot delete prototype");if("toString"===e)throw new Error("Cannot delete toString");return Reflect.deleteProperty(this.Be,e),!0}get(t,e,n){return"prototype"===e?this.qa.prototype:"toString"===e?h:Reflect.get(this.Be,e,n)}getPrototypeOf(t){return Reflect.getPrototypeOf(this.Be)}getOwnPropertyDescriptor(t,e){if("prototype"===e)return Object.getOwnPropertyDescriptor(this.qa,e);const n=Reflect.getOwnPropertyDescriptor(this.Be,e);if(!n)return n;const r=Reflect.getOwnPropertyDescriptor(t,e);return r&&!r.configurable||(n.configurable=!0),n}has(t,e){return Reflect.has(this.Be,e)}isExtensible(t){return Reflect.isExtensible(this.qa)}ownKeys(t){return Reflect.ownKeys(this.Be)}preventExtensions(t){return Object.preventExtensions(this.qa),Object.preventExtensions(this.Be),!0}set(t,e,n,r){if("prototype"===e)throw new Error("Cannot set prototype");if("toString"===e)throw new Error("Cannot set toString");return Reflect.set(this.Be,e,n),!0}setPrototypeOf(t,e){return Reflect.setPrototypeOf(this.Be,e),!0}Se(t){if("function"!=typeof t)throw new ArgumentError("Inner type must be a function type: "+o(t));let e=t;for(;e&&e!==Function.prototype&&e!==s.Function.prototype;){if(Object.getOwnPropertyNames(e).includes("toString"))throw new ArgumentError("toString is a reserved property: "+t);e=Reflect.getPrototypeOf(e)}Reflect.isExtensible(this.qa)&&Reflect.isExtensible(t)||(Reflect.preventExtensions(this.qa),Reflect.preventExtensions(t));const n=this.Be===this.qa||t===this.qa,r=this.Be.toString().startsWith("class"),i=t.toString().startsWith("class");if(!n&&r!==i)throw new ArgumentError("Classes can only be changed to classes and functions to functions: "+o(t));const c=t=>{delete this.Za[t]};Object.getOwnPropertyNames(this.Za).forEach(c),Object.getOwnPropertySymbols(this.Za).forEach(c);const a=Reflect.getPrototypeOf(t.prototype);Reflect.setPrototypeOf(this.Za,a),Object.getOwnPropertyNames(t.prototype).concat(Object.getOwnPropertySymbols(t.prototype)).forEach(e=>{const n=Reflect.getOwnPropertyDescriptor(t.prototype,e);Reflect.defineProperty(this.Za,e,n)}),this.Za.constructor=this.Ha,this.Be=t}Ge(t){this.Ha!==this.xi&&c.delete(this.Ha),c.set(t,this),this.Ha=t,this.Za.constructor=t}}class l{ce(t,e){this.xi=t,this.Xa=e}defineProperty(t,e,n){throw new Error("defineProperty disabled")}deleteProperty(t,e){throw new Error("deleteProperty disabled")}preventExtensions(){throw new Error("preventExtensions disabled")}set(t,e,n,r){if(r===this.xi)throw new Error("Cannot set property");const o=Reflect.getPrototypeOf(r);try{return Reflect.setPrototypeOf(r,Reflect.getPrototypeOf(Object)),r[e]=n,!0}catch(t){throw new Error("Cannot set property")}finally{Reflect.setPrototypeOf(r,o)}}setPrototypeOf(t,e){if(!i())throw new Error("setPrototypeOf disabled");return Reflect.setPrototypeOf(t,e),Reflect.setPrototypeOf(this.Xa.Be.prototype,e),!0}}t.exports=u},function(t,e,n){const r=n(6),{B:o,F:i,Y:s,yt:c,tt:a}=n(0),h=n(4),{ot:u,Qr:f}=n(14),{g:l}=n(7),{ne:d}=n(11),{ao:p}=n(35),w="Sync";t.exports=async function(t,e={}){const Jig=n(5),Code=n(1),y=n(2);if(n(28).Jt)throw new Error("sync disabled in atomic update");o(t instanceof Jig||t instanceof Code),e.bt=e.bt||new c("sync"),e.Qa=e.Qa||new Map,h.De&&h.Me(w,"Sync",s(t));const b=new Date;if(e.Qa.has(t))return;t instanceof Code&&l(()=>d(t.location)).Oe&&y.Dt(t).Ue();let g=!1,_=null;const m=async function(){try{g=await async function(t,e){const r=n(36);let o=!1;for(;;){const n=l(()=>t.location),i=d(n);if(a(i.bn))throw new Error("Cannot sync\n\n"+i.bn);if(!a(i.pr))break;h.Lt&&h.Gt(w,"Waiting to publish "+s(t)),o=!0;const c=r.Tr(i.pr);if(!c)throw new Error(`Cannot sync ${s(t)}: transaction in progress`);h.Lt&&h.Gt(w,"Sync",c.pr.Fn),await c.ua(),e.bt.Et()}return i().ur("sync",t),o}(t,e)}catch(t){_=t}e.bt.Et();try{g||await async function(t,e){if(!1===e.forward)return;const c=i();let u=l(()=>t.location),f=d(u);for(;e.bt.Et(),!a(f.ze);){if(a(f.pr))throw new Error(`Cannot sync ${s(t)}: transaction in progress`);o(a(f.Ye)&&a(f.Ve));const i=await c.we().spends(f.Ye,f.Ve);if(!i)break;e.bt.Et(),h.De&&h.Me(w,"Forward syncing to",i);const y=await c.we().fetch(i);e.bt.Et();const b=new r.Transaction(y);let g=null;try{g=p(b)}catch(t){h._n&&h.bn(w,t);break}const _=n(34),m=!0,E=t,P=!1;await _(b,i,g,c,m,E,e.bt,P),e.bt.Et(),u=l(()=>t.location),f=d(u)}c.ur("sync",t)}(t,e)}catch(t){_=_||t}return e.bt.Et(),t}();e.Qa.set(t,m),e.Qa.set(l(()=>t.origin),m),await m;try{await async function(t,e,r){if(!1===e.inner)return;if(void 0===e.inner&&r)return;h.Lt&&h.Gt(w,"Inner sync");const Jig=n(5),Code=n(1),o=new Set;l(()=>u(t,e=>e===t||(e instanceof Jig||e instanceof Code?(o.add(e),!1):void 0)));const i=[],s=new Map;for(const t of o){const n=e.Qa.get(t)||e.Qa.get(l(()=>t.origin));!1!==e.forward&&n?s.set(t,n):i.push(t.sync(e))}await Promise.all(i);for(const t of s.keys())s.set(t,await s.get(t));e.bt.Et(),!1!==e.forward&&l(()=>f(t,t=>s.get(t)))}(t,e,g)}catch(t){if(!_)throw t}if(e.bt.Et(),_)throw _;h.Lt&&h.Gt(w,"Sync (end): "+(new Date-b)+"ms")}},function(t,e,n){n(46).Et();const r=n(6),o=n(41),{Wr:i}=n(13),{ft:s}=n(0);global.Jig=o.Jig,global.Berry=o.Berry,s(global,"Token",()=>o.extra.Token),i(r),t.exports=o},function(t){t.exports=JSON.parse('"!function(t,o){\\"object\\"==typeof exports&&\\"undefined\\"!=typeof module?o(exports):\\"function\\"==typeof define&&define.amd?define([\\"exports\\"],o):o((t=t||self).SES={})}(this,(function(t){\\"use strict\\";function o(t,o){if(!t)throw new TypeError(o)}const{getPrototypeOf:r}=Object;const{getOwnPropertyDescriptor:e,getPrototypeOf:n}=Object;function a(t){return n(t).constructor}const i=[\\"Array\\",\\"ArrayBuffer\\",\\"ArrayBufferPrototype\\",\\"ArrayIteratorPrototype\\",\\"ArrayPrototype\\",\\"AsyncFunction\\",\\"AsyncFunctionPrototype\\",\\"AsyncGenerator\\",\\"AsyncGeneratorFunction\\",\\"AsyncGeneratorPrototype\\",\\"AsyncIteratorPrototype\\",\\"Atomics\\",\\"BigInt\\",\\"BigIntPrototype\\",\\"BigInt64Array\\",\\"BigInt64ArrayPrototype\\",\\"BigUint64Array\\",\\"BigUint64ArrayPrototype\\",\\"Boolean\\",\\"BooleanPrototype\\",\\"DataView\\",\\"DataViewPrototype\\",\\"Date\\",\\"DatePrototype\\",\\"decodeURI\\",\\"decodeURIComponent\\",\\"encodeURI\\",\\"encodeURIComponent\\",\\"Error\\",\\"ErrorPrototype\\",\\"eval\\",\\"EvalError\\",\\"EvalErrorPrototype\\",\\"Float32Array\\",\\"Float32ArrayPrototype\\",\\"Float64Array\\",\\"Float64ArrayPrototype\\",\\"Function\\",\\"FunctionPrototype\\",\\"Generator\\",\\"GeneratorFunction\\",\\"GeneratorPrototype\\",\\"Int8Array\\",\\"Int8ArrayPrototype\\",\\"Int16Array\\",\\"Int16ArrayPrototype\\",\\"Int32Array\\",\\"Int32ArrayPrototype\\",\\"isFinite\\",\\"isNaN\\",\\"IteratorPrototype\\",\\"JSON\\",\\"Map\\",\\"MapIteratorPrototype\\",\\"MapPrototype\\",\\"Math\\",\\"Number\\",\\"NumberPrototype\\",\\"Object\\",\\"ObjectPrototype\\",\\"parseFloat\\",\\"parseInt\\",\\"Promise\\",\\"PromisePrototype\\",\\"Proxy\\",\\"RangeError\\",\\"RangeErrorPrototype\\",\\"ReferenceError\\",\\"ReferenceErrorPrototype\\",\\"Reflect\\",\\"RegExp\\",\\"RegExpPrototype\\",\\"RegExpStringIteratorPrototype\\",\\"Set\\",\\"SetIteratorPrototype\\",\\"SetPrototype\\",\\"SharedArrayBuffer\\",\\"SharedArrayBufferPrototype\\",\\"String\\",\\"StringIteratorPrototype\\",\\"StringPrototype\\",\\"Symbol\\",\\"SymbolPrototype\\",\\"SyntaxError\\",\\"SyntaxErrorPrototype\\",\\"ThrowTypeError\\",\\"TypedArray\\",\\"TypedArrayPrototype\\",\\"TypeError\\",\\"TypeErrorPrototype\\",\\"Uint8Array\\",\\"Uint8ArrayPrototype\\",\\"Uint8ClampedArray\\",\\"Uint8ClampedArrayPrototype\\",\\"Uint16Array\\",\\"Uint16ArrayPrototype\\",\\"Uint32Array\\",\\"Uint32ArrayPrototype\\",\\"URIError\\",\\"URIErrorPrototype\\",\\"WeakMap\\",\\"WeakMapPrototype\\",\\"WeakSet\\",\\"WeakSetPrototype\\",\\"escape\\",\\"unescape\\",\\"FunctionPrototypeConstructor\\",\\"Compartment\\",\\"CompartmentPrototype\\",\\"harden\\"],{getOwnPropertyDescriptor:c}=Object;function p(t,r){const e=c(t,r);return o(!(\\"get\\"in e||\\"set\\"in e),`unexpected accessor on global property: ${r}`),e.value}const{apply:s}=Reflect,y=(t=>(o,...r)=>s(t,o,r))(Object.prototype.hasOwnProperty);function l(){const t={__proto__:null},c=function(){const t=Function.prototype.constructor,o=typeof Symbol&&Symbol.iterator||\\"@@iterator\\",r=typeof Symbol&&Symbol.matchAll||\\"@@matchAll\\",i=e(arguments,\\"callee\\").get,c=(new String)[o](),p=n(c);let s=null,y=null;r in new RegExp&&(s=(new RegExp)[r](),y=n(s));const l=(new Array)[o](),u=n(l),g=n(Float32Array),f=(new Map)[o](),P=n(f),b=(new Set)[o](),m=n(b),d=n(u);function*h(){}const A=a(h),E=A.prototype;async function*S(){}const _=a(S),w=_.prototype,I=w.prototype,F=n(I);async function T(){}const v=a(T),O={FunctionPrototypeConstructor:t,ArrayIteratorPrototype:u,AsyncFunction:v,AsyncGenerator:w,AsyncGeneratorFunction:_,AsyncGeneratorPrototype:I,AsyncIteratorPrototype:F,Generator:E,GeneratorFunction:A,IteratorPrototype:d,MapIteratorPrototype:P,RegExpStringIteratorPrototype:y,SetIteratorPrototype:m,StringIteratorPrototype:p,ThrowTypeError:i,TypedArray:g};return O}();!function(t){const{FunctionPrototypeConstructor:e,ArrayIteratorPrototype:n,AsyncFunction:a,AsyncGenerator:i,AsyncGeneratorFunction:c,AsyncGeneratorPrototype:p,AsyncIteratorPrototype:s,Generator:y,GeneratorFunction:l,IteratorPrototype:u,MapIteratorPrototype:g,RegExpStringIteratorPrototype:f,SetIteratorPrototype:P,StringIteratorPrototype:b,ThrowTypeError:m,TypedArray:d}=t;o(r(m)===Function.prototype,\\"ThrowTypeError.__proto__ should be Function.prototype\\"),o(r(b)===u,\\"StringIteratorPrototype.__proto__ should be IteratorPrototype\\"),f&&o(r(f)===u,\\"RegExpStringIteratorPrototype.__proto__ should be IteratorPrototype\\"),o(r(d)===Function.prototype,\\"TypedArray.__proto__ should be Function.prototype\\"),o(r(g)===u,\\"MapIteratorPrototype.__proto__ should be IteratorPrototype\\"),o(r(P)===u,\\"SetIteratorPrototype.__proto__ should be IteratorPrototype\\"),o(r(u)===Object.prototype,\\"IteratorPrototype.__proto__ should be Object.prototype\\"),o(r(s)===Object.prototype,\\"AsyncIteratorPrototype.__proto__ should be Object.prototype\\"),o(r(n)===u,\\"AsyncIteratorPrototype.__proto__ should be IteratorPrototype\\"),o(r(l)===e,\\"GeneratorFunction.__proto__ should be Function\\"),o(\\"GeneratorFunction\\"===l.name,\'GeneratorFunction.name should be \\"GeneratorFunction\\"\'),o(r(y)===Function.prototype,\\"Generator.__proto__ should be Function.prototype\\"),o(r(c)===e,\\"AsyncGeneratorFunction.__proto__ should be Function\\"),o(\\"AsyncGeneratorFunction\\"===c.name,\'AsyncGeneratorFunction.name should be \\"AsyncGeneratorFunction\\"\'),o(r(i)===Function.prototype,\\"AsyncGenerator.__proto__ should be Function.prototype\\"),o(r(p)===s,\\"AsyncGeneratorPrototype.__proto__ should be AsyncIteratorPrototype\\"),o(r(a)===e,\\"AsyncFunction.__proto__ should be Function\\"),o(\\"AsyncFunction\\"===a.name,\'AsyncFunction.name should be \\"AsyncFunction\\"\')}(c);for(const o of i){if(y(c,o)){t[o]=c[o];continue}if(y(globalThis,o)){t[o]=p(globalThis,o);continue}if(o.endsWith(\\"Prototype\\")){const r=o.slice(0,-\\"Prototype\\".length);if(y(c,r)){const e=c[r];t[o]=e.prototype;continue}if(y(globalThis,r)){const e=p(globalThis,r);t[o]=e.prototype;continue}}}return function(t){Object.keys(t).forEach(o=>{if(void 0===t[o])throw new TypeError(`Malformed intrinsic: ${o}`)})}(t),t}const u={\\"**proto**\\":\\"FunctionPrototype\\",length:\\"number\\",name:\\"string\\"},g=u,f={get:g,set:\\"undefined\\"};function P(t){return{\\"**proto**\\":\\"Error\\",prototype:t,length:\\"number\\",name:\\"string\\"}}function b(t){return{\\"**proto**\\":\\"ErrorPrototype\\",constructor:t,message:\\"string\\",name:\\"string\\",toString:g}}function m(t){return{\\"**proto**\\":\\"TypedArray\\",length:\\"number\\",name:\\"string\\",BYTES_PER_ELEMENT:\\"number\\",prototype:t}}function d(t){return{\\"**proto**\\":\\"TypedArrayPrototype\\",BYTES_PER_ELEMENT:\\"number\\",constructor:t}}var h=function(t){return(typeof Symbol&&Symbol.matchAll||\\"@@matchAll\\")in new RegExp||delete t.RegExpStringIteratorPrototype,t}({\\"**proto**\\":null,ThrowTypeError:g,Infinity:\\"number\\",NaN:\\"number\\",undefined:\\"undefined\\",eval:g,isFinite:g,isNaN:g,parseFloat:g,parseInt:g,decodeURI:g,decodeURIComponent:g,encodeURI:g,encodeURIComponent:g,Object:{\\"**proto**\\":\\"FunctionPrototype\\",assign:g,create:g,defineProperties:g,defineProperty:g,entries:g,freeze:g,fromEntries:g,getOwnPropertyDescriptor:g,getOwnPropertyDescriptors:g,getOwnPropertyNames:g,getOwnPropertySymbols:g,getPrototypeOf:g,is:g,isExtensible:g,isFrozen:g,isSealed:g,keys:g,preventExtensions:g,prototype:\\"ObjectPrototype\\",seal:g,setPrototypeOf:g,values:g},ObjectPrototype:{\\"**proto**\\":null,constructor:\\"Object\\",hasOwnProperty:g,isPrototypeOf:g,propertyIsEnumerable:g,toLocaleString:g,toString:g,valueOf:g,__defineGetter__:g,__defineSetter__:g,__lookupGetter__:g,__lookupSetter__:g},Function:{\\"**proto**\\":\\"FunctionPrototype\\",length:\\"number\\",prototype:\\"FunctionPrototype\\"},FunctionPrototype:{length:\\"number\\",name:\\"string\\",apply:g,bind:g,call:g,constructor:\\"FunctionPrototypeConstructor\\",toString:g,\\"@@hasInstance\\":g},Boolean:{\\"**proto**\\":\\"FunctionPrototype\\",prototype:\\"BooleanPrototype\\"},BooleanPrototype:{constructor:\\"Boolean\\",toString:g,valueOf:g},Symbol:{\\"**proto**\\":\\"FunctionPrototype\\",asyncIterator:\\"symbol\\",for:g,hasInstance:\\"symbol\\",isConcatSpreadable:\\"symbol\\",iterator:\\"symbol\\",keyFor:g,match:\\"symbol\\",matchAll:\\"symbol\\",prototype:\\"SymbolPrototype\\",replace:\\"symbol\\",search:\\"symbol\\",species:\\"symbol\\",split:\\"symbol\\",toPrimitive:\\"symbol\\",toStringTag:\\"symbol\\",unscopables:\\"symbol\\"},SymbolPrototype:{constructor:\\"Symbol\\",description:f,toString:g,valueOf:g,\\"@@toPrimitive\\":g,\\"@@toStringTag\\":\\"string\\"},Error:{\\"**proto**\\":\\"FunctionPrototype\\",prototype:\\"ErrorPrototype\\",captureStackTrace:g,stackTraceLimit:\\"number\\"},ErrorPrototype:{constructor:\\"Error\\",message:\\"string\\",name:\\"string\\",toString:g},EvalError:P(\\"EvalErrorPrototype\\"),RangeError:P(\\"RangeErrorPrototype\\"),ReferenceError:P(\\"ReferenceErrorPrototype\\"),SyntaxError:P(\\"SyntaxErrorPrototype\\"),TypeError:P(\\"TypeErrorPrototype\\"),URIError:P(\\"URIErrorPrototype\\"),EvalErrorPrototype:b(\\"EvalError\\"),RangeErrorPrototype:b(\\"RangeError\\"),ReferenceErrorPrototype:b(\\"ReferenceError\\"),SyntaxErrorPrototype:b(\\"SyntaxError\\"),TypeErrorPrototype:b(\\"TypeError\\"),URIErrorPrototype:b(\\"URIError\\"),Number:{\\"**proto**\\":\\"FunctionPrototype\\",EPSILON:\\"number\\",isFinite:g,isInteger:g,isNaN:g,isSafeInteger:g,MAX_SAFE_INTEGER:\\"number\\",MAX_VALUE:\\"number\\",MIN_SAFE_INTEGER:\\"number\\",MIN_VALUE:\\"number\\",NaN:\\"number\\",NEGATIVE_INFINITY:\\"number\\",parseFloat:g,parseInt:g,POSITIVE_INFINITY:\\"number\\",prototype:\\"NumberPrototype\\"},NumberPrototype:{constructor:\\"Number\\",toExponential:g,toFixed:g,toLocaleString:g,toPrecision:g,toString:g,valueOf:g},BigInt:{\\"**proto**\\":\\"FunctionPrototype\\",asIntN:g,asUintN:g,prototype:\\"BigIntPrototype\\"},BigIntPrototype:{constructor:\\"BigInt\\",toLocaleString:g,toString:g,valueOf:g,\\"@@toStringTag\\":\\"string\\"},Math:{E:\\"number\\",LN10:\\"number\\",LN2:\\"number\\",LOG10E:\\"number\\",LOG2E:\\"number\\",PI:\\"number\\",SQRT1_2:\\"number\\",SQRT2:\\"number\\",\\"@@toStringTag\\":\\"string\\",abs:g,acos:g,acosh:g,asin:g,asinh:g,atan:g,atanh:g,atan2:g,cbrt:g,ceil:g,clz32:g,cos:g,cosh:g,exp:g,expm1:g,floor:g,fround:g,hypot:g,imul:g,log:g,log1p:g,log10:g,log2:g,max:g,min:g,pow:g,random:g,round:g,sign:g,sin:g,sinh:g,sqrt:g,tan:g,tanh:g,trunc:g},Date:{\\"**proto**\\":\\"FunctionPrototype\\",now:g,parse:g,prototype:\\"DatePrototype\\",UTC:g},DatePrototype:{constructor:\\"Date\\",getDate:g,getDay:g,getFullYear:g,getHours:g,getMilliseconds:g,getMinutes:g,getMonth:g,getSeconds:g,getTime:g,getTimezoneOffset:g,getUTCDate:g,getUTCDay:g,getUTCFullYear:g,getUTCHours:g,getUTCMilliseconds:g,getUTCMinutes:g,getUTCMonth:g,getUTCSeconds:g,setDate:g,setFullYear:g,setHours:g,setMilliseconds:g,setMinutes:g,setMonth:g,setSeconds:g,setTime:g,setUTCDate:g,setUTCFullYear:g,setUTCHours:g,setUTCMilliseconds:g,setUTCMinutes:g,setUTCMonth:g,setUTCSeconds:g,toDateString:g,toISOString:g,toJSON:g,toLocaleDateString:g,toLocaleString:g,toLocaleTimeString:g,toString:g,toTimeString:g,toUTCString:g,valueOf:g,\\"@@toPrimitive\\":g,getYear:g,setYear:g,toGMTString:g},String:{\\"**proto**\\":\\"FunctionPrototype\\",fromCharCode:g,fromCodePoint:g,prototype:\\"StringPrototype\\",raw:g},StringPrototype:{length:\\"number\\",charAt:g,charCodeAt:g,codePointAt:g,concat:g,constructor:\\"String\\",endsWith:g,includes:g,indexOf:g,lastIndexOf:g,localeCompare:g,match:g,matchAll:g,normalize:g,padEnd:g,padStart:g,repeat:g,replace:g,search:g,slice:g,split:g,startsWith:g,substring:g,toLocaleLowerCase:g,toLocaleUpperCase:g,toLowerCase:g,toString:g,toUpperCase:g,trim:g,trimEnd:g,trimStart:g,valueOf:g,\\"@@iterator\\":g,substr:g,anchor:g,big:g,blink:g,bold:g,fixed:g,fontcolor:g,fontsize:g,italics:g,link:g,small:g,strike:g,sub:g,sup:g,trimLeft:g,trimRight:g},StringIteratorPrototype:{\\"**proto**\\":\\"IteratorPrototype\\",next:g,\\"@@toStringTag\\":\\"string\\"},RegExp:{\\"**proto**\\":\\"FunctionPrototype\\",prototype:\\"RegExpPrototype\\",\\"@@species\\":f},RegExpPrototype:{constructor:\\"RegExp\\",exec:g,dotAll:f,flags:f,global:f,ignoreCase:f,\\"@@match\\":g,\\"@@matchAll\\":g,multiline:f,\\"@@replace\\":g,\\"@@search\\":g,source:f,\\"@@split\\":g,sticky:f,test:g,toString:g,unicode:f,compile:!1},RegExpStringIteratorPrototype:{\\"**proto**\\":\\"IteratorPrototype\\",next:g,\\"@@toStringTag\\":\\"string\\"},Array:{\\"**proto**\\":\\"FunctionPrototype\\",from:g,isArray:g,of:g,prototype:\\"ArrayPrototype\\",\\"@@species\\":f},ArrayPrototype:{length:\\"number\\",concat:g,constructor:\\"Array\\",copyWithin:g,entries:g,every:g,fill:g,filter:g,find:g,findIndex:g,flat:g,flatMap:g,forEach:g,includes:g,indexOf:g,join:g,keys:g,lastIndexOf:g,map:g,pop:g,push:g,reduce:g,reduceRight:g,reverse:g,shift:g,slice:g,some:g,sort:g,splice:g,toLocaleString:g,toString:g,unshift:g,values:g,\\"@@iterator\\":g,\\"@@unscopables\\":{\\"**proto**\\":null,copyWithin:\\"boolean\\",entries:\\"boolean\\",fill:\\"boolean\\",find:\\"boolean\\",findIndex:\\"boolean\\",flat:\\"boolean\\",flatMap:\\"boolean\\",includes:\\"boolean\\",keys:\\"boolean\\",values:\\"boolean\\"}},ArrayIteratorPrototype:{\\"**proto**\\":\\"IteratorPrototype\\",next:g,\\"@@toStringTag\\":\\"string\\"},TypedArray:{\\"**proto**\\":\\"FunctionPrototype\\",from:g,of:g,prototype:\\"TypedArrayPrototype\\",\\"@@species\\":f},TypedArrayPrototype:{buffer:f,byteLength:f,byteOffset:f,constructor:\\"TypedArray\\",copyWithin:g,entries:g,every:g,fill:g,filter:g,find:g,findIndex:g,forEach:g,includes:g,indexOf:g,join:g,keys:g,lastIndexOf:g,length:f,map:g,reduce:g,reduceRight:g,reverse:g,set:g,slice:g,some:g,sort:g,subarray:g,toLocaleString:g,toString:g,values:g,\\"@@iterator\\":g,\\"@@toStringTag\\":f},BigInt64Array:m(\\"BigInt64ArrayPrototype\\"),BigUint64Array:m(\\"BigUint64ArrayPrototype\\"),Float32Array:m(\\"Float32ArrayPrototype\\"),Float64Array:m(\\"Float64ArrayPrototype\\"),Int16Array:m(\\"Int16ArrayPrototype\\"),Int32Array:m(\\"Int32ArrayPrototype\\"),Int8Array:m(\\"Int8ArrayPrototype\\"),Uint16Array:m(\\"Uint16ArrayPrototype\\"),Uint32Array:m(\\"Uint32ArrayPrototype\\"),Uint8Array:m(\\"Uint8ArrayPrototype\\"),Uint8ClampedArray:m(\\"Uint8ClampedArrayPrototype\\"),BigInt64ArrayPrototype:d(\\"BigInt64Array\\"),BigUint64ArrayPrototype:d(\\"BigUint64Array\\"),Float32ArrayPrototype:d(\\"Float32Array\\"),Float64ArrayPrototype:d(\\"Float64Array\\"),Int16ArrayPrototype:d(\\"Int16Array\\"),Int32ArrayPrototype:d(\\"Int32Array\\"),Int8ArrayPrototype:d(\\"Int8Array\\"),Uint16ArrayPrototype:d(\\"Uint16Array\\"),Uint32ArrayPrototype:d(\\"Uint32Array\\"),Uint8ArrayPrototype:d(\\"Uint8Array\\"),Uint8ClampedArrayPrototype:d(\\"Uint8ClampedArray\\"),Map:{\\"**proto**\\":\\"FunctionPrototype\\",\\"@@species\\":f,prototype:\\"MapPrototype\\"},MapPrototype:{clear:g,constructor:\\"Map\\",delete:g,entries:g,forEach:g,get:g,has:g,keys:g,set:g,size:f,values:g,\\"@@iterator\\":g,\\"@@toStringTag\\":\\"string\\"},MapIteratorPrototype:{\\"**proto**\\":\\"IteratorPrototype\\",next:g,\\"@@toStringTag\\":\\"string\\"},Set:{\\"**proto**\\":\\"FunctionPrototype\\",prototype:\\"SetPrototype\\",\\"@@species\\":f},SetPrototype:{add:g,clear:g,constructor:\\"Set\\",delete:g,entries:g,forEach:g,has:g,keys:g,size:f,values:g,\\"@@iterator\\":g,\\"@@toStringTag\\":\\"string\\"},SetIteratorPrototype:{\\"**proto**\\":\\"IteratorPrototype\\",next:g,\\"@@toStringTag\\":\\"string\\"},WeakMap:{\\"**proto**\\":\\"FunctionPrototype\\",prototype:\\"WeakMapPrototype\\"},WeakMapPrototype:{constructor:\\"WeakMap\\",delete:g,get:g,has:g,set:g,\\"@@toStringTag\\":\\"string\\"},WeakSet:{\\"**proto**\\":\\"FunctionPrototype\\",prototype:\\"WeakSetPrototype\\"},WeakSetPrototype:{add:g,constructor:\\"WeakSet\\",delete:g,has:g,\\"@@toStringTag\\":\\"string\\"},ArrayBuffer:{\\"**proto**\\":\\"FunctionPrototype\\",isView:g,prototype:\\"ArrayBufferPrototype\\",\\"@@species\\":f},ArrayBufferPrototype:{byteLength:f,constructor:\\"ArrayBuffer\\",slice:g,\\"@@toStringTag\\":\\"string\\"},SharedArrayBuffer:!1,DataView:{\\"**proto**\\":\\"FunctionPrototype\\",prototype:\\"DataViewPrototype\\"},DataViewPrototype:{buffer:f,byteLength:f,byteOffset:f,constructor:\\"DataView\\",getBigInt64:g,getBigUint64:g,getFloat32:g,getFloat64:g,getInt8:g,getInt16:g,getInt32:g,getUint8:g,getUint16:g,getUint32:g,setBigInt64:g,setBigUint64:g,setFloat32:g,setFloat64:g,setInt8:g,setInt16:g,setInt32:g,setUint8:g,setUint16:g,setUint32:g,\\"@@toStringTag\\":\\"string\\"},Atomics:!1,JSON:{parse:g,stringify:g,\\"@@toStringTag\\":\\"string\\"},IteratorPrototype:{\\"@@iterator\\":g},AsyncIteratorPrototype:{\\"@@asyncIterator\\":g},GeneratorFunction:{\\"**proto**\\":\\"FunctionPrototypeConstructor\\",name:\\"string\\",length:\\"number\\",prototype:\\"Generator\\"},Generator:{\\"**proto**\\":\\"FunctionPrototype\\",constructor:\\"GeneratorFunction\\",prototype:\\"GeneratorPrototype\\"},AsyncGeneratorFunction:{\\"**proto**\\":\\"FunctionPrototypeConstructor\\",name:\\"string\\",length:\\"number\\",prototype:\\"AsyncGenerator\\"},AsyncGenerator:{\\"**proto**\\":\\"FunctionPrototype\\",constructor:\\"AsyncGeneratorFunction\\",prototype:\\"AsyncGeneratorPrototype\\",\\"@@toStringTag\\":\\"string\\"},GeneratorPrototype:{\\"**proto**\\":\\"IteratorPrototype\\",constructor:\\"Generator\\",next:g,return:g,throw:g,\\"@@toStringTag\\":\\"string\\"},AsyncGeneratorPrototype:{\\"**proto**\\":\\"AsyncIteratorPrototype\\",constructor:\\"AsyncGenerator\\",next:g,return:g,throw:g,\\"@@toStringTag\\":\\"string\\"},Promise:{\\"**proto**\\":\\"FunctionPrototype\\",all:g,allSettled:g,prototype:\\"PromisePrototype\\",race:g,reject:g,resolve:g,\\"@@species\\":f},PromisePrototype:{catch:g,constructor:\\"Promise\\",finally:g,then:g,\\"@@toStringTag\\":\\"string\\"},AsyncFunction:{\\"**proto**\\":\\"FunctionPrototypeConstructor\\",name:\\"string\\",length:\\"number\\",prototype:\\"AsyncFunctionPrototype\\"},AsyncFunctionPrototype:{\\"**proto**\\":\\"FunctionPrototype\\",constructor:\\"AsyncFunction\\",\\"@@toStringTag\\":\\"string\\"},Reflect:{apply:g,construct:g,defineProperty:g,deleteProperty:g,get:g,getOwnPropertyDescriptor:g,getPrototypeOf:g,has:g,isExtensible:g,ownKeys:g,preventExtensions:g,set:g,setPrototypeOf:g},Proxy:{\\"**proto**\\":\\"FunctionPrototype\\",revocable:g},escape:g,unescape:g,FunctionPrototypeConstructor:{\\"**proto**\\":\\"FunctionPrototype\\",length:\\"number\\",prototype:\\"FunctionPrototype\\"},Compartment:{\\"**proto**\\":\\"FunctionPrototype\\",prototype:\\"CompartmentPrototype\\"},CompartmentPrototype:{constructor:\\"Compartment\\",evaluate:g,global:f},harden:g});const{getPrototypeOf:A,getOwnPropertyDescriptor:E}=Object,{apply:S,ownKeys:_}=Reflect,w=(t=>(o,...r)=>S(t,o,r))(Object.prototype.hasOwnProperty);function I(t,o){if(\\"string\\"==typeof o)return o;if(\\"symbol\\"==typeof o)return`@@${o.toString().slice(14,-1)}`;throw new TypeError(`Unexpected property name type ${t} ${o}`)}function F(t){const o=[\\"undefined\\",\\"boolean\\",\\"number\\",\\"string\\",\\"symbol\\"];function r(r,e,n,i){if(\\"object\\"==typeof i)return a(r,e,i),!0;if(!1===i)return!1;if(\\"string\\"==typeof i)if(\\"prototype\\"===n||\\"constructor\\"===n){if(w(t,i))return e===t[i]}else if(o.includes(i))return typeof e===i;throw new TypeError(`Unexpected whitelist permit ${r}`)}function e(t,o,e,n){const a=E(o,e);return w(a,\\"value\\")?r(t,a.value,e,n):r(`${t}<get>`,a.get,e,n.get)&&r(`${t}<set>`,a.set,e,n.set)}function n(t,o){return w(t,o)?t[o]:\\"FunctionPrototype\\"===t[\\"**proto**\\"]&&w(u,o)?u[o]:void 0}function a(o,r,a){!function(o,r,e){const n=A(r);if(null!==n||null!==e){if(void 0!==e&&\\"string\\"!=typeof e)throw new TypeError(`Malformed whitelist permit ${o}.__proto__`);if(n!==t[e||\\"ObjectPrototype\\"])throw new Error(`Unexpected intrinsic ${o}.__proto__`)}}(o,r,a[\\"**proto**\\"]);for(const t of _(r)){if(\\"__proto__\\"===t)continue;const i=I(o,t),c=`${o}.${i}`,p=n(a,i);if(!p||!e(c,r,t,p))try{delete r[t]}catch(t){}}}a(\\"intrinsics\\",t,h)}const{defineProperties:T,getOwnPropertyDescriptors:v}=Object;const{getOwnPropertyDescriptor:O}=Object;const{defineProperties:U,getOwnPropertyDescriptors:x,getOwnPropertyDescriptor:R}=Object;const C=!0;var M={ObjectPrototype:\\"*\\",ArrayPrototype:\\"*\\",FunctionPrototype:{constructor:C,bind:C,name:C,toString:C},ErrorPrototype:{constructor:C,message:C,name:C},PromisePrototype:{constructor:C},TypedArrayPrototype:\\"*\\",Generator:{constructor:C,name:C,toString:C},IteratorPrototype:\\"*\\"};const{defineProperties:j,getOwnPropertyNames:G,getOwnPropertyDescriptor:k,getOwnPropertyDescriptors:N}=Object,{ownKeys:$}=Reflect;function D(t){return null!==t&&\\"object\\"==typeof t}const{assign:B,freeze:L,defineProperties:W,getOwnPropertyDescriptor:V,getOwnPropertyNames:z,getPrototypeOf:Y,setPrototypeOf:J,prototype:H}=Object,{apply:K,get:Q,set:X}=Reflect,{isArray:q,prototype:Z}=Array,{revocable:tt}=Proxy,{prototype:ot}=RegExp,{prototype:rt}=String,{prototype:et}=WeakMap,nt=t=>(o,...r)=>K(t,o,r),at=nt(H.hasOwnProperty),it=(nt(Z.filter),nt(Z.join)),ct=(nt(Z.push),nt(Z.pop)),pt=nt(Z.includes),st=nt(ot.test),yt=(nt(rt.match),nt(rt.search)),lt=nt(rt.slice),ut=nt(rt.split),gt=(nt(et.get),nt(et.set),nt(et.has),t=>Q(Y(t),\\"constructor\\")),ft=L({__proto__:null});function Pt(t,o){const r=`please report internal shim error: ${t}`;throw console.error(r),o&&(console.error(`${o}`),console.error(`${o.stack}`)),TypeError(r)}function bt(t,o){t||Pt(o)}const mt=[\\"await\\",\\"break\\",\\"case\\",\\"catch\\",\\"class\\",\\"const\\",\\"continue\\",\\"debugger\\",\\"default\\",\\"delete\\",\\"do\\",\\"else\\",\\"export\\",\\"extends\\",\\"finally\\",\\"for\\",\\"function\\",\\"if\\",\\"import\\",\\"in\\",\\"instanceof\\",\\"new\\",\\"return\\",\\"super\\",\\"switch\\",\\"this\\",\\"throw\\",\\"try\\",\\"typeof\\",\\"var\\",\\"void\\",\\"while\\",\\"with\\",\\"yield\\",\\"let\\",\\"static\\",\\"enum\\",\\"implements\\",\\"package\\",\\"protected\\",\\"interface\\",\\"private\\",\\"public\\",\\"await\\",\\"null\\",\\"true\\",\\"false\\",\\"this\\",\\"arguments\\"],dt=new RegExp(\\"^[a-zA-Z_$][\\\\\\\\w$]*$\\");function ht(t){return\\"eval\\"!==t&&!pt(mt,t)&&st(dt,t)}function At(t,o){const r=V(t,o);return(!1===r.configurable&&!1===r.writable&&at(r,\\"value\\"))}const Et=new Proxy(ft,{get(t,o){Pt(`unexpected scope handler trap called: ${String(o)}`)}});function St(t,o){const r=yt(t,o);return r<0?-1:ut(lt(t,0,r),\\"\\\\n\\").length}const _t=new RegExp(\\"(?:\\\\x3c!--|--\\\\x3e)\\");const wt=new RegExp(\\"\\\\\\\\bimport\\\\\\\\s*(?:\\\\\\\\(|/[/*])\\");const It=new RegExp(\\"\\\\\\\\beval\\\\\\\\s*(?:\\\\\\\\(|/[/*])\\");const Ft={rewrite:t=>(function(t){const o=St(t,_t);if(o<0)return t;throw new SyntaxError(`possible html comment syntax rejected around line ${o}`)}(t.src),function(t){const o=St(t,wt);if(o<0)return t;throw new SyntaxError(`possible import expression rejected around line ${o}`)}(t.src),function(t){const o=St(t,It);if(o<0)return t;throw new SyntaxError(`possible direct eval expression rejected around line ${o}`)}(t.src),t)};function Tt(t,o=[]){const r=function(t){return 0===t.length?\\"\\":`const {${it(t,\\",\\")}} = this;`}(o);return t.intrinsics.Function(`\\\\n    with (this) {\\\\n      ${r}\\\\n      return function() {\\\\n        \'use strict\';\\\\n        return eval(arguments[0]);\\\\n      };\\\\n    }\\\\n  `)}function vt(t,o,r,e={},{localTransforms:n=[],globalTransforms:a=[],sloppyGlobalsMode:i=!1}={}){let c={src:o,endowments:e};c=function(t,o){for(const r of o)\\"function\\"==typeof r.rewrite&&(t=r.rewrite(t));return t}(c,[...n,...a,Ft]);const p=function(t,o,r={},{sloppyGlobalsMode:e=!1}={}){return{__proto__:Et,useUnsafeEvaluator:!1,get(e,n){if(\\"symbol\\"!=typeof n)return\\"eval\\"===n&&!0===this.useUnsafeEvaluator?(this.useUnsafeEvaluator=!1,t.intrinsics.eval):n in r?Q(r,n,o):Q(o,n)},set(t,e,n){if(e in r){return\\"value\\"in V(r,e)?X(r,e,n):X(r,e,n,o)}return X(o,e,n)},has:(t,n)=>!!(e||\\"eval\\"===n||n in r||n in o||n in globalThis),getPrototypeOf:()=>null}}(t,r,c.endowments,{sloppyGlobalsMode:i}),s=tt(ft,p),y=Tt(t,function(t,o={}){const r=z(t),e=z(o),n=e.filter(t=>ht(t)&&At(o,t));return[...r.filter(o=>!e.includes(o)&&ht(o)&&At(t,o)),...n]}(r,c.endowments)),l=K(y,s.proxy,[]);let u;p.useUnsafeEvaluator=!0;try{return K(l,r,[c.src])}catch(t){throw u=t,t}finally{!0===p.useUnsafeEvaluator&&(Pt(\\"handler did not revoke useUnsafeEvaluator\\",u),s.revoke())}}const Ot=(t,o,r={})=>{const e=e=>\\"string\\"!=typeof e?e:vt(t,e,o,{},r);return W(e,{toString:{value:()=>\\"function eval() { [native code] }\\",writable:!1,enumerable:!1,configurable:!0}}),bt(gt(e)!==Function,\\"eval constructor is Function\\"),bt(gt(e)!==t.intrinsics.Function,\\"eval contructions is %Function%\\"),e};function Ut(t,o,r={}){const e=function(e){const n=`${ct(arguments)||\\"\\"}`,a=`${it(arguments,\\",\\")}`;new t.intrinsics.Function(a,n);const i=`(function anonymous(${a}\\\\n) {\\\\n${n}\\\\n})`;return vt(t,i,o,{},r)};return W(e,{prototype:{value:t.intrinsics.Function.prototype,writable:!1,enumerable:!1,configurable:!1},toString:{value:()=>\\"function Function() { [native code] }\\",writable:!1,enumerable:!1,configurable:!0}}),bt(Y(Function)===Function.prototype),bt(Y(e)===Function.prototype),bt(gt(e)!==Function),bt(gt(e)!==t.intrinsics.Function),e}const xt=[\\"eval\\",\\"isFinite\\",\\"isNaN\\",\\"parseFloat\\",\\"parseInt\\",\\"decodeURI\\",\\"decodeURIComponent\\",\\"encodeURI\\",\\"encodeURIComponent\\",\\"Array\\",\\"ArrayBuffer\\",\\"Boolean\\",\\"DataView\\",\\"Date\\",\\"Error\\",\\"EvalError\\",\\"Float32Array\\",\\"Float64Array\\",\\"Function\\",\\"Int8Array\\",\\"Int16Array\\",\\"Int32Array\\",\\"Map\\",\\"Number\\",\\"Object\\",\\"Promise\\",\\"Proxy\\",\\"RangeError\\",\\"ReferenceError\\",\\"RegExp\\",\\"Set\\",\\"String\\",\\"Symbol\\",\\"SyntaxError\\",\\"TypeError\\",\\"Uint8Array\\",\\"Uint8ClampedArray\\",\\"Uint16Array\\",\\"Uint32Array\\",\\"URIError\\",\\"WeakMap\\",\\"WeakSet\\",\\"JSON\\",\\"Math\\",\\"Reflect\\",\\"escape\\",\\"unescape\\",\\"globalThis\\",\\"Compartment\\",\\"harden\\"];const{getOwnPropertyDescriptor:Rt}=Object,Ct=[\\"eval\\",\\"isFinite\\",\\"isNaN\\",\\"parseFloat\\",\\"parseInt\\",\\"decodeURI\\",\\"decodeURIComponent\\",\\"encodeURI\\",\\"encodeURIComponent\\",\\"Array\\",\\"ArrayBuffer\\",\\"Boolean\\",\\"DataView\\",\\"Date\\",\\"Error\\",\\"EvalError\\",\\"Float32Array\\",\\"Float64Array\\",\\"Function\\",\\"Int8Array\\",\\"Int16Array\\",\\"Int32Array\\",\\"Map\\",\\"Number\\",\\"Object\\",\\"Promise\\",\\"Proxy\\",\\"RangeError\\",\\"ReferenceError\\",\\"RegExp\\",\\"Set\\",\\"String\\",\\"Symbol\\",\\"SyntaxError\\",\\"TypeError\\",\\"Uint8Array\\",\\"Uint8ClampedArray\\",\\"Uint16Array\\",\\"Uint32Array\\",\\"URIError\\",\\"WeakMap\\",\\"WeakSet\\",\\"JSON\\",\\"Math\\",\\"Reflect\\",\\"escape\\",\\"unescape\\",\\"globalThis\\",\\"Compartment\\",\\"harden\\"];let Mt;function jt(){if(Mt)return Mt;const t=function(){const t={__proto__:null};for(const o of Ct){const r=Rt(globalThis,o);if(r){if(\\"get\\"in r||\\"set\\"in r)throw new TypeError(`Unexpected accessor on global property: ${o}`);t[o]=r.value}}return t}();return Mt={__proto__:null,intrinsics:t},L(Mt)}const Gt=new WeakMap;class kt{constructor(t,o,r={}){const{transforms:e=[]}=r,n=[...e],a=function(t,{globalTransforms:o}){const r={},e={Infinity:{value:1/0,enumerable:!1},NaN:{value:NaN,enumerable:!1},undefined:{value:void 0,enumerable:!1}};for(const n of xt){if(!at(t.intrinsics,n))continue;let a;switch(n){case\\"eval\\":a=Ot(t,r,{globalTransforms:o});break;case\\"Function\\":a=Ut(t,r,{globalTransforms:o});break;case\\"globalThis\\":a=r;break;default:a=t.intrinsics[n]}e[n]={value:a,configurable:!0,writable:!0,enumerable:!1}}return W(r,e),bt(r.eval!==t.intrinsics.eval,\\"eval on global object\\"),bt(r.Function!==t.intrinsics.Function,\\"Function on global object\\"),r}(jt(),{globalTransforms:n});B(a,t),Gt.set(this,{globalTransforms:n,globalObject:a})}get global(){return Gt.get(this).globalObject}evaluate(t,o={}){if(\\"string\\"!=typeof t)throw new TypeError(\\"first argument of evaluate() must be a string\\");const{endowments:r={},transforms:e=[],sloppyGlobalsMode:n=!1}=o,a=[...e],{globalTransforms:i,globalObject:c}=Gt.get(this);return vt(jt(),t,c,r,{globalTransforms:i,localTransforms:a,sloppyGlobalsMode:n})}toString(){return\\"[object Compartment]\\"}static toString(){return\\"function Compartment() { [shim code] }\\"}}let Nt;function $t(t,o){if(!t)throw new TypeError(o)}\\"object\\"!=typeof globalThis&&(Object.prototype.__defineGetter__(\\"__magic__\\",(function(){return this})),__magic__.globalThis=__magic__,delete Object.prototype.__magic__),t.lockdown=function(t={}){const{noTameDate:o=!1,noTameError:r=!1,noTameMath:e=!1,noTameRegExp:n=!1,registerOnly:a=!1,...i}=t,c=Object.keys(i);$t(0===c.length,`lockdown(): non supported option ${c.join(\\", \\")}`);const p={noTameDate:o,noTameError:r,noTameMath:e,noTameRegExp:n,registerOnly:a};if(Nt)return Object.keys(p).forEach(t=>{$t(p[t]===Nt[t],`lockdown(): cannot re-invoke with different option ${t}`)}),!1;Nt=p,function(){try{(0,Function.prototype.constructor)(\\"return 1\\")}catch(t){return}const{defineProperties:t,getPrototypeOf:o,setPrototypeOf:r}=Object;function e(e,n){let a;try{a=(0,eval)(n)}catch(t){if(t instanceof SyntaxError)return;throw t}const i=o(a),c=function(){throw new TypeError(\\"Not available\\")};t(c,{name:{value:e,writable:!1,enumerable:!1,configurable:!0},toString:{value:()=>`function ${e}() { [native code] }`,writable:!1,enumerable:!1,configurable:!0}}),t(i,{constructor:{value:c}}),t(c,{prototype:{value:i}}),c!==Function.prototype.constructor&&r(c,Function.prototype.constructor)}e(\\"Function\\",\\"(function(){})\\"),e(\\"GeneratorFunction\\",\\"(function*(){})\\"),e(\\"AsyncFunction\\",\\"(async function(){})\\"),e(\\"AsyncGeneratorFunction\\",\\"(async function*(){})\\")}(),o||function(){const t={now:()=>NaN};Date.now=t.now;const o={toLocaleString:()=>NaN};Date.prototype.toLocaleString=o.toLocaleString;const r=Date,e=function(){return void 0===new.target?\\"Invalid Date\\":arguments.length>0?Reflect.construct(r,arguments,new.target):Reflect.construct(r,[NaN],new.target)},n=v(r);T(e,n);const a=v(r.prototype);a.constructor.value=e,T(e.prototype,a),globalThis.Date=e;const i={toLocaleString(){throw new TypeError(\\"Object.prototype.toLocaleString is disabled\\")}};Object.prototype.toLocaleString=i.toLocaleString}(),r||function(){if(delete Error.captureStackTrace,O(Error,\\"captureStackTrace\\"))throw Error(\\"Cannot remove Error.captureStackTrace\\");if(delete Error.stackTraceLimit,O(Error,\\"stackTraceLimit\\"))throw Error(\\"Cannot remove Error.stackTraceLimit\\")}(),e||function(){const t={random(){throw TypeError(\\"Math.random() is disabled\\")}};Math.random=t.random}(),n||function(){delete RegExp.prototype.compile;const t=RegExp,o=function(){return Reflect.construct(t,arguments,new.target)},r=R(t,Symbol.species);U(o,Symbol.species,r);const e=x(t.prototype);e.constructor.value=o,U(o.prototype,e),globalThis.RegExp=o}();const s=function(t,o={}){const{freeze:r,getOwnPropertyDescriptors:e,getPrototypeOf:n}=Object,{ownKeys:a}=Reflect;let{fringeSet:i}=o;if(i){if(\\"function\\"!=typeof i.add||\\"function\\"!=typeof i.has)throw new TypeError(\\"options.fringeSet must have add() and has() methods\\");if(t)for(const o of t)i.add(o)}else i=new WeakSet(t);const c=o&&o.naivePrepareObject,{harden:p}={harden(t){const o=new Set,p=new Map,s=new WeakMap;function y(t,r){if(Object(t)!==t)return;const e=typeof t;if(\\"object\\"!==e&&\\"function\\"!==e)throw new TypeError(`Unexpected typeof: ${e}`);i.has(t)||o.has(t)||(o.add(t),s.set(t,r))}function l(t){c&&c(t),r(t);const o=n(t),i=e(t),l=s.get(t)||\\"unknown\\";null===o||p.has(o)||(p.set(o,l),s.set(o,`${l}.__proto__`)),a(i).forEach(t=>{const o=`${l}.${String(t)}`,r=i[t];\\"value\\"in r?y(r.value,`${o}`):(y(r.get,`${o}(get)`),y(r.set,`${o}(set)`))})}return y(t),o.forEach(l),p.forEach((t,r)=>{if(!o.has(r)&&!i.has(r)){let o;try{o=`prototype ${r} of ${t} is not already in the fringeSet`}catch(e){o=\\"a prototype of something is not already in the fringeset (and .toString failed)\\";try{console.log(o),console.log(\\"the prototype:\\",r),console.log(\\"of something:\\",t)}catch(t){}}throw new TypeError(o)}}),o.forEach(i.add,i),t}};return p}();Object.defineProperties(globalThis,{harden:{value:s,configurable:!0,writable:!0,enumerable:!1},Compartment:{value:kt,configurable:!0,writable:!0,enumerable:!1}});const y=l();F(y),function(){try{(0,Object.prototype.__lookupGetter__)(\\"x\\")}catch(t){return}const{defineProperty:t,defineProperties:o,getOwnPropertyDescriptor:r,getPrototypeOf:e,prototype:n}=Object;function a(t){if(null==t)throw new TypeError(\\"can\'t convert undefined or null to object\\");return Object(t)}function i(t){return\\"symbol\\"==typeof t?t:`${t}`}function c(t,o){if(\\"function\\"!=typeof t)throw TypeError(`invalid ${o} usage`);return t}o(n,{__defineGetter__:{value:function(o,r){const e=a(this);t(e,o,{get:c(r,\\"getter\\"),enumerable:!0,configurable:!0})}},__defineSetter__:{value:function(o,r){const e=a(this);t(e,o,{set:c(r,\\"setter\\"),enumerable:!0,configurable:!0})}},__lookupGetter__:{value:function(t){let o,n=a(this);for(t=i(t);n&&!(o=r(n,t));)n=e(n);return o&&o.get}},__lookupSetter__:{value:function(t){let o,n=a(this);for(t=i(t);n&&!(o=r(n,t));)n=e(n);return o&&o.set}}})}();const u=function(t){const o={};function r(t,r,e,n){if(\\"value\\"in n&&n.configurable){const{value:a}=n;o[t]=a,j(r,{[e]:{get:function(){return a},set:function(o){if(r===this)throw new TypeError(`Cannot assign to read only property \'${e}\' of \'${t}\'`);hasOwnProperty.call(this,e)?this[e]=o:j(this,{[e]:{value:o,writable:!0,enumerable:n.enumerable,configurable:n.configurable}})},enumerable:n.enumerable,configurable:n.configurable}})}}function e(t,o,e){const n=k(o,e);n&&r(t,o,e,n)}function n(t,o){const e=N(o);e&&$(e).forEach(n=>r(t,o,n,e[n]))}return function t(o,r,a){for(const i of G(a)){const c=k(r,i);if(!c||c.get||c.set)continue;const p=`${o}.${i}`,s=a[i];if(!0===s)e(p,r,i);else if(\\"*\\"===s)n(p,c.value);else{if(!D(s))throw new TypeError(`Unexpected override enablement plan ${p}`);t(p,c.value,s)}}}(\\"root\\",t,M),o}(y);return s(y,a),s(u,a),!0},Object.defineProperty(t,\\"__esModule\\",{value:!0})}));\\n"')},function(t,e){t.exports={makeDeterministic:function(t){const e=(t,e)=>{if(t===e)return 0;if(void 0===t)return 1;if(void 0===e)return-1;const n=null===t?"null":t.toString(),r=null===e?"null":e.toString();return n<r?-1:n>r?1:0},n=Array.prototype.sort;Array.prototype.sort=function(t=e){const r=new Map;return this.forEach((t,e)=>r.set(t,e)),n.call(this,(e,n)=>{const o=t(e,n);return 0!==o?o:r.get(e)-r.get(n)})},delete String.prototype.localeCompare;const r=Object.keys;Object.keys=function(t){const e=r(t),n=Object.getOwnPropertyNames(t);return e.sort((t,e)=>n.indexOf(t)-n.indexOf(e))},Object.values=function(t){return Object.keys(t).map(e=>t[e])},Object.entries=function(t){return Object.keys(t).map(e=>[e,t[e]])};const o=Reflect.getOwnPropertyDescriptor;Reflect.getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor=function(t,e){const n=o(t,e);return n&&"string"==typeof e&&t instanceof Uint8Array&&(n.configurable=!0),n};const i=Reflect.defineProperty;Reflect.defineProperty=Object.defineProperty=function(t,e,n){return n&&"string"==typeof e&&t instanceof Uint8Array&&n.writable&&n.enumerable&&n.configurable?(Reflect.set(t,e,n.value),t):i(t,e,n)},JSON.stringify=t();const s=Function.prototype.toString;Function.prototype.toString=function t(){if(this===Array.prototype.sort)return"function sort() { [native code ] }";if(this===Object.keys)return"function keys() { [native code ] }";if(this===Object.values)return"function values() { [native code ] }";if(this===Object.entries)return"function entries() { [native code ] }";if(this===JSON.stringify)return"function stringify() { [native code ] }";if(this===t)return"function toString() { [native code ] }";if(this===Object.getOwnPropertyDescriptor)return"function getOwnPropertyDescriptor() { [native code ] }";if(this===Reflect.getOwnPropertyDescriptor)return"function getOwnPropertyDescriptor() { [native code ] }";if(this===Object.defineProperty)return"function defineProperty() { [native code ] }";if(this===Reflect.defineProperty)return"function defineProperty() { [native code ] }";const e=s.call(this),n=e.match(/^([a-zA-Z0-9_$]+)\s*\(/);return n&&"function"!==n[1]?"function "+e:e}},nonDeterministicIntrinsics:["Date","Math","eval","XMLHttpRequest","FileReader","WebSocket","setTimeout","setInterval"]}},function(t,e){t.exports=__webpack_require__(72)},function(t,e,n){const r=n(4),o=n(29),i=n(8),{B:s,ut:c,Y:a,W:h}=n(0),u=n(18);t.exports=function(t,e,f){switch(r.Lt&&r.Gt("Execute","Executing",t,JSON.stringify(e)),t){case"DEPLOY":return function(t,e){const r=n(2),a=n(27);s(t instanceof Array,"DEPLOY data must be an array"),s(t.length%2==0,"Invalid DEPLOY data length");const h=t.length/2,f=[];for(let t=0;t<h;t++)f.push(r.Zt());const l=(new o).gc().bc(t=>{const n=e[t]||f[t-e.length];if(!n)throw new Error("Invalid local jig reference: "+t);return n})._c(t);for(let t=0;t<h;t++){const e=l[2*t+0],n=l[2*t+1];s("string"==typeof e,"DEPLOY src must be a string"),s("object"==typeof n&&!Array.isArray(n)&&n,"DEPLOY props must be an object"),a.Et(e);const[o]=i.Dn(e,n.deps);s("function"==typeof o,"DEPLOY src not supported: "+e),Object.keys(n).forEach(t=>{c(o,t,n[t])});const h=f[t],u=!1,[d]=r.an(h,o,u);r.Dt(h).be(d,u,[],e)}u.Ue(f)}(e,f);case"UPGRADE":return function(t,e){const Code=n(1),r=n(2),a=n(27),h=(new o).gc().bc(t=>e[t])._c(t);s(Array.isArray(h),"UPGRADE data must be an array"),s(3===h.length,"Invalid UPGRADE data length"),s(h[0]instanceof Code,"Must only upgrade code"),s("string"==typeof h[1],"UPGRADE src must be a string"),s("object"==typeof h[2]&&!Array.isArray(h[2])&&h[2],"UPGRADE props must be an object");const[u,f,l]=h;a.Et(f);const[d]=i.Dn(f,l.deps);Object.keys(l).forEach(t=>{c(d,t,l[t])});const[p]=r.an(u,d);r.Wt(u,p,!1,f)}(e,f);case"CALL":return function(t,e){const Code=n(1),Jig=n(5),r=(new o).gc().bc(t=>e[t])._c(t);s(3===r.length,"Invalid CALL data length"),s(r[0]instanceof Code&&(h(r[0],Jig)||"auth"===r[1]||"destroy"===r[1])||r[0]instanceof Jig,"Must only execute CALL on jigs or code"),s("string"==typeof r[1],"CALL method must be a string: "+r[1]),s(Array.isArray(r[2]),"CALL args must be an array"),s(r[0]instanceof Jig||"upgrade"!==r[1],"Cannot execute upgrade() with CALL");const[i,c,u]=r;if("function"!=typeof i[c])throw new Error(`Cannot call ${a(i)}.${c}()`);i[c](...u)}(e,f);case"NEW":return function(t,e){const Code=n(1),Jig=n(5),r=(new o).gc().bc(t=>e[t])._c(t);s(2===r.length,"Invalid NEW data length"),s(r[0]instanceof Code,"Must only execute NEW on code"),s(h(r[0],Jig),"Must only execute NEW on a jig class"),s(Array.isArray(r[1]),"NEW args must be an array");const[i,c]=r;new i(...c)}(e,f);default:throw new Error("Unknown op: "+t)}}},function(t,e){t.exports=__webpack_require__(129)},function(t,e){t.exports=__webpack_require__(130)},function(t,e){t.exports=__webpack_require__(131)},function(t,e,n){t.exports=null},function(t,e,n){const r=n(4),{oe:o}=n(11),{Y:i,yt:s}=n(0),{g:c}=n(7),{TimeoutError:TimeoutError,RequestError:RequestError}=n(10),{zr:a}=n(13),h=n(51),u="Inventory";t.exports=class{constructor(){this.Aa=(t,e)=>this.th(e),this.Hs=[]}activate(t){this.deactivate(),r.Lt&&r.Gt(u,"Activate"),this.eh=t,t.on("update",this.Aa),t.on("publish",this.Aa),t.on("sync",this.Aa),this.nh=null,this.Us=[];const e=async()=>{try{const n=await t.F.Uo().nextOwner();if(this.rh!==e)return;this.nh=o(n),r.Lt&&r.Gt(u,"Owner",n),this.Us&&this.Us.forEach(t=>this.th(t)),this.Us=null}catch(t){if(this.rh!==e)return;r._n&&r.bn(u,"Inventory disabled: "+t),this.Us=null}};this.rh=e,this.oh=e()}deactivate(){this.eh&&(r.Lt&&r.Gt(u,"Deactivate"),this.eh.off("update",this.Aa),this.eh.off("publish",this.Aa),this.eh.off("sync",this.Aa),this.eh=null,this.nh=null,this.Us=null,this.oh=null)}get jigs(){this.ih();const Jig=n(5);return this.Hs.filter(t=>t instanceof Jig)}get code(){this.ih();const Code=n(1);return this.Hs.filter(t=>t instanceof Code)}async sync(){if(r.De&&r.Me(u,"Sync"),this.oh&&await this.oh,this.nh)return this.kt||(this.kt=this.sh().then(()=>{this.kt=null}).catch(t=>{throw this.kt=null,t})),this.kt}async sh(){let t;if(this.eh.client&&this.eh.cache instanceof h){const e=this.nh.script(),n=await a(e);t=await this.eh.cache.unspent(n)}else{const e=this.nh.script();t=(await this.eh.blockchain.utxos(e)).map(t=>`${t.txid}_o${t.vout}`)}const e=c(()=>this.Hs.map(t=>t.location)),o=n(16),i=new s("inventory sync",this.eh.F.timeout),f=new o(this.eh.F,i);for(const n of t){if(e.includes(n))continue;try{if(await this.eh.cache.get("ban://"+n))continue}catch(t){}let t=null;try{t=await f.jn(n)}catch(t){if(t instanceof TimeoutError)throw t;if(t instanceof RequestError)throw t;r.gn&&r.yn(u,`Failed to load ${n}\n\n${t.toString()}`);try{await this.eh.cache.set("ban://"+n,1)}catch(t){}continue}this.th(t)}this.ih()}th(t){!this.nh&&this.Us&&this.Us.push(t);const e=this.Hs.find(e=>this.ah(e,t));e&&c(()=>e.nonce>t.nonce)||(this.Hs=this.Hs.filter(t=>t!==e),this.hh(t)?(!e&&r.De&&r.Me(u,"Add",i(t)),this.Hs.push(t)):e&&r.De&&r.Me(u,"Remove",i(t)))}ah(t,e){if(t===e)return!0;const n=c(()=>t.origin),r=c(()=>e.origin);return!n.startsWith("error://")&&!r.startsWith("error://")&&n===r}hh(t){try{if(c(()=>t.location).startsWith("error://"))return!1;const e=c(()=>t.owner);if(void 0===e)return!0;if(!this.nh)return!1;return o(e).script()===this.nh.script()}catch(t){return!1}}ih(){this.Hs=this.Hs.filter(t=>!!this.hh(t)||(r.De&&r.Me(u,"Remove",i(t)),!1))}}},function(t,e,n){const r=n(6),{PrivateKey:o,Script:i,Transaction:s}=r,{L:c,Y:a,F:h}=n(0),{Hr:u,Kr:f}=n(13);class l{constructor(t,e){try{e=e||h().we().network}catch(t){}const n=e&&c(e);if(void 0!==t&&"string"!=typeof t&&!(t instanceof o))throw new Error("Invalid private key: "+a(t));if(n&&t&&t instanceof o&&t.network.name!==n)throw new Error("Private key network mismatch");try{this.bsvPrivateKey=new o(t,n)}catch(e){throw new Error(`Invalid private key: ${a(t)}\n\n${e}`)}if(t&&this.bsvPrivateKey.toString()!==t.toString())throw new Error("Invalid private key: "+a(t));this.bsvPublicKey=this.bsvPrivateKey.publicKey,this.bsvAddress=this.bsvPublicKey.toAddress(),this.privkey=this.bsvPrivateKey.toString(),this.pubkey=this.bsvPublicKey.toString(),this.address=this.bsvAddress.toString()}async sign(t,e,o){const CommonLock=n(40),Group=n(42),c=new s(t);e.forEach((t,e)=>{t&&(c.inputs[e].output=new s.Output({satoshis:t.satoshis,script:new i(t.script)}))});for(let t=0;t<c.inputs.length;t++){const n=o[t]instanceof CommonLock,s=c.inputs[t].output&&c.inputs[t].output.script.isPublicKeyHashOut()&&c.inputs[t].output.script.toAddress().toString()===this.address;if(n||s){const n=new i(e[t].script);if(n.toAddress().toString()!==this.address)continue;const r=await u(c,t,n,e[t].satoshis,this.bsvPrivateKey),o=i.fromASM(`${r} ${this.pubkey}`);c.inputs[t].setScript(o)}if(o[t]instanceof Group&&o[t].pubkeys.includes(this.pubkey)&&c.inputs[t].script.chunks.length<=o[t].required){const n=c.inputs[t].script.chunks.slice(1).map(t=>t.buf.toString("hex")),s={script:new r.Script(e[t].script),satoshis:e[t].satoshis},a=await d(c,t,s,n,o[t].pubkeys);if(a.includes(this.pubkey))continue;const h=new i(e[t].script),f=await u(c,t,h,e[t].satoshis,this.bsvPrivateKey),l=o[t].pubkeys.map(t=>{const e=a.indexOf(t);return-1!==e?n[e]:t===this.pubkey?f:null}).filter(t=>null!==t),p=i.fromASM("OP_0 "+l.join(" "));c.inputs[t].setScript(p)}}return c.toString("hex")}async nextOwner(){return this.address}}async function d(t,e,n,o,i){const s=r.crypto.Signature.SIGHASH_ALL|r.crypto.Signature.SIGHASH_FORKID,c=new r.crypto.BN(n.satoshis),a=await f(t,s,e,n.script,c),h=i.map(t=>new r.PublicKey(t)),u=o.map(t=>{const e=t.slice(0,t.length-2),n=r.deps.Buffer.from(e,"hex"),o=r.crypto.Signature.fromDER(n);return h.findIndex(t=>r.crypto.ECDSA.verify(a,o,t,"little"))}),l=u.findIndex(t=>-1===t);if(-1!==l)throw new Error("Bad signature at index "+l);return u.map(t=>i[t])}l.uh=d,t.exports=l},function(t,e,n){const r=n(6),{PrivateKey:o,Script:i,Transaction:s}=r,{L:c,Y:a}=n(0),h=n(4),{Hr:u}=n(13),f="LocalPurse";function l(t){switch(typeof t){case"number":if(!Number.isInteger(t))throw new Error("splits must be an integer: "+t);if(t<=0)throw new Error("splits must be at least 1: "+t);return t;case"undefined":return 1;default:throw new Error("Invalid splits: "+t)}}function d(t){switch(typeof t){case"number":if(!Number.isFinite(t))throw new Error("feePerKb must be finite: "+t);if(t<0)throw new Error("feePerKb must be non-negative: "+t);return t;case"undefined":return s.FEE_PER_KB;default:throw new Error("Invalid feePerKb: "+t)}}function p(t,e){try{const r=n(41).util.metadata(t);return e>r.vrun&&e<r.out.length+r.vrun+1}catch(t){return!1}}t.exports=class{constructor(t={}){this.blockchain=function(t){switch(typeof t){case"undefined":throw new Error("blockchain is required");case"object":if(t&&t.network)return t}throw new Error("Invalid blockchain: "+a(t))}(t.blockchain),this.fh=l(t.splits),this.lh=d(t.feePerKb),this.bsvPrivateKey=new o(t.privkey,c(this.blockchain.network)),this.bsvAddress=this.bsvPrivateKey.toAddress(),this.bsvScript=i.fromAddress(this.bsvAddress),this.privkey=this.bsvPrivateKey.toString(),this.address=this.bsvAddress.toString(),this.script=this.bsvScript.toHex()}get splits(){return this.fh}set splits(t){this.fh=l(t)}get feePerKb(){return this.lh}set feePerKb(t){this.lh=d(t)}async pay(t,e){const n=s.DUST_AMOUNT,o=new s(t);o.feePerKb(this.feePerKb);const c=this.feePerKb/1e3;e.forEach((t,e)=>{t&&(o.inputs[e].output=new s.Output({satoshis:t.satoshis,script:new i(t.script)}))});const a=[];o.inputs.forEach((t,e)=>{t.script.toBuffer().length||(a.push(e),t.setScript(r.deps.Buffer.alloc(500)))});const l=0===o.outputs.length?n:0,d=o._getInputAmount(),w=o._getOutputAmount();if(d-w-l>=o.toBuffer().length*c){h.Lt&&h.Gt(f,"Transaction already paid for. Skipping.");const t=Math.ceil((34+o.toBuffer().length)*c);return d-w>n+t&&(o._fee=t,o.change(this.bsvAddress)),a.forEach(t=>o.inputs[t].setScript("")),o.toString("hex")}let y=await this.blockchain.utxos(this.script);if(y=function(t){for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t}(y),!y.length){const t=`Hint: Have you funded the purse address ${this.address}?`;throw new Error("Not enough funds\n\n"+t)}const b=o.inputs.length;let g=o.toBuffer().length*c,_=g+w-d,m=0,E=1;g+=34*c,_+=34*c,_+=n;for(const t of y){if(p(await this.blockchain.fetch(t.txid),t.vout))continue;o.from(t),_-=t.satoshis,m++,g+=149*c,_+=149*c;const e=this.splits-y.length+m-E;for(let t=0;t<e;t++)g+=34*c,_+=34*c,_+=n,E++;if(_<0)break}if(g=Math.ceil(g),_=Math.ceil(_),_>0)throw new Error(`Not enough funds\n\nRequired ${_} more satoshis`);const P=E*n-_,$=Math.max(n,Math.floor(P/E));for(let t=0;t<E;t++)t===E-1?(o._fee=g,o.change(this.bsvAddress)):o.to(this.bsvAddress,$);for(let t=b;t<o.inputs.length;t++){const e=o.inputs[t].output,n=await u(o,t,e.script,e.satoshis,this.bsvPrivateKey),r=this.bsvPrivateKey.publicKey.toString(),s=i.fromASM(`${n} ${r}`);o.inputs[t].setScript(s)}const O=o._getInputAmount()-d-(o._getOutputAmount()-w);return h.Lt&&h.Gt(f,"Paid about",O,"satoshis"),a.forEach(t=>o.inputs[t].setScript("")),o.toString("hex")}async balance(){return(await this.utxos()).reduce((t,e)=>t+e.satoshis,0)}async utxos(){const t=await this.blockchain.utxos(this.script),e=await Promise.all(t.map(t=>this.blockchain.fetch(t.txid)));return t.filter((t,n)=>!p(e[n],t.vout))}}},function(t,e,n){const r=n(6),{Cache:o}=n(26),i=n(31),s=n(30),{xt:c,Y:a}=n(0),{zr:h,Xr:u}=n(13),f=n(38),{RequestError:RequestError}=n(10),l=n(20),d=n(4);async function p(t,e,n,o,i){const s=async e=>{const n={rawtx:e.rawtx,time:1e3*e.time};if("string"!=typeof n.rawtx||!n.rawtx.length)throw new Error(`Invalid rawtx fetched for ${n.txid}: ${n.rawtx}`);if("number"!=typeof n.time||n.time<0)throw new Error(`Invalid time fetched for ${t}: ${n.time}`);const i=new r.Transaction(n.rawtx),s=[];return s.push(o.set("tx://"+t,n.rawtx)),s.push(o.set("time://"+t,n.time)),i.inputs.forEach(e=>{const n=`${e.prevTxId.toString("hex")}_o${e.outputIndex}`;s.push(o.set("spend://"+n,t))}),await Promise.all(s),n};try{const r=`https://api.mattercloud.net/api/v3/${e}/tx/${t}${w(i)}`,o={cache:1e3,response:s};return await n(r,o)}catch(t){throw t instanceof RequestError&&404===t.status?new Error("No such mempool or blockchain transaction"):t}}function w(t){return t?"?api_key="+t:""}t.exports=class{constructor(t={}){this.api="mattercloud",this.apiKey=function(t){if(void 0===t||"string"==typeof t)return t;throw new Error("Invalid API key: "+t)}(t.apiKey),this.network=function(t){if(void 0===t)return"main";if("string"!=typeof t)throw new Error("Invalid network: "+t);if("main"!==t)throw new Error(`MatterCloud API does not support the "${t}" network`);return t}(t.network),this.cache=function(t){if(t instanceof o)return t;if(void 0===t)return c()?new s:new i;throw new Error("Unsupported cache: "+t)}(t.cache),this.request=l}async broadcast(t){const e=new r.Transaction(t);if(0===e.inputs.length)throw new Error("tx has no inputs");if(0===e.outputs.length)throw new Error("tx has no outputs");if(!0!==e.verify())throw new Error(e.verify());const n="https://merchantapi.mattercloud.net/mapi/tx"+w(this.apiKey),o={method:"POST",body:{rawtx:t}},i=await this.request(n,o),s=JSON.parse(i.payload),c=s.txid||e.hash;if("failure"===s.returnResult&&"ERROR: Transaction already in the mempool"!==s.resultDescription)throw d.Lt&&d.Gt("MatterCloud",JSON.stringify(s,0,3)),new Error(s.resultDescription);const a=[];if(void 0===await this.cache.get("time://"+c)){const t=this.cache.set("time://"+c,Date.now());t instanceof Promise&&t.catch(t=>{}),a.push(t)}for(const t of e.inputs){const e=`${t.prevTxId.toString("hex")}_o${t.outputIndex}`;a.push(this.cache.set("spend://"+e,c))}return a.push(this.cache.set("tx://"+c,t)),a.push(f.pa(this.cache,e,c)),await Promise.all(a),c}async fetch(t){const e=await this.cache.get("tx://"+t);return e||(await p(t,this.network,this.request,this.cache,this.apiKey)).rawtx}async utxos(t){t=function(t){if("string"==typeof t)try{return r.Script.fromAddress(t).toHex()}catch(e){return new r.Script(t).toHex()}else{if(!(t instanceof r.Address)){if(t instanceof r.Script)return t.toHex();throw new Error("Invalid script: "+a(t))}t=r.Script.fromAddress(t).toHex()}}(t);const e=await h(t),n=await async function(t,e,n,r,o,i){const s=`https://api.mattercloud.net/api/v3/${n}/scripthash/${t}/utxo${w(i)}`,c=(await r(s,{cache:1e3})).map(t=>Object.assign({},t,{script:e}));if(!Array.isArray(c))throw new Error("Received invalid utxos: "+c);return u(c)}(e,t,this.network,this.request,this.cache,this.apiKey);return await f.wa(this.cache,n,t),n}async time(t){const e=await this.cache.get("time://"+t);return e||(await p(t,this.network,this.request,this.cache,this.apiKey)).time}async spends(t,e){return await this.cache.get(`spend://${t}_o${e}`)||await async function(t,e,n,r,o,i){const c=`${t}_o${e}`,a=`https://txdb.mattercloud.io/api/v1/spends/${c}${w(i)}`,h={cache:1e3,response:async n=>{const r=n.result[c];return await o.set(`spend://${t}_o${e}`,r),r}};return await r(a,h)}(t,e,this.network,this.request,this.cache,this.apiKey)}}},function(t,e,n){const r=n(6),{Address:o,Script:i,Transaction:s}=r,c=n(4),{zr:a}=n(13),{Y:h,wt:u}=n(0),{sha256:sha256}=r.crypto.Hash,f="Mockchain";t.exports=class{constructor(){this.network="mock",this.mempoolChainLimit=1e3,this.dh=new Map,this.ph=new Map,this.wh=new Map,this.yh=new Map,this.bh=new Map,this.gh=new Map}async broadcast(t){const e=new s(t),n=e.hash;if(this.dh.has(n))return c.gn&&c.yn(f,"Already have transaction",n),n;if(e.inputs.forEach((t,e)=>{const n=`${t.prevTxId.toString("hex")}_o${t.outputIndex}`,r=this.yh.get(n);if(!r){const t=this.wh.get(n),e=this.gh.has(t);throw new Error(e?"txn-mempool-conflict":"Missing inputs")}t.output=new s.Output(r)}),0===e.inputs.length)throw new Error("tx has no inputs");if(0===e.outputs.length)throw new Error("tx has no outputs");if(e.getFee()<e.toBuffer().length*s.FEE_PER_KB/1e3)throw new Error("insufficient priority");if(!0!==e.verify())throw new Error(e.verify());if(!0!==e.isFullySigned())throw new Error("mandatory-script-verify-flag-failed");for(let t=0;t<e.inputs.length;t++)if(!e.isValidSignature({inputIndex:t}))throw new Error("mandatory-script-verify-flag-failed");const o=e.inputs.map(t=>t.prevTxId.toString("hex")).map(t=>this.gh.get(t)+1).reduce((t,e)=>Math.max(t,e),0);if(o>u(this.mempoolChainLimit,"mempoolChainLimit"))throw new Error("too-long-mempool-chain\n\nHint: Use run.blockchain.block() to produce blocks on the mockchain.");return this.dh.set(n,t),this.ph.set(n,Date.now()),this.gh.set(n,o),e.inputs.forEach((t,e)=>{const o=t.prevTxId.toString("hex"),i=`${o}_o${t.outputIndex}`,s=this.dh.get(o),c=new r.Transaction(s).outputs[t.outputIndex],a=sha256(c.script.toBuffer()).reverse().toString("hex");this.yh.delete(i),this.bh.get(a).delete(i),this.wh.set(i,n)}),e.outputs.forEach((t,e)=>{const r=`${n}_o${e}`;this.wh.set(r,null);const o={txid:n,vout:e,script:t.script.toHex(),satoshis:t.satoshis};this.yh.set(r,o);const i=sha256(t.script.toBuffer()).reverse().toString("hex"),s=this.bh.get(i)||new Set;s.add(r),this.bh.set(i,s)}),n}async fetch(t){const e=this.dh.get(t);if(!e)throw new Error("No such mempool or blockchain transaction: "+t);return e}async utxos(t){if("string"==typeof t)try{t=i.fromAddress(t)}catch(e){t=new i(t)}else if(t instanceof o)t=i.fromAddress(t);else if(!(t instanceof i))throw new Error("Invalid script: "+h(t));const e=await a(t),n=this.bh.get(e);return n?Array.from(n).map(t=>this.yh.get(t)):[]}async spends(t,e){const n=`${t}_o${e}`;return this.wh.get(n)||null}async time(t){const e=this.ph.get(t);if(!e)throw new Error("No such mempool or blockchain transaction: "+t);return e}fund(t,e){c.De&&c.Me(f,"Fund",t.toString(),"with",e);const n=Math.random().toString(),r=(new s).addData(n).to(new o(t,"testnet"),e),a=r.hash,h=r.toString("hex");this.dh.set(a,h),this.ph.set(a,Date.now()),this.gh.set(a,0);const u={txid:a,vout:1,script:r.outputs[1].script.toHex(),satoshis:r.outputs[1].satoshis},l=a+"_o1";this.yh.set(l,u);const d=i.fromAddress(t),p=sha256(d.toBuffer()).reverse().toString("hex"),w=this.bh.get(p)||new Set;return w.add(l),this.bh.set(p,w),a}block(){c.Lt&&c.Gt(f,"Block"),this.gh.clear()}}},function(t,e,n){const r=n(6),o=n(20),{Y:i}=n(0);t.exports=class{constructor(t){let e=null;try{e=new r.HDPublicKey(t)}catch(e){throw new Error("Invalid API key: "+i(t))}this.network="mainnet"===e.network.name||"livenet"===e.network.name?"main":"test",this.apiKey=t,this.timeout=5e3,this.request=o}async pay(t,e){const n=`https://api.run.network/v1/${this.network}/pay`,r={method:"POST",body:{rawtx:t,parents:e,key:this.apiKey},timeout:this.timeout};return(await this.request(n,r)).rawtx}}},function(t,e,n){const r=n(6),{Cache:o}=n(26),i=n(31),s=n(30),{xt:c,Y:a}=n(0),{zr:h,Xr:u}=n(13),f=n(38),l=n(20),d=n(37);async function w(t,e,n,o){const i=`https://api.run.network/v1/${e}/tx/${t}`,s={cache:1e3,response:async e=>{const n={rawtx:e.hex,time:1e3*e.time||Date.now(),spends:e.vout.map(t=>t.spentTxId)};if("string"!=typeof n.rawtx||!n.rawtx.length)throw new Error(`Invalid rawtx fetched for ${n.txid}: ${n.rawtx}`);if("number"!=typeof n.time||n.time<0)throw new Error(`Invalid time fetched for ${t}: ${n.time}`);const i=new r.Transaction(n.rawtx),s=[];return s.push(o.set("tx://"+t,n.rawtx)),s.push(o.set("time://"+t,n.time)),n.spends.forEach((e,n)=>{e&&s.push(o.set(`spend://${t}_o${n}`,e))}),i.inputs.forEach(e=>{const n=`${e.prevTxId.toString("hex")}_o${e.outputIndex}`;s.push(o.set("spend://"+n,t))}),await Promise.all(s),n}};return await n(i,s)}t.exports=class{constructor(t={}){this.api="run",this.network=function(t){if(void 0===t)return"main";if("string"!=typeof t)throw new Error("Invalid network: "+t);if("main"!==t&&"test"!==t)throw new Error(`RunConnect API does not support the "${t}" network`);return t}(t.network),this.cache=function(t){if(t instanceof o)return t;if(void 0===t)return c()?new s:new i;throw new Error("Unsupported cache: "+t)}(t.cache),this.request=l}async broadcast(t){const e=new r.Transaction(t);if(0===e.inputs.length)throw new Error("tx has no inputs");if(0===e.outputs.length)throw new Error("tx has no outputs");if(!0!==e.verify())throw new Error(e.verify());const n=`https://api.run.network/v1/${this.network}/tx`,o={method:"POST",body:{rawtx:t}},i=await this.request(n,o),s=[];if(void 0===await this.cache.get("time://"+i)){const t=this.cache.set("time://"+i,Date.now());t instanceof Promise&&t.catch(t=>{}),s.push(t)}for(const t of e.inputs){const e=`${t.prevTxId.toString("hex")}_o${t.outputIndex}`;s.push(this.cache.set("spend://"+e,i))}return s.push(this.cache.set("tx://"+i,t)),s.push(f.pa(this.cache,e,i)),await Promise.all(s),i}async fetch(t){const e=await this.cache.get("tx://"+t);return e||(await w(t,this.network,this.request,this.cache)).rawtx}async utxos(t){t=function(t){if("string"==typeof t)try{return r.Script.fromAddress(t).toHex()}catch(e){return new r.Script(t).toHex()}else{if(!(t instanceof r.Address)){if(t instanceof r.Script)return t.toHex();throw new Error("Invalid script: "+a(t))}t=r.Script.fromAddress(t).toHex()}}(t);const e=await h(t),n=await async function(t,e,n,r){const o=`https://api.run.network/v1/${e}/utxos/${t}`,i=await n(o,{cache:1e3});if(!Array.isArray(i))throw new Error("Received invalid utxos: "+i);return u(i)}(e,this.network,this.request,this.cache);return await f.wa(this.cache,n,t),n}async time(t){const e=await this.cache.get("time://"+t);return e||(await w(t,this.network,this.request,this.cache)).time}async spends(t,e){const n=await this.cache.get(`spend://${t}_o${e}`);return n||(await w(t,this.network,this.request,this.cache)).spends[e]}async set(t,e){await this.cache.set(t,e)}async get(t){const e=await this.cache.get(t);if(e)return e;const[n,r]=t.split("://");return"jig"!==n&&"berry"!==n||"main"!==this.network?void 0:(await async function(t,e,n,r){const o=async t=>(await Promise.all(Object.entries(t).map(([t,e])=>r.set(t,e))),t),i=await r.get("config://code-filter")||d.create(),s=d.toBase64(i);try{const r=`https://api.run.network/v1/${e}/state/${encodeURIComponent(t)}?all=1&filter=${s}`,i={cache:1e3,response:o};return await n(r,i)}catch(t){const e="object"==typeof t.reason?t.reason:{};if(await Promise.all(Object.entries(t.reason).map(([t,e])=>r.set(t,e))),404===t.status)return e;throw t}}(r,this.network,this.request,this.cache))[t]}}},function(t,e,n){const{Y:r}=n(0),{oe:o}=n(11),i=n(6),{Script:s}=i,c=n(4);t.exports=class{constructor(t){this.owner=t,this.script=s.fromHex(o(this.owner).script())}async sign(t,e,n){return c.gn&&c.yn("Viewer","Viewer cannot sign ",r(this.owner)),t}nextOwner(){return this.owner}}},function(t,e,n){const r=n(6),{Cache:o}=n(26),i=n(31),s=n(30),{xt:c,Y:a}=n(0),{zr:h,Xr:u}=n(13),f=n(38),l=n(20),d=n(4),{RequestError:RequestError,NotImplementedError:NotImplementedError}=n(10),p="WhatsOnChain";async function w(t,e,n,o,i){const s=async e=>{if("string"!=typeof e||!e.length)throw new Error(`Invalid rawtx fetched for ${t}: ${e}`);const n=new r.Transaction(e),i=[];return i.push(o.set("tx://"+t,e)),n.inputs.forEach(e=>{const n=`${e.prevTxId.toString("hex")}_o${e.outputIndex}`;i.push(o.set("spend://"+n,t))}),await Promise.all(i),e},c=async e=>{const n=1e3*e.time||Date.now();if("number"!=typeof n||e.time<0)throw new Error(`Invalid time fetched for ${t}: ${e.time}`);return await o.set("time://"+t,n),n};try{const r=`https://api.whatsonchain.com/v1/bsv/${e}/tx/${t}/hex`,o=`https://api.whatsonchain.com/v1/bsv/${e}/tx/hash/${t}`,[a,h]=await Promise.all([n(r,{headers:y(i),cache:1e3,response:s}),n(o,{headers:y(i),cache:1e3,response:c})]);return{rawtx:a,time:h}}catch(t){throw t instanceof RequestError&&(404===t.status||500===t.status)?new Error("No such mempool or blockchain transaction"):t}}function y(t){return t?{"woc-api-key":t}:{}}t.exports=class{constructor(t={}){this.api="whatsonchain",this.apiKey=function(t){if(void 0===t||"string"==typeof t)return t;throw new Error("Invalid API key: "+t)}(t.apiKey),this.network=function(t){if(void 0===t)return"main";if("string"!=typeof t)throw new Error("Invalid network: "+t);if("main"!==t&&"test"!==t&&"stn"!==t)throw new Error(`WhatsOnChain API does not support the "${t}" network`);return t}(t.network),this.cache=function(t){if(t instanceof o)return t;if(void 0===t)return c()?new s:new i;throw new Error("Unsupported cache: "+t)}(t.cache),this.request=l}async broadcast(t){const e=new r.Transaction(t);if(0===e.inputs.length)throw new Error("tx has no inputs");if(0===e.outputs.length)throw new Error("tx has no outputs");if(!0!==e.verify())throw new Error(e.verify());const n=`https://api.whatsonchain.com/v1/bsv/${this.network}/tx/raw`,o={method:"POST",body:{txhex:t},headers:y(this.apiKey)},i=await this.request(n,o),s=[];if(void 0===await this.cache.get("time://"+i)){const t=this.cache.set("time://"+i,Date.now());t instanceof Promise&&t.catch(t=>{}),s.push(t)}for(const t of e.inputs){const e=`${t.prevTxId.toString("hex")}_o${t.outputIndex}`;s.push(this.cache.set("spend://"+e,i))}return s.push(this.cache.set("tx://"+i,t)),s.push(f.pa(this.cache,e,i)),await Promise.all(s),i}async fetch(t){const e=await this.cache.get("tx://"+t);return e||(await w(t,this.network,this.request,this.cache,this.apiKey)).rawtx}async utxos(t){if("stn"===this.network)return d.gn&&d.yn(p,"Utxos are not available on STN"),[];t=function(t){if("string"==typeof t)try{return r.Script.fromAddress(t).toHex()}catch(e){return new r.Script(t).toHex()}else{if(!(t instanceof r.Address)){if(t instanceof r.Script)return t.toHex();throw new Error("Invalid script: "+a(t))}t=r.Script.fromAddress(t).toHex()}}(t);const e=await h(t),n=await async function(t,e,n,r,o,i){const s=`https://api.whatsonchain.com/v1/bsv/${n}/script/${t}/unspent`,c=(await r(s,{headers:y(i),cache:1e3})).map(t=>({txid:t.tx_hash,vout:t.tx_pos,satoshis:t.value,script:e}));if(!Array.isArray(c))throw new Error("Received invalid utxos: "+c);return u(c)}(e,t,this.network,this.request,this.cache,this.apiKey);return await f.wa(this.cache,n,t),n}async time(t){const e=await this.cache.get("time://"+t);return e||(await w(t,this.network,this.request,this.cache,this.apiKey)).time}async spends(t,e){throw d.Lt&&d.Gt(p,"Spends",t,e),new NotImplementedError("WhatsOnChain API does not support spends")}}}])},function(module,exports){module.exports=require("http")},function(module,exports){module.exports=require("https")},function(module,exports){module.exports=require("zlib")},function(module){module.exports=JSON.parse('{"name":"@runonbitcoin/deploy","version":"1.0.12","description":"Tool to deploy code and set presets","repository":"git://github.com/runonbitcoin/deploy.git","main":"lib/deploy.js","files":["dist/deploy"],"bin":{"deploy":"dist/deploy"},"scripts":{"lint":"standard --fix","test":"npm run build && mocha","build":"webpack && mv dist/deploy.js dist/deploy && chmod +x dist/deploy","version":"npm run build && standard && npm run test","bump":"npm version patch && git push --follow-tags && npm publish"},"mocha":{"timeout":30000},"dependencies":{"@runonbitcoin/run":"^0.6.2","commander":"^5.1.0","dotenv":"^8.2.0","glob":"^7.1.6","qrcode-terminal":"^0.12.0","yesno":"^0.3.1"},"devDependencies":{"chai":"^4.2.0","mocha":"^7.1.2","rimraf":"^3.0.2","standard":"^14.3.3","terser-webpack-plugin":"^2.3.6","webpack":"^4.43.0","webpack-cli":"^3.3.11"}}')}]);